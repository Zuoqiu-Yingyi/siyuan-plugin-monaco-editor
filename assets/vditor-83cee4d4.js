import{c as pi,g as Zn,i as ba,S as wa,a as Ea,s as ka,e as xa,b as Pn,d as Sa,n as Fr,f as Ta,h as Aa,o as Ca,u as La,k as _a,v as Ma,l as Oa,B as Na,p as Yn,q as Ha,L as Da,r as Pa,j as Ia,F as Ra}from"../chunks/slave-7a77321f.js";function Ba(o,a){return o.startsWith(a)?o.slice(a.length):o}function ja(o,a){return o.endsWith(a)?o.slice(0,-a.length):o}var mi={exports:{}};(function(o,a){(function(l,y){o.exports=y()})(pi,()=>(()=>{var l={471:x=>{var h=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},v=-1;h.Diff=function(g,p){return[g,p]},h.prototype.diff_main=function(g,p,m,A){A===void 0&&(A=this.Diff_Timeout<=0?Number.MAX_VALUE:new Date().getTime()+1e3*this.Diff_Timeout);var f=A;if(g==null||p==null)throw new Error("Null input. (diff_main)");if(g==p)return g?[new h.Diff(0,g)]:[];m===void 0&&(m=!0);var E=m,T=this.diff_commonPrefix(g,p),N=g.substring(0,T);g=g.substring(T),p=p.substring(T),T=this.diff_commonSuffix(g,p);var R=g.substring(g.length-T);g=g.substring(0,g.length-T),p=p.substring(0,p.length-T);var P=this.diff_compute_(g,p,E,f);return N&&P.unshift(new h.Diff(0,N)),R&&P.push(new h.Diff(0,R)),this.diff_cleanupMerge(P),P},h.prototype.diff_compute_=function(g,p,m,A){var f;if(!g)return[new h.Diff(1,p)];if(!p)return[new h.Diff(v,g)];var E=g.length>p.length?g:p,T=g.length>p.length?p:g,N=E.indexOf(T);if(N!=-1)return f=[new h.Diff(1,E.substring(0,N)),new h.Diff(0,T),new h.Diff(1,E.substring(N+T.length))],g.length>p.length&&(f[0][0]=f[2][0]=v),f;if(T.length==1)return[new h.Diff(v,g),new h.Diff(1,p)];var R=this.diff_halfMatch_(g,p);if(R){var P=R[0],U=R[1],D=R[2],I=R[3],S=R[4],Z=this.diff_main(P,D,m,A),W=this.diff_main(U,I,m,A);return Z.concat([new h.Diff(0,S)],W)}return m&&g.length>100&&p.length>100?this.diff_lineMode_(g,p,A):this.diff_bisect_(g,p,A)},h.prototype.diff_lineMode_=function(g,p,m){var A=this.diff_linesToChars_(g,p);g=A.chars1,p=A.chars2;var f=A.lineArray,E=this.diff_main(g,p,!1,m);this.diff_charsToLines_(E,f),this.diff_cleanupSemantic(E),E.push(new h.Diff(0,""));for(var T=0,N=0,R=0,P="",U="";T<E.length;){switch(E[T][0]){case 1:R++,U+=E[T][1];break;case v:N++,P+=E[T][1];break;case 0:if(N>=1&&R>=1){E.splice(T-N-R,N+R),T=T-N-R;for(var D=this.diff_main(P,U,!1,m),I=D.length-1;I>=0;I--)E.splice(T,0,D[I]);T+=D.length}R=0,N=0,P="",U=""}T++}return E.pop(),E},h.prototype.diff_bisect_=function(g,p,m){for(var A=g.length,f=p.length,E=Math.ceil((A+f)/2),T=E,N=2*E,R=new Array(N),P=new Array(N),U=0;U<N;U++)R[U]=-1,P[U]=-1;R[T+1]=0,P[T+1]=0;for(var D=A-f,I=D%2!=0,S=0,Z=0,W=0,le=0,de=0;de<E&&!(new Date().getTime()>m);de++){for(var be=-de+S;be<=de-Z;be+=2){for(var we=T+be,De=(Fe=be==-de||be!=de&&R[we-1]<R[we+1]?R[we+1]:R[we-1]+1)-be;Fe<A&&De<f&&g.charAt(Fe)==p.charAt(De);)Fe++,De++;if(R[we]=Fe,Fe>A)Z+=2;else if(De>f)S+=2;else if(I&&(Ne=T+D-be)>=0&&Ne<N&&P[Ne]!=-1&&Fe>=(xe=A-P[Ne]))return this.diff_bisectSplit_(g,p,Fe,De,m)}for(var Te=-de+W;Te<=de-le;Te+=2){for(var xe,Ne=T+Te,Ue=(xe=Te==-de||Te!=de&&P[Ne-1]<P[Ne+1]?P[Ne+1]:P[Ne-1]+1)-Te;xe<A&&Ue<f&&g.charAt(A-xe-1)==p.charAt(f-Ue-1);)xe++,Ue++;if(P[Ne]=xe,xe>A)le+=2;else if(Ue>f)W+=2;else if(!I&&(we=T+D-Te)>=0&&we<N&&R[we]!=-1){var Fe;if(De=T+(Fe=R[we])-we,Fe>=(xe=A-xe))return this.diff_bisectSplit_(g,p,Fe,De,m)}}}return[new h.Diff(v,g),new h.Diff(1,p)]},h.prototype.diff_bisectSplit_=function(g,p,m,A,f){var E=g.substring(0,m),T=p.substring(0,A),N=g.substring(m),R=p.substring(A),P=this.diff_main(E,T,!1,f),U=this.diff_main(N,R,!1,f);return P.concat(U)},h.prototype.diff_linesToChars_=function(g,p){var m=[],A={};function f(N){for(var R="",P=0,U=-1,D=m.length;U<N.length-1;){(U=N.indexOf(`
`,P))==-1&&(U=N.length-1);var I=N.substring(P,U+1);(A.hasOwnProperty?A.hasOwnProperty(I):A[I]!==void 0)?R+=String.fromCharCode(A[I]):(D==E&&(I=N.substring(P),U=N.length),R+=String.fromCharCode(D),A[I]=D,m[D++]=I),P=U+1}return R}m[0]="";var E=4e4,T=f(g);return E=65535,{chars1:T,chars2:f(p),lineArray:m}},h.prototype.diff_charsToLines_=function(g,p){for(var m=0;m<g.length;m++){for(var A=g[m][1],f=[],E=0;E<A.length;E++)f[E]=p[A.charCodeAt(E)];g[m][1]=f.join("")}},h.prototype.diff_commonPrefix=function(g,p){if(!g||!p||g.charAt(0)!=p.charAt(0))return 0;for(var m=0,A=Math.min(g.length,p.length),f=A,E=0;m<f;)g.substring(E,f)==p.substring(E,f)?E=m=f:A=f,f=Math.floor((A-m)/2+m);return f},h.prototype.diff_commonSuffix=function(g,p){if(!g||!p||g.charAt(g.length-1)!=p.charAt(p.length-1))return 0;for(var m=0,A=Math.min(g.length,p.length),f=A,E=0;m<f;)g.substring(g.length-f,g.length-E)==p.substring(p.length-f,p.length-E)?E=m=f:A=f,f=Math.floor((A-m)/2+m);return f},h.prototype.diff_commonOverlap_=function(g,p){var m=g.length,A=p.length;if(m==0||A==0)return 0;m>A?g=g.substring(m-A):m<A&&(p=p.substring(0,m));var f=Math.min(m,A);if(g==p)return f;for(var E=0,T=1;;){var N=g.substring(f-T),R=p.indexOf(N);if(R==-1)return E;T+=R,R!=0&&g.substring(f-T)!=p.substring(0,T)||(E=T,T++)}},h.prototype.diff_halfMatch_=function(g,p){if(this.Diff_Timeout<=0)return null;var m=g.length>p.length?g:p,A=g.length>p.length?p:g;if(m.length<4||2*A.length<m.length)return null;var f=this;function E(S,Z,W){for(var le,de,be,we,De=S.substring(W,W+Math.floor(S.length/4)),Te=-1,xe="";(Te=Z.indexOf(De,Te+1))!=-1;){var Ne=f.diff_commonPrefix(S.substring(W),Z.substring(Te)),Ue=f.diff_commonSuffix(S.substring(0,W),Z.substring(0,Te));xe.length<Ue+Ne&&(xe=Z.substring(Te-Ue,Te)+Z.substring(Te,Te+Ne),le=S.substring(0,W-Ue),de=S.substring(W+Ne),be=Z.substring(0,Te-Ue),we=Z.substring(Te+Ne))}return 2*xe.length>=S.length?[le,de,be,we,xe]:null}var T,N,R,P,U,D=E(m,A,Math.ceil(m.length/4)),I=E(m,A,Math.ceil(m.length/2));return D||I?(T=I?D&&D[4].length>I[4].length?D:I:D,g.length>p.length?(N=T[0],R=T[1],P=T[2],U=T[3]):(P=T[0],U=T[1],N=T[2],R=T[3]),[N,R,P,U,T[4]]):null},h.prototype.diff_cleanupSemantic=function(g){for(var p=!1,m=[],A=0,f=null,E=0,T=0,N=0,R=0,P=0;E<g.length;)g[E][0]==0?(m[A++]=E,T=R,N=P,R=0,P=0,f=g[E][1]):(g[E][0]==1?R+=g[E][1].length:P+=g[E][1].length,f&&f.length<=Math.max(T,N)&&f.length<=Math.max(R,P)&&(g.splice(m[A-1],0,new h.Diff(v,f)),g[m[A-1]+1][0]=1,A--,E=--A>0?m[A-1]:-1,T=0,N=0,R=0,P=0,f=null,p=!0)),E++;for(p&&this.diff_cleanupMerge(g),this.diff_cleanupSemanticLossless(g),E=1;E<g.length;){if(g[E-1][0]==v&&g[E][0]==1){var U=g[E-1][1],D=g[E][1],I=this.diff_commonOverlap_(U,D),S=this.diff_commonOverlap_(D,U);I>=S?(I>=U.length/2||I>=D.length/2)&&(g.splice(E,0,new h.Diff(0,D.substring(0,I))),g[E-1][1]=U.substring(0,U.length-I),g[E+1][1]=D.substring(I),E++):(S>=U.length/2||S>=D.length/2)&&(g.splice(E,0,new h.Diff(0,U.substring(0,S))),g[E-1][0]=1,g[E-1][1]=D.substring(0,D.length-S),g[E+1][0]=v,g[E+1][1]=U.substring(S),E++),E++}E++}},h.prototype.diff_cleanupSemanticLossless=function(g){function p(S,Z){if(!S||!Z)return 6;var W=S.charAt(S.length-1),le=Z.charAt(0),de=W.match(h.nonAlphaNumericRegex_),be=le.match(h.nonAlphaNumericRegex_),we=de&&W.match(h.whitespaceRegex_),De=be&&le.match(h.whitespaceRegex_),Te=we&&W.match(h.linebreakRegex_),xe=De&&le.match(h.linebreakRegex_),Ne=Te&&S.match(h.blanklineEndRegex_),Ue=xe&&Z.match(h.blanklineStartRegex_);return Ne||Ue?5:Te||xe?4:de&&!we&&De?3:we||De?2:de||be?1:0}for(var m=1;m<g.length-1;){if(g[m-1][0]==0&&g[m+1][0]==0){var A=g[m-1][1],f=g[m][1],E=g[m+1][1],T=this.diff_commonSuffix(A,f);if(T){var N=f.substring(f.length-T);A=A.substring(0,A.length-T),f=N+f.substring(0,f.length-T),E=N+E}for(var R=A,P=f,U=E,D=p(A,f)+p(f,E);f.charAt(0)===E.charAt(0);){A+=f.charAt(0),f=f.substring(1)+E.charAt(0),E=E.substring(1);var I=p(A,f)+p(f,E);I>=D&&(D=I,R=A,P=f,U=E)}g[m-1][1]!=R&&(R?g[m-1][1]=R:(g.splice(m-1,1),m--),g[m][1]=P,U?g[m+1][1]=U:(g.splice(m+1,1),m--))}m++}},h.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,h.whitespaceRegex_=/\s/,h.linebreakRegex_=/[\r\n]/,h.blanklineEndRegex_=/\n\r?\n$/,h.blanklineStartRegex_=/^\r?\n\r?\n/,h.prototype.diff_cleanupEfficiency=function(g){for(var p=!1,m=[],A=0,f=null,E=0,T=!1,N=!1,R=!1,P=!1;E<g.length;)g[E][0]==0?(g[E][1].length<this.Diff_EditCost&&(R||P)?(m[A++]=E,T=R,N=P,f=g[E][1]):(A=0,f=null),R=P=!1):(g[E][0]==v?P=!0:R=!0,f&&(T&&N&&R&&P||f.length<this.Diff_EditCost/2&&T+N+R+P==3)&&(g.splice(m[A-1],0,new h.Diff(v,f)),g[m[A-1]+1][0]=1,A--,f=null,T&&N?(R=P=!0,A=0):(E=--A>0?m[A-1]:-1,R=P=!1),p=!0)),E++;p&&this.diff_cleanupMerge(g)},h.prototype.diff_cleanupMerge=function(g){g.push(new h.Diff(0,""));for(var p,m=0,A=0,f=0,E="",T="";m<g.length;)switch(g[m][0]){case 1:f++,T+=g[m][1],m++;break;case v:A++,E+=g[m][1],m++;break;case 0:A+f>1?(A!==0&&f!==0&&((p=this.diff_commonPrefix(T,E))!==0&&(m-A-f>0&&g[m-A-f-1][0]==0?g[m-A-f-1][1]+=T.substring(0,p):(g.splice(0,0,new h.Diff(0,T.substring(0,p))),m++),T=T.substring(p),E=E.substring(p)),(p=this.diff_commonSuffix(T,E))!==0&&(g[m][1]=T.substring(T.length-p)+g[m][1],T=T.substring(0,T.length-p),E=E.substring(0,E.length-p))),m-=A+f,g.splice(m,A+f),E.length&&(g.splice(m,0,new h.Diff(v,E)),m++),T.length&&(g.splice(m,0,new h.Diff(1,T)),m++),m++):m!==0&&g[m-1][0]==0?(g[m-1][1]+=g[m][1],g.splice(m,1)):m++,f=0,A=0,E="",T=""}g[g.length-1][1]===""&&g.pop();var N=!1;for(m=1;m<g.length-1;)g[m-1][0]==0&&g[m+1][0]==0&&(g[m][1].substring(g[m][1].length-g[m-1][1].length)==g[m-1][1]?(g[m][1]=g[m-1][1]+g[m][1].substring(0,g[m][1].length-g[m-1][1].length),g[m+1][1]=g[m-1][1]+g[m+1][1],g.splice(m-1,1),N=!0):g[m][1].substring(0,g[m+1][1].length)==g[m+1][1]&&(g[m-1][1]+=g[m+1][1],g[m][1]=g[m][1].substring(g[m+1][1].length)+g[m+1][1],g.splice(m+1,1),N=!0)),m++;N&&this.diff_cleanupMerge(g)},h.prototype.diff_xIndex=function(g,p){var m,A=0,f=0,E=0,T=0;for(m=0;m<g.length&&(g[m][0]!==1&&(A+=g[m][1].length),g[m][0]!==v&&(f+=g[m][1].length),!(A>p));m++)E=A,T=f;return g.length!=m&&g[m][0]===v?T:T+(p-E)},h.prototype.diff_prettyHtml=function(g){for(var p=[],m=/&/g,A=/</g,f=/>/g,E=/\n/g,T=0;T<g.length;T++){var N=g[T][0],R=g[T][1].replace(m,"&amp;").replace(A,"&lt;").replace(f,"&gt;").replace(E,"&para;<br>");switch(N){case 1:p[T]='<ins style="background:#e6ffe6;">'+R+"</ins>";break;case v:p[T]='<del style="background:#ffe6e6;">'+R+"</del>";break;case 0:p[T]="<span>"+R+"</span>"}}return p.join("")},h.prototype.diff_text1=function(g){for(var p=[],m=0;m<g.length;m++)g[m][0]!==1&&(p[m]=g[m][1]);return p.join("")},h.prototype.diff_text2=function(g){for(var p=[],m=0;m<g.length;m++)g[m][0]!==v&&(p[m]=g[m][1]);return p.join("")},h.prototype.diff_levenshtein=function(g){for(var p=0,m=0,A=0,f=0;f<g.length;f++){var E=g[f][0],T=g[f][1];switch(E){case 1:m+=T.length;break;case v:A+=T.length;break;case 0:p+=Math.max(m,A),m=0,A=0}}return p+=Math.max(m,A)},h.prototype.diff_toDelta=function(g){for(var p=[],m=0;m<g.length;m++)switch(g[m][0]){case 1:p[m]="+"+encodeURI(g[m][1]);break;case v:p[m]="-"+g[m][1].length;break;case 0:p[m]="="+g[m][1].length}return p.join("	").replace(/%20/g," ")},h.prototype.diff_fromDelta=function(g,p){for(var m=[],A=0,f=0,E=p.split(/\t/g),T=0;T<E.length;T++){var N=E[T].substring(1);switch(E[T].charAt(0)){case"+":try{m[A++]=new h.Diff(1,decodeURI(N))}catch{throw new Error("Illegal escape in diff_fromDelta: "+N)}break;case"-":case"=":var R=parseInt(N,10);if(isNaN(R)||R<0)throw new Error("Invalid number in diff_fromDelta: "+N);var P=g.substring(f,f+=R);E[T].charAt(0)=="="?m[A++]=new h.Diff(0,P):m[A++]=new h.Diff(v,P);break;default:if(E[T])throw new Error("Invalid diff operation in diff_fromDelta: "+E[T])}}if(f!=g.length)throw new Error("Delta length ("+f+") does not equal source text length ("+g.length+").");return m},h.prototype.match_main=function(g,p,m){if(g==null||p==null||m==null)throw new Error("Null input. (match_main)");return m=Math.max(0,Math.min(m,g.length)),g==p?0:g.length?g.substring(m,m+p.length)==p?m:this.match_bitap_(g,p,m):-1},h.prototype.match_bitap_=function(g,p,m){if(p.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var A=this.match_alphabet_(p),f=this;function E(De,Te){var xe=De/p.length,Ne=Math.abs(m-Te);return f.Match_Distance?xe+Ne/f.Match_Distance:Ne?1:xe}var T=this.Match_Threshold,N=g.indexOf(p,m);N!=-1&&(T=Math.min(E(0,N),T),(N=g.lastIndexOf(p,m+p.length))!=-1&&(T=Math.min(E(0,N),T)));var R,P,U=1<<p.length-1;N=-1;for(var D,I=p.length+g.length,S=0;S<p.length;S++){for(R=0,P=I;R<P;)E(S,m+P)<=T?R=P:I=P,P=Math.floor((I-R)/2+R);I=P;var Z=Math.max(1,m-P+1),W=Math.min(m+P,g.length)+p.length,le=Array(W+2);le[W+1]=(1<<S)-1;for(var de=W;de>=Z;de--){var be=A[g.charAt(de-1)];if(le[de]=S===0?(le[de+1]<<1|1)&be:(le[de+1]<<1|1)&be|(D[de+1]|D[de])<<1|1|D[de+1],le[de]&U){var we=E(S,de-1);if(we<=T){if(T=we,!((N=de-1)>m))break;Z=Math.max(1,2*m-N)}}}if(E(S+1,m)>T)break;D=le}return N},h.prototype.match_alphabet_=function(g){for(var p={},m=0;m<g.length;m++)p[g.charAt(m)]=0;for(m=0;m<g.length;m++)p[g.charAt(m)]|=1<<g.length-m-1;return p},h.prototype.patch_addContext_=function(g,p){if(p.length!=0){if(g.start2===null)throw Error("patch not initialized");for(var m=p.substring(g.start2,g.start2+g.length1),A=0;p.indexOf(m)!=p.lastIndexOf(m)&&m.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)A+=this.Patch_Margin,m=p.substring(g.start2-A,g.start2+g.length1+A);A+=this.Patch_Margin;var f=p.substring(g.start2-A,g.start2);f&&g.diffs.unshift(new h.Diff(0,f));var E=p.substring(g.start2+g.length1,g.start2+g.length1+A);E&&g.diffs.push(new h.Diff(0,E)),g.start1-=f.length,g.start2-=f.length,g.length1+=f.length+E.length,g.length2+=f.length+E.length}},h.prototype.patch_make=function(g,p,m){var A,f;if(typeof g=="string"&&typeof p=="string"&&m===void 0)A=g,(f=this.diff_main(A,p,!0)).length>2&&(this.diff_cleanupSemantic(f),this.diff_cleanupEfficiency(f));else if(g&&typeof g=="object"&&p===void 0&&m===void 0)f=g,A=this.diff_text1(f);else if(typeof g=="string"&&p&&typeof p=="object"&&m===void 0)A=g,f=p;else{if(typeof g!="string"||typeof p!="string"||!m||typeof m!="object")throw new Error("Unknown call format to patch_make.");A=g,f=m}if(f.length===0)return[];for(var E=[],T=new h.patch_obj,N=0,R=0,P=0,U=A,D=A,I=0;I<f.length;I++){var S=f[I][0],Z=f[I][1];switch(N||S===0||(T.start1=R,T.start2=P),S){case 1:T.diffs[N++]=f[I],T.length2+=Z.length,D=D.substring(0,P)+Z+D.substring(P);break;case v:T.length1+=Z.length,T.diffs[N++]=f[I],D=D.substring(0,P)+D.substring(P+Z.length);break;case 0:Z.length<=2*this.Patch_Margin&&N&&f.length!=I+1?(T.diffs[N++]=f[I],T.length1+=Z.length,T.length2+=Z.length):Z.length>=2*this.Patch_Margin&&N&&(this.patch_addContext_(T,U),E.push(T),T=new h.patch_obj,N=0,U=D,R=P)}S!==1&&(R+=Z.length),S!==v&&(P+=Z.length)}return N&&(this.patch_addContext_(T,U),E.push(T)),E},h.prototype.patch_deepCopy=function(g){for(var p=[],m=0;m<g.length;m++){var A=g[m],f=new h.patch_obj;f.diffs=[];for(var E=0;E<A.diffs.length;E++)f.diffs[E]=new h.Diff(A.diffs[E][0],A.diffs[E][1]);f.start1=A.start1,f.start2=A.start2,f.length1=A.length1,f.length2=A.length2,p[m]=f}return p},h.prototype.patch_apply=function(g,p){if(g.length==0)return[p,[]];g=this.patch_deepCopy(g);var m=this.patch_addPadding(g);p=m+p+m,this.patch_splitMax(g);for(var A=0,f=[],E=0;E<g.length;E++){var T,N,R=g[E].start2+A,P=this.diff_text1(g[E].diffs),U=-1;if(P.length>this.Match_MaxBits?(T=this.match_main(p,P.substring(0,this.Match_MaxBits),R))!=-1&&((U=this.match_main(p,P.substring(P.length-this.Match_MaxBits),R+P.length-this.Match_MaxBits))==-1||T>=U)&&(T=-1):T=this.match_main(p,P,R),T==-1)f[E]=!1,A-=g[E].length2-g[E].length1;else if(f[E]=!0,A=T-R,P==(N=U==-1?p.substring(T,T+P.length):p.substring(T,U+this.Match_MaxBits)))p=p.substring(0,T)+this.diff_text2(g[E].diffs)+p.substring(T+P.length);else{var D=this.diff_main(P,N,!1);if(P.length>this.Match_MaxBits&&this.diff_levenshtein(D)/P.length>this.Patch_DeleteThreshold)f[E]=!1;else{this.diff_cleanupSemanticLossless(D);for(var I,S=0,Z=0;Z<g[E].diffs.length;Z++){var W=g[E].diffs[Z];W[0]!==0&&(I=this.diff_xIndex(D,S)),W[0]===1?p=p.substring(0,T+I)+W[1]+p.substring(T+I):W[0]===v&&(p=p.substring(0,T+I)+p.substring(T+this.diff_xIndex(D,S+W[1].length))),W[0]!==v&&(S+=W[1].length)}}}}return[p=p.substring(m.length,p.length-m.length),f]},h.prototype.patch_addPadding=function(g){for(var p=this.Patch_Margin,m="",A=1;A<=p;A++)m+=String.fromCharCode(A);for(A=0;A<g.length;A++)g[A].start1+=p,g[A].start2+=p;var f=g[0],E=f.diffs;if(E.length==0||E[0][0]!=0)E.unshift(new h.Diff(0,m)),f.start1-=p,f.start2-=p,f.length1+=p,f.length2+=p;else if(p>E[0][1].length){var T=p-E[0][1].length;E[0][1]=m.substring(E[0][1].length)+E[0][1],f.start1-=T,f.start2-=T,f.length1+=T,f.length2+=T}return(E=(f=g[g.length-1]).diffs).length==0||E[E.length-1][0]!=0?(E.push(new h.Diff(0,m)),f.length1+=p,f.length2+=p):p>E[E.length-1][1].length&&(T=p-E[E.length-1][1].length,E[E.length-1][1]+=m.substring(0,T),f.length1+=T,f.length2+=T),m},h.prototype.patch_splitMax=function(g){for(var p=this.Match_MaxBits,m=0;m<g.length;m++)if(!(g[m].length1<=p)){var A=g[m];g.splice(m--,1);for(var f=A.start1,E=A.start2,T="";A.diffs.length!==0;){var N=new h.patch_obj,R=!0;for(N.start1=f-T.length,N.start2=E-T.length,T!==""&&(N.length1=N.length2=T.length,N.diffs.push(new h.Diff(0,T)));A.diffs.length!==0&&N.length1<p-this.Patch_Margin;){var P=A.diffs[0][0],U=A.diffs[0][1];P===1?(N.length2+=U.length,E+=U.length,N.diffs.push(A.diffs.shift()),R=!1):P===v&&N.diffs.length==1&&N.diffs[0][0]==0&&U.length>2*p?(N.length1+=U.length,f+=U.length,R=!1,N.diffs.push(new h.Diff(P,U)),A.diffs.shift()):(U=U.substring(0,p-N.length1-this.Patch_Margin),N.length1+=U.length,f+=U.length,P===0?(N.length2+=U.length,E+=U.length):R=!1,N.diffs.push(new h.Diff(P,U)),U==A.diffs[0][1]?A.diffs.shift():A.diffs[0][1]=A.diffs[0][1].substring(U.length))}T=(T=this.diff_text2(N.diffs)).substring(T.length-this.Patch_Margin);var D=this.diff_text1(A.diffs).substring(0,this.Patch_Margin);D!==""&&(N.length1+=D.length,N.length2+=D.length,N.diffs.length!==0&&N.diffs[N.diffs.length-1][0]===0?N.diffs[N.diffs.length-1][1]+=D:N.diffs.push(new h.Diff(0,D))),R||g.splice(++m,0,N)}}},h.prototype.patch_toText=function(g){for(var p=[],m=0;m<g.length;m++)p[m]=g[m];return p.join("")},h.prototype.patch_fromText=function(g){var p=[];if(!g)return p;for(var m=g.split(`
`),A=0,f=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;A<m.length;){var E=m[A].match(f);if(!E)throw new Error("Invalid patch string: "+m[A]);var T=new h.patch_obj;for(p.push(T),T.start1=parseInt(E[1],10),E[2]===""?(T.start1--,T.length1=1):E[2]=="0"?T.length1=0:(T.start1--,T.length1=parseInt(E[2],10)),T.start2=parseInt(E[3],10),E[4]===""?(T.start2--,T.length2=1):E[4]=="0"?T.length2=0:(T.start2--,T.length2=parseInt(E[4],10)),A++;A<m.length;){var N=m[A].charAt(0);try{var R=decodeURI(m[A].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+R)}if(N=="-")T.diffs.push(new h.Diff(v,R));else if(N=="+")T.diffs.push(new h.Diff(1,R));else if(N==" ")T.diffs.push(new h.Diff(0,R));else{if(N=="@")break;if(N!=="")throw new Error('Invalid patch mode "'+N+'" in: '+R)}A++}}return p},(h.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var g,p=["@@ -"+(this.length1===0?this.start1+",0":this.length1==1?this.start1+1:this.start1+1+","+this.length1)+" +"+(this.length2===0?this.start2+",0":this.length2==1?this.start2+1:this.start2+1+","+this.length2)+` @@
`],m=0;m<this.diffs.length;m++){switch(this.diffs[m][0]){case 1:g="+";break;case v:g="-";break;case 0:g=" "}p[m+1]=g+encodeURI(this.diffs[m][1])+`
`}return p.join("").replace(/%20/g," ")},x.exports=h,x.exports.diff_match_patch=h,x.exports.DIFF_DELETE=v,x.exports.DIFF_INSERT=1,x.exports.DIFF_EQUAL=0},872:(x,h,v)=>{v.d(h,{default:()=>ve});var g=v(478),p=v(156),m=v(314),A=v(730),f=v(66),E=v(218),T=v(702),N=function(J){J===void 0&&(J=document);var me=function(X){var Y=document.createElement("img");Y.src=X.getAttribute("data-src"),Y.addEventListener("load",function(){X.getAttribute("style")||X.getAttribute("class")||X.getAttribute("width")||X.getAttribute("height")||Y.naturalHeight>Y.naturalWidth&&Y.naturalWidth/Y.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&Y.naturalHeight>window.innerHeight-40&&(X.style.height=window.innerHeight-40+"px"),X.src=Y.src}),X.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return J.querySelectorAll("img").forEach(function(X){X.getAttribute("data-src")&&me(X)}),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),J.querySelectorAll("img").forEach(function(X){window.vditorImageIntersectionObserver.observe(X)})):(window.vditorImageIntersectionObserver=new IntersectionObserver(function(X){X.forEach(function(Y){(Y.isIntersecting===void 0?Y.intersectionRatio!==0:Y.isIntersecting)&&Y.target.getAttribute("data-src")&&me(Y.target)})}),J.querySelectorAll("img").forEach(function(X){window.vditorImageIntersectionObserver.observe(X)}))},R=v(466),P=v(554),U=v(40),D=v(563),I=v(749),S=v(818),Z=v(408),W=v(54),le=v(227),de=v(526),be=v(827),we=v(640),De=v(895),Te=v(393),xe=function(J,me){if(me===void 0&&(me="zh_CN"),typeof speechSynthesis<"u"&&typeof SpeechSynthesisUtterance<"u"){var X='<svg><use xlink:href="#vditor-icon-play"></use></svg>',Y='<svg><use xlink:href="#vditor-icon-pause"></use></svg>';document.getElementById("vditorIconScript")||(X='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',Y='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>');var re=document.querySelector(".vditor-speech");if(!re){(re=document.createElement("div")).className="vditor-speech",document.body.insertAdjacentElement("beforeend",re);var Ce=function(){var Ve,Le;return speechSynthesis.getVoices().forEach(function(_e){_e.lang===me.replace("_","-")&&(Ve=_e),_e.default&&(Le=_e)}),Ve||(Ve=Le),Ve};speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=Ce);var Se=Ce();re.onclick=function(){if(re.className==="vditor-speech"){var Ve=new SpeechSynthesisUtterance(re.getAttribute("data-text"));Ve.voice=Se,Ve.onend=function(){re.className="vditor-speech",speechSynthesis.cancel(),re.innerHTML=X},speechSynthesis.speak(Ve),re.className="vditor-speech vditor-speech--current",re.innerHTML=Y}else speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),re.innerHTML=Y):(speechSynthesis.pause(),re.innerHTML=X));(0,Te.Hc)(window.vditorSpeechRange)},document.body.addEventListener("click",function(){getSelection().toString().trim()===""&&re.style.display==="block"&&(re.className="vditor-speech",speechSynthesis.cancel(),re.style.display="none")})}J.addEventListener("mouseup",function(Ve){var Le=getSelection().toString().trim();if(speechSynthesis.cancel(),getSelection().toString().trim()!==""){window.vditorSpeechRange=getSelection().getRangeAt(0).cloneRange();var _e=getSelection().getRangeAt(0).getBoundingClientRect();re.innerHTML=X,re.style.display="block",re.style.top=_e.top+_e.height+document.querySelector("html").scrollTop-20+"px",re.style.left=Ve.clientX+2+"px",re.setAttribute("data-text",Le)}else re.style.display==="block"&&(re.className="vditor-speech",re.style.display="none")})}},Ne=function(J,me,X,Y){return new(X||(X=Promise))(function(re,Ce){function Se(_e){try{Le(Y.next(_e))}catch(ye){Ce(ye)}}function Ve(_e){try{Le(Y.throw(_e))}catch(ye){Ce(ye)}}function Le(_e){var ye;_e.done?re(_e.value):(ye=_e.value,ye instanceof X?ye:new X(function(lt){lt(ye)})).then(Se,Ve)}Le((Y=Y.apply(J,me||[])).next())})},Ue=function(J,me){var X,Y,re,Ce,Se={label:0,sent:function(){if(1&re[0])throw re[1];return re[1]},trys:[],ops:[]};return Ce={next:Ve(0),throw:Ve(1),return:Ve(2)},typeof Symbol=="function"&&(Ce[Symbol.iterator]=function(){return this}),Ce;function Ve(Le){return function(_e){return function(ye){if(X)throw new TypeError("Generator is already executing.");for(;Se;)try{if(X=1,Y&&(re=2&ye[0]?Y.return:ye[0]?Y.throw||((re=Y.return)&&re.call(Y),0):Y.next)&&!(re=re.call(Y,ye[1])).done)return re;switch(Y=0,re&&(ye=[2&ye[0],re.value]),ye[0]){case 0:case 1:re=ye;break;case 4:return Se.label++,{value:ye[1],done:!1};case 5:Se.label++,Y=ye[1],ye=[0];continue;case 7:ye=Se.ops.pop(),Se.trys.pop();continue;default:if(re=Se.trys,!((re=re.length>0&&re[re.length-1])||ye[0]!==6&&ye[0]!==2)){Se=0;continue}if(ye[0]===3&&(!re||ye[1]>re[0]&&ye[1]<re[3])){Se.label=ye[1];break}if(ye[0]===6&&Se.label<re[1]){Se.label=re[1],re=ye;break}if(re&&Se.label<re[2]){Se.label=re[2],Se.ops.push(ye);break}re[2]&&Se.ops.pop(),Se.trys.pop();continue}ye=me.call(J,Se)}catch(lt){ye=[6,lt],Y=0}finally{X=re=0}if(5&ye[0])throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}([Le,_e])}}},Fe=function(J){var me={anchor:0,cdn:W.g.CDN,dist:W.g.DIST,staticPath:W.g.STATIC_PATH,customEmoji:{},emojiPath:(J&&J.emojiPath||W.g.CDN)+"/"+W.g.DIST+"/"+W.g._STATIC_PATH.emoji,hljs:W.g.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:W.g.MARKDOWN_OPTIONS,math:W.g.MATH_OPTIONS,mode:"light",speech:{enable:!1},theme:W.g.THEME_OPTIONS};return(0,we.T)(me,J)},tt=function(J,me){var X=Fe(me);return(0,de.G)(X.staticPath.lute,"vditorLuteScript").then(function(){var Y=(0,De.X)({autoSpace:X.markdown.autoSpace,gfmAutoLink:X.markdown.gfmAutoLink,codeBlockPreview:X.markdown.codeBlockPreview,emojiSite:X.emojiPath,emojis:X.customEmoji,fixTermTypo:X.markdown.fixTermTypo,footnotes:X.markdown.footnotes,headingAnchor:X.anchor!==0,inlineMathDigit:X.math.inlineDigit,lazyLoadImage:X.lazyLoadImage,linkBase:X.markdown.linkBase,linkPrefix:X.markdown.linkPrefix,listStyle:X.markdown.listStyle,mark:X.markdown.mark,mathBlockPreview:X.markdown.mathBlockPreview,paragraphBeginningSpace:X.markdown.paragraphBeginningSpace,sanitize:X.markdown.sanitize,toc:X.markdown.toc});return me!=null&&me.renderers&&Y.SetJSRenderers({renderers:{Md2HTML:me.renderers}}),Y.SetHeadingID(!0),Y.Md2HTML(J)})},Be=function(J,me,X){return Ne(void 0,void 0,void 0,function(){var Y,re,Ce;return Ue(this,function(Se){switch(Se.label){case 0:return Y=Fe(X),[4,tt(me,Y)];case 1:if(re=Se.sent(),Y.transform&&(re=Y.transform(re)),J.innerHTML=re,J.classList.add("vditor-reset"),Y.i18n)return[3,5];if(["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(Y.lang))return[3,2];throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return Ce="vditorI18nScript"+Y.lang,document.querySelectorAll('head script[id^="vditorI18nScript"]').forEach(function(Le){Le.id!==Ce&&document.head.removeChild(Le)}),[4,(0,de.G)(Y.staticPath.i18n+"/"+Y.lang+".js",Ce)];case 3:Se.sent(),Se.label=4;case 4:return[3,6];case 5:window.VditorI18n=Y.i18n,Se.label=6;case 6:return Y.icon?[4,(0,de.G)(Y.staticPath.icons+"/"+Y.icon+".js","vditorIconScript")]:[3,8];case 7:Se.sent(),Se.label=8;case 8:return(0,le.Z)(Y.theme.current,Y.theme.path),Y.anchor===1&&J.classList.add("vditor-reset--anchor"),(0,A.O)(J),(0,T.s)(Y.hljs,J,Y.staticPath.highlight),(0,R.H)(J,{katex:Y.staticPath.katex,mathjax:Y.staticPath.mathjax,math:Y.math}),(0,U.i)(J,Y.staticPath.mermaid,Y.mode),(0,D.K)(J,Y.staticPath.markmap,Y.mode),(0,f.P)(J,Y.staticPath.flowchart),(0,E.v)(J,Y.staticPath.graphviz),(0,m.p)(J,Y.staticPath.echarts,Y.mode),(0,I.P)(J,Y.staticPath.echarts,Y.mode),(0,Z.B)(J,Y.staticPath.plantuml),(0,g.Q)(J,Y.staticPath.abc),(0,P.Y)(J),Y.speech.enable&&xe(J),Y.anchor!==0&&(Ve=Y.anchor,document.querySelectorAll(".vditor-anchor").forEach(function(Le){Ve===1&&Le.classList.add("vditor-anchor--left"),Le.onclick=function(){var _e=Le.getAttribute("href").substr(1),ye=document.getElementById("vditorAnchor-"+_e).offsetTop;document.querySelector("html").scrollTop=ye}}),window.onhashchange=function(){var Le=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));Le&&(document.querySelector("html").scrollTop=Le.offsetTop)}),Y.after&&Y.after(),Y.lazyLoadImage&&N(J),J.addEventListener("click",function(Le){var _e=(0,be.lG)(Le.target,"SPAN");if(_e&&(0,be.fb)(_e,"vditor-toc")){var ye=J.querySelector("#"+_e.getAttribute("data-target-id"));ye&&window.scrollTo(window.scrollX,ye.offsetTop)}}),[2]}var Ve})})},H=v(863),pe=v(312);const ve=function(){function J(){}return J.adapterRender=p,J.previewImage=H.E,J.codeRender=A.O,J.graphvizRender=E.v,J.highlightRender=T.s,J.mathRender=R.H,J.mermaidRender=U.i,J.markmapRender=D.K,J.flowchartRender=f.P,J.chartRender=m.p,J.abcRender=g.Q,J.mindmapRender=I.P,J.plantumlRender=Z.B,J.outlineRender=S.k,J.mediaRender=P.Y,J.speechRender=xe,J.lazyLoadImageRender=N,J.md2html=tt,J.preview=Be,J.setCodeTheme=pe.Y,J.setContentTheme=le.Z,J}()},54:(x,h,v)=>{v.d(h,{H:()=>g,g:()=>p});var g="3.9.5",p=function(){function m(){}return m.ZWSP="​",m.DROP_EDITOR="application/editor",m.MOBILE_WIDTH=520,m.CLASS_MENU_DISABLED="vditor-menu--disabled",m.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],m.CODE_THEME=["abap","algol","algol_nu","arduino","autumn","borland","bw","colorful","dracula","emacs","friendly","fruity","github","igor","lovelace","manni","monokai","monokailight","murphy","native","paraiso-dark","paraiso-light","pastie","perldoc","pygments","rainbow_dash","rrt","solarized-dark","solarized-dark256","solarized-light","swapoff","tango","trac","vim","vs","xcode","ant-design"],m.CODE_LANGUAGES=["mermaid","echarts","mindmap","plantuml","abc","graphviz","flowchart","apache","js","ts","html","markmap","properties","apache","bash","c","csharp","cpp","css","coffeescript","diff","go","xml","http","json","java","javascript","kotlin","less","lua","makefile","markdown","nginx","objectivec","php","php-template","perl","plaintext","python","python-repl","r","ruby","rust","scss","sql","shell","swift","ini","typescript","vbnet","yaml","ada","clojure","dart","erb","fortran","gradle","haskell","julia","julia-repl","lisp","matlab","pgsql","powershell","sql_more","stata","cmake","mathematica","solidity","yul"],m.CDN="https://unpkg.com/vditor@3.9.5",m.DIST="dist",m.BASE_URL=m.CDN+"/"+m.DIST,m._STATIC_PATH={logo:"images/logo.png",method:"method.min.js",style:"index.css",emoji:"images/emoji",i18n:"js/i18n",icons:"js/icons",theme:"css/content-theme",abc:"js/abcjs/abcjs_basic.min.js",echarts:"js/echarts/echarts.min.js",flowchart:"js/flowchart.js/flowchart.min.js",graphviz:"js/graphviz/viz.js",lute:"js/lute/lute.min.js",markmap:"js/markmap/markmap.min.js",mermaid:"js/mermaid/mermaid.min.js",plantuml:"js/plantuml/plantuml-encoder.min.js",highlight:"js/highlight.js",katex:"js/katex",mathjax:"js/mathjax"},m.STATIC_PATH={logo:m.BASE_URL+"/"+m._STATIC_PATH.logo,method:m.BASE_URL+"/"+m._STATIC_PATH.method,style:m.BASE_URL+"/"+m._STATIC_PATH.style,emoji:m.BASE_URL+"/"+m._STATIC_PATH.emoji,i18n:m.BASE_URL+"/"+m._STATIC_PATH.i18n,icons:m.BASE_URL+"/"+m._STATIC_PATH.icons,theme:m.BASE_URL+"/"+m._STATIC_PATH.theme,abc:m.BASE_URL+"/"+m._STATIC_PATH.abc,echarts:m.BASE_URL+"/"+m._STATIC_PATH.echarts,flowchart:m.BASE_URL+"/"+m._STATIC_PATH.flowchart,graphviz:m.BASE_URL+"/"+m._STATIC_PATH.graphviz,lute:m.BASE_URL+"/"+m._STATIC_PATH.lute,markmap:m.BASE_URL+"/"+m._STATIC_PATH.markmap,mermaid:m.BASE_URL+"/"+m._STATIC_PATH.mermaid,plantuml:m.BASE_URL+"/"+m._STATIC_PATH.plantuml,highlight:m.BASE_URL+"/"+m._STATIC_PATH.highlight,katex:m.BASE_URL+"/"+m._STATIC_PATH.katex,mathjax:m.BASE_URL+"/"+m._STATIC_PATH.mathjax},m.MARKDOWN_OPTIONS={autoSpace:!1,gfmAutoLink:!0,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},m.HLJS_OPTIONS={enable:!0,lineNumber:!1,defaultLang:"",style:"github"},m.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},m.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:m.STATIC_PATH.theme},m}()},478:(x,h,v)=>{v.d(h,{Q:()=>A});var g=v(54),p=v(526),m=v(156),A=function(f,E){f===void 0&&(f=document),E===void 0&&(E=g.g.STATIC_PATH.abc);var T=m.abcRenderAdapter.getElements(f);T.length>0&&(0,p.G)(E,"vditorAbcjsScript").then(function(){T.forEach(function(N){N.parentElement.classList.contains("vditor-wysiwyg__pre")||N.parentElement.classList.contains("vditor-ir__marker--pre")||N.getAttribute("data-processed")!=="true"&&(ABCJS.renderAbc(N,m.abcRenderAdapter.getCode(N).trim()),N.style.overflowX="auto",N.setAttribute("data-processed","true"))})})}},156:(x,h,v)=>{v.r(h),v.d(h,{abcRenderAdapter:()=>E,chartRenderAdapter:()=>f,flowchartRenderAdapter:()=>N,graphvizRenderAdapter:()=>T,markmapRenderAdapter:()=>m,mathRenderAdapter:()=>g,mermaidRenderAdapter:()=>p,mindmapRenderAdapter:()=>A,plantumlRenderAdapter:()=>R});var g={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-math")}},p={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-mermaid")}},m={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-markmap")}},A={getCode:function(P){return P.getAttribute("data-code")},getElements:function(P){return P.querySelectorAll(".language-mindmap")}},f={getCode:function(P){return P.innerText},getElements:function(P){return P.querySelectorAll(".language-echarts")}},E={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-abc")}},T={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-graphviz")}},N={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-flowchart")}},R={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-plantuml")}}},314:(x,h,v)=>{v.d(h,{p:()=>A});var g=v(54),p=v(526),m=v(156),A=function(f,E,T){f===void 0&&(f=document),E===void 0&&(E=g.g.STATIC_PATH.echarts);var N=m.chartRenderAdapter.getElements(f);N.length>0&&(0,p.G)(E,"vditorEchartsScript").then(function(){N.forEach(function(R){if(!R.parentElement.classList.contains("vditor-wysiwyg__pre")&&!R.parentElement.classList.contains("vditor-ir__marker--pre")){var P=m.chartRenderAdapter.getCode(R).trim();if(P)try{if(R.getAttribute("data-processed")==="true")return;var U=JSON.parse(P);echarts.init(R,T==="dark"?"dark":void 0).setOption(U),R.setAttribute("data-processed","true")}catch(D){R.className="vditor-reset--error",R.innerHTML="echarts render error: <br>"+D}}})})}},730:(x,h,v)=>{v.d(h,{O:()=>m});var g=v(51),p=v(54),m=function(A){A.querySelectorAll("pre > code").forEach(function(f,E){var T,N,R;if(!f.parentElement.classList.contains("vditor-wysiwyg__pre")&&!f.parentElement.classList.contains("vditor-ir__marker--pre")&&!(f.classList.contains("language-mermaid")||f.classList.contains("language-flowchart")||f.classList.contains("language-echarts")||f.classList.contains("language-mindmap")||f.classList.contains("language-plantuml")||f.classList.contains("language-markmap")||f.classList.contains("language-abc")||f.classList.contains("language-graphviz")||f.classList.contains("language-math")||f.style.maxHeight.indexOf("px")>-1||A.classList.contains("vditor-preview")&&E>5)){var P=f.innerText;if(f.classList.contains("highlight-chroma")){var U=document.createElement("code");U.innerHTML=f.innerHTML,U.querySelectorAll(".highlight-ln").forEach(function(Z){Z.remove()}),P=U.innerText}else P.endsWith(`
`)&&(P=P.substr(0,P.length-1));var D='<svg><use xlink:href="#vditor-icon-copy"></use></svg>';document.getElementById("vditorIconScript")||(D='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>');var I=document.createElement("div");I.className="vditor-copy",I.innerHTML='<span aria-label="'+(((T=window.VditorI18n)===null||T===void 0?void 0:T.copy)||"复制")+`"
onmouseover="this.setAttribute('aria-label', '`+(((N=window.VditorI18n)===null||N===void 0?void 0:N.copy)||"复制")+`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`+(((R=window.VditorI18n)===null||R===void 0?void 0:R.copied)||"已复制")+`')">`+D+"</span>";var S=document.createElement("textarea");S.value=(0,g.X)(P),I.insertAdjacentElement("afterbegin",S),f.before(I),f.style.maxHeight=window.outerHeight-40+"px",f.insertAdjacentHTML("afterend",'<span style="position: absolute">'+p.g.ZWSP+"</span>")}})}},66:(x,h,v)=>{v.d(h,{P:()=>A});var g=v(54),p=v(526),m=v(156),A=function(f,E){E===void 0&&(E=g.g.STATIC_PATH.flowchart);var T=m.flowchartRenderAdapter.getElements(f);T.length!==0&&(0,p.G)(E,"vditorFlowchartScript").then(function(){T.forEach(function(N){if(N.getAttribute("data-processed")!=="true"){var R=flowchart.parse(m.flowchartRenderAdapter.getCode(N));N.innerHTML="",R.drawSVG(N),N.setAttribute("data-processed","true")}})})}},218:(x,h,v)=>{v.d(h,{v:()=>A});var g=v(54),p=v(526),m=v(156),A=function(f,E){E===void 0&&(E=g.g.STATIC_PATH.graphviz);var T=m.graphvizRenderAdapter.getElements(f);T.length!==0&&(0,p.G)(E,"vditorGraphVizScript").then(function(){T.forEach(function(N){var R=m.graphvizRenderAdapter.getCode(N);if(!N.parentElement.classList.contains("vditor-wysiwyg__pre")&&!N.parentElement.classList.contains("vditor-ir__marker--pre")&&N.getAttribute("data-processed")!=="true"&&R.trim()!==""){try{var P=new Blob(["importScripts('"+document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js")+"');"],{type:"application/javascript"}),U=(window.URL||window.webkitURL).createObjectURL(P),D=new Worker(U);new Viz({worker:D}).renderSVGElement(R).then(function(I){N.innerHTML=I.outerHTML}).catch(function(I){N.innerHTML="graphviz render error: <br>"+I,N.className="vditor-reset--error"})}catch(I){console.error("graphviz error",I)}N.setAttribute("data-processed","true")}})})}},702:(x,h,v)=>{v.d(h,{s:()=>A});var g=v(54),p=v(526),m=v(578),A=function(f,E,T){E===void 0&&(E=document),T===void 0&&(T=g.g.STATIC_PATH.highlight);var N=f.style;g.g.CODE_THEME.includes(N)||(N="github");var R=document.getElementById("vditorHljsStyle"),P=T+"/styles/"+N+".css";R&&R.href!==P&&R.remove(),(0,m.c)(T+"/styles/"+N+".css","vditorHljsStyle"),f.enable!==!1&&E.querySelectorAll("pre > code").length!==0&&(0,p.G)(T+"/highlight.pack.js","vditorHljsScript").then(function(){(0,p.G)(T+"/solidity.min.js","vditorHljsSolidityScript").then(function(){(0,p.G)(T+"/yul.min.js","vditorHljsYulScript").then(function(){E.querySelectorAll("pre > code").forEach(function(U){if(!U.parentElement.classList.contains("vditor-ir__marker--pre")&&!U.parentElement.classList.contains("vditor-wysiwyg__pre")&&!(U.classList.contains("language-mermaid")||U.classList.contains("language-flowchart")||U.classList.contains("language-echarts")||U.classList.contains("language-mindmap")||U.classList.contains("language-plantuml")||U.classList.contains("language-abc")||U.classList.contains("language-graphviz")||U.classList.contains("language-math"))&&(f.defaultLang!==""&&U.className.indexOf("language-")===-1&&U.classList.add("language-"+f.defaultLang),hljs.highlightElement(U),f.lineNumber)){U.classList.add("vditor-linenumber");var D=U.querySelector(".vditor-linenumber__temp");D||((D=document.createElement("div")).className="vditor-linenumber__temp",U.insertAdjacentElement("beforeend",D));var I=getComputedStyle(U).whiteSpace,S=!1;I!=="pre-wrap"&&I!=="pre-line"||(S=!0);var Z="",W=U.textContent.split(/\r\n|\r|\n/g);W.pop(),W.map(function(le){var de="";S&&(D.textContent=le||`
`,de=' style="height:'+D.getBoundingClientRect().height+'px"'),Z+="<span"+de+"></span>"}),D.style.display="none",Z='<span class="vditor-linenumber__rows">'+Z+"</span>",U.insertAdjacentHTML("beforeend",Z)}})})})})}},563:(x,h,v)=>{v.d(h,{K:()=>E});var g=v(54),p=v(526),m=v(156),A={},f=function(T,N){var R=window.markmap,P=R.Transformer,U=R.Markmap,D=R.deriveOptions,I=(R.globalCSS,new P);T.innerHTML='<svg style="width:100%"></svg>';var S=T.firstChild,Z=U.create(S,null),W=function(we,De){var Te=we.transform(De),xe=Object.keys(Te.features).filter(function(Be){return!A[Be]});xe.forEach(function(Be){A[Be]=!0});var Ne=we.getAssets(xe),Ue=Ne.styles,Fe=Ne.scripts,tt=window.markmap;return Ue&&tt.loadCSS(Ue),Fe&&tt.loadJS(Fe),Te}(I,N),le=W.root,de=W.frontmatter,be=D(de==null?void 0:de.markmap);Z.setData(le,be),Z.fit()},E=function(T,N,R){N===void 0&&(N=g.g.STATIC_PATH.markmap);var P=m.markmapRenderAdapter.getElements(T);P.length!==0&&(0,p.G)(N,"vditorMermaidScript").then(function(){P.forEach(function(U){var D=m.markmapRenderAdapter.getCode(U);if(U.getAttribute("data-processed")!=="true"&&D.trim()!==""){var I=document.createElement("div");I.className="language-markmap",U.parentNode.appendChild(I),f(I,D),U.parentNode.childNodes[0].nodeName=="CODE"&&U.parentNode.removeChild(U.parentNode.childNodes[0])}})})}},466:(x,h,v)=>{v.d(h,{H:()=>E});var g=v(54),p=v(526),m=v(578),A=v(51),f=v(156),E=function(T,N){var R=f.mathRenderAdapter.getElements(T);if(R.length!==0){var P={katex:g.g.STATIC_PATH.katex,mathjax:g.g.STATIC_PATH.mathjax,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(N&&N.math&&(N.math=Object.assign({},P.math,N.math)),(N=Object.assign({},P,N)).math.engine==="KaTeX")(0,m.c)(N.katex+"/katex.min.css","vditorKatexStyle"),(0,p.G)(N.katex+"/katex.min.js","vditorKatexScript").then(function(){(0,p.G)(N.katex+"/mhchem.min.js","vditorKatexChemScript").then(function(){R.forEach(function(D){if(!D.parentElement.classList.contains("vditor-wysiwyg__pre")&&!D.parentElement.classList.contains("vditor-ir__marker--pre")&&!D.getAttribute("data-math")){var I=(0,A.X)(f.mathRenderAdapter.getCode(D));D.setAttribute("data-math",I);try{D.innerHTML=katex.renderToString(I,{displayMode:D.tagName==="DIV",output:"html"})}catch(S){D.innerHTML=S.message,D.className="language-math vditor-reset--error"}D.addEventListener("copy",function(S){S.stopPropagation(),S.preventDefault();var Z=S.currentTarget.closest(".language-math");S.clipboardData.setData("text/html",Z.innerHTML),S.clipboardData.setData("text/plain",Z.getAttribute("data-math"))})}})})});else if(N.math.engine==="MathJax"){window.MathJax||(window.MathJax={loader:{paths:{mathjax:N.mathjax}},startup:{typeset:!1},tex:{macros:N.math.macros}},Object.assign(window.MathJax,N.math.mathJaxOptions)),(0,p.J)(N.mathjax+"/tex-svg-full.js","protyleMathJaxScript");var U=function(D,I){var S=(0,A.X)(D.textContent).trim(),Z=window.MathJax.getMetricsFor(D);Z.display=D.tagName==="DIV",window.MathJax.tex2svgPromise(S,Z).then(function(W){D.innerHTML="",D.setAttribute("data-math",S),D.append(W),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var le=W.querySelector('[data-mml-node="merror"]');le&&le.textContent.trim()!==""&&(D.innerHTML=le.textContent.trim(),D.className="vditor-reset--error"),I&&I()})};window.MathJax.startup.promise.then(function(){for(var D=[],I=function(Z){var W=R[Z];W.parentElement.classList.contains("vditor-wysiwyg__pre")||W.parentElement.classList.contains("vditor-ir__marker--pre")||W.getAttribute("data-math")||!(0,A.X)(W.textContent).trim()||D.push(function(le){Z===R.length-1?U(W):U(W,le)})},S=0;S<R.length;S++)I(S);(function(Z){if(Z.length!==0){var W=0,le=Z[Z.length-1],de=function(){var be=Z[W++];be===le?be():be(de)};de()}})(D)})}}}},554:(x,h,v)=>{v.d(h,{Y:()=>g});var g=function(p){p&&p.querySelectorAll("a").forEach(function(m){var A=m.getAttribute("href");A&&(A.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?function(f,E){f.insertAdjacentHTML("afterend",'<video controls="controls" src="'+E+'"></video>'),f.remove()}(m,A):A.match(/^.+.(mp3|wav|flac)$/)?function(f,E){f.insertAdjacentHTML("afterend",'<audio controls="controls" src="'+E+'"></audio>'),f.remove()}(m,A):function(f,E){var T=E.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),N=E.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),R=E.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),P=E.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),U=E.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),D=E.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),I=E.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),S=E.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);T&&T[1].length===11?(f.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'+T[1]+(T[2]?"?start="+T[2]:"")+'"></iframe>'),f.remove()):N&&N[1]?(f.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'+N[1]+'"></iframe>'),f.remove()):R&&R[1]?(f.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='+R[1]+'"></iframe>'),f.remove()):P&&P[1]?(f.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`+P[1]+'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>'),f.remove()):U&&U[0]?(f.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`+encodeURIComponent(U[0])+'"></iframe>'),f.remove()):D&&D[2]?(f.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`+D[2]+'"></iframe>'),f.remove()):I&&I[1]?(f.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//player.bilibili.com/player.html?bvid=`+I[1]+'"></iframe>'),f.remove()):S&&S[1]&&(f.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'+S[1]+'"></iframe>'),f.remove())}(m,A))})}},40:(x,h,v)=>{v.d(h,{i:()=>A});var g=v(54),p=v(526),m=v(156),A=function(f,E,T){E===void 0&&(E=g.g.STATIC_PATH.mermaid);var N=m.mermaidRenderAdapter.getElements(f);N.length!==0&&(0,p.G)(E,"vditorMermaidScript").then(function(){var R={securityLevel:"loose",altFontFamily:"sans-serif",fontFamily:"sans-serif",startOnLoad:!1,flowchart:{htmlLabels:!0,useMaxWidth:!0},sequence:{useMaxWidth:!0,diagramMarginX:8,diagramMarginY:8,boxMargin:8},gantt:{leftPadding:75,rightPadding:20}};T==="dark"&&(R.theme="dark"),mermaid.initialize(R),N.forEach(function(P){var U=m.mermaidRenderAdapter.getCode(P);P.getAttribute("data-processed")!=="true"&&U.trim()!==""&&(mermaid.init(void 0,P),P.setAttribute("data-processed","true"))})})}},749:(x,h,v)=>{v.d(h,{P:()=>A});var g=v(54),p=v(526),m=v(156),A=function(f,E,T){f===void 0&&(f=document),E===void 0&&(E=g.g.STATIC_PATH.echarts);var N=m.mindmapRenderAdapter.getElements(f);N.length>0&&(0,p.G)(E,"vditorEchartsScript").then(function(){N.forEach(function(R){if(!R.parentElement.classList.contains("vditor-wysiwyg__pre")&&!R.parentElement.classList.contains("vditor-ir__marker--pre")){var P=m.mindmapRenderAdapter.getCode(R);if(P)try{if(R.getAttribute("data-processed")==="true")return;echarts.init(R,T==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(P))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(U,D){var I;return!((I=D==null?void 0:D.data)===null||I===void 0)&&I.children?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),R.setAttribute("data-processed","true")}catch(U){R.className="vditor-reset--error",R.innerHTML="mindmap render error: <br>"+U}}})})}},818:(x,h,v)=>{v.d(h,{k:()=>m});var g=v(64),p=v(466),m=function(A,f,E){var T="",N=[];if(Array.from(A.children).forEach(function(D,I){if((0,g.W)(D)){if(E){var S=D.id.lastIndexOf("_");D.id=D.id.substring(0,S===-1?void 0:S)+"_"+I}N.push(D.id),T+=D.outerHTML.replace("<wbr>","")}}),T==="")return f.innerHTML="","";var R=document.createElement("div");if(E)E.lute.SetToC(!0),E.currentMode!=="wysiwyg"||E.preview.element.contains(A)?E.currentMode!=="ir"||E.preview.element.contains(A)?R.innerHTML=E.lute.HTML2VditorDOM("<p>[ToC]</p>"+T):R.innerHTML=E.lute.SpinVditorIRDOM("<p>[ToC]</p>"+T):R.innerHTML=E.lute.SpinVditorDOM("<p>[ToC]</p>"+T),E.lute.SetToC(E.options.preview.markdown.toc);else{f.classList.add("vditor-outline");var P=Lute.New();P.SetToC(!0),R.innerHTML=P.HTML2VditorDOM("<p>[ToC]</p>"+T)}var U=R.firstElementChild.querySelectorAll("li > span[data-target-id]");return U.forEach(function(D,I){if(D.nextElementSibling&&D.nextElementSibling.tagName==="UL"){var S="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>";document.getElementById("vditorIconScript")||(S='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>'),D.innerHTML=S+"<span>"+D.innerHTML+"</span>"}else D.innerHTML="<svg></svg><span>"+D.innerHTML+"</span>";D.setAttribute("data-target-id",N[I])}),T=R.firstElementChild.innerHTML,U.length===0?(f.innerHTML="",T):(f.innerHTML=T,E&&(0,p.H)(f,{katex:E.options.staticPath.katex,mathjax:E.options.staticPath.mathjax,math:E.options.preview.math}),f.firstElementChild.addEventListener("click",function(D){for(var I=D.target;I&&!I.isEqualNode(f);){if(I.classList.contains("vditor-outline__action")){I.classList.contains("vditor-outline__action--close")?(I.classList.remove("vditor-outline__action--close"),I.parentElement.nextElementSibling.setAttribute("style","display:block")):(I.classList.add("vditor-outline__action--close"),I.parentElement.nextElementSibling.setAttribute("style","display:none")),D.preventDefault(),D.stopPropagation();break}if(I.getAttribute("data-target-id")){D.preventDefault(),D.stopPropagation();var S=document.getElementById(I.getAttribute("data-target-id"));if(!S)return;if(E)if(E.options.height==="auto"){var Z=S.offsetTop+E.element.offsetTop;E.options.toolbarConfig.pin||(Z+=E.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,Z)}else E.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,E.element.offsetTop),E.preview.element.contains(A)?A.parentElement.scrollTop=S.offsetTop:A.scrollTop=S.offsetTop;else window.scrollTo(window.scrollX,S.offsetTop);break}I=I.parentElement}}),T)}},408:(x,h,v)=>{v.d(h,{B:()=>A});var g=v(54),p=v(526),m=v(156),A=function(f,E){f===void 0&&(f=document),E===void 0&&(E=g.g.STATIC_PATH.plantuml);var T=m.plantumlRenderAdapter.getElements(f);T.length!==0&&(0,p.G)(E,"vditorPlantumlScript").then(function(){T.forEach(function(N){if(!N.parentElement.classList.contains("vditor-wysiwyg__pre")&&!N.parentElement.classList.contains("vditor-ir__marker--pre")){var R=m.plantumlRenderAdapter.getCode(N).trim();if(R)try{N.innerHTML='<img src="http://www.plantuml.com/plantuml/svg/~1'+plantumlEncoder.encode(R)+'">'}catch(P){N.className="vditor-reset--error",N.innerHTML="plantuml render error: <br>"+P}}})})}},895:(x,h,v)=>{v.d(h,{X:()=>g});var g=function(p){var m=Lute.New();return m.PutEmojis(p.emojis),m.SetEmojiSite(p.emojiSite),m.SetHeadingAnchor(p.headingAnchor),m.SetInlineMathAllowDigitAfterOpenMarker(p.inlineMathDigit),m.SetAutoSpace(p.autoSpace),m.SetToC(p.toc),m.SetFootnotes(p.footnotes),m.SetFixTermTypo(p.fixTermTypo),m.SetVditorCodeBlockPreview(p.codeBlockPreview),m.SetVditorMathBlockPreview(p.mathBlockPreview),m.SetSanitize(p.sanitize),m.SetChineseParagraphBeginningSpace(p.paragraphBeginningSpace),m.SetRenderListStyle(p.listStyle),m.SetLinkBase(p.linkBase),m.SetLinkPrefix(p.linkPrefix),m.SetMark(p.mark),m.SetGFMAutoLink(p.gfmAutoLink),p.lazyLoadImage&&m.SetImageLazyLoading(p.lazyLoadImage),m}},863:(x,h,v)=>{v.d(h,{E:()=>g});var g=function(p,m,A){A===void 0&&(A="classic");var f=p.getBoundingClientRect();document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'+(A==="dark"?" vditor--dark":"")+`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `+window.VditorI18n.spin+`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`+window.VditorI18n.close+`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `+p.width+"px;height:"+p.height+"px;transform: translate3d("+f.left+"px, "+(f.top-36)+'px, 0)" src="'+p.getAttribute("src")+`">
    </div>
</div>`),document.body.style.overflow="hidden";var E=document.querySelector(".vditor-img img"),T="translate3d("+Math.max(0,window.innerWidth-p.naturalWidth)/2+"px, "+Math.max(0,window.innerHeight-36-p.naturalHeight)/2+"px, 0)";setTimeout(function(){E.setAttribute("style","transition: transform .3s ease-in-out;transform: "+T),setTimeout(function(){E.parentElement.scrollTo((E.parentElement.scrollWidth-E.parentElement.clientWidth)/2,(E.parentElement.scrollHeight-E.parentElement.clientHeight)/2)},400)});var N=document.querySelector(".vditor-img__btn");N.addEventListener("click",function(){var R=parseInt(N.getAttribute("data-deg"),10)+90;R/90%2==1&&p.naturalWidth>E.parentElement.clientHeight?E.style.transform="translate3d("+Math.max(0,window.innerWidth-p.naturalWidth)/2+"px, "+(p.naturalWidth/2-p.naturalHeight/2)+"px, 0) rotateZ("+R+"deg)":E.style.transform=T+" rotateZ("+R+"deg)",N.setAttribute("data-deg",R.toString()),setTimeout(function(){E.parentElement.scrollTo((E.parentElement.scrollWidth-E.parentElement.clientWidth)/2,(E.parentElement.scrollHeight-E.parentElement.clientHeight)/2)},400)})}},312:(x,h,v)=>{v.d(h,{Y:()=>m});var g=v(54),p=v(578),m=function(A,f){f===void 0&&(f=g.g.STATIC_PATH.highlight),g.g.CODE_THEME.includes(A)||(A="github");var E=document.getElementById("vditorHljsStyle"),T=f+"/styles/"+A+".css";E?E.href!==T&&(E.remove(),(0,p.c)(T,"vditorHljsStyle")):(0,p.c)(T,"vditorHljsStyle")}},227:(x,h,v)=>{v.d(h,{Z:()=>p});var g=v(578),p=function(m,A){if(m&&A){var f=document.getElementById("vditorContentTheme"),E=A+"/"+m+".css";f?f.getAttribute("href")!==E&&(f.remove(),(0,g.c)(E,"vditorContentTheme")):(0,g.c)(E,"vditorContentTheme")}}},526:(x,h,v)=>{v.d(h,{G:()=>p,J:()=>g});var g=function(m,A){if(document.getElementById(A))return!1;var f=new XMLHttpRequest;f.open("GET",m,!1),f.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),f.send("");var E=document.createElement("script");E.type="text/javascript",E.text=f.responseText,E.id=A,document.head.appendChild(E)},p=function(m,A){return new Promise(function(f,E){if(document.getElementById(A))return f(),!1;var T=document.createElement("script");T.src=m,T.async=!0,document.head.appendChild(T),T.onload=function(){if(document.getElementById(A))return T.remove(),f(),!1;T.id=A,f()}})}},578:(x,h,v)=>{v.d(h,{c:()=>g});var g=function(p,m){if(!document.getElementById(m)){var A=document.createElement("link");A.id=m,A.rel="stylesheet",A.type="text/css",A.href=p,document.getElementsByTagName("head")[0].appendChild(A)}}},51:(x,h,v)=>{v.d(h,{X:()=>g});var g=function(p){return p.replace(/\u00a0/g," ")}},794:(x,h,v)=>{v.d(h,{G6:()=>g,Le:()=>A,i7:()=>T,ns:()=>E,pK:()=>m,vU:()=>p,yl:()=>f});var g=function(){return navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1},p=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},m=function(){try{return typeof localStorage<"u"}catch{return!1}},A=function(){return navigator.userAgent.indexOf("iPhone")>-1?"touchstart":"click"},f=function(N){return navigator.platform.toUpperCase().indexOf("MAC")>=0?!(!N.metaKey||N.ctrlKey):!(N.metaKey||!N.ctrlKey)},E=function(N){return/Mac/.test(navigator.platform)||navigator.platform==="iPhone"?N.indexOf("⇧")>-1&&p()&&(N=N.replace(";",":").replace("=","+").replace("-","_")):(N=(N=N.startsWith("⌘")?N.replace("⌘","⌘+"):N.startsWith("⌥")&&N.substr(1,1)!=="⌘"?N.replace("⌥","⌥+"):N.replace("⇧⌘","⌘+⇧+").replace("⌥⌘","⌥+⌘+")).replace("⌘","Ctrl").replace("⇧","Shift").replace("⌥","Alt")).indexOf("Shift")>-1&&(N=N.replace(";",":").replace("=","+").replace("-","_")),N},T=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}},827:(x,h,v)=>{v.d(h,{DX:()=>R,E2:()=>m,F9:()=>E,JQ:()=>p,O9:()=>A,a1:()=>f,fb:()=>N,lG:()=>T});var g=v(64),p=function(P,U){for(var D=N(P,U),I=!1,S=!1;D&&!D.classList.contains("vditor-reset")&&!S;)(I=N(D.parentElement,U))?D=I:S=!0;return D||!1},m=function(P,U){for(var D=(0,g.S)(P,U),I=!1,S=!1;D&&!D.classList.contains("vditor-reset")&&!S;)(I=(0,g.S)(D.parentElement,U))?D=I:S=!0;return D||!1},A=function(P){var U=m(P,"UL"),D=m(P,"OL"),I=U;return D&&(!U||U&&D.contains(U))&&(I=D),I},f=function(P,U,D){if(!P)return!1;P.nodeType===3&&(P=P.parentElement);for(var I=P,S=!1;I&&!S&&!I.classList.contains("vditor-reset");)I.getAttribute(U)===D?S=!0:I=I.parentElement;return S&&I},E=function(P){if(!P)return!1;P.nodeType===3&&(P=P.parentElement);var U=P,D=!1,I=f(P,"data-block","0");if(I)return I;for(;U&&!D&&!U.classList.contains("vditor-reset");)U.tagName==="H1"||U.tagName==="H2"||U.tagName==="H3"||U.tagName==="H4"||U.tagName==="H5"||U.tagName==="H6"||U.tagName==="P"||U.tagName==="BLOCKQUOTE"||U.tagName==="OL"||U.tagName==="UL"?D=!0:U=U.parentElement;return D&&U},T=function(P,U){if(!P)return!1;P.nodeType===3&&(P=P.parentElement);for(var D=P,I=!1;D&&!I&&!D.classList.contains("vditor-reset");)D.nodeName===U?I=!0:D=D.parentElement;return I&&D},N=function(P,U){if(!P)return!1;P.nodeType===3&&(P=P.parentElement);for(var D=P,I=!1;D&&!I&&!D.classList.contains("vditor-reset");)D.classList.contains(U)?I=!0:D=D.parentElement;return I&&D},R=function(P){for(;P&&P.lastChild;)P=P.lastChild;return P}},64:(x,h,v)=>{v.d(h,{S:()=>g,W:()=>p});var g=function(m,A){if(!m)return!1;m.nodeType===3&&(m=m.parentElement);for(var f=m,E=!1;f&&!E&&!f.classList.contains("vditor-reset");)f.nodeName.indexOf(A)===0?E=!0:f=f.parentElement;return E&&f},p=function(m){var A=g(m,"H");return!(!A||A.tagName.length!==2||A.tagName==="HR")&&A}},640:(x,h,v)=>{v.d(h,{T:()=>g});var g=function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];for(var A={},f=function(T){for(var N in T)T.hasOwnProperty(N)&&(Object.prototype.toString.call(T[N])==="[object Object]"?A[N]=g(A[N],T[N]):A[N]=T[N])},E=0;E<p.length;E++)f(p[E]);return A}},393:(x,h,v)=>{v.d(h,{$j:()=>R,Gb:()=>E,Hc:()=>T,Ny:()=>f,ib:()=>P,im:()=>N,oC:()=>U,zh:()=>A});var g=v(54),p=v(794),m=v(827),A=function(D){var I,S=D[D.currentMode].element;return getSelection().rangeCount>0&&(I=getSelection().getRangeAt(0),S.isEqualNode(I.startContainer)||S.contains(I.startContainer))?I:D[D.currentMode].range?D[D.currentMode].range:(S.focus(),(I=S.ownerDocument.createRange()).setStart(S,0),I.collapse(!0),I)},f=function(D){var I=window.getSelection().getRangeAt(0);if(!D.contains(I.startContainer)&&!(0,m.fb)(I.startContainer,"vditor-panel--none"))return{left:0,top:0};var S,Z=D.parentElement.getBoundingClientRect();if(I.getClientRects().length===0)if(I.startContainer.nodeType===3){var W=I.startContainer.parentElement;if(!(W&&W.getClientRects().length>0))return{left:0,top:0};S=W.getClientRects()[0]}else{var le=I.startContainer.children;if(le[I.startOffset]&&le[I.startOffset].getClientRects().length>0)S=le[I.startOffset].getClientRects()[0];else if(I.startContainer.childNodes.length>0){var de=I.cloneRange();I.selectNode(I.startContainer.childNodes[Math.max(0,I.startOffset-1)]),S=I.getClientRects()[0],I.setEnd(de.endContainer,de.endOffset),I.setStart(de.startContainer,de.startOffset)}else S=I.startContainer.getClientRects()[0];if(!S){for(var be=I.startContainer.childNodes[I.startOffset];!be.getClientRects||be.getClientRects&&be.getClientRects().length===0;)be=be.parentElement;S=be.getClientRects()[0]}}else S=I.getClientRects()[0];return{left:S.left-Z.left,top:S.top-Z.top}},E=function(D,I){if(!I){if(getSelection().rangeCount===0)return!1;I=getSelection().getRangeAt(0)}var S=I.commonAncestorContainer;return D.isEqualNode(S)||D.contains(S)},T=function(D){var I=window.getSelection();I.removeAllRanges(),I.addRange(D)},N=function(D,I,S){var Z={end:0,start:0};if(!S){if(getSelection().rangeCount===0)return Z;S=window.getSelection().getRangeAt(0)}if(E(I,S)){var W=S.cloneRange();D.childNodes[0]&&D.childNodes[0].childNodes[0]?W.setStart(D.childNodes[0].childNodes[0],0):W.selectNodeContents(D),W.setEnd(S.startContainer,S.startOffset),Z.start=W.toString().length,Z.end=Z.start+S.toString().length}return Z},R=function(D,I,S){var Z=0,W=0,le=S.childNodes[W],de=!1,be=!1;D=Math.max(0,D),I=Math.max(0,I);var we=S.ownerDocument.createRange();for(we.setStart(le||S,0),we.collapse(!0);!be&&le;){var De=Z+le.textContent.length;if(!de&&D>=Z&&D<=De&&(D===0?we.setStart(le,0):le.childNodes[0].nodeType===3?we.setStart(le.childNodes[0],D-Z):le.nextSibling?we.setStartBefore(le.nextSibling):we.setStartAfter(le),de=!0,D===I)){be=!0;break}de&&I>=Z&&I<=De&&(I===0?we.setEnd(le,0):le.childNodes[0].nodeType===3?we.setEnd(le.childNodes[0],I-Z):le.nextSibling?we.setEndBefore(le.nextSibling):we.setEndAfter(le),be=!0),Z=De,le=S.childNodes[++W]}return!be&&S.childNodes[W-1]&&we.setStartBefore(S.childNodes[W-1]),T(we),we},P=function(D,I){var S=D.querySelector("wbr");if(S){if(S.previousElementSibling)if(S.previousElementSibling.isSameNode(S.previousSibling)){if(S.previousElementSibling.lastChild)return I.setStartBefore(S),I.collapse(!0),T(I),!(0,p.i7)()||S.previousElementSibling.tagName!=="EM"&&S.previousElementSibling.tagName!=="STRONG"&&S.previousElementSibling.tagName!=="S"||(I.insertNode(document.createTextNode(g.g.ZWSP)),I.collapse(!1)),void S.remove();I.setStartAfter(S.previousElementSibling)}else I.setStart(S.previousSibling,S.previousSibling.textContent.length);else S.previousSibling?I.setStart(S.previousSibling,S.previousSibling.textContent.length):S.nextSibling?S.nextSibling.nodeType===3?I.setStart(S.nextSibling,0):I.setStartBefore(S.nextSibling):I.setStart(S.parentElement,0);I.collapse(!0),S.remove(),T(I)}},U=function(D,I){var S=document.createElement("div");S.innerHTML=D;var Z=S.querySelectorAll("p");Z.length===1&&!Z[0].previousSibling&&!Z[0].nextSibling&&I[I.currentMode].element.children.length>0&&S.firstElementChild.tagName==="P"&&(D=Z[0].innerHTML.trim());var W=document.createElement("div");W.innerHTML=D;var le=A(I);if(le.toString()!==""&&(I[I.currentMode].preventInput=!0,document.execCommand("delete",!1,"")),W.firstElementChild&&W.firstElementChild.getAttribute("data-block")==="0"){W.lastElementChild.insertAdjacentHTML("beforeend","<wbr>");var de=(0,m.F9)(le.startContainer);de?de.insertAdjacentHTML("afterend",W.innerHTML):I[I.currentMode].element.insertAdjacentHTML("beforeend",W.innerHTML),P(I[I.currentMode].element,le)}else{var be=document.createElement("template");be.innerHTML=D,le.insertNode(be.content.cloneNode(!0)),le.collapse(!1),T(le)}}}},y={};function b(x){var h=y[x];if(h!==void 0)return h.exports;var v=y[x]={exports:{}};return l[x](v,v.exports,b),v.exports}b.d=(x,h)=>{for(var v in h)b.o(h,v)&&!b.o(x,v)&&Object.defineProperty(x,v,{enumerable:!0,get:h[v]})},b.o=(x,h)=>Object.prototype.hasOwnProperty.call(x,h),b.r=x=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})};var C={};return(()=>{b.d(C,{default:()=>ya});var x,h=b(872),v=b(54),g=b(51),p=function(e){return e.currentMode==="sv"?(0,g.X)((e.sv.element.textContent+`
`).replace(/\n\n$/,`
`)):e.currentMode==="wysiwyg"?e.lute.VditorDOM2Md(e.wysiwyg.element.innerHTML):e.currentMode==="ir"?e.lute.VditorIRDOM2Md(e.ir.element.innerHTML):""},m=b(526),A=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-devtools",this.element.innerHTML='<div class="vditor-reset--error"></div><div style="height: 100%;"></div>'}return e.prototype.renderEchart=function(t){var n=this;t.devtools.element.style.display==="block"&&(0,m.G)(t.options.staticPath.echarts,"vditorEchartsScript").then(function(){n.ASTChart||(n.ASTChart=echarts.init(t.devtools.element.lastElementChild));try{n.element.lastElementChild.style.display="block",n.element.firstElementChild.innerHTML="",n.ASTChart.setOption({series:[{data:JSON.parse(t.lute.RenderEChartsJSON(p(t))),initialTreeDepth:-1,label:{align:"left",backgroundColor:"rgba(68, 77, 86, .68)",borderRadius:3,color:"#d1d5da",fontSize:12,lineHeight:12,offset:[9,12],padding:[2,4,2,4],position:"top",verticalAlign:"middle"},lineStyle:{color:"#4285f4",type:"curve",width:1},orient:"vertical",roam:!0,type:"tree"}],toolbox:{bottom:25,emphasis:{iconStyle:{color:"#4285f4"}},feature:{restore:{show:!0},saveAsImage:{show:!0}},right:15,show:!0}}),n.ASTChart.resize()}catch(i){n.element.lastElementChild.style.display="none",n.element.firstElementChild.innerHTML=i}})},e}(),f=b(794),E=function(e,t){t.forEach(function(n){if(e[n]){var i=e[n].children[0];i&&i.classList.contains("vditor-menu--current")&&i.classList.remove("vditor-menu--current")}})},T=function(e,t){t.forEach(function(n){if(e[n]){var i=e[n].children[0];i&&!i.classList.contains("vditor-menu--current")&&i.classList.add("vditor-menu--current")}})},N=function(e,t){t.forEach(function(n){if(e[n]){var i=e[n].children[0];i&&i.classList.contains(v.g.CLASS_MENU_DISABLED)&&i.classList.remove(v.g.CLASS_MENU_DISABLED)}})},R=function(e,t){t.forEach(function(n){if(e[n]){var i=e[n].children[0];i&&!i.classList.contains(v.g.CLASS_MENU_DISABLED)&&i.classList.add(v.g.CLASS_MENU_DISABLED)}})},P=function(e,t){t.forEach(function(n){e[n]&&e[n]&&(e[n].style.display="none")})},U=function(e,t){t.forEach(function(n){e[n]&&e[n]&&(e[n].style.display="block")})},D=function(e,t,n){t.includes("subToolbar")&&(e.toolbar.element.querySelectorAll(".vditor-hint").forEach(function(i){n&&i.isEqualNode(n)||(i.style.display="none")}),e.toolbar.elements.emoji&&(e.toolbar.elements.emoji.lastElementChild.style.display="none")),t.includes("hint")&&(e.hint.element.style.display="none"),e.wysiwyg.popover&&t.includes("popover")&&(e.wysiwyg.popover.style.display="none")},I=function(e,t,n,i){n.addEventListener((0,f.Le)(),function(r){r.preventDefault(),r.stopPropagation(),n.classList.contains(v.g.CLASS_MENU_DISABLED)||(e.toolbar.element.querySelectorAll(".vditor-hint--current").forEach(function(s){s.classList.remove("vditor-hint--current")}),t.style.display==="block"?t.style.display="none":(D(e,["subToolbar","hint","popover"],n.parentElement.parentElement),n.classList.contains("vditor-tooltipped")||n.classList.add("vditor-hint--current"),t.style.display="block",e.toolbar.element.getBoundingClientRect().right-n.getBoundingClientRect().right<250?t.classList.add("vditor-panel--left"):t.classList.remove("vditor-panel--left")))})},S=b(827),Z=b(64),W=function(e,t,n,i){i&&console.log(e+" - "+n+": "+t)},le=b(478),de=b(314),be=b(730),we=b(66),De=b(218),Te=b(702),xe=b(466),Ne=b(40),Ue=b(563),Fe=b(749),tt=b(408),Be=function(e,t){if(e)if(e.parentElement.getAttribute("data-type")!=="html-block"){var n=e.firstElementChild.className.replace("language-","");n==="abc"?(0,le.Q)(e,t.options.staticPath.abc):n==="mermaid"?(0,Ne.i)(e,t.options.staticPath.mermaid,t.options.theme):n==="markmap"?(0,Ue.K)(e,t.options.staticPath.markmap,t.options.theme):n==="flowchart"?(0,we.P)(e,t.options.staticPath.flowchart):n==="echarts"?(0,de.p)(e,t.options.staticPath.echarts,t.options.theme):n==="mindmap"?(0,Fe.P)(e,t.options.staticPath.echarts,t.options.theme):n==="plantuml"?(0,tt.B)(e,t.options.staticPath.plantuml):n==="graphviz"?(0,De.v)(e,t.options.staticPath.graphviz):n==="math"?(0,xe.H)(e,{katex:t.options.staticPath.katex,mathjax:t.options.staticPath.mathjax,math:t.options.preview.math}):((0,Te.s)(Object.assign({},t.options.preview.hljs),e,t.options.staticPath.highlight),(0,be.O)(e)),e.setAttribute("data-render","1")}else e.setAttribute("data-render","1")},H=b(393),pe=function(e){if(e.currentMode!=="sv"){var t=e[e.currentMode].element,n=e.outline.render(e);n===""&&(n="[ToC]"),t.querySelectorAll('[data-type="toc-block"]').forEach(function(i){i.innerHTML=n,(0,xe.H)(i,{katex:e.options.staticPath.katex,mathjax:e.options.staticPath.mathjax,math:e.options.preview.math})})}},ve=function(e,t){var n=(0,S.lG)(e.target,"SPAN");if(n&&(0,S.fb)(n,"vditor-toc")){var i=t[t.currentMode].element.querySelector("#"+n.getAttribute("data-target-id"));if(i)if(t.options.height==="auto"){var r=i.offsetTop+t.element.offsetTop;t.options.toolbarConfig.pin||(r+=t.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,r)}else t.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,t.element.offsetTop),t[t.currentMode].element.scrollTop=i.offsetTop}},J=function(e,t,n,i){if(e.previousElementSibling&&e.previousElementSibling.classList.contains("vditor-toc")){if(n.key==="Backspace"&&(0,H.im)(e,t[t.currentMode].element,i).start===0)return e.previousElementSibling.remove(),Ae(t),!0;if(At(t,n,i,e,e.previousElementSibling))return!0}if(e.nextElementSibling&&e.nextElementSibling.classList.contains("vditor-toc")){if(n.key==="Delete"&&(0,H.im)(e,t[t.currentMode].element,i).start>=e.textContent.trimRight().length)return e.nextElementSibling.remove(),Ae(t),!0;if(Ft(t,n,i,e,e.nextElementSibling))return!0}if(n.key==="Backspace"||n.key==="Delete"){var r=(0,S.fb)(i.startContainer,"vditor-toc");if(r)return r.remove(),Ae(t),!0}},me=function(e,t,n,i){n===void 0&&(n=!1);var r=(0,S.F9)(t.startContainer);if(r&&!n&&r.getAttribute("data-type")!=="code-block"){if(_n(r.innerHTML)&&r.previousElementSibling||Mn(r.innerHTML))return;for(var s=(0,H.im)(r,e.ir.element,t).start,d=!0,w=s-1;w>r.textContent.substr(0,s).lastIndexOf(`
`);w--)if(r.textContent.charAt(w)!==" "&&r.textContent.charAt(w)!=="	"){d=!1;break}s===0&&(d=!1);var M=!0;for(w=s-1;w<r.textContent.length;w++)if(r.textContent.charAt(w)!==" "&&r.textContent.charAt(w)!==`
`){M=!1;break}if(d)return void(typeof e.options.input=="function"&&e.options.input(p(e)));if(M&&!(0,S.fb)(t.startContainer,"vditor-ir__marker")){var _=t.startContainer.previousSibling;return _&&_.nodeType!==3&&_.classList.contains("vditor-ir__node--expand")&&_.classList.remove("vditor-ir__node--expand"),void(typeof e.options.input=="function"&&e.options.input(p(e)))}}if(e.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(ce){ce.classList.remove("vditor-ir__node--expand")}),r||(r=e.ir.element),!r.querySelector("wbr")){var L=(0,S.fb)(t.startContainer,"vditor-ir__preview");L?L.previousElementSibling.insertAdjacentHTML("beforeend","<wbr>"):t.insertNode(document.createElement("wbr"))}r.querySelectorAll("[style]").forEach(function(ce){ce.removeAttribute("style")}),r.getAttribute("data-type")==="link-ref-defs-block"&&(r=e.ir.element);var F,$=r.isEqualNode(e.ir.element),ee=(0,S.a1)(r,"data-type","footnotes-block"),j="";if($)j=r.innerHTML;else{var Q=(0,Z.S)(t.startContainer,"BLOCKQUOTE"),oe=(0,S.O9)(t.startContainer);if(oe&&(r=oe),Q&&(!oe||oe&&!Q.contains(oe))&&(r=Q),ee&&(r=ee),j=r.outerHTML,r.tagName==="UL"||r.tagName==="OL"){var ne=r.previousElementSibling,ie=r.nextElementSibling;!ne||ne.tagName!=="UL"&&ne.tagName!=="OL"||(j=ne.outerHTML+j,ne.remove()),!ie||ie.tagName!=="UL"&&ie.tagName!=="OL"||(j+=ie.outerHTML,ie.remove()),j=j.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}else r.previousElementSibling&&r.previousElementSibling.textContent.replace(v.g.ZWSP,"")!==""&&i&&i.inputType==="insertParagraph"&&(j=r.previousElementSibling.outerHTML+j,r.previousElementSibling.remove());r.innerText.startsWith("```")||(e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(ce){ce&&!r.isEqualNode(ce)&&(j+=ce.outerHTML,ce.remove())}),e.ir.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(ce){ce&&!r.isEqualNode(ce)&&(j+=ce.outerHTML,ce.remove())}))}if(W("SpinVditorIRDOM",j,"argument",e.options.debugger),j=e.lute.SpinVditorIRDOM(j),W("SpinVditorIRDOM",j,"result",e.options.debugger),$)r.innerHTML=j;else if(r.outerHTML=j,ee){var te=(0,S.a1)(e.ir.element.querySelector("wbr"),"data-type","footnotes-def");if(te){var V=te.textContent,se=V.substring(1,V.indexOf("]:")),ge=e.ir.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+se+'"]');ge&&ge.setAttribute("aria-label",V.substr(se.length+3).trim().substr(0,24))}}var ue,he=e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']");he.forEach(function(ce,Ee){Ee===0?F=ce:(F.insertAdjacentHTML("beforeend",ce.innerHTML),ce.remove())}),he.length>0&&e.ir.element.insertAdjacentElement("beforeend",he[0]);var fe=e.ir.element.querySelectorAll("[data-type='footnotes-block']");fe.forEach(function(ce,Ee){Ee===0?ue=ce:(ue.insertAdjacentHTML("beforeend",ce.innerHTML),ce.remove())}),fe.length>0&&e.ir.element.insertAdjacentElement("beforeend",fe[0]),(0,H.ib)(e.ir.element,t),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(ce){Be(ce,e)}),pe(e),mt(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},X=function(e,t){if(e==="")return!1;if(e.indexOf("⇧")===-1&&e.indexOf("⌘")===-1&&e.indexOf("⌥")===-1)return!((0,f.yl)(t)||t.altKey||t.shiftKey||t.code!==e);if(e==="⇧Tab")return!((0,f.yl)(t)||t.altKey||!t.shiftKey||t.code!=="Tab");var n=e.split("");if(e.startsWith("⌥")){var i=n.length===3?n[2]:n[1];return!((n.length===3?!(0,f.yl)(t):(0,f.yl)(t))||!t.altKey||t.shiftKey||t.code!==(/^[0-9]$/.test(i)?"Digit":"Key")+i)}e==="⌘Enter"&&(n=["⌘","Enter"]);var r=n.length>2&&n[0]==="⇧",s=r?n[2]:n[1];return!r||!(0,f.vU)()&&/Mac/.test(navigator.platform)||(s==="-"?s="_":s==="="&&(s="+")),!(!(0,f.yl)(t)||t.key.toLowerCase()!==s.toLowerCase()||t.altKey||!(!r&&!t.shiftKey||r&&t.shiftKey))},Y=function(e,t){t.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(d){d.classList.remove("vditor-ir__node--expand")});var n=(0,S.JQ)(e.startContainer,"vditor-ir__node"),i=!e.collapsed&&(0,S.JQ)(e.endContainer,"vditor-ir__node");if(e.collapsed||n&&n===i){n&&(n.classList.add("vditor-ir__node--expand"),n.classList.remove("vditor-ir__node--hidden"),(0,H.Hc)(e));var r=function(d){var w=d.startContainer;if(w.nodeType===3&&w.nodeValue.length!==d.startOffset)return!1;for(var M=w.nextSibling;M&&M.textContent==="";)M=M.nextSibling;if(!M){var _=(0,S.fb)(w,"vditor-ir__marker");if(_&&!_.nextSibling){var L=w.parentElement.parentElement.nextSibling;if(L&&L.nodeType!==3&&L.classList.contains("vditor-ir__node"))return L}return!1}return!(!M||M.nodeType===3||!M.classList.contains("vditor-ir__node")||M.getAttribute("data-block"))&&M}(e);if(r)return r.classList.add("vditor-ir__node--expand"),void r.classList.remove("vditor-ir__node--hidden");var s=function(d){var w=d.startContainer,M=w.previousSibling;return!(w.nodeType!==3||d.startOffset!==0||!M||M.nodeType===3||!M.classList.contains("vditor-ir__node")||M.getAttribute("data-block"))&&M}(e);return s?(s.classList.add("vditor-ir__node--expand"),void s.classList.remove("vditor-ir__node--hidden")):void 0}},re=b(863),Ce=function(e,t){var n,i=getSelection().getRangeAt(0).cloneRange(),r=i.startContainer;i.startContainer.nodeType!==3&&i.startContainer.tagName==="DIV"&&(r=i.startContainer.childNodes[i.startOffset-1]);var s=(0,S.a1)(r,"data-block","0");if(s&&t&&(t.inputType==="deleteContentBackward"||t.data===" ")){for(var d=(0,H.im)(s,e.sv.element,i).start,w=!0,M=d-1;M>s.textContent.substr(0,d).lastIndexOf(`
`);M--)if(s.textContent.charAt(M)!==" "&&s.textContent.charAt(M)!=="	"){w=!1;break}if(d===0&&(w=!1),w)return void Xe(e);if(t.inputType==="deleteContentBackward"){var _=(0,S.a1)(r,"data-type","code-block-open-marker")||(0,S.a1)(r,"data-type","code-block-close-marker");if(_){var L;if(_.getAttribute("data-type")==="code-block-close-marker"&&(L=Qt(r,"code-block-open-marker"))||_.getAttribute("data-type")==="code-block-open-marker"&&(L=Qt(r,"code-block-close-marker",!1)))return L.textContent=_.textContent,void Xe(e)}var F=(0,S.a1)(r,"data-type","math-block-open-marker");if(F){var $=F.nextElementSibling.nextElementSibling;return void($&&$.getAttribute("data-type")==="math-block-close-marker"&&($.remove(),Xe(e)))}s.querySelectorAll('[data-type="code-block-open-marker"]').forEach(function(V){V.textContent.length===1&&V.remove()}),s.querySelectorAll('[data-type="code-block-close-marker"]').forEach(function(V){V.textContent.length===1&&V.remove()});var ee=(0,S.a1)(r,"data-type","heading-marker");if(ee&&ee.textContent.indexOf("#")===-1)return void Xe(e)}if((t.data===" "||t.inputType==="deleteContentBackward")&&((0,S.a1)(r,"data-type","padding")||(0,S.a1)(r,"data-type","li-marker")||(0,S.a1)(r,"data-type","task-marker")||(0,S.a1)(r,"data-type","blockquote-marker")))return void Xe(e)}if(s&&s.textContent.trimRight()==="$$")Xe(e);else{s||(s=e.sv.element),((n=s.firstElementChild)===null||n===void 0?void 0:n.getAttribute("data-type"))==="link-ref-defs-block"&&(s=e.sv.element),(0,S.a1)(r,"data-type","footnotes-link")&&(s=e.sv.element),s.textContent.indexOf(Lute.Caret)===-1&&i.insertNode(document.createTextNode(Lute.Caret)),s.querySelectorAll("[style]").forEach(function(V){V.removeAttribute("style")}),s.querySelectorAll("font").forEach(function(V){V.outerHTML=V.innerHTML});var j,Q=s.textContent,oe=s.isEqualNode(e.sv.element);oe?Q=s.textContent:(s.previousElementSibling&&(Q=s.previousElementSibling.textContent+Q,s.previousElementSibling.remove()),s.previousElementSibling&&Q.indexOf(`---
`)===0&&(Q=s.previousElementSibling.textContent+Q,s.previousElementSibling.remove()),s.innerText.startsWith("```")||(e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(V,se){se===0&&V&&!s.isEqualNode(V.parentElement)&&(Q+=`
`+V.parentElement.textContent,V.parentElement.remove())}),e.sv.element.querySelectorAll("[data-type='footnotes-link']").forEach(function(V,se){se===0&&V&&!s.isEqualNode(V.parentElement)&&(Q+=`
`+V.parentElement.textContent,V.parentElement.remove())}))),Q=cr(Q,e),oe?s.innerHTML=Q:s.outerHTML=Q;var ne,ie=e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']");ie.forEach(function(V,se){se===0?j=V.parentElement:(j.lastElementChild.remove(),j.insertAdjacentHTML("beforeend",""+V.parentElement.innerHTML),V.parentElement.remove())}),ie.length>0&&e.sv.element.insertAdjacentElement("beforeend",j);var te=e.sv.element.querySelectorAll("[data-type='footnotes-link']");te.forEach(function(V,se){se===0?ne=V.parentElement:(ne.lastElementChild.remove(),ne.insertAdjacentHTML("beforeend",""+V.parentElement.innerHTML),V.parentElement.remove())}),te.length>0&&e.sv.element.insertAdjacentElement("beforeend",ne),(0,H.ib)(e.sv.element,i),Ge(e),Xe(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})}},Se=b(227),Ve=function(e){e.options.theme==="dark"?e.element.classList.toggle("vditor--dark",!0):e.element.classList.toggle("vditor--dark",!1)},Le=function(e){var t=window.innerWidth<=v.g.MOBILE_WIDTH?10:35;if(e.wysiwyg.element.parentElement.style.display!=="none"){var n=(e.wysiwyg.element.parentElement.clientWidth-e.options.preview.maxWidth)/2;e.wysiwyg.element.style.padding="10px "+Math.max(t,n)+"px"}e.ir.element.parentElement.style.display!=="none"&&(n=(e.ir.element.parentElement.clientWidth-e.options.preview.maxWidth)/2,e.ir.element.style.padding="10px "+Math.max(t,n)+"px"),e.preview.element.style.display!=="block"?e.toolbar.element.style.paddingLeft=Math.max(5,parseInt(e[e.currentMode].element.style.paddingLeft||"0",10)+(e.options.outline.position==="left"?e.outline.element.offsetWidth:0))+"px":e.toolbar.element.style.paddingLeft=5+(e.options.outline.position==="left"?e.outline.element.offsetWidth:0)+"px"},_e=function(e){if(e.options.typewriterMode){var t=window.innerHeight;typeof e.options.height=="number"?(t=e.options.height,typeof e.options.minHeight=="number"&&(t=Math.max(t,e.options.minHeight)),t=Math.min(window.innerHeight,t)):t=e.element.clientHeight,e.element.classList.contains("vditor--fullscreen")&&(t=window.innerHeight),e[e.currentMode].element.style.setProperty("--editor-bottom",(t-e.toolbar.element.offsetHeight)/2+"px")}};function ye(){window.removeEventListener("resize",x)}var lt,Yt,Bt=function(e){_e(e),ye(),window.addEventListener("resize",x=function(){Le(e),_e(e)});var t=(0,f.pK)()&&localStorage.getItem(e.options.cache.id);return e.options.cache.enable&&t||(e.options.value?t=e.options.value:e.originalInnerHTML?t=e.lute.HTML2Md(e.originalInnerHTML):e.options.cache.enable||(t="")),t||""},kt=function(e){clearTimeout(e[e.currentMode].hlToolbarTimeoutId),e[e.currentMode].hlToolbarTimeoutId=window.setTimeout(function(){if(e[e.currentMode].element.getAttribute("contenteditable")!=="false"&&(0,H.Gb)(e[e.currentMode].element)){E(e.toolbar.elements,v.g.EDIT_TOOLBARS),N(e.toolbar.elements,v.g.EDIT_TOOLBARS);var t=(0,H.zh)(e),n=t.startContainer;t.startContainer.nodeType===3&&(n=t.startContainer.parentElement),n.classList.contains("vditor-reset")&&(n=n.childNodes[t.startOffset]),(e.currentMode==="sv"?(0,S.a1)(n,"data-type","heading"):(0,Z.W)(n))&&T(e.toolbar.elements,["headings"]),(e.currentMode==="sv"?(0,S.a1)(n,"data-type","blockquote"):(0,S.lG)(n,"BLOCKQUOTE"))&&T(e.toolbar.elements,["quote"]),(0,S.a1)(n,"data-type","strong")&&T(e.toolbar.elements,["bold"]),(0,S.a1)(n,"data-type","em")&&T(e.toolbar.elements,["italic"]),(0,S.a1)(n,"data-type","s")&&T(e.toolbar.elements,["strike"]),(0,S.a1)(n,"data-type","a")&&T(e.toolbar.elements,["link"]);var i=(0,S.lG)(n,"LI");i?(i.classList.contains("vditor-task")?T(e.toolbar.elements,["check"]):i.parentElement.tagName==="OL"?T(e.toolbar.elements,["ordered-list"]):i.parentElement.tagName==="UL"&&T(e.toolbar.elements,["list"]),N(e.toolbar.elements,["outdent","indent"])):R(e.toolbar.elements,["outdent","indent"]),(0,S.a1)(n,"data-type","code-block")&&(R(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),T(e.toolbar.elements,["code"])),(0,S.a1)(n,"data-type","code")&&(R(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),T(e.toolbar.elements,["inline-code"])),(0,S.a1)(n,"data-type","table")&&R(e.toolbar.elements,["headings","list","ordered-list","check","line","quote","code","table"])}},200)},Ie=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),clearTimeout(e.wysiwyg.afterRenderTimeoutId),e.wysiwyg.afterRenderTimeoutId=window.setTimeout(function(){if(!e.wysiwyg.composingLock){var n=p(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,f.pK)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},jt=function(e){for(var t="",n=e.nextSibling;n;)n.nodeType===3?t+=n.textContent:t+=n.outerHTML,n=n.nextSibling;return t},xt=function(e){for(var t="",n=e.previousSibling;n;)t=n.nodeType===3?n.textContent+t:n.outerHTML+t,n=n.previousSibling;return t},$e=function(e,t){Array.from(e.wysiwyg.element.childNodes).find(function(n){if(n.nodeType===3){var i=document.createElement("p");i.setAttribute("data-block","0"),i.textContent=n.textContent;var r=t.startContainer.nodeType===3?t.startOffset:n.textContent.length;return n.parentNode.insertBefore(i,n),n.remove(),t.setStart(i.firstChild,Math.min(i.firstChild.textContent.length,r)),t.collapse(!0),(0,H.Hc)(t),!0}if(!n.getAttribute("data-block"))return n.tagName==="P"?n.remove():(n.tagName==="DIV"?(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.innerHTML+"</p>"):n.tagName==="BR"?n.outerHTML='<p data-block="0">'+n.outerHTML+"<wbr></p>":(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.outerHTML+"</p>"),(0,H.ib)(e.wysiwyg.element,t),t=getSelection().getRangeAt(0)),!0})},yt=function(e,t){var n=(0,H.zh)(e),i=(0,S.F9)(n.startContainer);i||(i=n.startContainer.childNodes[n.startOffset]),i||e.wysiwyg.element.children.length!==0||(i=e.wysiwyg.element),i&&!i.classList.contains("vditor-wysiwyg__block")&&(n.insertNode(document.createElement("wbr")),i.innerHTML.trim()==="<wbr>"&&(i.innerHTML="<wbr><br>"),i.tagName==="BLOCKQUOTE"||i.classList.contains("vditor-reset")?i.innerHTML="<"+t+' data-block="0">'+i.innerHTML.trim()+"</"+t+">":i.outerHTML="<"+t+' data-block="0">'+i.innerHTML.trim()+"</"+t+">",(0,H.ib)(e.wysiwyg.element,n),pe(e))},Ut=function(e){var t=getSelection().getRangeAt(0),n=(0,S.F9)(t.startContainer);n||(n=t.startContainer.childNodes[t.startOffset]),n&&(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.innerHTML+"</p>",(0,H.ib)(e.wysiwyg.element,t)),e.wysiwyg.popover.style.display="none"},Ye=function(e,t,n){n===void 0&&(n=!0);var i=e.previousElementSibling,r=i.ownerDocument.createRange();i.tagName==="CODE"?(i.style.display="inline-block",n?r.setStart(i.firstChild,1):r.selectNodeContents(i)):(i.style.display="block",i.firstChild.firstChild||i.firstChild.appendChild(document.createTextNode("")),r.selectNodeContents(i.firstChild)),n?r.collapse(!0):r.collapse(!1),(0,H.Hc)(r),e.firstElementChild.classList.contains("language-mindmap")||Ge(t)},Ze=function(e,t){if(X("⇧⌘X",t)){var n=e.wysiwyg.popover.querySelector('[data-type="remove"]');return n&&n.click(),t.preventDefault(),!0}},k=function(e){clearTimeout(e.wysiwyg.hlToolbarTimeoutId),e.wysiwyg.hlToolbarTimeoutId=window.setTimeout(function(){if(e.wysiwyg.element.getAttribute("contenteditable")!=="false"&&(0,H.Gb)(e.wysiwyg.element)){E(e.toolbar.elements,v.g.EDIT_TOOLBARS),N(e.toolbar.elements,v.g.EDIT_TOOLBARS);var t=getSelection().getRangeAt(0),n=t.startContainer;n=t.startContainer.nodeType===3?t.startContainer.parentElement:n.childNodes[t.startOffset>=n.childNodes.length?n.childNodes.length-1:t.startOffset];var i=(0,S.a1)(n,"data-type","footnotes-block");if(i)return e.wysiwyg.popover.innerHTML="",q(i,e),void c(e,i);var r=(0,S.lG)(n,"LI");r?(r.classList.contains("vditor-task")?T(e.toolbar.elements,["check"]):r.parentElement.tagName==="OL"?T(e.toolbar.elements,["ordered-list"]):r.parentElement.tagName==="UL"&&T(e.toolbar.elements,["list"]),N(e.toolbar.elements,["outdent","indent"])):R(e.toolbar.elements,["outdent","indent"]),(0,S.lG)(n,"BLOCKQUOTE")&&T(e.toolbar.elements,["quote"]),((0,S.lG)(n,"B")||(0,S.lG)(n,"STRONG"))&&T(e.toolbar.elements,["bold"]),((0,S.lG)(n,"I")||(0,S.lG)(n,"EM"))&&T(e.toolbar.elements,["italic"]),((0,S.lG)(n,"STRIKE")||(0,S.lG)(n,"S"))&&T(e.toolbar.elements,["strike"]),e.wysiwyg.element.querySelectorAll(".vditor-comment--focus").forEach(function(ae){ae.classList.remove("vditor-comment--focus")});var s=(0,S.fb)(n,"vditor-comment");if(s){var d=s.getAttribute("data-cmtids").split(" ");if(d.length>1&&s.nextSibling.isSameNode(s.nextElementSibling)){var w=s.nextElementSibling.getAttribute("data-cmtids").split(" ");d.find(function(ae){if(w.includes(ae))return d=[ae],!0})}e.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(ae){ae.getAttribute("data-cmtids").indexOf(d[0])>-1&&ae.classList.add("vditor-comment--focus")})}var M=(0,S.lG)(n,"A");M&&T(e.toolbar.elements,["link"]);var _=(0,S.lG)(n,"TABLE"),L=(0,Z.W)(n);(0,S.lG)(n,"CODE")?(0,S.lG)(n,"PRE")?(R(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),T(e.toolbar.elements,["code"])):(R(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),T(e.toolbar.elements,["inline-code"])):L?(R(e.toolbar.elements,["bold"]),T(e.toolbar.elements,["headings"])):_&&R(e.toolbar.elements,["table"]);var F=(0,S.fb)(n,"vditor-toc");if(F)return e.wysiwyg.popover.innerHTML="",q(F,e),void c(e,F);var $=(0,Z.S)(n,"BLOCKQUOTE");if($&&(e.wysiwyg.popover.innerHTML="",O(t,$,e),B(t,$,e),q($,e),c(e,$)),r&&(e.wysiwyg.popover.innerHTML="",O(t,r,e),B(t,r,e),q(r,e),c(e,r)),_){e.options.lang,e.options,e.wysiwyg.popover.innerHTML="";var ee=function(){var ae=_.rows.length,je=_.rows[0].cells.length,Tt=parseInt(Ee.value,10)||ae,ht=parseInt(We.value,10)||je;if(Tt!==ae||je!==ht){if(je!==ht)for(var Br=ht-je,_t=0;_t<_.rows.length;_t++)if(Br>0)for(var jr=0;jr<Br;jr++)_t===0?_.rows[_t].lastElementChild.insertAdjacentHTML("afterend","<th> </th>"):_.rows[_t].lastElementChild.insertAdjacentHTML("afterend","<td> </td>");else for(var Hn=je-1;Hn>=ht;Hn--)_.rows[_t].cells[Hn].remove();if(ae!==Tt){var Ur=Tt-ae;if(Ur>0){for(var Dn="<tr>",Mt=0;Mt<ht;Mt++)Dn+="<td> </td>";for(var qr=0;qr<Ur;qr++)_.querySelector("tbody")?_.querySelector("tbody").insertAdjacentHTML("beforeend",Dn):_.querySelector("thead").insertAdjacentHTML("afterend",Dn+"</tr>")}else for(Mt=ae-1;Mt>=Tt;Mt--)_.rows[Mt].remove(),_.rows.length===1&&_.querySelector("tbody").remove()}}},j=function(ae){nn(_,ae),ae==="right"?(ie.classList.remove("vditor-icon--current"),te.classList.remove("vditor-icon--current"),V.classList.add("vditor-icon--current")):ae==="center"?(ie.classList.remove("vditor-icon--current"),V.classList.remove("vditor-icon--current"),te.classList.add("vditor-icon--current")):(te.classList.remove("vditor-icon--current"),V.classList.remove("vditor-icon--current"),ie.classList.add("vditor-icon--current")),(0,H.Hc)(t),Ie(e)},Q=(0,S.lG)(n,"TD"),oe=(0,S.lG)(n,"TH"),ne="left";Q?ne=Q.getAttribute("align")||"left":oe&&(ne=oe.getAttribute("align")||"center");var ie=document.createElement("button");ie.setAttribute("type","button"),ie.setAttribute("aria-label",window.VditorI18n.alignLeft+"<"+(0,f.ns)("⇧⌘L")+">"),ie.setAttribute("data-type","left"),ie.innerHTML='<svg><use xlink:href="#vditor-icon-align-left"></use></svg>',ie.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(ne==="left"?" vditor-icon--current":""),ie.onclick=function(){j("left")};var te=document.createElement("button");te.setAttribute("type","button"),te.setAttribute("aria-label",window.VditorI18n.alignCenter+"<"+(0,f.ns)("⇧⌘C")+">"),te.setAttribute("data-type","center"),te.innerHTML='<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',te.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(ne==="center"?" vditor-icon--current":""),te.onclick=function(){j("center")};var V=document.createElement("button");V.setAttribute("type","button"),V.setAttribute("aria-label",window.VditorI18n.alignRight+"<"+(0,f.ns)("⇧⌘R")+">"),V.setAttribute("data-type","right"),V.innerHTML='<svg><use xlink:href="#vditor-icon-align-right"></use></svg>',V.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(ne==="right"?" vditor-icon--current":""),V.onclick=function(){j("right")};var se=document.createElement("button");se.setAttribute("type","button"),se.setAttribute("aria-label",window.VditorI18n.insertRowBelow+"<"+(0,f.ns)("⌘=")+">"),se.setAttribute("data-type","insertRow"),se.innerHTML='<svg><use xlink:href="#vditor-icon-insert-row"></use></svg>',se.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",se.onclick=function(){var ae=getSelection().getRangeAt(0).startContainer,je=(0,S.lG)(ae,"TD")||(0,S.lG)(ae,"TH");je&&wr(e,t,je)};var ge=document.createElement("button");ge.setAttribute("type","button"),ge.setAttribute("aria-label",window.VditorI18n.insertRowAbove+"<"+(0,f.ns)("⇧⌘F")+">"),ge.setAttribute("data-type","insertRow"),ge.innerHTML='<svg><use xlink:href="#vditor-icon-insert-rowb"></use></svg>',ge.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",ge.onclick=function(){var ae=getSelection().getRangeAt(0).startContainer,je=(0,S.lG)(ae,"TD")||(0,S.lG)(ae,"TH");je&&Er(e,t,je)};var ue=document.createElement("button");ue.setAttribute("type","button"),ue.setAttribute("aria-label",window.VditorI18n.insertColumnRight+"<"+(0,f.ns)("⇧⌘=")+">"),ue.setAttribute("data-type","insertColumn"),ue.innerHTML='<svg><use xlink:href="#vditor-icon-insert-column"></use></svg>',ue.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",ue.onclick=function(){var ae=getSelection().getRangeAt(0).startContainer,je=(0,S.lG)(ae,"TD")||(0,S.lG)(ae,"TH");je&&rn(e,_,je)};var he=document.createElement("button");he.setAttribute("type","button"),he.setAttribute("aria-label",window.VditorI18n.insertColumnLeft+"<"+(0,f.ns)("⇧⌘G")+">"),he.setAttribute("data-type","insertColumn"),he.innerHTML='<svg><use xlink:href="#vditor-icon-insert-columnb"></use></svg>',he.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",he.onclick=function(){var ae=getSelection().getRangeAt(0).startContainer,je=(0,S.lG)(ae,"TD")||(0,S.lG)(ae,"TH");je&&rn(e,_,je,"beforebegin")};var fe=document.createElement("button");fe.setAttribute("type","button"),fe.setAttribute("aria-label",window.VditorI18n["delete-row"]+"<"+(0,f.ns)("⌘-")+">"),fe.setAttribute("data-type","deleteRow"),fe.innerHTML='<svg><use xlink:href="#vditor-icon-delete-row"></use></svg>',fe.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",fe.onclick=function(){var ae=getSelection().getRangeAt(0).startContainer,je=(0,S.lG)(ae,"TD")||(0,S.lG)(ae,"TH");je&&kr(e,t,je)};var ce=document.createElement("button");ce.setAttribute("type","button"),ce.setAttribute("aria-label",window.VditorI18n["delete-column"]+"<"+(0,f.ns)("⇧⌘-")+">"),ce.setAttribute("data-type","deleteColumn"),ce.innerHTML='<svg><use xlink:href="#vditor-icon-delete-column"></use></svg>',ce.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",ce.onclick=function(){var ae=getSelection().getRangeAt(0).startContainer,je=(0,S.lG)(ae,"TD")||(0,S.lG)(ae,"TH");je&&xr(e,t,_,je)},(nt=document.createElement("span")).setAttribute("aria-label",window.VditorI18n.row),nt.className="vditor-tooltipped vditor-tooltipped__n";var Ee=document.createElement("input");nt.appendChild(Ee),Ee.type="number",Ee.min="1",Ee.className="vditor-input",Ee.style.width="42px",Ee.style.textAlign="center",Ee.setAttribute("placeholder",window.VditorI18n.row),Ee.value=_.rows.length.toString(),Ee.oninput=function(){ee()},Ee.onkeydown=function(ae){if(!ae.isComposing)return ae.key==="Tab"?(We.focus(),We.select(),void ae.preventDefault()):void(Ze(e,ae)||Me(ae,t))};var Re=document.createElement("span");Re.setAttribute("aria-label",window.VditorI18n.column),Re.className="vditor-tooltipped vditor-tooltipped__n";var We=document.createElement("input");Re.appendChild(We),We.type="number",We.min="1",We.className="vditor-input",We.style.width="42px",We.style.textAlign="center",We.setAttribute("placeholder",window.VditorI18n.column),We.value=_.rows[0].cells.length.toString(),We.oninput=function(){ee()},We.onkeydown=function(ae){if(!ae.isComposing)return ae.key==="Tab"?(Ee.focus(),Ee.select(),void ae.preventDefault()):void(Ze(e,ae)||Me(ae,t))},O(t,_,e),B(t,_,e),q(_,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",ie),e.wysiwyg.popover.insertAdjacentElement("beforeend",te),e.wysiwyg.popover.insertAdjacentElement("beforeend",V),e.wysiwyg.popover.insertAdjacentElement("beforeend",ge),e.wysiwyg.popover.insertAdjacentElement("beforeend",se),e.wysiwyg.popover.insertAdjacentElement("beforeend",he),e.wysiwyg.popover.insertAdjacentElement("beforeend",ue),e.wysiwyg.popover.insertAdjacentElement("beforeend",fe),e.wysiwyg.popover.insertAdjacentElement("beforeend",ce),e.wysiwyg.popover.insertAdjacentElement("beforeend",nt),e.wysiwyg.popover.insertAdjacentHTML("beforeend"," x "),e.wysiwyg.popover.insertAdjacentElement("beforeend",Re),c(e,_)}var ft=(0,S.a1)(n,"data-type","link-ref");ft&&u(e,ft,t);var Qe=(0,S.a1)(n,"data-type","footnotes-ref");if(Qe){e.options.lang,e.options,e.wysiwyg.popover.innerHTML="",(nt=document.createElement("span")).setAttribute("aria-label",window.VditorI18n.footnoteRef+"<"+(0,f.ns)("⌥Enter")+">"),nt.className="vditor-tooltipped vditor-tooltipped__n";var et=document.createElement("input");nt.appendChild(et),et.className="vditor-input",et.setAttribute("placeholder",window.VditorI18n.footnoteRef+"<"+(0,f.ns)("⌥Enter")+">"),et.style.width="120px",et.value=Qe.getAttribute("data-footnotes-label"),et.oninput=function(){et.value.trim()!==""&&Qe.setAttribute("data-footnotes-label",et.value)},et.onkeydown=function(ae){ae.isComposing||Ze(e,ae)||Me(ae,t)},q(Qe,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",nt),c(e,Qe)}var Ke=(0,S.fb)(n,"vditor-wysiwyg__block"),Ct=!!Ke&&Ke.getAttribute("data-type").indexOf("block")>-1;if(e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(ae){(!Ke||Ke&&Ct&&!Ke.contains(ae))&&(ae.previousElementSibling.style.display="none")}),Ke&&Ct){if(e.wysiwyg.popover.innerHTML="",O(t,Ke,e),B(t,Ke,e),q(Ke,e),Ke.getAttribute("data-type")==="code-block"){var sn=document.createElement("span");sn.setAttribute("aria-label",window.VditorI18n.language+"<"+(0,f.ns)("⌥Enter")+">"),sn.className="vditor-tooltipped vditor-tooltipped__n";var at=document.createElement("input");sn.appendChild(at);var zt=Ke.firstElementChild.firstElementChild;at.className="vditor-input",at.setAttribute("placeholder",window.VditorI18n.language+"<"+(0,f.ns)("⌥Enter")+">"),at.value=zt.className.indexOf("language-")>-1?zt.className.split("-")[1].split(" ")[0]:"",at.oninput=function(ae){at.value.trim()!==""?zt.className="language-"+at.value:(zt.className="",e.hint.recentLanguage=""),Ke.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(Ke.lastElementChild.innerHTML=Ke.firstElementChild.innerHTML,Be(Ke.lastElementChild,e)),Ie(e),ae.detail===1&&(t.setStart(zt.firstChild,0),t.collapse(!0),(0,H.Hc)(t))},at.onkeydown=function(ae){if(!ae.isComposing&&!Ze(e,ae)){if(ae.key==="Escape"&&e.hint.element.style.display==="block")return e.hint.element.style.display="none",void ae.preventDefault();e.hint.select(ae,e),Me(ae,t)}},at.onkeyup=function(ae){if(!ae.isComposing&&ae.key!=="Enter"&&ae.key!=="ArrowUp"&&ae.key!=="Escape"&&ae.key!=="ArrowDown"){var je=[],Tt=at.value.substring(0,at.selectionStart);(e.options.preview.hljs.langs||v.g.CODE_LANGUAGES).forEach(function(ht){ht.indexOf(Tt.toLowerCase())>-1&&je.push({html:ht,value:ht})}),e.hint.genHTML(je,Tt,e),ae.preventDefault()}},e.wysiwyg.popover.insertAdjacentElement("beforeend",sn)}c(e,Ke)}else Ke=void 0;if(L){var nt;e.wysiwyg.popover.innerHTML="",(nt=document.createElement("span")).setAttribute("aria-label","ID<"+(0,f.ns)("⌥Enter")+">"),nt.className="vditor-tooltipped vditor-tooltipped__n";var bt=document.createElement("input");nt.appendChild(bt),bt.className="vditor-input",bt.setAttribute("placeholder","ID<"+(0,f.ns)("⌥Enter")+">"),bt.style.width="120px",bt.value=L.getAttribute("data-id")||"",bt.oninput=function(){L.setAttribute("data-id",bt.value)},bt.onkeydown=function(ae){ae.isComposing||Ze(e,ae)||Me(ae,t)},O(t,L,e),B(t,L,e),q(L,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",nt),c(e,L)}if(M&&ke(e,M,t),!($||r||_||Ke||M||ft||Qe||L||F)){var Lt=(0,S.a1)(n,"data-block","0");Lt&&Lt.parentElement.isEqualNode(e.wysiwyg.element)?(e.wysiwyg.popover.innerHTML="",O(t,Lt,e),B(t,Lt,e),q(Lt,e),c(e,Lt)):e.wysiwyg.popover.style.display="none"}e.wysiwyg.element.querySelectorAll('span[data-type="backslash"] > span').forEach(function(ae){ae.style.display="none"});var Rr=(0,S.a1)(t.startContainer,"data-type","backslash");Rr&&(Rr.querySelector("span").style.display="inline")}},200)},c=function(e,t){var n=t,i=(0,S.lG)(t,"TABLE");i&&(n=i),e.wysiwyg.popover.style.left="0",e.wysiwyg.popover.style.display="block",e.wysiwyg.popover.style.top=Math.max(-8,n.offsetTop-21-e.wysiwyg.element.scrollTop)+"px",e.wysiwyg.popover.style.left=Math.min(n.offsetLeft,e.wysiwyg.element.clientWidth-e.wysiwyg.popover.clientWidth)+"px",e.wysiwyg.popover.setAttribute("data-top",(n.offsetTop-21).toString())},u=function(e,t,n){n===void 0&&(n=getSelection().getRangeAt(0)),e.wysiwyg.popover.innerHTML="";var i=function(){s.value.trim()!==""&&(t.tagName==="IMG"?t.setAttribute("alt",s.value):t.textContent=s.value),w.value.trim()!==""&&t.setAttribute("data-link-label",w.value)},r=document.createElement("span");r.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),r.className="vditor-tooltipped vditor-tooltipped__n";var s=document.createElement("input");r.appendChild(s),s.className="vditor-input",s.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),s.style.width="120px",s.value=t.getAttribute("alt")||t.textContent,s.oninput=function(){i()},s.onkeydown=function(M){Ze(e,M)||Me(M,n)||G(e,t,M,w)};var d=document.createElement("span");d.setAttribute("aria-label",window.VditorI18n.linkRef),d.className="vditor-tooltipped vditor-tooltipped__n";var w=document.createElement("input");d.appendChild(w),w.className="vditor-input",w.setAttribute("placeholder",window.VditorI18n.linkRef),w.value=t.getAttribute("data-link-label"),w.oninput=function(){i()},w.onkeydown=function(M){Ze(e,M)||Me(M,n)||G(e,t,M,s)},q(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",r),e.wysiwyg.popover.insertAdjacentElement("beforeend",d),c(e,t)},O=function(e,t,n){var i=t.previousElementSibling;if(i&&(t.parentElement.isEqualNode(n.wysiwyg.element)||t.tagName==="LI")){var r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("data-type","up"),r.setAttribute("aria-label",window.VditorI18n.up+"<"+(0,f.ns)("⇧⌘U")+">"),r.innerHTML='<svg><use xlink:href="#vditor-icon-up"></use></svg>',r.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",r.onclick=function(){e.insertNode(document.createElement("wbr")),i.insertAdjacentElement("beforebegin",t),(0,H.ib)(n.wysiwyg.element,e),Ie(n),k(n),Ge(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",r)}},B=function(e,t,n){var i=t.nextElementSibling;if(i&&(t.parentElement.isEqualNode(n.wysiwyg.element)||t.tagName==="LI")){var r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("data-type","down"),r.setAttribute("aria-label",window.VditorI18n.down+"<"+(0,f.ns)("⇧⌘D")+">"),r.innerHTML='<svg><use xlink:href="#vditor-icon-down"></use></svg>',r.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",r.onclick=function(){e.insertNode(document.createElement("wbr")),i.insertAdjacentElement("afterend",t),(0,H.ib)(n.wysiwyg.element,e),Ie(n),k(n),Ge(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",r)}},q=function(e,t){var n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("data-type","remove"),n.setAttribute("aria-label",window.VditorI18n.remove+"<"+(0,f.ns)("⇧⌘X")+">"),n.innerHTML='<svg><use xlink:href="#vditor-icon-trashcan"></use></svg>',n.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",n.onclick=function(){var i=(0,H.zh)(t);i.setStartAfter(e),(0,H.Hc)(i),e.remove(),Ie(t),k(t),["H1","H2","H3","H4","H5","H6"].includes(e.tagName)&&pe(t)},t.wysiwyg.popover.insertAdjacentElement("beforeend",n)},G=function(e,t,n,i){if(!n.isComposing){if(n.key==="Tab")return i.focus(),i.select(),void n.preventDefault();if(!(0,f.yl)(n)&&!n.shiftKey&&n.altKey&&n.key==="Enter"){var r=(0,H.zh)(e);t.insertAdjacentHTML("afterend",v.g.ZWSP),r.setStartAfter(t.nextSibling),r.collapse(!0),(0,H.Hc)(r),n.preventDefault()}}},ke=function(e,t,n){e.wysiwyg.popover.innerHTML="";var i=function(){s.value.trim()!==""&&(t.innerHTML=s.value),t.setAttribute("href",w.value),t.setAttribute("title",_.value),Ie(e)};t.querySelectorAll("[data-marker]").forEach(function(L){L.removeAttribute("data-marker")});var r=document.createElement("span");r.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),r.className="vditor-tooltipped vditor-tooltipped__n";var s=document.createElement("input");r.appendChild(s),s.className="vditor-input",s.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),s.style.width="120px",s.value=t.innerHTML||"",s.oninput=function(){i()},s.onkeydown=function(L){Ze(e,L)||Me(L,n)||G(e,t,L,w)};var d=document.createElement("span");d.setAttribute("aria-label",window.VditorI18n.link),d.className="vditor-tooltipped vditor-tooltipped__n";var w=document.createElement("input");d.appendChild(w),w.className="vditor-input",w.setAttribute("placeholder",window.VditorI18n.link),w.value=t.getAttribute("href")||"",w.oninput=function(){i()},w.onkeydown=function(L){Ze(e,L)||Me(L,n)||G(e,t,L,_)};var M=document.createElement("span");M.setAttribute("aria-label",window.VditorI18n.tooltipText),M.className="vditor-tooltipped vditor-tooltipped__n";var _=document.createElement("input");M.appendChild(_),_.className="vditor-input",_.setAttribute("placeholder",window.VditorI18n.tooltipText),_.style.width="60px",_.value=t.getAttribute("title")||"",_.oninput=function(){i()},_.onkeydown=function(L){Ze(e,L)||Me(L,n)||G(e,t,L,s)},q(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",r),e.wysiwyg.popover.insertAdjacentElement("beforeend",d),e.wysiwyg.popover.insertAdjacentElement("beforeend",M),c(e,t)},Me=function(e,t){if(!(0,f.yl)(e)&&!e.shiftKey&&e.key==="Enter"||e.key==="Escape")return t&&(0,H.Hc)(t),e.preventDefault(),e.stopPropagation(),!0},He=function(e){e.currentMode==="wysiwyg"?k(e):e.currentMode==="ir"&&kt(e)},qe=function(e,t,n){n===void 0&&(n={enableAddUndoStack:!0,enableHint:!1,enableInput:!0});var i=e.wysiwyg.element;i.innerHTML=e.lute.Md2VditorDOM(t),i.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(r){Be(r,e),r.previousElementSibling.setAttribute("style","display:none")}),Ie(e,n)},Pe=function(e,t,n){for(var i=e.startContainer.parentElement,r=!1,s="",d="",w=function(j){var Q=xt(j.startContainer),oe=jt(j.startContainer),ne=j.startContainer.textContent,ie=j.startOffset,te="",V="";return(ne.substr(0,ie)!==""&&ne.substr(0,ie)!==v.g.ZWSP||Q)&&(te=""+Q+ne.substr(0,ie)),(ne.substr(ie)!==""&&ne.substr(ie)!==v.g.ZWSP||oe)&&(V=""+ne.substr(ie)+oe),{afterHTML:V,beforeHTML:te}}(e),M=w.beforeHTML,_=w.afterHTML;i&&!r;){var L=i.tagName;if(L==="STRIKE"&&(L="S"),L==="I"&&(L="EM"),L==="B"&&(L="STRONG"),L==="S"||L==="STRONG"||L==="EM"){var F="",$="",ee="";i.parentElement.getAttribute("data-block")!=="0"&&($=xt(i),ee=jt(i)),(M||$)&&(M=F=$+"<"+L+">"+M+"</"+L+">"),(n==="bold"&&L==="STRONG"||n==="italic"&&L==="EM"||n==="strikeThrough"&&L==="S")&&(F+=""+s+v.g.ZWSP+"<wbr>"+d,r=!0),(_||ee)&&(F+=_="<"+L+">"+_+"</"+L+">"+ee),i.parentElement.getAttribute("data-block")!=="0"?(i=i.parentElement).innerHTML=F:(i.outerHTML=F,i=i.parentElement),s="<"+L+">"+s,d="</"+L+">"+d}else r=!0}(0,H.ib)(t.wysiwyg.element,e)},ze=function(e,t){var n,i=this;this.element=document.createElement("div"),t.className&&(n=this.element.classList).add.apply(n,t.className.split(" "));var r=t.hotkey?" <"+(0,f.ns)(t.hotkey)+">":"";t.level===2&&(r=t.hotkey?" &lt;"+(0,f.ns)(t.hotkey)+"&gt;":"");var s=t.tip?t.tip+r:""+window.VditorI18n[t.name]+r,d=t.name==="upload"?"div":"button";if(t.level===2)this.element.innerHTML="<"+d+' data-type="'+t.name+'">'+s+"</"+d+">";else{this.element.classList.add("vditor-toolbar__item");var w=document.createElement(d);w.setAttribute("data-type",t.name),w.className="vditor-tooltipped vditor-tooltipped__"+t.tipPosition,w.setAttribute("aria-label",s),w.innerHTML=t.icon,this.element.appendChild(w)}t.prefix&&this.element.children[0].addEventListener((0,f.Le)(),function(M){M.preventDefault(),i.element.firstElementChild.classList.contains(v.g.CLASS_MENU_DISABLED)||(e.currentMode==="wysiwyg"?function(_,L,F){if(!(_.wysiwyg.composingLock&&F instanceof CustomEvent)){var $=!0,ee=!0;_.wysiwyg.element.querySelector("wbr")&&_.wysiwyg.element.querySelector("wbr").remove();var j=(0,H.zh)(_),Q=L.getAttribute("data-type");if(L.classList.contains("vditor-menu--current"))if(Q==="strike"&&(Q="strikeThrough"),Q==="quote"){var oe=(0,S.lG)(j.startContainer,"BLOCKQUOTE");oe||(oe=j.startContainer.childNodes[j.startOffset]),oe&&($=!1,L.classList.remove("vditor-menu--current"),j.insertNode(document.createElement("wbr")),oe.outerHTML=oe.innerHTML.trim()===""?'<p data-block="0">'+oe.innerHTML+"</p>":oe.innerHTML,(0,H.ib)(_.wysiwyg.element,j))}else if(Q==="inline-code"){var ne=(0,S.lG)(j.startContainer,"CODE");ne||(ne=j.startContainer.childNodes[j.startOffset]),ne&&(ne.outerHTML=ne.innerHTML.replace(v.g.ZWSP,"")+"<wbr>",(0,H.ib)(_.wysiwyg.element,j))}else Q==="link"?(j.collapsed&&j.selectNode(j.startContainer.parentElement),document.execCommand("unlink",!1,"")):Q==="check"||Q==="list"||Q==="ordered-list"?(tn(_,j,Q),(0,H.ib)(_.wysiwyg.element,j),$=!1,L.classList.remove("vditor-menu--current")):($=!1,L.classList.remove("vditor-menu--current"),j.toString()===""?Pe(j,_,Q):document.execCommand(Q,!1,""));else{_.wysiwyg.element.childNodes.length===0&&(_.wysiwyg.element.innerHTML='<p data-block="0"><wbr></p>',(0,H.ib)(_.wysiwyg.element,j));var ie=(0,S.F9)(j.startContainer);if(Q==="quote"){if(ie||(ie=j.startContainer.childNodes[j.startOffset]),ie){$=!1,L.classList.add("vditor-menu--current"),j.insertNode(document.createElement("wbr"));var te=(0,S.lG)(j.startContainer,"LI");te&&ie.contains(te)?te.innerHTML='<blockquote data-block="0">'+te.innerHTML+"</blockquote>":ie.outerHTML='<blockquote data-block="0">'+ie.outerHTML+"</blockquote>",(0,H.ib)(_.wysiwyg.element,j)}}else if(Q==="check"||Q==="list"||Q==="ordered-list")tn(_,j,Q,!1),(0,H.ib)(_.wysiwyg.element,j),$=!1,E(_.toolbar.elements,["check","list","ordered-list"]),L.classList.add("vditor-menu--current");else if(Q==="inline-code"){if(j.toString()==="")(V=document.createElement("code")).textContent=v.g.ZWSP,j.insertNode(V),j.setStart(V.firstChild,1),j.collapse(!0),(0,H.Hc)(j);else if(j.startContainer.nodeType===3){var V=document.createElement("code");j.surroundContents(V),j.insertNode(V),(0,H.Hc)(j)}L.classList.add("vditor-menu--current")}else if(Q==="code")(V=document.createElement("div")).className="vditor-wysiwyg__block",V.setAttribute("data-type","code-block"),V.setAttribute("data-block","0"),V.setAttribute("data-marker","```"),j.toString()===""?V.innerHTML=`<pre><code><wbr>
</code></pre>`:(V.innerHTML="<pre><code>"+j.toString()+"<wbr></code></pre>",j.deleteContents()),j.insertNode(V),ie&&(ie.outerHTML=_.lute.SpinVditorDOM(ie.outerHTML)),(0,H.ib)(_.wysiwyg.element,j),_.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(We){Be(We,_)}),L.classList.add("vditor-menu--disabled");else if(Q==="link"){if(j.toString()===""){var se=document.createElement("a");se.innerText=v.g.ZWSP,j.insertNode(se),j.setStart(se.firstChild,1),j.collapse(!0),ke(_,se,j);var ge=_.wysiwyg.popover.querySelector("input");ge.value="",ge.focus(),ee=!1}else{(V=document.createElement("a")).setAttribute("href",""),V.innerHTML=j.toString(),j.surroundContents(V),j.insertNode(V),(0,H.Hc)(j),ke(_,V,j);var ue=_.wysiwyg.popover.querySelectorAll("input");ue[0].value=V.innerText,ue[1].focus()}$=!1,L.classList.add("vditor-menu--current")}else if(Q==="table"){var he='<table data-block="0"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>';if(j.toString().trim()==="")ie&&ie.innerHTML.trim().replace(v.g.ZWSP,"")===""?ie.outerHTML=he:document.execCommand("insertHTML",!1,he),j.selectNode(_.wysiwyg.element.querySelector("wbr").previousSibling),_.wysiwyg.element.querySelector("wbr").remove(),(0,H.Hc)(j);else{he='<table data-block="0"><thead><tr>';var fe=j.toString().split(`
`),ce=fe[0].split(",").length>fe[0].split("	").length?",":"	";fe.forEach(function(We,ft){ft===0?(We.split(ce).forEach(function(Qe,et){he+=et===0?"<th>"+Qe+"<wbr></th>":"<th>"+Qe+"</th>"}),he+="</tr></thead>"):(he+=ft===1?"<tbody><tr>":"<tr>",We.split(ce).forEach(function(Qe){he+="<td>"+Qe+"</td>"}),he+="</tr>")}),he+="</tbody></table>",document.execCommand("insertHTML",!1,he),(0,H.ib)(_.wysiwyg.element,j)}$=!1,L.classList.add("vditor-menu--disabled")}else if(Q==="line"){if(ie){var Ee=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;ie.innerHTML.trim()===""?ie.outerHTML=Ee:ie.insertAdjacentHTML("afterend",Ee),(0,H.ib)(_.wysiwyg.element,j)}}else if($=!1,L.classList.add("vditor-menu--current"),Q==="strike"&&(Q="strikeThrough"),j.toString()!==""||Q!=="bold"&&Q!=="italic"&&Q!=="strikeThrough")document.execCommand(Q,!1,"");else{var Re="strong";Q==="italic"?Re="em":Q==="strikeThrough"&&(Re="s"),(V=document.createElement(Re)).textContent=v.g.ZWSP,j.insertNode(V),V.previousSibling&&V.previousSibling.textContent===v.g.ZWSP&&(V.previousSibling.textContent=""),j.setStart(V.firstChild,1),j.collapse(!0),(0,H.Hc)(j)}}$&&k(_),ee&&Ie(_)}}(e,i.element.children[0],M):e.currentMode==="ir"?so(e,i.element.children[0],t.prefix||"",t.suffix||""):Qi(e,i.element.children[0],t.prefix||"",t.suffix||""))})},Xi=(lt=function(e,t){return lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r])},lt(e,t)},function(e,t){function n(){this.constructor=e}lt(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}),St=function(e,t,n){var i;if(typeof n!="string"?(D(e,["subToolbar","hint"]),n.preventDefault(),i=p(e)):i=n,e.currentMode!==t||typeof n=="string"){if(e.devtools&&e.devtools.renderEchart(e),e.options.preview.mode==="both"&&t==="sv"?e.preview.element.style.display="block":e.preview.element.style.display="none",N(e.toolbar.elements,v.g.EDIT_TOOLBARS),E(e.toolbar.elements,v.g.EDIT_TOOLBARS),R(e.toolbar.elements,["outdent","indent"]),t==="ir")P(e.toolbar.elements,["both"]),U(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="block",e.lute.SetVditorIR(!0),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!1),e.currentMode="ir",e.ir.element.innerHTML=e.lute.Md2VditorIRDOM(i),mt(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),Le(e),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(s){Be(s,e)}),e.ir.element.querySelectorAll(".vditor-toc").forEach(function(s){(0,xe.H)(s,{katex:e.options.staticPath.katex,mathjax:e.options.staticPath.mathjax,math:e.options.preview.math})});else if(t==="wysiwyg")P(e.toolbar.elements,["both"]),U(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="block",e.ir.element.parentElement.style.display="none",e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!0),e.lute.SetVditorSV(!1),e.currentMode="wysiwyg",Le(e),qe(e,i,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),e.wysiwyg.element.querySelectorAll(".vditor-toc").forEach(function(s){(0,xe.H)(s,{katex:e.options.staticPath.katex,mathjax:e.options.staticPath.mathjax,math:e.options.preview.math})}),e.wysiwyg.popover.style.display="none";else if(t==="sv"){U(e.toolbar.elements,["both"]),P(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="none",(e.options.preview.mode==="both"||e.options.preview.mode==="editor")&&(e.sv.element.style.display="block"),e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!0),e.currentMode="sv";var r=cr(i,e);r==="<div data-block='0'></div>"&&(r=""),e.sv.element.innerHTML=r,Xe(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),Le(e)}e.undo.resetIcon(e),typeof n!="string"&&(e[e.currentMode].element.focus(),He(e)),pe(e),_e(e),e.toolbar.elements["edit-mode"]&&(e.toolbar.elements["edit-mode"].querySelectorAll("button").forEach(function(s){s.classList.remove("vditor-menu--current")}),e.toolbar.elements["edit-mode"].querySelector('button[data-mode="'+e.currentMode+'"]').classList.add("vditor-menu--current")),e.outline.toggle(e,e.currentMode!=="sv"&&e.options.outline.enable,typeof n!="string")}},Zi=function(e){function t(n,i){var r=e.call(this,n,i)||this,s=document.createElement("div");return s.className="vditor-hint"+(i.level===2?"":" vditor-panel--arrow"),s.innerHTML='<button data-mode="wysiwyg">'+window.VditorI18n.wysiwyg+" &lt;"+(0,f.ns)("⌥⌘7")+`></button>
<button data-mode="ir">`+window.VditorI18n.instantRendering+" &lt;"+(0,f.ns)("⌥⌘8")+`></button>
<button data-mode="sv">`+window.VditorI18n.splitView+" &lt;"+(0,f.ns)("⌥⌘9")+"></button>",r.element.appendChild(s),r._bindEvent(n,s,i),r}return Xi(t,e),t.prototype._bindEvent=function(n,i,r){var s=this.element.children[0];I(n,i,s,r.level),i.children.item(0).addEventListener((0,f.Le)(),function(d){St(n,"wysiwyg",d),d.preventDefault(),d.stopPropagation()}),i.children.item(1).addEventListener((0,f.Le)(),function(d){St(n,"ir",d),d.preventDefault(),d.stopPropagation()}),i.children.item(2).addEventListener((0,f.Le)(),function(d){St(n,"sv",d),d.preventDefault(),d.stopPropagation()})},t}(ze),qt=function(e,t){return(0,H.Gb)(e,t)?getSelection().toString():""},wn=function(e,t){t.addEventListener("focus",function(){e.options.focus&&e.options.focus(p(e)),D(e,["subToolbar","hint"])})},sr=function(e,t){t.addEventListener("dblclick",function(n){n.target.tagName==="IMG"&&(e.options.image.preview?e.options.image.preview(n.target):e.options.image.isPreview&&(0,re.E)(n.target,e.options.lang,e.options.theme))})},En=function(e,t){t.addEventListener("blur",function(n){if(e.currentMode==="ir"){var i=e.ir.element.querySelector(".vditor-ir__node--expand");i&&i.classList.remove("vditor-ir__node--expand")}else e.currentMode!=="wysiwyg"||e.wysiwyg.selectPopover.contains(n.relatedTarget)||e.wysiwyg.hideComment();e[e.currentMode].range=(0,H.zh)(e),e.options.blur&&e.options.blur(p(e))})},kn=function(e,t){t.addEventListener("dragstart",function(n){n.dataTransfer.setData(v.g.DROP_EDITOR,v.g.DROP_EDITOR)}),t.addEventListener("drop",function(n){n.dataTransfer.getData(v.g.DROP_EDITOR)?Ae(e):(n.dataTransfer.types.includes("Files")||n.dataTransfer.types.includes("text/html"))&&on(e,n,{pasteCode:function(i){document.execCommand("insertHTML",!1,i)}})})},xn=function(e,t,n){t.addEventListener("copy",function(i){return n(i,e)})},Sn=function(e,t,n){t.addEventListener("cut",function(i){n(i,e),e.options.comment.enable&&e.currentMode==="wysiwyg"&&e.wysiwyg.getComments(e),document.execCommand("delete")})},Ge=function(e){if(e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)),e.options.typewriterMode){var t=e[e.currentMode].element,n=(0,H.Ny)(t).top;e.options.height!=="auto"||e.element.classList.contains("vditor--fullscreen")||window.scrollTo(window.scrollX,n+e.element.offsetTop+e.toolbar.element.offsetHeight-window.innerHeight/2+10),(e.options.height!=="auto"||e.element.classList.contains("vditor--fullscreen"))&&(t.scrollTop=n+t.scrollTop-t.clientHeight/2+10)}},Tn=function(e,t){t.addEventListener("keydown",function(n){if(!n.isComposing&&e.options.keydown&&e.options.keydown(n),!(e.options.hint.extend.length>1||e.toolbar.elements.emoji)||!e.hint.select(n,e)){if(e.options.comment.enable&&e.currentMode==="wysiwyg"&&(n.key==="Backspace"||X("⌘X",n))&&e.wysiwyg.getComments(e),e.currentMode==="sv"){if(function(r,s){var d,w,M,_,L;if(r.sv.composingLock=s.isComposing,s.isComposing||(s.key.indexOf("Arrow")!==-1||s.key==="Meta"||s.key==="Control"||s.key==="Alt"||s.key==="Shift"||s.key==="CapsLock"||s.key==="Escape"||/^F\d{1,2}$/.test(s.key)||r.undo.recordFirstPosition(r,s),s.key!=="Enter"&&s.key!=="Tab"&&s.key!=="Backspace"&&s.key.indexOf("Arrow")===-1&&!(0,f.yl)(s)&&s.key!=="Escape"))return!1;var F=(0,H.zh)(r),$=F.startContainer;F.startContainer.nodeType!==3&&F.startContainer.tagName==="DIV"&&($=F.startContainer.childNodes[F.startOffset-1]);var ee=(0,S.a1)($,"data-type","text"),j=(0,S.a1)($,"data-type","blockquote-marker");if(!j&&F.startOffset===0&&ee&&ee.previousElementSibling&&ee.previousElementSibling.getAttribute("data-type")==="blockquote-marker"&&(j=ee.previousElementSibling),j&&s.key==="Enter"&&!(0,f.yl)(s)&&!s.altKey&&j.nextElementSibling.textContent.trim()===""&&(0,H.im)(j,r.sv.element,F).start===j.textContent.length)return((d=j.previousElementSibling)===null||d===void 0?void 0:d.getAttribute("data-type"))==="padding"&&j.previousElementSibling.setAttribute("data-action","enter-remove"),j.remove(),Xe(r),s.preventDefault(),!0;var Q=(0,S.a1)($,"data-type","li-marker"),oe=(0,S.a1)($,"data-type","task-marker"),ne=Q;if(ne||oe&&oe.nextElementSibling.getAttribute("data-type")!=="task-marker"&&(ne=oe),ne||F.startOffset!==0||!ee||!ee.previousElementSibling||ee.previousElementSibling.getAttribute("data-type")!=="li-marker"&&ee.previousElementSibling.getAttribute("data-type")!=="task-marker"||(ne=ee.previousElementSibling),ne){var ie=(0,H.im)(ne,r.sv.element,F).start,te=ne.getAttribute("data-type")==="task-marker",V=ne;if(te&&(V=ne.previousElementSibling.previousElementSibling.previousElementSibling),ie===ne.textContent.length){if(s.key==="Enter"&&!(0,f.yl)(s)&&!s.altKey&&!s.shiftKey&&ne.nextElementSibling.textContent.trim()==="")return((w=V.previousElementSibling)===null||w===void 0?void 0:w.getAttribute("data-type"))==="padding"?(V.previousElementSibling.remove(),Ce(r)):(te&&(V.remove(),ne.previousElementSibling.previousElementSibling.remove(),ne.previousElementSibling.remove()),ne.nextElementSibling.remove(),ne.remove(),Xe(r)),s.preventDefault(),!0;if(s.key==="Tab")return V.insertAdjacentHTML("beforebegin",'<span data-type="padding">'+V.textContent.replace(/\S/g," ")+"</span>"),/^\d/.test(V.textContent)&&(V.textContent=V.textContent.replace(/^\d{1,}/,"1"),F.selectNodeContents(ne.firstChild),F.collapse(!1)),Ce(r),s.preventDefault(),!0}}if(On(r,F,s))return!0;var se=(0,S.a1)($,"data-block","0"),ge=(0,Z.S)($,"SPAN");if(s.key==="Enter"&&!(0,f.yl)(s)&&!s.altKey&&!s.shiftKey&&se){var ue=!1,he=se.textContent.match(/^\n+/);(0,H.im)(se,r.sv.element).start<=(he?he[0].length:0)&&(ue=!0);var fe=`
`;if(ge){if(((M=ge.previousElementSibling)===null||M===void 0?void 0:M.getAttribute("data-action"))==="enter-remove")return ge.previousElementSibling.remove(),Xe(r),s.preventDefault(),!0;fe+=Yi(ge)}return F.insertNode(document.createTextNode(fe)),F.collapse(!1),se&&se.textContent.trim()!==""&&!ue?Ce(r):Xe(r),s.preventDefault(),!0}if(s.key==="Backspace"&&!(0,f.yl)(s)&&!s.altKey&&!s.shiftKey){if(ge&&((_=ge.previousElementSibling)===null||_===void 0?void 0:_.getAttribute("data-type"))==="newline"&&(0,H.im)(ge,r.sv.element,F).start===1&&ge.getAttribute("data-type").indexOf("code-block-")===-1)return F.setStart(ge,0),F.extractContents(),ge.textContent.trim()!==""?Ce(r):Xe(r),s.preventDefault(),!0;if(se&&(0,H.im)(se,r.sv.element,F).start===0&&se.previousElementSibling){F.extractContents();var ce=se.previousElementSibling.lastElementChild;return ce.getAttribute("data-type")==="newline"&&(ce.remove(),ce=se.previousElementSibling.lastElementChild),ce.getAttribute("data-type")!=="newline"&&(ce.insertAdjacentHTML("afterend",se.innerHTML),se.remove()),se.textContent.trim()===""||!((L=se.previousElementSibling)===null||L===void 0)&&L.querySelector('[data-type="code-block-open-marker"]')?(ce.getAttribute("data-type")!=="newline"&&(F.selectNodeContents(ce.lastChild),F.collapse(!1)),Xe(r)):Ce(r),s.preventDefault(),!0}}return!1}(e,n))return}else if(e.currentMode==="wysiwyg"){if(function(r,s){if(r.wysiwyg.composingLock=s.isComposing,s.isComposing)return!1;s.key.indexOf("Arrow")!==-1||s.key==="Meta"||s.key==="Control"||s.key==="Alt"||s.key==="Shift"||s.key==="CapsLock"||s.key==="Escape"||/^F\d{1,2}$/.test(s.key)||r.undo.recordFirstPosition(r,s);var d=(0,H.zh)(r),w=d.startContainer;if(!mr(s,r,w)||(fr(d,r,s),_r(d),s.key!=="Enter"&&s.key!=="Tab"&&s.key!=="Backspace"&&s.key.indexOf("Arrow")===-1&&!(0,f.yl)(s)&&s.key!=="Escape"&&s.key!=="Delete"))return!1;var M=(0,S.F9)(w),_=(0,S.lG)(w,"P");if(br(s,r,_,d)||yr(d,r,_,s)||Sr(r,s,d))return!0;var L=(0,S.fb)(w,"vditor-wysiwyg__block");if(L){if(s.key==="Escape"&&L.children.length===2)return r.wysiwyg.popover.style.display="none",L.firstElementChild.style.display="none",r.wysiwyg.element.blur(),s.preventDefault(),!0;if(!(0,f.yl)(s)&&!s.shiftKey&&s.altKey&&s.key==="Enter"&&L.getAttribute("data-type")==="code-block"){var F=r.wysiwyg.popover.querySelector(".vditor-input");return F.focus(),F.select(),s.preventDefault(),!0}if(L.getAttribute("data-block")==="0"&&(Tr(r,s,L.firstElementChild,d)||Ft(r,s,d,L.firstElementChild,L)||L.getAttribute("data-type")!=="yaml-front-matter"&&At(r,s,d,L.firstElementChild,L)))return!0}if(Ar(r,d,s,_))return!0;var $=(0,S.E2)(w,"BLOCKQUOTE");if($&&!s.shiftKey&&s.altKey&&s.key==="Enter"){(0,f.yl)(s)?d.setStartBefore($):d.setStartAfter($),(0,H.Hc)(d);var ee=document.createElement("p");return ee.setAttribute("data-block","0"),ee.innerHTML=`
`,d.insertNode(ee),d.collapse(!0),(0,H.Hc)(d),Ie(r),Ge(r),s.preventDefault(),!0}var j,Q=(0,Z.W)(w);if(Q){if(Q.tagName==="H6"&&w.textContent.length===d.startOffset&&!(0,f.yl)(s)&&!s.shiftKey&&!s.altKey&&s.key==="Enter"){var oe=document.createElement("p");return oe.textContent=`
`,oe.setAttribute("data-block","0"),w.parentElement.insertAdjacentElement("afterend",oe),d.setStart(oe,0),(0,H.Hc)(d),Ie(r),Ge(r),s.preventDefault(),!0}var ne;if(X("⌘=",s))return(ne=parseInt(Q.tagName.substr(1),10)-1)>0&&(yt(r,"h"+ne),Ie(r)),s.preventDefault(),!0;if(X("⌘-",s))return(ne=parseInt(Q.tagName.substr(1),10)+1)<7&&(yt(r,"h"+ne),Ie(r)),s.preventDefault(),!0;s.key!=="Backspace"||(0,f.yl)(s)||s.shiftKey||s.altKey||Q.textContent.length!==1||Ut(r)}if(Cr(r,d,s))return!0;if(s.altKey&&s.key==="Enter"&&!(0,f.yl)(s)&&!s.shiftKey){var ie=(0,S.lG)(w,"A"),te=(0,S.a1)(w,"data-type","link-ref"),V=(0,S.a1)(w,"data-type","footnotes-ref");if(ie||te||V||Q&&Q.tagName.length===2){var se=r.wysiwyg.popover.querySelector("input");se.focus(),se.select()}}if(Ze(r,s))return!0;if(X("⇧⌘U",s)&&(j=r.wysiwyg.popover.querySelector('[data-type="up"]'))||X("⇧⌘D",s)&&(j=r.wysiwyg.popover.querySelector('[data-type="down"]')))return j.click(),s.preventDefault(),!0;if(On(r,d,s))return!0;if(!(0,f.yl)(s)&&s.shiftKey&&!s.altKey&&s.key==="Enter"&&w.parentElement.tagName!=="LI"&&w.parentElement.tagName!=="P")return["STRONG","STRIKE","S","I","EM","B"].includes(w.parentElement.tagName)?d.insertNode(document.createTextNode(`
`+v.g.ZWSP)):d.insertNode(document.createTextNode(`
`)),d.collapse(!1),(0,H.Hc)(d),Ie(r),Ge(r),s.preventDefault(),!0;if(s.key==="Backspace"&&!(0,f.yl)(s)&&!s.shiftKey&&!s.altKey&&d.toString()===""){if(Lr(r,d,s,_))return!0;if(M){if(M.previousElementSibling&&M.previousElementSibling.classList.contains("vditor-wysiwyg__block")&&M.previousElementSibling.getAttribute("data-block")==="0"&&M.tagName!=="UL"&&M.tagName!=="OL"){var ge=(0,H.im)(M,r.wysiwyg.element,d).start;if(ge===0&&d.startOffset===0||ge===1&&M.innerText.startsWith(v.g.ZWSP))return Ye(M.previousElementSibling.lastElementChild,r,!1),M.innerHTML.trim().replace(v.g.ZWSP,"")===""&&(M.remove(),Ie(r)),s.preventDefault(),!0}var ue=d.startOffset;if(d.toString()===""&&w.nodeType===3&&w.textContent.charAt(ue-2)===`
`&&w.textContent.charAt(ue-1)!==v.g.ZWSP&&["STRONG","STRIKE","S","I","EM","B"].includes(w.parentElement.tagName))return w.textContent=w.textContent.substring(0,ue-1)+v.g.ZWSP,d.setStart(w,ue),d.collapse(!0),Ie(r),s.preventDefault(),!0;w.textContent===v.g.ZWSP&&d.startOffset===1&&!w.previousSibling&&function(fe){for(var ce=fe.startContainer.nextSibling;ce&&ce.textContent==="";)ce=ce.nextSibling;return!(!ce||ce.nodeType===3||ce.tagName!=="CODE"&&ce.getAttribute("data-type")!=="math-inline"&&ce.getAttribute("data-type")!=="html-entity"&&ce.getAttribute("data-type")!=="html-inline")}(d)&&(w.textContent=""),M.querySelectorAll("span.vditor-wysiwyg__block[data-type='math-inline']").forEach(function(fe){fe.firstElementChild.style.display="inline",fe.lastElementChild.style.display="none"}),M.querySelectorAll("span.vditor-wysiwyg__block[data-type='html-entity']").forEach(function(fe){fe.firstElementChild.style.display="inline",fe.lastElementChild.style.display="none"})}}if((0,f.vU)()&&d.startOffset===1&&w.textContent.indexOf(v.g.ZWSP)>-1&&w.previousSibling&&w.previousSibling.nodeType!==3&&w.previousSibling.tagName==="CODE"&&(s.key==="Backspace"||s.key==="ArrowLeft"))return d.selectNodeContents(w.previousSibling),d.collapse(!1),s.preventDefault(),!0;if(Mr(s,M,d))return s.preventDefault(),!0;if(hr(d,s.key),s.key==="ArrowDown"){var he=w.nextSibling;he&&he.nodeType!==3&&he.getAttribute("data-type")==="math-inline"&&d.setStartAfter(he)}return!(!M||!J(M,r,s,d)||(s.preventDefault(),0))}(e,n))return}else if(e.currentMode==="ir"&&function(r,s){if(r.ir.composingLock=s.isComposing,s.isComposing)return!1;s.key.indexOf("Arrow")!==-1||s.key==="Meta"||s.key==="Control"||s.key==="Alt"||s.key==="Shift"||s.key==="CapsLock"||s.key==="Escape"||/^F\d{1,2}$/.test(s.key)||r.undo.recordFirstPosition(r,s);var d=(0,H.zh)(r),w=d.startContainer;if(!mr(s,r,w)||(fr(d,r,s),_r(d),s.key!=="Enter"&&s.key!=="Tab"&&s.key!=="Backspace"&&s.key.indexOf("Arrow")===-1&&!(0,f.yl)(s)&&s.key!=="Escape"&&s.key!=="Delete"))return!1;var M=(0,S.a1)(w,"data-newline","1");if(!(0,f.yl)(s)&&!s.altKey&&!s.shiftKey&&s.key==="Enter"&&M&&d.startOffset<M.textContent.length){var _=M.previousElementSibling;_&&(d.insertNode(document.createTextNode(_.textContent)),d.collapse(!1));var L=M.nextSibling;L&&(d.insertNode(document.createTextNode(L.textContent)),d.collapse(!0))}var F=(0,S.lG)(w,"P");if(br(s,r,F,d)||yr(d,r,F,s)||Ar(r,d,s,F))return!0;var $=(0,S.fb)(w,"vditor-ir__marker--pre");if($&&$.tagName==="PRE"){var ee=$.firstChild;if(Tr(r,s,$,d)||(ee.getAttribute("data-type")==="math-block"||ee.getAttribute("data-type")==="html-block")&&At(r,s,d,ee,$.parentElement)||Ft(r,s,d,ee,$.parentElement))return!0}var j=(0,S.a1)(w,"data-type","code-block-info");if(j){if(s.key==="Enter"||s.key==="Tab")return d.selectNodeContents(j.nextElementSibling.firstChild),d.collapse(!0),s.preventDefault(),D(r,["hint"]),!0;if(s.key==="Backspace"){var Q=(0,H.im)(j,r.ir.element).start;Q===1&&d.setStart(w,0),Q===2&&(r.hint.recentLanguage="")}if(At(r,s,d,j,j.parentElement))return D(r,["hint"]),!0}var oe=(0,S.lG)(w,"TD")||(0,S.lG)(w,"TH");if(s.key.indexOf("Arrow")>-1&&oe){var ne=oo(oe);if(ne&&At(r,s,d,oe,ne))return!0;var ie=ao(oe);if(ie&&Ft(r,s,d,oe,ie))return!0}if(Sr(r,s,d)||Cr(r,d,s)||On(r,d,s))return!0;var te=(0,Z.W)(w);if(te){var V;if(X("⌘=",s))return(V=te.querySelector(".vditor-ir__marker--heading"))&&V.textContent.trim().length>1&&Vt(r,V.textContent.substr(1)),s.preventDefault(),!0;if(X("⌘-",s))return(V=te.querySelector(".vditor-ir__marker--heading"))&&V.textContent.trim().length<6&&Vt(r,V.textContent.trim()+"# "),s.preventDefault(),!0}var se=(0,S.F9)(w);if(s.key==="Backspace"&&!(0,f.yl)(s)&&!s.shiftKey&&!s.altKey&&d.toString()===""){if(Lr(r,d,s,F))return!0;if(se&&se.previousElementSibling&&se.tagName!=="UL"&&se.tagName!=="OL"&&(se.previousElementSibling.getAttribute("data-type")==="code-block"||se.previousElementSibling.getAttribute("data-type")==="math-block")){var ge=(0,H.im)(se,r.ir.element,d).start;if(ge===0||ge===1&&se.innerText.startsWith(v.g.ZWSP))return d.selectNodeContents(se.previousElementSibling.querySelector(".vditor-ir__marker--pre code")),d.collapse(!1),Y(d,r),se.textContent.trim().replace(v.g.ZWSP,"")===""&&(se.remove(),mt(r)),s.preventDefault(),!0}if(te){var ue=te.firstElementChild.textContent.length;(0,H.im)(te,r.ir.element).start===ue&&(d.setStart(te.firstElementChild.firstChild,ue-1),d.collapse(!0),(0,H.Hc)(d))}}return!((s.key!=="ArrowUp"&&s.key!=="ArrowDown"||!se||(se.querySelectorAll(".vditor-ir__node").forEach(function(he){he.contains(w)||he.classList.add("vditor-ir__node--hidden")}),!Mr(s,se,d)))&&(hr(d,s.key),!se||!J(se,r,s,d)||(s.preventDefault(),0)))}(e,n))return;if(e.options.ctrlEnter&&X("⌘Enter",n))return e.options.ctrlEnter(p(e)),void n.preventDefault();if(X("⌘Z",n)&&!e.toolbar.elements.undo)return e.undo.undo(e),void n.preventDefault();if(X("⌘Y",n)&&!e.toolbar.elements.redo)return e.undo.redo(e),void n.preventDefault();if(n.key==="Escape")return e.hint.element.style.display==="block"?e.hint.element.style.display="none":e.options.esc&&!n.isComposing&&e.options.esc(p(e)),void n.preventDefault();if((0,f.yl)(n)&&n.altKey&&!n.shiftKey&&/^Digit[1-6]$/.test(n.code)){if(e.currentMode==="wysiwyg"){var i=n.code.replace("Digit","H");(0,S.lG)(getSelection().getRangeAt(0).startContainer,i)?Ut(e):yt(e,i),Ie(e)}else e.currentMode==="sv"?dr(e,"#".repeat(parseInt(n.code.replace("Digit",""),10))+" "):e.currentMode==="ir"&&Vt(e,"#".repeat(parseInt(n.code.replace("Digit",""),10))+" ");return n.preventDefault(),!0}if((0,f.yl)(n)&&n.altKey&&!n.shiftKey&&/^Digit[7-9]$/.test(n.code))return n.code==="Digit7"?St(e,"wysiwyg",n):n.code==="Digit8"?St(e,"ir",n):n.code==="Digit9"&&St(e,"sv",n),!0;e.options.toolbar.find(function(r){return!r.hotkey||r.toolbar?!!r.toolbar&&!!r.toolbar.find(function(s){return!!s.hotkey&&(X(s.hotkey,n)?(e.toolbar.elements[s.name].children[0].dispatchEvent(new CustomEvent((0,f.Le)())),n.preventDefault(),!0):void 0)}):X(r.hotkey,n)?(e.toolbar.elements[r.name].children[0].dispatchEvent(new CustomEvent((0,f.Le)())),n.preventDefault(),!0):void 0})}})},An=function(e,t){t.addEventListener("selectstart",function(n){t.onmouseup=function(){setTimeout(function(){var i=qt(e[e.currentMode].element);i.trim()?(e.currentMode==="wysiwyg"&&e.options.comment.enable&&((0,S.a1)(n.target,"data-type","footnotes-block")||(0,S.a1)(n.target,"data-type","link-ref-defs-block")?e.wysiwyg.hideComment():e.wysiwyg.showComment()),e.options.select&&e.options.select(i)):e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.wysiwyg.hideComment()})}})},lr=function(e,t){var n=(0,H.zh)(e);n.extractContents(),n.insertNode(document.createTextNode(Lute.Caret)),n.insertNode(document.createTextNode(t));var i=(0,S.a1)(n.startContainer,"data-block","0");i||(i=e.sv.element);var r=e.lute.SpinVditorSVDOM(i.textContent);r=r.indexOf('data-type="footnotes-link"')>-1||r.indexOf('data-type="link-ref-defs-block"')>-1?"<div data-block='0'>"+r+"</div>":"<div data-block='0'>"+r.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",i.isEqualNode(e.sv.element)?i.innerHTML=r:i.outerHTML=r,(0,H.ib)(e.sv.element,n),Ge(e)},Qt=function(e,t,n){n===void 0&&(n=!0);var i=e;for(i.nodeType===3&&(i=i.parentElement);i;){if(i.getAttribute("data-type")===t)return i;i=n?i.previousElementSibling:i.nextElementSibling}return!1},cr=function(e,t){W("SpinVditorSVDOM",e,"argument",t.options.debugger);var n=t.lute.SpinVditorSVDOM(e);return e=n.indexOf('data-type="footnotes-link"')>-1||n.indexOf('data-type="link-ref-defs-block"')>-1?"<div data-block='0'>"+n+"</div>":"<div data-block='0'>"+n.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",W("SpinVditorSVDOM",e,"result",t.options.debugger),e},Yi=function(e){var t=e.getAttribute("data-type"),n=e.previousElementSibling,i=t&&t!=="text"&&t!=="table"&&t!=="heading-marker"&&t!=="newline"&&t!=="yaml-front-matter-open-marker"&&t!=="yaml-front-matter-close-marker"&&t!=="code-block-info"&&t!=="code-block-close-marker"&&t!=="code-block-open-marker"?e.textContent:"",r=!1;for(t==="newline"&&(r=!0);n&&!r;){var s=n.getAttribute("data-type");if(s==="li-marker"||s==="blockquote-marker"||s==="task-marker"||s==="padding"){var d=n.textContent;if(s!=="li-marker"||t!=="code-block-open-marker"&&t!=="code-block-info")if(t==="code-block-close-marker"&&n.nextElementSibling.isSameNode(e)){var w=Qt(e,"code-block-open-marker");w&&w.previousElementSibling&&(n=w.previousElementSibling,i=d+i)}else i=d+i;else i=d.replace(/\S/g," ")+i}else s==="newline"&&(r=!0);n=n.previousElementSibling}return i},Xe=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),e.preview.render(e);var n=p(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,f.pK)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),clearTimeout(e.sv.processTimeoutId),e.sv.processTimeoutId=window.setTimeout(function(){t.enableAddUndoStack&&!e.sv.composingLock&&e.undo.addToUndoStack(e)},e.options.undoDelay)},dr=function(e,t){var n=(0,H.zh)(e),i=(0,Z.S)(n.startContainer,"SPAN");i&&i.textContent.trim()!==""&&(t=`
`+t),n.collapse(!0),document.execCommand("insertHTML",!1,t)},Qi=function(e,t,n,i){var r=(0,H.zh)(e),s=t.getAttribute("data-type");e.sv.element.childNodes.length===0&&(e.sv.element.innerHTML=`<span data-type="p" data-block="0"><span data-type="text"><wbr></span></span><span data-type="newline"><br><span style="display: none">
</span></span>`,(0,H.ib)(e.sv.element,r));var d=(0,S.F9)(r.startContainer),w=(0,Z.S)(r.startContainer,"SPAN");if(d){if(s==="link"){var M=void 0;return M=r.toString()===""?""+n+Lute.Caret+i:""+n+r.toString()+i.replace(")",Lute.Caret+")"),void document.execCommand("insertHTML",!1,M)}if(s==="italic"||s==="bold"||s==="strike"||s==="inline-code"||s==="code"||s==="table"||s==="line")return M=void 0,M=r.toString()===""?""+n+Lute.Caret+(s==="code"?"":i):""+n+r.toString()+Lute.Caret+(s==="code"?"":i),s==="table"||s==="code"&&w&&w.textContent!==""?M=`

`+M:s==="line"&&(M=`

`+n+`
`+Lute.Caret),void document.execCommand("insertHTML",!1,M);if((s==="check"||s==="list"||s==="ordered-list"||s==="quote")&&w){var _="* ";s==="check"?_="* [ ] ":s==="ordered-list"?_="1. ":s==="quote"&&(_="> ");var L=Qt(w,"newline");return L?L.insertAdjacentText("afterend",_):d.insertAdjacentText("afterbegin",_),void Ce(e)}(0,H.ib)(e.sv.element,r),Xe(e)}},ur=function(e){switch(e.currentMode){case"ir":return e.ir.element;case"wysiwyg":return e.wysiwyg.element;case"sv":return e.sv.element}},pr=function(e,t){e.options.upload.setHeaders&&(e.options.upload.headers=e.options.upload.setHeaders()),e.options.upload.headers&&Object.keys(e.options.upload.headers).forEach(function(n){t.setRequestHeader(n,e.options.upload.headers[n])})},$i=function(e,t,n,i){return new(n||(n=Promise))(function(r,s){function d(_){try{M(i.next(_))}catch(L){s(L)}}function w(_){try{M(i.throw(_))}catch(L){s(L)}}function M(_){var L;_.done?r(_.value):(L=_.value,L instanceof n?L:new n(function(F){F(L)})).then(d,w)}M((i=i.apply(e,t||[])).next())})},eo=function(e,t){var n,i,r,s,d={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function w(M){return function(_){return function(L){if(n)throw new TypeError("Generator is already executing.");for(;d;)try{if(n=1,i&&(r=2&L[0]?i.return:L[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,L[1])).done)return r;switch(i=0,r&&(L=[2&L[0],r.value]),L[0]){case 0:case 1:r=L;break;case 4:return d.label++,{value:L[1],done:!1};case 5:d.label++,i=L[1],L=[0];continue;case 7:L=d.ops.pop(),d.trys.pop();continue;default:if(r=d.trys,!((r=r.length>0&&r[r.length-1])||L[0]!==6&&L[0]!==2)){d=0;continue}if(L[0]===3&&(!r||L[1]>r[0]&&L[1]<r[3])){d.label=L[1];break}if(L[0]===6&&d.label<r[1]){d.label=r[1],r=L;break}if(r&&d.label<r[2]){d.label=r[2],d.ops.push(L);break}r[2]&&d.ops.pop(),d.trys.pop();continue}L=t.call(e,d)}catch(F){L=[6,F],i=0}finally{n=r=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}([M,_])}}},to=function(){this.isUploading=!1,this.element=document.createElement("div"),this.element.className="vditor-upload"},Cn=function(e,t,n){return $i(void 0,void 0,void 0,function(){var i,r,s,d,w,M,_,L,F,$,ee,j,Q,oe;return eo(this,function(ne){switch(ne.label){case 0:for(i=[],r=e.options.upload.multiple===!0?t.length:1,j=0;j<r;j++)(s=t[j])instanceof DataTransferItem&&(s=s.getAsFile()),i.push(s);return e.options.upload.handler?[4,e.options.upload.handler(i)]:[3,2];case 1:return d=ne.sent(),n&&(n.value=""),typeof d=="string"?(e.tip.show(d),[2]):[2];case 2:return e.options.upload.url&&e.upload?e.options.upload.file?[4,e.options.upload.file(i)]:[3,4]:(n&&(n.value=""),e.tip.show("please config: options.upload.url"),[2]);case 3:i=ne.sent(),ne.label=4;case 4:if(e.options.upload.validate&&typeof(d=e.options.upload.validate(i))=="string")return e.tip.show(d),[2];if(w=ur(e),e.upload.range=(0,H.zh)(e),M=function(ie,te){ie.tip.hide();for(var V=[],se="",ge="",ue=(ie.options.lang,ie.options,function(ce,Ee){var Re=te[Ee],We=!0;Re.name||(se+="<li>"+window.VditorI18n.nameEmpty+"</li>",We=!1),Re.size>ie.options.upload.max&&(se+="<li>"+Re.name+" "+window.VditorI18n.over+" "+ie.options.upload.max/1024/1024+"M</li>",We=!1);var ft=Re.name.lastIndexOf("."),Qe=Re.name.substr(ft),et=ie.options.upload.filename(Re.name.substr(0,ft))+Qe;ie.options.upload.accept&&(ie.options.upload.accept.split(",").some(function(Ke){var Ct=Ke.trim();if(Ct.indexOf(".")===0){if(Qe.toLowerCase()===Ct.toLowerCase())return!0}else if(Re.type.split("/")[0]===Ct.split("/")[0])return!0;return!1})||(se+="<li>"+Re.name+" "+window.VditorI18n.fileTypeError+"</li>",We=!1)),We&&(V.push(Re),ge+="<li>"+et+" "+window.VditorI18n.uploading+"</li>")}),he=te.length,fe=0;fe<he;fe++)ue(0,fe);return ie.tip.show("<ul>"+se+ge+"</ul>"),V}(e,i),M.length===0)return n&&(n.value=""),[2];for(_=new FormData,L=e.options.upload.extraData,F=0,$=Object.keys(L);F<$.length;F++)ee=$[F],_.append(ee,L[ee]);for(j=0,Q=M.length;j<Q;j++)_.append(e.options.upload.fieldName,M[j]);return(oe=new XMLHttpRequest).open("POST",e.options.upload.url),e.options.upload.token&&oe.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(oe.withCredentials=!0),pr(e,oe),e.upload.isUploading=!0,w.setAttribute("contenteditable","false"),oe.onreadystatechange=function(){if(oe.readyState===XMLHttpRequest.DONE){if(e.upload.isUploading=!1,w.setAttribute("contenteditable","true"),oe.status>=200&&oe.status<300)if(e.options.upload.success)e.options.upload.success(w,oe.responseText);else{var ie=oe.responseText;e.options.upload.format&&(ie=e.options.upload.format(t,oe.responseText)),function(te,V){ur(V).focus();var se=JSON.parse(te),ge="";se.code===1&&(ge=""+se.msg),se.data.errFiles&&se.data.errFiles.length>0&&(ge="<ul><li>"+ge+"</li>",se.data.errFiles.forEach(function(he){var fe=he.lastIndexOf("."),ce=V.options.upload.filename(he.substr(0,fe))+he.substr(fe);ge+="<li>"+ce+" "+window.VditorI18n.uploadError+"</li>"}),ge+="</ul>"),ge?V.tip.show(ge):V.tip.hide();var ue="";Object.keys(se.data.succMap).forEach(function(he){var fe=se.data.succMap[he],ce=he.lastIndexOf("."),Ee=he.substr(ce),Re=V.options.upload.filename(he.substr(0,ce))+Ee;(Ee=Ee.toLowerCase()).indexOf(".wav")===0||Ee.indexOf(".mp3")===0||Ee.indexOf(".ogg")===0?V.currentMode==="wysiwyg"?ue+=`<div class="vditor-wysiwyg__block" data-type="html-block"
 data-block="0"><pre><code>&lt;audio controls="controls" src="`+fe+'"&gt;&lt;/audio&gt;</code></pre><pre class="vditor-wysiwyg__preview" data-render="1"><audio controls="controls" src="'+fe+`"></audio></pre></div>
`:V.currentMode==="ir"?ue+='<audio controls="controls" src="'+fe+`"></audio>
`:ue+="["+Re+"]("+fe+`)
`:Ee.indexOf(".apng")===0||Ee.indexOf(".bmp")===0||Ee.indexOf(".gif")===0||Ee.indexOf(".ico")===0||Ee.indexOf(".cur")===0||Ee.indexOf(".jpg")===0||Ee.indexOf(".jpeg")===0||Ee.indexOf(".jfif")===0||Ee.indexOf(".pjp")===0||Ee.indexOf(".pjpeg")===0||Ee.indexOf(".png")===0||Ee.indexOf(".svg")===0||Ee.indexOf(".webp")===0?V.currentMode==="wysiwyg"?ue+='<img alt="'+Re+'" src="'+fe+`">
`:ue+="!["+Re+"]("+fe+`)
`:V.currentMode==="wysiwyg"?ue+='<a href="'+fe+'">'+Re+`</a>
`:ue+="["+Re+"]("+fe+`)
`}),(0,H.Hc)(V.upload.range),document.execCommand("insertHTML",!1,ue),V.upload.range=getSelection().getRangeAt(0).cloneRange()}(ie,e)}else e.options.upload.error?e.options.upload.error(oe.responseText):e.tip.show(oe.responseText);n&&(n.value=""),e.upload.element.style.display="none"}},oe.upload.onprogress=function(ie){if(ie.lengthComputable){var te=ie.loaded/ie.total*100;e.upload.element.style.display="block",e.upload.element.style.width=te+"%"}},oe.send(_),[2]}})})},$t=function(e,t,n){var i,r=(0,S.F9)(t.startContainer);if(r||(r=e.wysiwyg.element),n&&n.inputType!=="formatItalic"&&n.inputType!=="deleteByDrag"&&n.inputType!=="insertFromDrop"&&n.inputType!=="formatBold"&&n.inputType!=="formatRemove"&&n.inputType!=="formatStrikeThrough"&&n.inputType!=="insertUnorderedList"&&n.inputType!=="insertOrderedList"&&n.inputType!=="formatOutdent"&&n.inputType!=="formatIndent"&&n.inputType!==""||!n){var s=function(te){for(var V=te.previousSibling;V;){if(V.nodeType!==3&&V.tagName==="A"&&!V.previousSibling&&V.innerHTML.replace(v.g.ZWSP,"")===""&&V.nextSibling)return V;V=V.previousSibling}return!1}(t.startContainer);s&&s.remove(),e.wysiwyg.element.querySelectorAll("wbr").forEach(function(te){te.remove()}),t.insertNode(document.createElement("wbr")),r.querySelectorAll("[style]").forEach(function(te){te.removeAttribute("style")}),r.querySelectorAll(".vditor-comment").forEach(function(te){te.textContent.trim()===""&&(te.classList.remove("vditor-comment","vditor-comment--focus"),te.removeAttribute("data-cmtids"))}),(i=r.previousElementSibling)===null||i===void 0||i.querySelectorAll(".vditor-comment").forEach(function(te){te.textContent.trim()===""&&(te.classList.remove("vditor-comment","vditor-comment--focus"),te.removeAttribute("data-cmtids"))});var d="";r.getAttribute("data-type")==="link-ref-defs-block"&&(r=e.wysiwyg.element);var w,M=r.isEqualNode(e.wysiwyg.element),_=(0,S.a1)(r,"data-type","footnotes-block");if(M)d=r.innerHTML;else{var L=(0,S.O9)(t.startContainer);if(L&&!_){var F=(0,Z.S)(t.startContainer,"BLOCKQUOTE");r=F?(0,S.F9)(t.startContainer)||r:L}if(_&&(r=_),d=r.outerHTML,r.tagName==="UL"||r.tagName==="OL"){var $=r.previousElementSibling,ee=r.nextElementSibling;!$||$.tagName!=="UL"&&$.tagName!=="OL"||(d=$.outerHTML+d,$.remove()),!ee||ee.tagName!=="UL"&&ee.tagName!=="OL"||(d+=ee.outerHTML,ee.remove()),d=d.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}r.innerText.startsWith("```")||(e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(te){te&&!r.isEqualNode(te)&&(d+=te.outerHTML,te.remove())}),e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(te){te&&!r.isEqualNode(te)&&(d+=te.outerHTML,te.remove())}))}if((d=d.replace(/<\/(strong|b)><strong data-marker="\W{2}">/g,"").replace(/<\/(em|i)><em data-marker="\W{1}">/g,"").replace(/<\/(s|strike)><s data-marker="~{1,2}">/g,""))==='<p data-block="0">```<wbr></p>'&&e.hint.recentLanguage&&(d='<p data-block="0">```<wbr></p>'.replace("```","```"+e.hint.recentLanguage)),W("SpinVditorDOM",d,"argument",e.options.debugger),d=e.lute.SpinVditorDOM(d),W("SpinVditorDOM",d,"result",e.options.debugger),M)r.innerHTML=d;else if(r.outerHTML=d,_){var j=(0,S.E2)(e.wysiwyg.element.querySelector("wbr"),"LI");if(j){var Q=e.wysiwyg.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+j.getAttribute("data-marker")+'"]');Q&&Q.setAttribute("aria-label",j.textContent.trim().substr(0,24))}}var oe,ne=e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']");ne.forEach(function(te,V){V===0?w=te:(w.insertAdjacentHTML("beforeend",te.innerHTML),te.remove())}),ne.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",ne[0]);var ie=e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']");ie.forEach(function(te,V){V===0?oe=te:(oe.insertAdjacentHTML("beforeend",te.innerHTML),te.remove())}),ie.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",ie[0]),(0,H.ib)(e.wysiwyg.element,t),e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(te){Be(te,e)}),n&&(n.inputType==="deleteContentBackward"||n.inputType==="deleteContentForward")&&e.options.comment.enable&&(e.wysiwyg.triggerRemoveComment(e),e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)))}pe(e),Ie(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},no=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},ro=function(e,t,n,i){return new(n||(n=Promise))(function(r,s){function d(_){try{M(i.next(_))}catch(L){s(L)}}function w(_){try{M(i.throw(_))}catch(L){s(L)}}function M(_){var L;_.done?r(_.value):(L=_.value,L instanceof n?L:new n(function(F){F(L)})).then(d,w)}M((i=i.apply(e,t||[])).next())})},io=function(e,t){var n,i,r,s,d={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function w(M){return function(_){return function(L){if(n)throw new TypeError("Generator is already executing.");for(;d;)try{if(n=1,i&&(r=2&L[0]?i.return:L[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,L[1])).done)return r;switch(i=0,r&&(L=[2&L[0],r.value]),L[0]){case 0:case 1:r=L;break;case 4:return d.label++,{value:L[1],done:!1};case 5:d.label++,i=L[1],L=[0];continue;case 7:L=d.ops.pop(),d.trys.pop();continue;default:if(r=d.trys,!((r=r.length>0&&r[r.length-1])||L[0]!==6&&L[0]!==2)){d=0;continue}if(L[0]===3&&(!r||L[1]>r[0]&&L[1]<r[3])){d.label=L[1];break}if(L[0]===6&&d.label<r[1]){d.label=r[1],r=L;break}if(r&&d.label<r[2]){d.label=r[2],d.ops.push(L);break}r[2]&&d.ops.pop(),d.trys.pop();continue}L=t.call(e,d)}catch(F){L=[6,F],i=0}finally{n=r=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}([M,_])}}},mr=function(e,t,n){if(e.keyCode===229&&e.code===""&&e.key==="Unidentified"&&t.currentMode!=="sv"){var i=(0,S.F9)(n);if(i&&i.textContent.trim()==="")return t[t.currentMode].composingLock=!0,!1}return!0},fr=function(e,t,n){if(!(n.key==="Enter"||n.key==="Tab"||n.key==="Backspace"||n.key.indexOf("Arrow")>-1||(0,f.yl)(n)||n.key==="Escape"||n.shiftKey||n.altKey)){var i=(0,S.lG)(e.startContainer,"P")||(0,S.lG)(e.startContainer,"LI");if(i&&(0,H.im)(i,t[t.currentMode].element,e).start===0){i.nodeValue&&(i.nodeValue=i.nodeValue.replace(/\u2006/g,""));var r=document.createTextNode(v.g.ZWSP);e.insertNode(r),e.setStartAfter(r)}}},hr=function(e,t){if(t==="ArrowDown"||t==="ArrowUp"){var n=(0,S.a1)(e.startContainer,"data-type","math-inline")||(0,S.a1)(e.startContainer,"data-type","html-entity")||(0,S.a1)(e.startContainer,"data-type","html-inline");n&&(t==="ArrowDown"&&e.setStartAfter(n.parentElement),t==="ArrowUp"&&e.setStartBefore(n.parentElement))}},en=function(e,t){var n=(0,H.zh)(e),i=(0,S.F9)(n.startContainer);i&&(i.insertAdjacentHTML(t,'<p data-block="0">'+v.g.ZWSP+`<wbr>
</p>`),(0,H.ib)(e[e.currentMode].element,n),He(e),Ae(e))},oo=function(e){var t=(0,S.lG)(e,"TABLE");return!(!t||!t.rows[0].cells[0].isSameNode(e))&&t},ao=function(e){var t=(0,S.lG)(e,"TABLE");return!(!t||!t.lastElementChild.lastElementChild.lastElementChild.isSameNode(e))&&t},gr=function(e,t,n){n===void 0&&(n=!0);var i=e.previousElementSibling;return i||(i=e.parentElement.previousElementSibling?e.parentElement.previousElementSibling.lastElementChild:e.parentElement.parentElement.tagName==="TBODY"&&e.parentElement.parentElement.previousElementSibling?e.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild:null),i&&(t.selectNodeContents(i),n||t.collapse(!1),(0,H.Hc)(t)),i},Ft=function(e,t,n,i,r){var s=(0,H.im)(i,e[e.currentMode].element,n);if(t.key==="ArrowDown"&&i.textContent.trimRight().substr(s.start).indexOf(`
`)===-1||t.key==="ArrowRight"&&s.start>=i.textContent.trimRight().length){var d=r.nextElementSibling;return!d||d&&(d.tagName==="TABLE"||d.getAttribute("data-type"))?(r.insertAdjacentHTML("afterend",'<p data-block="0">'+v.g.ZWSP+"<wbr></p>"),(0,H.ib)(e[e.currentMode].element,n)):(n.selectNodeContents(d),n.collapse(!0),(0,H.Hc)(n)),t.preventDefault(),!0}return!1},At=function(e,t,n,i,r){var s=(0,H.im)(i,e[e.currentMode].element,n);if(t.key==="ArrowUp"&&i.textContent.substr(0,s.start).indexOf(`
`)===-1||(t.key==="ArrowLeft"||t.key==="Backspace"&&n.toString()==="")&&s.start===0){var d=r.previousElementSibling;return!d||d&&(d.tagName==="TABLE"||d.getAttribute("data-type"))?(r.insertAdjacentHTML("beforebegin",'<p data-block="0">'+v.g.ZWSP+"<wbr></p>"),(0,H.ib)(e[e.currentMode].element,n)):(n.selectNodeContents(d),n.collapse(!1),(0,H.Hc)(n)),t.preventDefault(),!0}return!1},tn=function(e,t,n,i){i===void 0&&(i=!0);var r=(0,S.lG)(t.startContainer,"LI");if(e[e.currentMode].element.querySelectorAll("wbr").forEach(function(L){L.remove()}),t.insertNode(document.createElement("wbr")),i&&r){for(var s="",d=0;d<r.parentElement.childElementCount;d++){var w=r.parentElement.children[d].querySelector("input");w&&w.remove(),s+='<p data-block="0">'+r.parentElement.children[d].innerHTML.trimLeft()+"</p>"}r.parentElement.insertAdjacentHTML("beforebegin",s),r.parentElement.remove()}else if(r)if(n==="check")r.parentElement.querySelectorAll("li").forEach(function(L){L.insertAdjacentHTML("afterbegin",'<input type="checkbox" />'+(L.textContent.indexOf(" ")===0?"":" ")),L.classList.add("vditor-task")});else{r.querySelector("input")&&r.parentElement.querySelectorAll("li").forEach(function(L){L.querySelector("input").remove(),L.classList.remove("vditor-task")});var M=void 0;n==="list"?(M=document.createElement("ul")).setAttribute("data-marker","*"):(M=document.createElement("ol")).setAttribute("data-marker","1."),M.setAttribute("data-block","0"),M.setAttribute("data-tight",r.parentElement.getAttribute("data-tight")),M.innerHTML=r.parentElement.innerHTML,r.parentElement.parentNode.replaceChild(M,r.parentElement)}else{var _=(0,S.a1)(t.startContainer,"data-block","0");_||(e[e.currentMode].element.querySelector("wbr").remove(),(_=e[e.currentMode].element.querySelector("p")).innerHTML="<wbr>"),n==="check"?(_.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li class="vditor-task"><input type="checkbox" /> '+_.innerHTML+"</li></ul>"),_.remove()):n==="list"?(_.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li>'+_.innerHTML+"</li></ul>"),_.remove()):n==="ordered-list"&&(_.insertAdjacentHTML("beforebegin",'<ol data-block="0"><li>'+_.innerHTML+"</li></ol>"),_.remove())}},vr=function(e,t,n){var i=t.previousElementSibling;if(t&&i){var r=[t];Array.from(n.cloneContents().children).forEach(function(M,_){M.nodeType!==3&&t&&M.textContent.trim()!==""&&t.getAttribute("data-node-id")===M.getAttribute("data-node-id")&&(_!==0&&r.push(t),t=t.nextElementSibling)}),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(M){M.remove()}),n.insertNode(document.createElement("wbr"));var s=i.parentElement,d="";r.forEach(function(M){var _=M.getAttribute("data-marker");_.length!==1&&(_="1"+_.slice(-1)),d+='<li data-node-id="'+M.getAttribute("data-node-id")+'" data-marker="'+_+'">'+M.innerHTML+"</li>",M.remove()}),i.insertAdjacentHTML("beforeend","<"+s.tagName+' data-block="0">'+d+"</"+s.tagName+">"),e.currentMode==="wysiwyg"?s.outerHTML=e.lute.SpinVditorDOM(s.outerHTML):s.outerHTML=e.lute.SpinVditorIRDOM(s.outerHTML),(0,H.ib)(e[e.currentMode].element,n);var w=(0,S.O9)(n.startContainer);w&&w.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach(function(M){Be(M,e),e.currentMode==="wysiwyg"&&M.previousElementSibling.setAttribute("style","display:none")}),Ae(e),He(e)}else e[e.currentMode].element.focus()},Ln=function(e,t,n,i){var r=(0,S.lG)(t.parentElement,"LI");if(r){e[e.currentMode].element.querySelectorAll("wbr").forEach(function(F){F.remove()}),n.insertNode(document.createElement("wbr"));var s=t.parentElement,d=s.cloneNode(),w=[t];Array.from(n.cloneContents().children).forEach(function(F,$){F.nodeType!==3&&t&&F.textContent.trim()!==""&&t.getAttribute("data-node-id")===F.getAttribute("data-node-id")&&($!==0&&w.push(t),t=t.nextElementSibling)});var M=!1,_="";s.querySelectorAll("li").forEach(function(F){M&&(_+=F.outerHTML,F.nextElementSibling||F.previousElementSibling?F.remove():F.parentElement.remove()),F.isSameNode(w[w.length-1])&&(M=!0)}),w.reverse().forEach(function(F){r.insertAdjacentElement("afterend",F)}),_&&(d.innerHTML=_,w[0].insertAdjacentElement("beforeend",d)),e.currentMode==="wysiwyg"?i.outerHTML=e.lute.SpinVditorDOM(i.outerHTML):i.outerHTML=e.lute.SpinVditorIRDOM(i.outerHTML),(0,H.ib)(e[e.currentMode].element,n);var L=(0,S.O9)(n.startContainer);L&&L.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach(function(F){Be(F,e),e.currentMode==="wysiwyg"&&F.previousElementSibling.setAttribute("style","display:none")}),Ae(e),He(e)}else e[e.currentMode].element.focus()},nn=function(e,t){for(var n=getSelection().getRangeAt(0).startContainer.parentElement,i=e.rows[0].cells.length,r=e.rows.length,s=0,d=0;d<r;d++)for(var w=0;w<i;w++)if(e.rows[d].cells[w].isSameNode(n)){s=w;break}for(var M=0;M<r;M++)e.rows[M].cells[s].setAttribute("align",t)},_n=function(e){var t=e.trimRight().split(`
`).pop();return t!==""&&(t.replace(/ |-/g,"")===""||t.replace(/ |_/g,"")===""||t.replace(/ |\*/g,"")==="")&&t.replace(/ /g,"").length>2&&!(t.indexOf("-")>-1&&t.trimLeft().indexOf(" ")===-1&&e.trimRight().split(`
`).length>1)&&t.indexOf("    ")!==0&&t.indexOf("	")!==0},Mn=function(e){var t=e.trimRight().split(`
`);return(e=t.pop()).indexOf("    ")!==0&&e.indexOf("	")!==0&&(e=e.trimLeft())!==""&&t.length!==0&&(e.replace(/-/g,"")===""||e.replace(/=/g,"")==="")},Ae=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),e.currentMode==="wysiwyg"?Ie(e,t):e.currentMode==="ir"?mt(e,t):e.currentMode==="sv"&&Xe(e,t)},yr=function(e,t,n,i){var r,s=e.startContainer,d=(0,S.lG)(s,"LI");if(d){if(!(0,f.yl)(i)&&!i.altKey&&i.key==="Enter"&&!i.shiftKey&&n&&d.contains(n)&&n.nextElementSibling)return d&&!d.textContent.endsWith(`
`)&&d.insertAdjacentText("beforeend",`
`),e.insertNode(document.createTextNode(`

`)),e.collapse(!1),Ae(t),i.preventDefault(),!0;if(!((0,f.yl)(i)||i.shiftKey||i.altKey||i.key!=="Backspace"||d.previousElementSibling||e.toString()!==""||(0,H.im)(d,t[t.currentMode].element,e).start!==0))return d.nextElementSibling?(d.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+d.innerHTML+"</p>"),d.remove()):d.parentElement.outerHTML='<p data-block="0"><wbr>'+d.innerHTML+"</p>",(0,H.ib)(t[t.currentMode].element,e),Ae(t),i.preventDefault(),!0;if(!(0,f.yl)(i)&&!i.shiftKey&&!i.altKey&&i.key==="Backspace"&&d.textContent.trim().replace(v.g.ZWSP,"")===""&&e.toString()===""&&((r=d.previousElementSibling)===null||r===void 0?void 0:r.tagName)==="LI")return d.previousElementSibling.insertAdjacentText("beforeend",`

`),e.selectNodeContents(d.previousElementSibling),e.collapse(!1),d.remove(),(0,H.ib)(t[t.currentMode].element,e),Ae(t),i.preventDefault(),!0;if(!(0,f.yl)(i)&&!i.altKey&&i.key==="Tab"){var w=!1;if((e.startOffset===0&&(s.nodeType===3&&!s.previousSibling||s.nodeType!==3&&s.nodeName==="LI")||d.classList.contains("vditor-task")&&e.startOffset===1&&s.previousSibling.nodeType!==3&&s.previousSibling.tagName==="INPUT")&&(w=!0),w||e.toString()!=="")return i.shiftKey?Ln(t,d,e,d.parentElement):vr(t,d,e),i.preventDefault(),!0}}return!1},On=function(e,t,n){if(e.options.tab&&n.key==="Tab")return n.shiftKey||(t.toString()===""?(t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1)):(t.extractContents(),t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1))),(0,H.Hc)(t),Ae(e),n.preventDefault(),!0},br=function(e,t,n,i){if(n){if(!(0,f.yl)(e)&&!e.altKey&&e.key==="Enter"){var r=String.raw(Yt||(Yt=no(["",""],["",""])),n.textContent).replace(/\\\|/g,"").trim(),s=r.split("|");if(r.startsWith("|")&&r.endsWith("|")&&s.length>3){var d=s.map(function(){return"---"}).join("|");return d=n.textContent+`
`+d.substring(3,d.length-3)+`
|<wbr>`,n.outerHTML=t.lute.SpinVditorDOM(d),(0,H.ib)(t[t.currentMode].element,i),Ae(t),Ge(t),e.preventDefault(),!0}if(_n(n.innerHTML)&&n.previousElementSibling){var w="",M=n.innerHTML.trimRight().split(`
`);return M.length>1&&(M.pop(),w='<p data-block="0">'+M.join(`
`)+"</p>"),n.insertAdjacentHTML("afterend",w+`<hr data-block="0"><p data-block="0"><wbr>
</p>`),n.remove(),(0,H.ib)(t[t.currentMode].element,i),Ae(t),Ge(t),e.preventDefault(),!0}if(Mn(n.innerHTML))return t.currentMode==="wysiwyg"?n.outerHTML=t.lute.SpinVditorDOM(n.innerHTML+`<p data-block="0"><wbr>
</p>`):n.outerHTML=t.lute.SpinVditorIRDOM(n.innerHTML+`<p data-block="0"><wbr>
</p>`),(0,H.ib)(t[t.currentMode].element,i),Ae(t),Ge(t),e.preventDefault(),!0}if(i.collapsed&&n.previousElementSibling&&e.key==="Backspace"&&!(0,f.yl)(e)&&!e.altKey&&!e.shiftKey&&n.textContent.trimRight().split(`
`).length>1&&(0,H.im)(n,t[t.currentMode].element,i).start===0){var _=(0,S.DX)(n.previousElementSibling);return _.textContent.endsWith(`
`)||(_.textContent=_.textContent+`
`),_.parentElement.insertAdjacentHTML("beforeend","<wbr>"+n.innerHTML),n.remove(),(0,H.ib)(t[t.currentMode].element,i),!1}return!1}},wr=function(e,t,n){for(var i="",r=0;r<n.parentElement.childElementCount;r++)i+='<td align="'+n.parentElement.children[r].getAttribute("align")+'"> </td>';n.tagName==="TH"?n.parentElement.parentElement.insertAdjacentHTML("afterend","<tbody><tr>"+i+"</tr></tbody>"):n.parentElement.insertAdjacentHTML("afterend","<tr>"+i+"</tr>"),Ae(e)},Er=function(e,t,n){for(var i="",r=0;r<n.parentElement.childElementCount;r++)n.tagName==="TH"?i+='<th align="'+n.parentElement.children[r].getAttribute("align")+'"> </th>':i+='<td align="'+n.parentElement.children[r].getAttribute("align")+'"> </td>';if(n.tagName==="TH"){n.parentElement.parentElement.insertAdjacentHTML("beforebegin","<thead><tr>"+i+"</tr></thead>"),t.insertNode(document.createElement("wbr"));var s=n.parentElement.innerHTML.replace(/<th>/g,"<td>").replace(/<\/th>/g,"</td>");n.parentElement.parentElement.nextElementSibling.insertAdjacentHTML("afterbegin",s),n.parentElement.parentElement.remove(),(0,H.ib)(e.ir.element,t)}else n.parentElement.insertAdjacentHTML("beforebegin","<tr>"+i+"</tr>");Ae(e)},rn=function(e,t,n,i){i===void 0&&(i="afterend");for(var r=0,s=n.previousElementSibling;s;)r++,s=s.previousElementSibling;for(var d=0;d<t.rows.length;d++)d===0?t.rows[d].cells[r].insertAdjacentHTML(i,"<th> </th>"):t.rows[d].cells[r].insertAdjacentHTML(i,"<td> </td>");Ae(e)},kr=function(e,t,n){if(n.tagName==="TD"){var i=n.parentElement.parentElement;n.parentElement.previousElementSibling?t.selectNodeContents(n.parentElement.previousElementSibling.lastElementChild):t.selectNodeContents(i.previousElementSibling.lastElementChild.lastElementChild),i.childElementCount===1?i.remove():n.parentElement.remove(),t.collapse(!1),(0,H.Hc)(t),Ae(e)}},xr=function(e,t,n,i){for(var r=0,s=i.previousElementSibling;s;)r++,s=s.previousElementSibling;(i.previousElementSibling||i.nextElementSibling)&&(t.selectNodeContents(i.previousElementSibling||i.nextElementSibling),t.collapse(!0));for(var d=0;d<n.rows.length;d++){var w=n.rows[d].cells;if(w.length===1){n.remove(),He(e);break}w[r].remove()}(0,H.Hc)(t),Ae(e)},Sr=function(e,t,n){var i=n.startContainer,r=(0,S.lG)(i,"TD")||(0,S.lG)(i,"TH");if(r){if(!(0,f.yl)(t)&&!t.altKey&&t.key==="Enter"){r.lastElementChild&&(!r.lastElementChild||r.lastElementChild.isSameNode(r.lastChild)&&r.lastElementChild.tagName==="BR")||r.insertAdjacentHTML("beforeend","<br>");var s=document.createElement("br");return n.insertNode(s),n.setStartAfter(s),Ae(e),Ge(e),t.preventDefault(),!0}if(t.key==="Tab")return t.shiftKey?(gr(r,n),t.preventDefault(),!0):((L=r.nextElementSibling)||(L=r.parentElement.nextElementSibling?r.parentElement.nextElementSibling.firstElementChild:r.parentElement.parentElement.tagName==="THEAD"&&r.parentElement.parentElement.nextElementSibling?r.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild:null),L&&(n.selectNodeContents(L),(0,H.Hc)(n)),t.preventDefault(),!0);var d=r.parentElement.parentElement.parentElement;if(t.key==="ArrowUp"){if(t.preventDefault(),r.tagName==="TH")return d.previousElementSibling?(n.selectNodeContents(d.previousElementSibling),n.collapse(!1),(0,H.Hc)(n)):en(e,"beforebegin"),!0;for(var w=0,M=r.parentElement;w<M.cells.length&&!M.cells[w].isSameNode(r);w++);var _=M.previousElementSibling;return _||(_=M.parentElement.previousElementSibling.firstChild),n.selectNodeContents(_.cells[w]),n.collapse(!1),(0,H.Hc)(n),!0}if(t.key==="ArrowDown"){var L;if(t.preventDefault(),!(M=r.parentElement).nextElementSibling&&r.tagName==="TD")return d.nextElementSibling?(n.selectNodeContents(d.nextElementSibling),n.collapse(!0),(0,H.Hc)(n)):en(e,"afterend"),!0;for(w=0;w<M.cells.length&&!M.cells[w].isSameNode(r);w++);return(L=M.nextElementSibling)||(L=M.parentElement.nextElementSibling.firstChild),n.selectNodeContents(L.cells[w]),n.collapse(!0),(0,H.Hc)(n),!0}if(e.currentMode==="wysiwyg"&&!(0,f.yl)(t)&&t.key==="Enter"&&!t.shiftKey&&t.altKey){var F=e.wysiwyg.popover.querySelector(".vditor-input");return F.focus(),F.select(),t.preventDefault(),!0}if(!(0,f.yl)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Backspace"&&n.startOffset===0&&n.toString()==="")return!gr(r,n,!1)&&d&&(d.textContent.trim()===""?(d.outerHTML=`<p data-block="0"><wbr>
</p>`,(0,H.ib)(e[e.currentMode].element,n)):(n.setStartBefore(d),n.collapse(!0)),Ae(e)),t.preventDefault(),!0;if(X("⇧⌘F",t))return Er(e,n,r),t.preventDefault(),!0;if(X("⌘=",t))return wr(e,n,r),t.preventDefault(),!0;if(X("⇧⌘G",t))return rn(e,d,r,"beforebegin"),t.preventDefault(),!0;if(X("⇧⌘=",t))return rn(e,d,r),t.preventDefault(),!0;if(X("⌘-",t))return kr(e,n,r),t.preventDefault(),!0;if(X("⇧⌘-",t))return xr(e,n,d,r),t.preventDefault(),!0;if(X("⇧⌘L",t)){if(e.currentMode==="ir")return nn(d,"left"),Ae(e),t.preventDefault(),!0;if($=e.wysiwyg.popover.querySelector('[data-type="left"]'))return $.click(),t.preventDefault(),!0}if(X("⇧⌘C",t)){if(e.currentMode==="ir")return nn(d,"center"),Ae(e),t.preventDefault(),!0;if($=e.wysiwyg.popover.querySelector('[data-type="center"]'))return $.click(),t.preventDefault(),!0}if(X("⇧⌘R",t)){if(e.currentMode==="ir")return nn(d,"right"),Ae(e),t.preventDefault(),!0;var $;if($=e.wysiwyg.popover.querySelector('[data-type="right"]'))return $.click(),t.preventDefault(),!0}}return!1},Tr=function(e,t,n,i){if(n.tagName==="PRE"&&X("⌘A",t))return i.selectNodeContents(n.firstElementChild),t.preventDefault(),!0;if(e.options.tab&&t.key==="Tab"&&!t.shiftKey&&i.toString()==="")return i.insertNode(document.createTextNode(e.options.tab)),i.collapse(!1),Ae(e),t.preventDefault(),!0;if(t.key==="Backspace"&&!(0,f.yl)(t)&&!t.shiftKey&&!t.altKey){var r=(0,H.im)(n,e[e.currentMode].element,i);if((r.start===0||r.start===1&&n.innerText===`
`)&&i.toString()==="")return n.parentElement.outerHTML='<p data-block="0"><wbr>'+n.firstElementChild.innerHTML+"</p>",(0,H.ib)(e[e.currentMode].element,i),Ae(e),t.preventDefault(),!0}return!(0,f.yl)(t)&&!t.altKey&&t.key==="Enter"&&(n.firstElementChild.textContent.endsWith(`
`)||n.firstElementChild.insertAdjacentText("beforeend",`
`),i.extractContents(),i.insertNode(document.createTextNode(`
`)),i.collapse(!1),(0,H.Hc)(i),(0,f.vU)()||(e.currentMode==="wysiwyg"?$t(e,i):me(e,i)),Ge(e),t.preventDefault(),!0)},Ar=function(e,t,n,i){var r=t.startContainer,s=(0,S.lG)(r,"BLOCKQUOTE");if(s&&t.toString()===""){if(n.key==="Backspace"&&!(0,f.yl)(n)&&!n.shiftKey&&!n.altKey&&(0,H.im)(s,e[e.currentMode].element,t).start===0)return t.insertNode(document.createElement("wbr")),s.outerHTML=s.innerHTML,(0,H.ib)(e[e.currentMode].element,t),Ae(e),n.preventDefault(),!0;if(i&&n.key==="Enter"&&!(0,f.yl)(n)&&!n.shiftKey&&!n.altKey&&i.parentElement.tagName==="BLOCKQUOTE"){var d=!1;if(i.innerHTML.replace(v.g.ZWSP,"")===`
`||i.innerHTML.replace(v.g.ZWSP,"")===""?(d=!0,i.remove()):i.innerHTML.endsWith(`

`)&&(0,H.im)(i,e[e.currentMode].element,t).start===i.textContent.length-1&&(i.innerHTML=i.innerHTML.substr(0,i.innerHTML.length-2),d=!0),d)return s.insertAdjacentHTML("afterend",'<p data-block="0">'+v.g.ZWSP+`<wbr>
</p>`),(0,H.ib)(e[e.currentMode].element,t),Ae(e),n.preventDefault(),!0}var w=(0,S.F9)(r);if(e.currentMode==="wysiwyg"&&w&&X("⇧⌘;",n))return t.insertNode(document.createElement("wbr")),w.outerHTML='<blockquote data-block="0">'+w.outerHTML+"</blockquote>",(0,H.ib)(e.wysiwyg.element,t),Ie(e),n.preventDefault(),!0;if(Ft(e,n,t,s,s)||At(e,n,t,s,s))return!0}return!1},Cr=function(e,t,n){var i=t.startContainer,r=(0,S.fb)(i,"vditor-task");if(r){if(X("⇧⌘J",n)){var s=r.firstElementChild;return s.checked?s.removeAttribute("checked"):s.setAttribute("checked","checked"),Ae(e),n.preventDefault(),!0}if(n.key==="Backspace"&&!(0,f.yl)(n)&&!n.shiftKey&&!n.altKey&&t.toString()===""&&t.startOffset===1&&(i.nodeType===3&&i.previousSibling&&i.previousSibling.tagName==="INPUT"||i.nodeType!==3)){var d=r.previousElementSibling;return r.querySelector("input").remove(),d?((0,S.DX)(d).parentElement.insertAdjacentHTML("beforeend","<wbr>"+r.innerHTML.trim()),r.remove()):(r.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+(r.innerHTML.trim()||`
`)+"</p>"),r.nextElementSibling?r.remove():r.parentElement.remove()),(0,H.ib)(e[e.currentMode].element,t),Ae(e),n.preventDefault(),!0}if(n.key==="Enter"&&!(0,f.yl)(n)&&!n.shiftKey&&!n.altKey){if(r.textContent.trim()==="")if((0,S.fb)(r.parentElement,"vditor-task")){var w=(0,S.O9)(i);w&&Ln(e,r,t,w)}else if(r.nextElementSibling){var M="",_="",L=!1;Array.from(r.parentElement.children).forEach(function(j){r.isSameNode(j)?L=!0:L?M+=j.outerHTML:_+=j.outerHTML});var F=r.parentElement.tagName,$=r.parentElement.tagName==="OL"?"":' data-marker="'+r.parentElement.getAttribute("data-marker")+'"',ee="";_&&(ee=r.parentElement.tagName==="UL"?"":' start="1"',_="<"+F+' data-tight="true"'+$+' data-block="0">'+_+"</"+F+">"),r.parentElement.outerHTML=_+`<p data-block="0"><wbr>
</p><`+F+`
 data-tight="true"`+$+' data-block="0"'+ee+">"+M+"</"+F+">"}else r.parentElement.insertAdjacentHTML("afterend",`<p data-block="0"><wbr>
</p>`),r.parentElement.querySelectorAll("li").length===1?r.parentElement.remove():r.remove();else i.nodeType!==3&&t.startOffset===0&&i.firstChild.tagName==="INPUT"?t.setStart(i.childNodes[1],1):(t.setEndAfter(r.lastChild),r.insertAdjacentHTML("afterend",'<li class="vditor-task" data-marker="'+r.getAttribute("data-marker")+'"><input type="checkbox"> <wbr></li>'),document.querySelector("wbr").after(t.extractContents()));return(0,H.ib)(e[e.currentMode].element,t),Ae(e),Ge(e),n.preventDefault(),!0}}return!1},Lr=function(e,t,n,i){if(t.startContainer.nodeType!==3){var r=t.startContainer.children[t.startOffset];if(r&&r.tagName==="HR")return t.selectNodeContents(r.previousElementSibling),t.collapse(!1),n.preventDefault(),!0}if(i){var s=i.previousElementSibling;if(s&&(0,H.im)(i,e[e.currentMode].element,t).start===0&&((0,f.vU)()&&s.tagName==="HR"||s.tagName==="TABLE")){if(s.tagName==="TABLE"){var d=s.lastElementChild.lastElementChild.lastElementChild;d.innerHTML=d.innerHTML.trimLeft()+"<wbr>"+i.textContent.trim(),i.remove()}else s.remove();return(0,H.ib)(e[e.currentMode].element,t),Ae(e),n.preventDefault(),!0}}return!1},_r=function(e){(0,f.vU)()&&e.startContainer.nodeType!==3&&e.startContainer.tagName==="HR"&&e.setStartBefore(e.startContainer)},Mr=function(e,t,n){var i,r;if(!(0,f.vU)())return!1;if(e.key==="ArrowUp"&&t&&((i=t.previousElementSibling)===null||i===void 0?void 0:i.tagName)==="TABLE"){var s=t.previousElementSibling;return n.selectNodeContents(s.rows[s.rows.length-1].lastElementChild),n.collapse(!1),e.preventDefault(),!0}return!(e.key!=="ArrowDown"||!t||((r=t.nextElementSibling)===null||r===void 0?void 0:r.tagName)!=="TABLE")&&(n.selectNodeContents(t.nextElementSibling.rows[0].cells[0]),n.collapse(!0),e.preventDefault(),!0)},on=function(e,t,n){return ro(void 0,void 0,void 0,function(){var i,r,s,d,w,M,_,L,F,$,ee,j,Q,oe,ne,ie;return io(this,function(te){switch(te.label){case 0:return e[e.currentMode].element.getAttribute("contenteditable")!=="true"?[2]:(t.stopPropagation(),t.preventDefault(),"clipboardData"in t?(i=t.clipboardData.getData("text/html"),r=t.clipboardData.getData("text/plain"),s=t.clipboardData.files):(i=t.dataTransfer.getData("text/html"),r=t.dataTransfer.getData("text/plain"),t.dataTransfer.types.includes("Files")&&(s=t.dataTransfer.items)),d={},w=function(V,se){if(!se)return["",Lute.WalkContinue];var ge=V.TokensStr();if(V.__internal_object__.Parent.Type===34&&ge&&ge.indexOf("file://")===-1&&e.options.upload.linkToImgUrl){var ue=new XMLHttpRequest;ue.open("POST",e.options.upload.linkToImgUrl),e.options.upload.token&&ue.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(ue.withCredentials=!0),pr(e,ue),ue.setRequestHeader("Content-Type","application/json; charset=utf-8"),ue.onreadystatechange=function(){if(ue.readyState===XMLHttpRequest.DONE){if(ue.status===200){var he=ue.responseText;e.options.upload.linkToImgFormat&&(he=e.options.upload.linkToImgFormat(ue.responseText));var fe=JSON.parse(he);if(fe.code!==0)return void e.tip.show(fe.msg);var ce=fe.data.originalURL;if(e.currentMode==="sv")e.sv.element.querySelectorAll(".vditor-sv__marker--link").forEach(function(Re){Re.textContent===ce&&(Re.textContent=fe.data.url)});else{var Ee=e[e.currentMode].element.querySelector('img[src="'+ce+'"]');Ee.src=fe.data.url,e.currentMode==="ir"&&(Ee.previousElementSibling.previousElementSibling.innerHTML=fe.data.url)}Ae(e)}else e.tip.show(ue.responseText);e.options.upload.linkToImgCallback&&e.options.upload.linkToImgCallback(ue.responseText)}},ue.send(JSON.stringify({url:ge}))}return e.currentMode==="ir"?['<span class="vditor-ir__marker vditor-ir__marker--link">'+Lute.EscapeHTMLStr(ge)+"</span>",Lute.WalkContinue]:e.currentMode==="wysiwyg"?["",Lute.WalkContinue]:['<span class="vditor-sv__marker--link">'+Lute.EscapeHTMLStr(ge)+"</span>",Lute.WalkContinue]},i.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/gi,"").trim()!=='<a href="'+r+'">'+r+"</a>"&&i.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/gi,"").trim()!=='<!--StartFragment--><a href="'+r+'">'+r+"</a><!--EndFragment-->"||(i=""),(M=new DOMParser().parseFromString(i,"text/html")).body&&(i=M.body.innerHTML),i=Lute.Sanitize(i),e.wysiwyg.getComments(e),_=e[e.currentMode].element.scrollHeight,L=function(V,se,ge){ge===void 0&&(ge="sv");var ue=document.createElement("div");ue.innerHTML=V;var he=!1;ue.childElementCount===1&&ue.lastElementChild.style.fontFamily.indexOf("monospace")>-1&&(he=!0);var fe=ue.querySelectorAll("pre");if(ue.childElementCount===1&&fe.length===1&&fe[0].className!=="vditor-wysiwyg"&&fe[0].className!=="vditor-sv"&&(he=!0),V.indexOf(`
<p class="p1">`)===0&&(he=!0),ue.childElementCount===1&&ue.firstElementChild.tagName==="TABLE"&&ue.querySelector(".line-number")&&ue.querySelector(".line-content")&&(he=!0),he){var ce=se||V;return/\n/.test(ce)||fe.length===1?ge==="wysiwyg"?'<div class="vditor-wysiwyg__block" data-block="0" data-type="code-block"><pre><code>'+ce.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"<wbr></code></pre></div>":"\n```\n"+ce.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"\n```":ge==="wysiwyg"?"<code>"+ce.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"</code><wbr>":"`"+ce+"`"}return!1}(i,r,e.currentMode),(F=e.currentMode==="sv"?(0,S.a1)(t.target,"data-type","code-block"):(0,S.lG)(t.target,"CODE"))?(e.currentMode==="sv"?document.execCommand("insertHTML",!1,r.replace(/&/g,"&amp;").replace(/</g,"&lt;")):($=(0,H.im)(t.target,e[e.currentMode].element),F.parentElement.tagName!=="PRE"&&(r+=v.g.ZWSP),F.textContent=F.textContent.substring(0,$.start)+r+F.textContent.substring($.end),(0,H.$j)($.start+r.length,$.start+r.length,F.parentElement),!((ie=F.parentElement)===null||ie===void 0)&&ie.nextElementSibling.classList.contains("vditor-"+e.currentMode+"__preview")&&(F.parentElement.nextElementSibling.innerHTML=F.outerHTML,Be(F.parentElement.nextElementSibling,e))),[3,8]):[3,1]);case 1:return L?(n.pasteCode(L),[3,8]):[3,2];case 2:return i.trim()===""?[3,3]:((ee=document.createElement("div")).innerHTML=i,ee.querySelectorAll("[style]").forEach(function(V){V.removeAttribute("style")}),ee.querySelectorAll(".vditor-copy").forEach(function(V){V.remove()}),e.currentMode==="ir"?(d.HTML2VditorIRDOM={renderLinkDest:w},e.lute.SetJSRenderers({renderers:d}),(0,H.oC)(e.lute.HTML2VditorIRDOM(ee.innerHTML),e)):e.currentMode==="wysiwyg"?(d.HTML2VditorDOM={renderLinkDest:w},e.lute.SetJSRenderers({renderers:d}),(0,H.oC)(e.lute.HTML2VditorDOM(ee.innerHTML),e)):(d.Md2VditorSVDOM={renderLinkDest:w},e.lute.SetJSRenderers({renderers:d}),lr(e,e.lute.HTML2Md(ee.innerHTML).trimRight())),e.outline.render(e),[3,8]);case 3:return s.length>0?e.options.upload.url||e.options.upload.handler?[4,Cn(e,s)]:[3,5]:[3,7];case 4:return te.sent(),[3,6];case 5:j=new FileReader,"clipboardData"in t?(s=t.clipboardData.files,Q=s[0]):t.dataTransfer.types.includes("Files")&&(s=t.dataTransfer.items,Q=s[0].getAsFile()),Q&&Q.type.startsWith("image")&&(j.readAsDataURL(Q),j.onload=function(){var V="";e.currentMode==="wysiwyg"?V+='<img alt="'+Q.name+'" src="'+j.result.toString()+`">
`:V+="!["+Q.name+"]("+j.result.toString()+`)
`,document.execCommand("insertHTML",!1,V)}),te.label=6;case 6:return[3,8];case 7:r.trim()!==""&&s.length===0&&((ne=(0,H.zh)(e)).toString()!==""&&e.lute.IsValidLinkDest(r)&&(r="["+ne.toString()+"]("+r+")"),e.currentMode==="ir"?(d.Md2VditorIRDOM={renderLinkDest:w},e.lute.SetJSRenderers({renderers:d}),(0,H.oC)(e.lute.Md2VditorIRDOM(r),e)):e.currentMode==="wysiwyg"?(d.Md2VditorDOM={renderLinkDest:w},e.lute.SetJSRenderers({renderers:d}),(0,H.oC)(e.lute.Md2VditorDOM(r),e)):(d.Md2VditorSVDOM={renderLinkDest:w},e.lute.SetJSRenderers({renderers:d}),lr(e,r)),e.outline.render(e)),te.label=8;case 8:return e.currentMode!=="sv"&&((oe=(0,S.F9)((0,H.zh)(e).startContainer))&&(ne=(0,H.zh)(e),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(V){V.remove()}),ne.insertNode(document.createElement("wbr")),e.currentMode==="wysiwyg"?oe.outerHTML=e.lute.SpinVditorDOM(oe.outerHTML):oe.outerHTML=e.lute.SpinVditorIRDOM(oe.outerHTML),(0,H.ib)(e[e.currentMode].element,ne)),e[e.currentMode].element.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach(function(V){Be(V,e)})),e.wysiwyg.triggerRemoveComment(e),Ae(e),e[e.currentMode].element.scrollHeight-_>Math.min(e[e.currentMode].element.clientHeight,window.innerHeight)/2&&Ge(e),[2]}})})},Or=function(e){e.hint.render(e);var t=(0,H.zh)(e).startContainer,n=(0,S.a1)(t,"data-type","code-block-info");if(n)if(n.textContent.replace(v.g.ZWSP,"")===""&&e.hint.recentLanguage)n.textContent=v.g.ZWSP+e.hint.recentLanguage,(0,H.zh)(e).selectNodeContents(n);else{var i=[],r=n.textContent.substring(0,(0,H.im)(n,e.ir.element).start).replace(v.g.ZWSP,"");(e.options.preview.hljs.langs||v.g.CODE_LANGUAGES).forEach(function(s){s.indexOf(r.toLowerCase())>-1&&i.push({html:s,value:s})}),e.hint.genHTML(i,r,e)}},mt=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&Or(e),clearTimeout(e.ir.processTimeoutId),e.ir.processTimeoutId=window.setTimeout(function(){if(!e.ir.composingLock){var n=p(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,f.pK)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},Vt=function(e,t){var n=(0,H.zh)(e),i=(0,S.F9)(n.startContainer)||n.startContainer;if(i){var r=i.querySelector(".vditor-ir__marker--heading");r?r.innerHTML=t:(i.insertAdjacentText("afterbegin",t),n.selectNodeContents(i),n.collapse(!1)),me(e,n.cloneRange()),kt(e)}},an=function(e,t,n){var i=(0,S.a1)(e.startContainer,"data-type",n);if(i){i.firstElementChild.remove(),i.lastElementChild.remove(),e.insertNode(document.createElement("wbr"));var r=document.createElement("div");r.innerHTML=t.lute.SpinVditorIRDOM(i.outerHTML),i.outerHTML=r.firstElementChild.innerHTML.trim()}},so=function(e,t,n,i){var r=(0,H.zh)(e),s=t.getAttribute("data-type"),d=r.startContainer;d.nodeType===3&&(d=d.parentElement);var w=!0;if(t.classList.contains("vditor-menu--current"))if(s==="quote"){var M=(0,S.lG)(d,"BLOCKQUOTE");M&&(r.insertNode(document.createElement("wbr")),M.outerHTML=M.innerHTML.trim()===""?'<p data-block="0">'+M.innerHTML+"</p>":M.innerHTML)}else if(s==="link"){var _=(0,S.a1)(r.startContainer,"data-type","a");if(_){var L=(0,S.fb)(r.startContainer,"vditor-ir__link");L?(r.insertNode(document.createElement("wbr")),_.outerHTML=L.innerHTML):_.outerHTML=_.querySelector(".vditor-ir__link").innerHTML+"<wbr>"}}else s==="italic"?an(r,e,"em"):s==="bold"?an(r,e,"strong"):s==="strike"?an(r,e,"s"):s==="inline-code"?an(r,e,"code"):s!=="check"&&s!=="list"&&s!=="ordered-list"||(tn(e,r,s),w=!1,t.classList.remove("vditor-menu--current"));else{e.ir.element.childNodes.length===0&&(e.ir.element.innerHTML='<p data-block="0"><wbr></p>',(0,H.ib)(e.ir.element,r));var F=(0,S.F9)(r.startContainer);if(s==="line"){if(F){var $=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;F.innerHTML.trim()===""?F.outerHTML=$:F.insertAdjacentHTML("afterend",$)}}else if(s==="quote")F&&(r.insertNode(document.createElement("wbr")),F.outerHTML='<blockquote data-block="0">'+F.outerHTML+"</blockquote>",w=!1,t.classList.add("vditor-menu--current"));else if(s==="link"){var ee=void 0;ee=r.toString()===""?n+"<wbr>"+i:""+n+r.toString()+i.replace(")","<wbr>)"),document.execCommand("insertHTML",!1,ee),w=!1,t.classList.add("vditor-menu--current")}else if(s==="italic"||s==="bold"||s==="strike"||s==="inline-code"||s==="code"||s==="table"){ee=void 0,r.toString()===""?ee=n+"<wbr>"+i:(ee=s==="code"?n+`
`+r.toString()+"<wbr>"+i:s==="table"?""+n+r.toString()+"<wbr>"+i:""+n+r.toString()+i+"<wbr>",r.deleteContents()),s!=="table"&&s!=="code"||(ee=`
`+ee+`

`);var j=document.createElement("span");j.innerHTML=ee,r.insertNode(j),me(e,r),s==="table"&&(r.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement),(0,H.Hc)(r))}else s!=="check"&&s!=="list"&&s!=="ordered-list"||(tn(e,r,s,!1),w=!1,E(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current"))}(0,H.ib)(e.ir.element,r),mt(e),w&&kt(e)},lo=function(e,t,n,i){return new(n||(n=Promise))(function(r,s){function d(_){try{M(i.next(_))}catch(L){s(L)}}function w(_){try{M(i.throw(_))}catch(L){s(L)}}function M(_){var L;_.done?r(_.value):(L=_.value,L instanceof n?L:new n(function(F){F(L)})).then(d,w)}M((i=i.apply(e,t||[])).next())})},co=function(e,t){var n,i,r,s,d={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function w(M){return function(_){return function(L){if(n)throw new TypeError("Generator is already executing.");for(;d;)try{if(n=1,i&&(r=2&L[0]?i.return:L[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,L[1])).done)return r;switch(i=0,r&&(L=[2&L[0],r.value]),L[0]){case 0:case 1:r=L;break;case 4:return d.label++,{value:L[1],done:!1};case 5:d.label++,i=L[1],L=[0];continue;case 7:L=d.ops.pop(),d.trys.pop();continue;default:if(r=d.trys,!((r=r.length>0&&r[r.length-1])||L[0]!==6&&L[0]!==2)){d=0;continue}if(L[0]===3&&(!r||L[1]>r[0]&&L[1]<r[3])){d.label=L[1];break}if(L[0]===6&&d.label<r[1]){d.label=r[1],r=L;break}if(r&&d.label<r[2]){d.label=r[2],d.ops.push(L);break}r[2]&&d.ops.pop(),d.trys.pop();continue}L=t.call(e,d)}catch(F){L=[6,F],i=0}finally{n=r=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}([M,_])}}},uo=function(){function e(t){var n=this;this.splitChar="",this.lastIndex=-1,this.fillEmoji=function(i,r){n.element.style.display="none";var s=decodeURIComponent(i.getAttribute("data-value")),d=window.getSelection().getRangeAt(0);if(r.currentMode==="ir"){var w=(0,S.a1)(d.startContainer,"data-type","code-block-info");if(w)return w.textContent=v.g.ZWSP+s.trimRight(),d.selectNodeContents(w),d.collapse(!1),mt(r),w.parentElement.querySelectorAll("code").forEach(function(F){F.className="language-"+s.trimRight()}),Be(w.parentElement.querySelector(".vditor-ir__preview"),r),void(n.recentLanguage=s.trimRight())}if(r.currentMode==="wysiwyg"&&d.startContainer.nodeType!==3){var M=d.startContainer,_=void 0;if((_=M.classList.contains("vditor-input")?M:M.firstElementChild)&&_.classList.contains("vditor-input"))return _.value=s.trimRight(),d.selectNodeContents(_),d.collapse(!1),_.dispatchEvent(new CustomEvent("input",{detail:1})),void(n.recentLanguage=s.trimRight())}if(d.setStart(d.startContainer,n.lastIndex),d.deleteContents(),r.options.hint.parse?r.currentMode==="sv"?(0,H.oC)(r.lute.SpinVditorSVDOM(s),r):r.currentMode==="wysiwyg"?(0,H.oC)(r.lute.SpinVditorDOM(s),r):(0,H.oC)(r.lute.SpinVditorIRDOM(s),r):(0,H.oC)(s,r),n.splitChar===":"&&s.indexOf(":")>-1&&r.currentMode!=="sv"&&d.insertNode(document.createTextNode(" ")),d.collapse(!1),(0,H.Hc)(d),r.currentMode==="wysiwyg")(L=(0,S.fb)(d.startContainer,"vditor-wysiwyg__block"))&&L.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(L.lastElementChild.innerHTML=L.firstElementChild.innerHTML,Be(L.lastElementChild,r));else if(r.currentMode==="ir"){var L;(L=(0,S.fb)(d.startContainer,"vditor-ir__marker--pre"))&&L.nextElementSibling.classList.contains("vditor-ir__preview")&&(L.nextElementSibling.innerHTML=L.innerHTML,Be(L.nextElementSibling,r))}Ae(r)},this.timeId=-1,this.element=document.createElement("div"),this.element.className="vditor-hint",this.recentLanguage="",t.push({key:":"})}return e.prototype.render=function(t){var n=this;if(window.getSelection().focusNode){var i,r=getSelection().getRangeAt(0);i=r.startContainer.textContent.substring(0,r.startOffset)||"";var s=this.getKey(i,t.options.hint.extend);if(s===void 0)this.element.style.display="none",clearTimeout(this.timeId);else if(this.splitChar===":"){var d=s===""?t.options.hint.emoji:t.lute.GetEmojis(),w=[];Object.keys(d).forEach(function(M){M.indexOf(s.toLowerCase())===0&&(d[M].indexOf(".")>-1?w.push({html:'<img src="'+d[M]+'" title=":'+M+':"/> :'+M+":",value:":"+M+":"}):w.push({html:'<span class="vditor-hint__emoji">'+d[M]+"</span>"+M,value:d[M]}))}),this.genHTML(w,s,t)}else t.options.hint.extend.forEach(function(M){M.key===n.splitChar&&(clearTimeout(n.timeId),n.timeId=window.setTimeout(function(){return lo(n,void 0,void 0,function(){var _;return co(this,function(L){switch(L.label){case 0:return _=this.genHTML,[4,M.hint(s)];case 1:return _.apply(this,[L.sent(),s,t]),[2]}})})},t.options.hint.delay))})}},e.prototype.genHTML=function(t,n,i){var r=this;if(t.length!==0){var s=i[i.currentMode].element,d=(0,H.Ny)(s),w=d.left+(i.options.outline.position==="left"?i.outline.element.offsetWidth:0),M=d.top,_="";t.forEach(function(F,$){if(!($>7)){var ee=F.html;if(n!==""){var j=ee.lastIndexOf(">")+1,Q=ee.substr(j),oe=Q.toLowerCase().indexOf(n.toLowerCase());oe>-1&&(Q=Q.substring(0,oe)+"<b>"+Q.substring(oe,oe+n.length)+"</b>"+Q.substring(oe+n.length),ee=ee.substr(0,j)+Q)}_+='<button type="button" data-value="'+encodeURIComponent(F.value)+` "
`+($===0?"class='vditor-hint--current'":"")+"> "+ee+"</button>"}}),this.element.innerHTML=_;var L=parseInt(document.defaultView.getComputedStyle(s,null).getPropertyValue("line-height"),10);this.element.style.top=M+(L||22)+"px",this.element.style.left=w+"px",this.element.style.display="block",this.element.style.right="auto",this.element.querySelectorAll("button").forEach(function(F){F.addEventListener("click",function($){r.fillEmoji(F,i),$.preventDefault()})}),this.element.getBoundingClientRect().bottom>window.innerHeight&&(this.element.style.top=M-this.element.offsetHeight+"px"),this.element.getBoundingClientRect().right>window.innerWidth&&(this.element.style.left="auto",this.element.style.right="0")}else this.element.style.display="none"},e.prototype.select=function(t,n){if(this.element.querySelectorAll("button").length===0||this.element.style.display==="none")return!1;var i=this.element.querySelector(".vditor-hint--current");if(t.key==="ArrowDown")return t.preventDefault(),t.stopPropagation(),i.removeAttribute("class"),i.nextElementSibling?i.nextElementSibling.className="vditor-hint--current":this.element.children[0].className="vditor-hint--current",!0;if(t.key==="ArrowUp"){if(t.preventDefault(),t.stopPropagation(),i.removeAttribute("class"),i.previousElementSibling)i.previousElementSibling.className="vditor-hint--current";else{var r=this.element.children.length;this.element.children[r-1].className="vditor-hint--current"}return!0}return!((0,f.yl)(t)||t.shiftKey||t.altKey||t.key!=="Enter"||t.isComposing)&&(t.preventDefault(),t.stopPropagation(),this.fillEmoji(i,n),!0)},e.prototype.getKey=function(t,n){var i,r=this;if(this.lastIndex=-1,this.splitChar="",n.forEach(function(M){var _=t.lastIndexOf(M.key);r.lastIndex<_&&(r.splitChar=M.key,r.lastIndex=_)}),this.lastIndex===-1)return i;var s=t.split(this.splitChar),d=s[s.length-1];if(s.length>1&&d.trim()===d)if(s.length===2&&s[0]===""&&s[1].length<32)i=s[1];else{var w=s[s.length-2].slice(-1);(0,g.X)(w)===" "&&d.length<32&&(i=d)}return i},e}(),po=function(){function e(t){this.composingLock=!1;var n=document.createElement("div");n.className="vditor-ir",n.innerHTML='<pre class="vditor-reset" placeholder="'+t.options.placeholder+`"
 contenteditable="true" spellcheck="false"></pre>`,this.element=n.firstElementChild,this.bindEvent(t),wn(t,this.element),sr(t,this.element),En(t,this.element),Tn(t,this.element),An(t,this.element),kn(t,this.element),xn(t,this.element,this.copy),Sn(t,this.element,this.copy)}return e.prototype.copy=function(t,n){var i=getSelection().getRangeAt(0);if(i.toString()!==""){t.stopPropagation(),t.preventDefault();var r=document.createElement("div");r.appendChild(i.cloneContents()),t.clipboardData.setData("text/plain",n.lute.VditorIRDOM2Md(r.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("paste",function(i){on(t,i,{pasteCode:function(r){document.execCommand("insertHTML",!1,r)}})}),this.element.addEventListener("compositionstart",function(i){n.composingLock=!0}),this.element.addEventListener("compositionend",function(i){(0,f.vU)()||me(t,getSelection().getRangeAt(0).cloneRange()),n.composingLock=!1}),this.element.addEventListener("input",function(i){if(i.inputType!=="deleteByDrag"&&i.inputType!=="insertFromDrop")return n.preventInput?(n.preventInput=!1,void mt(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})):void(n.composingLock||i.data==="‘"||i.data==="“"||i.data==="《"||me(t,getSelection().getRangeAt(0).cloneRange(),!1,i))}),this.element.addEventListener("click",function(i){if(i.target.tagName==="INPUT")return i.target.checked?i.target.setAttribute("checked","checked"):i.target.removeAttribute("checked"),n.preventInput=!0,void mt(t);var r=(0,H.zh)(t),s=(0,S.fb)(i.target,"vditor-ir__preview");if(s||(s=(0,S.fb)(r.startContainer,"vditor-ir__preview")),s&&(s.previousElementSibling.firstElementChild?r.selectNodeContents(s.previousElementSibling.firstElementChild):r.selectNodeContents(s.previousElementSibling),r.collapse(!0),(0,H.Hc)(r),Ge(t)),i.target.tagName==="IMG"){var d=i.target.parentElement.querySelector(".vditor-ir__marker--link");d&&(r.selectNode(d),(0,H.Hc)(r))}var w=(0,S.a1)(i.target,"data-type","a");if(!w||w.classList.contains("vditor-ir__node--expand")){if(i.target.isEqualNode(n.element)&&n.element.lastElementChild&&r.collapsed){var M=n.element.lastElementChild.getBoundingClientRect();i.y>M.top+M.height&&(n.element.lastElementChild.tagName==="P"&&n.element.lastElementChild.textContent.trim().replace(v.g.ZWSP,"")===""?(r.selectNodeContents(n.element.lastElementChild),r.collapse(!1)):(n.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+v.g.ZWSP+"<wbr></p>"),(0,H.ib)(n.element,r)))}r.toString()===""?Y(r,t):setTimeout(function(){Y((0,H.zh)(t),t)}),ve(i,t),kt(t)}else t.options.link.click?t.options.link.click(w.querySelector(":scope > .vditor-ir__marker--link")):t.options.link.isOpen&&window.open(w.querySelector(":scope > .vditor-ir__marker--link").textContent)}),this.element.addEventListener("keyup",function(i){if(!i.isComposing&&!(0,f.yl)(i))if(i.key==="Enter"&&Ge(t),kt(t),i.key!=="Backspace"&&i.key!=="Delete"||t.ir.element.innerHTML===""||t.ir.element.childNodes.length!==1||!t.ir.element.firstElementChild||t.ir.element.firstElementChild.tagName!=="P"||t.ir.element.firstElementChild.childElementCount!==0||t.ir.element.textContent!==""&&t.ir.element.textContent!==`
`){var r=(0,H.zh)(t);i.key==="Backspace"?((0,f.vU)()&&r.startContainer.textContent===`
`&&r.startOffset===1&&(r.startContainer.textContent="",Y(r,t)),n.element.querySelectorAll(".language-math").forEach(function(d){var w=d.querySelector("br");w&&w.remove()})):i.key.indexOf("Arrow")>-1?(i.key!=="ArrowLeft"&&i.key!=="ArrowRight"||Or(t),Y(r,t)):i.keyCode===229&&i.code===""&&i.key==="Unidentified"&&Y(r,t);var s=(0,S.fb)(r.startContainer,"vditor-ir__preview");if(s){if(i.key==="ArrowUp"||i.key==="ArrowLeft")return s.previousElementSibling.firstElementChild?r.selectNodeContents(s.previousElementSibling.firstElementChild):r.selectNodeContents(s.previousElementSibling),r.collapse(!1),i.preventDefault(),!0;if(s.tagName==="SPAN"&&(i.key==="ArrowDown"||i.key==="ArrowRight"))return s.parentElement.getAttribute("data-type")==="html-entity"?(s.parentElement.insertAdjacentText("afterend",v.g.ZWSP),r.setStart(s.parentElement.nextSibling,1)):r.selectNodeContents(s.parentElement.lastElementChild),r.collapse(!1),i.preventDefault(),!0}}else t.ir.element.innerHTML=""})},e}(),Nr=function(e){return e.currentMode==="sv"?e.lute.Md2HTML(p(e)):e.currentMode==="wysiwyg"?e.lute.VditorDOM2HTML(e.wysiwyg.element.innerHTML):e.currentMode==="ir"?e.lute.VditorIRDOM2HTML(e.ir.element.innerHTML):void 0},mo=b(895),Hr=b(818),fo=function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-outline",this.element.innerHTML='<div class="vditor-outline__title">'+t+`</div>
<div class="vditor-outline__content"></div>`}return e.prototype.render=function(t){return t.preview.element.style.display==="block"?(0,Hr.k)(t.preview.previewElement,this.element.lastElementChild,t):(0,Hr.k)(t[t.currentMode].element,this.element.lastElementChild,t)},e.prototype.toggle=function(t,n,i){var r;n===void 0&&(n=!0),i===void 0&&(i=!0);var s=(r=t.toolbar.elements.outline)===null||r===void 0?void 0:r.firstElementChild;if(n&&window.innerWidth>=v.g.MOBILE_WIDTH?(this.element.style.display="block",this.render(t),s==null||s.classList.add("vditor-menu--current")):(this.element.style.display="none",s==null||s.classList.remove("vditor-menu--current")),i&&getSelection().rangeCount>0){var d=getSelection().getRangeAt(0);t[t.currentMode].element.contains(d.startContainer)&&(0,H.Hc)(d)}Le(t)},e}(),ho=b(554),go=function(){function e(t){var n=this;this.element=document.createElement("div"),this.element.className="vditor-preview",this.previewElement=document.createElement("div"),this.previewElement.className="vditor-reset",t.options.classes.preview&&this.previewElement.classList.add(t.options.classes.preview),this.previewElement.style.maxWidth=t.options.preview.maxWidth+"px",this.previewElement.addEventListener("copy",function(w){if(w.target.tagName!=="TEXTAREA"){var M=document.createElement("div");M.className="vditor-reset",M.appendChild(getSelection().getRangeAt(0).cloneContents()),n.copyToX(t,M,"default"),w.preventDefault()}}),this.previewElement.addEventListener("click",function(w){var M=(0,S.lG)(w.target,"SPAN");if(M&&(0,S.fb)(M,"vditor-toc")){var _=n.previewElement.querySelector("#"+M.getAttribute("data-target-id"));_&&(n.element.scrollTop=_.offsetTop)}else{if(w.target.tagName==="A")return t.options.link.click?t.options.link.click(w.target):t.options.link.isOpen&&window.open(w.target.getAttribute("href")),void w.preventDefault();w.target.tagName==="IMG"&&(t.options.image.preview?t.options.image.preview(w.target):t.options.image.isPreview&&(0,re.E)(w.target,t.options.lang,t.options.theme))}}),this.element.appendChild(this.previewElement);var i=t.options.preview.actions;if(i.length!==0){this.actionElement=document.createElement("div"),this.actionElement.className="vditor-preview__action";for(var r=[],s=0;s<i.length;s++){var d=i[s];if(typeof d!="object")switch(d){case"desktop":r.push('<button type="button" class="vditor-preview__action--current" data-type="desktop">Desktop</button>');break;case"tablet":r.push('<button type="button" data-type="tablet">Tablet</button>');break;case"mobile":r.push('<button type="button" data-type="mobile">Mobile/Wechat</button>');break;case"mp-wechat":r.push('<button type="button" data-type="mp-wechat" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到公众号"><svg><use xlink:href="#vditor-icon-mp-wechat"></use></svg></button>');break;case"zhihu":r.push('<button type="button" data-type="zhihu" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到知乎"><svg><use xlink:href="#vditor-icon-zhihu"></use></svg></button>')}else r.push('<button type="button" data-type="'+d.key+'" class="'+d.className+'"'+(d.tooltip?' aria-label="'+d.tooltip+'"':"")+'">'+d.text+"</button>")}this.actionElement.innerHTML=r.join(""),this.actionElement.addEventListener((0,f.Le)(),function(w){var M=(0,Z.S)(w.target,"BUTTON");if(M){var _=M.getAttribute("data-type"),L=i.find(function(F){return(F==null?void 0:F.key)===_});L?L.click(_):_!=="mp-wechat"&&_!=="zhihu"?(n.previewElement.style.width=_==="desktop"?"auto":_==="tablet"?"780px":"360px",n.previewElement.scrollWidth>n.previewElement.parentElement.clientWidth&&(n.previewElement.style.width="auto"),n.render(t),n.actionElement.querySelectorAll("button").forEach(function(F){F.classList.remove("vditor-preview__action--current")}),M.classList.add("vditor-preview__action--current")):n.copyToX(t,n.previewElement.cloneNode(!0),_)}}),this.element.insertBefore(this.actionElement,this.previewElement)}}return e.prototype.render=function(t,n){var i=this;if(clearTimeout(this.mdTimeoutId),this.element.style.display!=="none")if(n)this.previewElement.innerHTML=n;else if(p(t).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")!==""){var r=new Date().getTime(),s=p(t);this.mdTimeoutId=window.setTimeout(function(){if(t.options.preview.url){var d=new XMLHttpRequest;d.open("POST",t.options.preview.url),d.setRequestHeader("Content-Type","application/json;charset=UTF-8"),d.onreadystatechange=function(){if(d.readyState===XMLHttpRequest.DONE)if(d.status===200){var M=JSON.parse(d.responseText);if(M.code!==0)return void t.tip.show(M.msg);t.options.preview.transform&&(M.data=t.options.preview.transform(M.data)),i.previewElement.innerHTML=M.data,i.afterRender(t,r)}else{var _=t.lute.Md2HTML(s);t.options.preview.transform&&(_=t.options.preview.transform(_)),i.previewElement.innerHTML=_,i.afterRender(t,r)}},d.send(JSON.stringify({markdownText:s}))}else{var w=t.lute.Md2HTML(s);t.options.preview.transform&&(w=t.options.preview.transform(w)),i.previewElement.innerHTML=w,i.afterRender(t,r)}},t.options.preview.delay)}else this.previewElement.innerHTML="";else this.element.getAttribute("data-type")==="renderPerformance"&&t.tip.hide()},e.prototype.afterRender=function(t,n){t.options.preview.parse&&t.options.preview.parse(this.element);var i=new Date().getTime()-n;new Date().getTime()-n>2600?(t.tip.show(window.VditorI18n.performanceTip.replace("${x}",i.toString())),t.preview.element.setAttribute("data-type","renderPerformance")):t.preview.element.getAttribute("data-type")==="renderPerformance"&&(t.tip.hide(),t.preview.element.removeAttribute("data-type"));var r=t.preview.element.querySelector(".vditor-comment--focus");r&&r.classList.remove("vditor-comment--focus"),(0,be.O)(t.preview.previewElement),(0,Te.s)(t.options.preview.hljs,t.preview.previewElement,t.options.staticPath.highlight),(0,Ne.i)(t.preview.previewElement,t.options.staticPath.mermaid,t.options.theme),(0,Ue.K)(t.preview.previewElement,t.options.staticPath.markmap,t.options.theme),(0,we.P)(t.preview.previewElement,t.options.staticPath.flowchart),(0,De.v)(t.preview.previewElement,t.options.staticPath.graphviz),(0,de.p)(t.preview.previewElement,t.options.staticPath.echarts,t.options.theme),(0,Fe.P)(t.preview.previewElement,t.options.staticPath.echarts,t.options.theme),(0,tt.B)(t.preview.previewElement,t.options.staticPath.plantuml),(0,le.Q)(t.preview.previewElement,t.options.staticPath.abc),(0,ho.Y)(t.preview.previewElement);var s=t.preview.element,d=t.outline.render(t);d===""&&(d="[ToC]"),s.querySelectorAll('[data-type="toc-block"]').forEach(function(w){w.innerHTML=d,(0,xe.H)(w,{katex:t.options.staticPath.katex,mathjax:t.options.staticPath.mathjax,math:t.options.preview.math})}),(0,xe.H)(t.preview.previewElement,{katex:t.options.staticPath.katex,mathjax:t.options.staticPath.mathjax,math:t.options.preview.math})},e.prototype.copyToX=function(t,n,i){i===void 0&&(i="mp-wechat"),i!=="zhihu"?n.querySelectorAll(".katex-html .base").forEach(function(s){s.style.display="initial"}):n.querySelectorAll(".language-math").forEach(function(s){s.outerHTML='<img class="Formula-image" data-eeimg="true" src="//www.zhihu.com/equation?tex=" alt="'+s.getAttribute("data-math")+'\\" style="display: block; margin: 0 auto; max-width: 100%;">'}),n.style.backgroundColor="#fff",n.querySelectorAll("code").forEach(function(s){s.style.backgroundImage="none"}),this.element.append(n);var r=n.ownerDocument.createRange();r.selectNode(n),(0,H.Hc)(r),document.execCommand("copy"),n.remove(),t.tip.show(["zhihu","mp-wechat"].includes(i)?"已复制，可到"+(i==="zhihu"?"知乎":"微信公众号平台")+"进行粘贴":"已复制到剪切板")},e}(),vo=function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-resize vditor-resize--"+t.options.resize.position,this.element.innerHTML='<div><svg><use xlink:href="#vditor-icon-resize"></use></svg></div>',this.bindEvent(t)}return e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("mousedown",function(i){var r=document,s=i.clientY,d=t.element.offsetHeight,w=63+t.element.querySelector(".vditor-toolbar").clientHeight;r.ondragstart=function(){return!1},window.captureEvents&&window.captureEvents(),n.element.classList.add("vditor-resize--selected"),r.onmousemove=function(M){t.options.resize.position==="top"?t.element.style.height=Math.max(w,d+(s-M.clientY))+"px":t.element.style.height=Math.max(w,d+(M.clientY-s))+"px",t.options.typewriterMode&&(t.sv.element.style.paddingBottom=t.sv.element.parentElement.offsetHeight/2+"px")},r.onmouseup=function(){t.options.resize.after&&t.options.resize.after(t.element.offsetHeight-d),window.captureEvents&&window.captureEvents(),r.onmousemove=null,r.onmouseup=null,r.ondragstart=null,r.onselectstart=null,r.onselect=null,n.element.classList.remove("vditor-resize--selected")}})},e}(),yo=function(){function e(t){this.composingLock=!1,this.element=document.createElement("pre"),this.element.className="vditor-sv vditor-reset",this.element.setAttribute("placeholder",t.options.placeholder),this.element.setAttribute("contenteditable","true"),this.element.setAttribute("spellcheck","false"),this.bindEvent(t),wn(t,this.element),En(t,this.element),Tn(t,this.element),An(t,this.element),kn(t,this.element),xn(t,this.element,this.copy),Sn(t,this.element,this.copy)}return e.prototype.copy=function(t,n){t.stopPropagation(),t.preventDefault(),t.clipboardData.setData("text/plain",qt(n[n.currentMode].element))},e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("paste",function(i){on(t,i,{pasteCode:function(r){document.execCommand("insertHTML",!1,r)}})}),this.element.addEventListener("scroll",function(){if(t.preview.element.style.display==="block"){var i=n.element.scrollTop,r=n.element.clientHeight,s=n.element.scrollHeight-parseFloat(n.element.style.paddingBottom||"0"),d=t.preview.element;d.scrollTop=i/r>.5?(i+r)*d.scrollHeight/s-r:i*d.scrollHeight/s}}),this.element.addEventListener("compositionstart",function(i){n.composingLock=!0}),this.element.addEventListener("compositionend",function(i){(0,f.vU)()||Ce(t,i),n.composingLock=!1}),this.element.addEventListener("input",function(i){if(i.inputType!=="deleteByDrag"&&i.inputType!=="insertFromDrop"&&!n.composingLock&&i.data!=="‘"&&i.data!=="“"&&i.data!=="《")return n.preventInput?(n.preventInput=!1,void Xe(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})):void Ce(t,i)}),this.element.addEventListener("keyup",function(i){i.isComposing||(0,f.yl)(i)||(i.key!=="Backspace"&&i.key!=="Delete"||t.sv.element.innerHTML===""||t.sv.element.childNodes.length!==1||!t.sv.element.firstElementChild||t.sv.element.firstElementChild.tagName!=="DIV"||t.sv.element.firstElementChild.childElementCount!==2||t.sv.element.firstElementChild.textContent!==""&&t.sv.element.textContent!==`
`?i.key==="Enter"&&Ge(t):t.sv.element.innerHTML="")})},e}(),bo=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-tip"}return e.prototype.show=function(t,n){var i=this;n===void 0&&(n=6e3),this.element.className="vditor-tip vditor-tip--show",n===0?(this.element.innerHTML='<div class="vditor-tip__content">'+t+`
<div class="vditor-tip__close">X</div></div>`,this.element.querySelector(".vditor-tip__close").addEventListener("click",function(){i.hide()})):(this.element.innerHTML='<div class="vditor-tip__content">'+t+"</div>",setTimeout(function(){i.hide()},n)),this.element.removeAttribute("style"),setTimeout(function(){i.element.getBoundingClientRect().top<46&&(i.element.style.position="fixed",i.element.style.top="46px")},150)},e.prototype.hide=function(){this.element.className="vditor-messageElementtip",this.element.innerHTML=""},e}(),Nn=function(e,t){if(t.options.preview.mode!==e){switch(t.options.preview.mode=e,e){case"both":t.sv.element.style.display="block",t.preview.element.style.display="block",t.preview.render(t),T(t.toolbar.elements,["both"]);break;case"editor":t.sv.element.style.display="block",t.preview.element.style.display="none",E(t.toolbar.elements,["both"])}t.devtools&&t.devtools.renderEchart(t)}},wo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Eo=function(e){function t(n,i){var r=e.call(this,n,i)||this;return n.options.preview.mode==="both"&&r.element.children[0].classList.add("vditor-menu--current"),r.element.children[0].addEventListener((0,f.Le)(),function(s){r.element.firstElementChild.classList.contains(v.g.CLASS_MENU_DISABLED)||(s.preventDefault(),n.currentMode==="sv"&&(n.options.preview.mode==="both"?Nn("editor",n):Nn("both",n)))}),r}return wo(t,e),t}(ze),ko=function(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__br"},Dr=b(312),xo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),So=function(e){function t(n,i){var r=e.call(this,n,i)||this,s=r.element.children[0],d=document.createElement("div");d.className="vditor-hint"+(i.level===2?"":" vditor-panel--arrow");var w="";return v.g.CODE_THEME.forEach(function(M){w+="<button>"+M+"</button>"}),d.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+w+"</div>",d.addEventListener((0,f.Le)(),function(M){M.target.tagName==="BUTTON"&&(D(n,["subToolbar"]),n.options.preview.hljs.style=M.target.textContent,(0,Dr.Y)(M.target.textContent,n.options.staticPath.highlight),M.preventDefault(),M.stopPropagation())}),r.element.appendChild(d),I(n,d,s,i.level),r}return xo(t,e),t}(ze),To=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ao=function(e){function t(n,i){var r=e.call(this,n,i)||this,s=r.element.children[0],d=document.createElement("div");d.className="vditor-hint"+(i.level===2?"":" vditor-panel--arrow");var w="";return Object.keys(n.options.preview.theme.list).forEach(function(M){w+='<button data-type="'+M+'">'+n.options.preview.theme.list[M]+"</button>"}),d.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+w+"</div>",d.addEventListener((0,f.Le)(),function(M){M.target.tagName==="BUTTON"&&(D(n,["subToolbar"]),n.options.preview.theme.current=M.target.getAttribute("data-type"),(0,Se.Z)(n.options.preview.theme.current,n.options.preview.theme.path),M.preventDefault(),M.stopPropagation())}),r.element.appendChild(d),I(n,d,s,i.level),r}return To(t,e),t}(ze),Co=function(){function e(t){this.element=document.createElement("span"),this.element.className="vditor-counter vditor-tooltipped vditor-tooltipped__nw",this.render(t,"")}return e.prototype.render=function(t,n){var i=n.endsWith(`
`)?n.length-1:n.length;if(t.options.counter.type==="text"&&t[t.currentMode]){var r=t[t.currentMode].element.cloneNode(!0);r.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(s){s.remove()}),i=r.textContent.length}typeof t.options.counter.max=="number"?(i>t.options.counter.max?this.element.className="vditor-counter vditor-counter--error":this.element.className="vditor-counter",this.element.innerHTML=i+"/"+t.options.counter.max):this.element.innerHTML=""+i,this.element.setAttribute("aria-label",t.options.counter.type),t.options.counter.after&&t.options.counter.after(i,{enable:t.options.counter.enable,max:t.options.counter.max,type:t.options.counter.type})},e}(),Lo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),_o=function(e){function t(n,i){var r=e.call(this,n,i)||this;return r.element.children[0].innerHTML=i.icon,r.element.children[0].addEventListener((0,f.Le)(),function(s){s.preventDefault(),s.currentTarget.classList.contains(v.g.CLASS_MENU_DISABLED)||i.click(s,n)}),r}return Lo(t,e),t}(ze),Mo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Oo=function(e){function t(n,i){var r=e.call(this,n,i)||this;return r.element.firstElementChild.addEventListener((0,f.Le)(),function(s){var d=r.element.firstElementChild;d.classList.contains(v.g.CLASS_MENU_DISABLED)||(s.preventDefault(),d.classList.contains("vditor-menu--current")?(d.classList.remove("vditor-menu--current"),n.devtools.element.style.display="none",Le(n)):(d.classList.add("vditor-menu--current"),n.devtools.element.style.display="block",Le(n),n.devtools.renderEchart(n)))}),r}return Mo(t,e),t}(ze),No=function(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__divider"},Ho=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Do=function(e){function t(n,i){var r=e.call(this,n,i)||this,s=document.createElement("div");s.className="vditor-panel vditor-panel--arrow";var d="";return Object.keys(n.options.hint.emoji).forEach(function(w){var M=n.options.hint.emoji[w];M.indexOf(".")>-1?d+='<button data-value=":'+w+': " data-key=":'+w+`:"><img
data-value=":`+w+': " data-key=":'+w+':" class="vditor-emojis__icon" src="'+M+'"/></button>':d+='<button data-value="'+M+` "
 data-key="`+w+'"><span class="vditor-emojis__icon">'+M+"</span></button>"}),s.innerHTML='<div class="vditor-emojis" style="max-height: '+(n.options.height==="auto"?"auto":n.options.height-80)+'px">'+d+`</div><div class="vditor-emojis__tail">
    <span class="vditor-emojis__tip"></span><span>`+(n.options.hint.emojiTail||"")+`</span>
</div>`,r.element.appendChild(s),I(n,s,r.element.firstElementChild,i.level),r.bindEvent(n),r}return Ho(t,e),t.prototype.bindEvent=function(n){var i=this;this.element.lastElementChild.addEventListener((0,f.Le)(),function(r){var s=(0,Z.S)(r.target,"BUTTON");if(s){r.preventDefault();var d=s.getAttribute("data-value"),w=(0,H.zh)(n),M=d;if(n.currentMode==="wysiwyg"?M=n.lute.SpinVditorDOM(d):n.currentMode==="ir"&&(M=n.lute.SpinVditorIRDOM(d)),d.indexOf(":")>-1&&n.currentMode!=="sv"){var _=document.createElement("div");_.innerHTML=M,M=_.firstElementChild.firstElementChild.outerHTML+" ",(0,H.oC)(M,n)}else w.extractContents(),w.insertNode(document.createTextNode(d));w.collapse(!1),(0,H.Hc)(w),i.element.lastElementChild.style.display="none",Ae(n)}}),this.element.lastElementChild.addEventListener("mouseover",function(r){var s=(0,Z.S)(r.target,"BUTTON");s&&(i.element.querySelector(".vditor-emojis__tip").innerHTML=s.getAttribute("data-key"))})},t}(ze),Pr=function(e,t,n){var i=document.createElement("a");"download"in i?(i.download=n,i.style.display="none",i.href=URL.createObjectURL(new Blob([t])),document.body.appendChild(i),i.click(),i.remove()):e.tip.show(window.VditorI18n.downloadTip,0)},Po=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Io=function(e){function t(n,i){var r=e.call(this,n,i)||this,s=r.element.children[0],d=document.createElement("div");return d.className="vditor-hint"+(i.level===2?"":" vditor-panel--arrow"),d.innerHTML=`<button data-type="markdown">Markdown</button>
<button data-type="pdf">PDF</button>
<button data-type="html">HTML</button>`,d.addEventListener((0,f.Le)(),function(w){var M=w.target;if(M.tagName==="BUTTON"){switch(M.getAttribute("data-type")){case"markdown":(function(_){var L=p(_);Pr(_,L,L.substr(0,10)+".md")})(n);break;case"pdf":(function(_){_.tip.show(window.VditorI18n.generate,3800);var L=document.querySelector("#vditorExportIframe");L.contentDocument.open(),L.contentDocument.write('<link rel="stylesheet" href="'+_.options.staticPath.style+`"/>
<script src="`+_.options.staticPath.method+`"><\/script>
<div id="preview" style="width: 800px"></div>
<script>
window.addEventListener("message", (e) => {
  if(!e.data) {
    return;
  }
  Vditor.preview(document.getElementById('preview'), e.data, {
    staticPath: `+JSON.stringify(_.options.staticPath)+`,
    markdown: {
      theme: "`+_.options.preview.theme+`"
    },
    hljs: {
      style: "`+_.options.preview.hljs.style+`"
    }
  });
  setTimeout(() => {
        window.print();
    }, 3600);
}, false);
<\/script>`),L.contentDocument.close(),setTimeout(function(){L.contentWindow.postMessage(p(_),"*")},200)})(n);break;case"html":(function(_){var L=Nr(_),F='<html><head><link rel="stylesheet" type="text/css" href="'+_.options.staticPath.style+`"/>
<script src="`+_.options.staticPath.i18n+"/"+_.options.lang+`.js"><\/script>
<script src="`+_.options.staticPath.method+`"><\/script></head>
<body><div class="vditor-reset" id="preview">`+L+`</div>
<script>
    const previewElement = document.getElementById('preview')
    Vditor.setContentTheme('`+_.options.preview.theme.current+"', '"+_.options.preview.theme.path+`');
    Vditor.codeRender(previewElement);
    Vditor.highlightRender(`+JSON.stringify(_.options.preview.hljs)+", previewElement, '"+_.options.staticPath.highlight+`');
    Vditor.mathRender(previewElement, {
        katex: '`+_.options.staticPath.katex+`',
        mathjax: '`+_.options.staticPath.mathjax+`',
        math: `+JSON.stringify(_.options.preview.math)+`,
    });
    Vditor.mermaidRender(previewElement, '`+_.options.staticPath.mermaid+"', '"+_.options.theme+`');
    Vditor.markmapRender(previewElement, '`+_.options.staticPath.markmap+"', '"+_.options.theme+`');
    Vditor.flowchartRender(previewElement, '`+_.options.staticPath.flowchart+`');
    Vditor.graphvizRender(previewElement, '`+_.options.staticPath.graphviz+`');
    Vditor.chartRender(previewElement, '`+_.options.staticPath.echarts+"', '"+_.options.theme+`');
    Vditor.mindmapRender(previewElement, '`+_.options.staticPath.echarts+"', '"+_.options.theme+`');
    Vditor.abcRender(previewElement, '`+_.options.staticPath.abc+`');
    Vditor.mediaRender(previewElement);
    Vditor.speechRender(previewElement);
<\/script>
<script src="`+_.options.staticPath.icons+"/"+_.options.icon+'.js"><\/script></body></html>';Pr(_,F,L.substr(0,10)+".html")})(n)}D(n,["subToolbar"]),w.preventDefault(),w.stopPropagation()}}),r.element.appendChild(d),I(n,d,s,i.level),r}return Po(t,e),t}(ze),Ro=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Bo=function(e){function t(n,i){var r=e.call(this,n,i)||this;return r._bindEvent(n,i),r}return Ro(t,e),t.prototype._bindEvent=function(n,i){this.element.children[0].addEventListener((0,f.Le)(),function(r){r.preventDefault(),n.element.className.includes("vditor--fullscreen")?(i.level||(this.innerHTML=i.icon),n.element.style.zIndex="",document.body.style.overflow="",n.element.classList.remove("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(s){var d=n.toolbar.elements[s].firstChild;d&&(d.className=d.className.replace("__s","__n"))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__s","__n"))):(i.level||(this.innerHTML='<svg><use xlink:href="#vditor-icon-contract"></use></svg>'),n.element.style.zIndex=n.options.fullscreen.index.toString(),document.body.style.overflow="hidden",n.element.classList.add("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(s){var d=n.toolbar.elements[s].firstChild;d&&(d.className=d.className.replace("__n","__s"))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__n","__s"))),n.devtools&&n.devtools.renderEchart(n),i.click&&i.click(r,n),Le(n),_e(n)})},t}(ze),jo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Uo=function(e){function t(n,i){var r=e.call(this,n,i)||this,s=document.createElement("div");return s.className="vditor-hint vditor-panel--arrow",s.innerHTML='<button data-tag="h1" data-value="# ">'+window.VditorI18n.heading1+" "+(0,f.ns)("&lt;⌥⌘1>")+`</button>
<button data-tag="h2" data-value="## ">`+window.VditorI18n.heading2+" &lt;"+(0,f.ns)("⌥⌘2")+`></button>
<button data-tag="h3" data-value="### ">`+window.VditorI18n.heading3+" &lt;"+(0,f.ns)("⌥⌘3")+`></button>
<button data-tag="h4" data-value="#### ">`+window.VditorI18n.heading4+" &lt;"+(0,f.ns)("⌥⌘4")+`></button>
<button data-tag="h5" data-value="##### ">`+window.VditorI18n.heading5+" &lt;"+(0,f.ns)("⌥⌘5")+`></button>
<button data-tag="h6" data-value="###### ">`+window.VditorI18n.heading6+" &lt;"+(0,f.ns)("⌥⌘6")+"></button>",r.element.appendChild(s),r._bindEvent(n,s),r}return jo(t,e),t.prototype._bindEvent=function(n,i){var r=this.element.children[0];r.addEventListener((0,f.Le)(),function(d){d.preventDefault(),clearTimeout(n.wysiwyg.afterRenderTimeoutId),clearTimeout(n.ir.processTimeoutId),clearTimeout(n.sv.processTimeoutId),r.classList.contains(v.g.CLASS_MENU_DISABLED)||(r.blur(),r.classList.contains("vditor-menu--current")?(n.currentMode==="wysiwyg"?(Ut(n),Ie(n)):n.currentMode==="ir"&&Vt(n,""),r.classList.remove("vditor-menu--current")):(D(n,["subToolbar"]),i.style.display="block"))});for(var s=0;s<6;s++)i.children.item(s).addEventListener((0,f.Le)(),function(d){d.preventDefault(),n.currentMode==="wysiwyg"?(yt(n,d.target.getAttribute("data-tag")),Ie(n),r.classList.add("vditor-menu--current")):n.currentMode==="ir"?(Vt(n,d.target.getAttribute("data-value")),r.classList.add("vditor-menu--current")):dr(n,d.target.getAttribute("data-value")),i.style.display="none"})},t}(ze),qo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Fo=function(e){function t(n,i){var r=e.call(this,n,i)||this;return r.element.children[0].addEventListener((0,f.Le)(),function(s){s.preventDefault(),n.tip.show(`<div style="margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;">
<div style="margin-top: 14px;flex: 1">
    <div>Markdown 使用指南</div>
    <ul style="list-style: none">
        <li><a href="https://ld246.com/article/1583308420519" target="_blank">语法速查手册</a></li>
        <li><a href="https://ld246.com/article/1583129520165" target="_blank">基础语法</a></li>
        <li><a href="https://ld246.com/article/1583305480675" target="_blank">扩展语法</a></li>
        <li><a href="https://ld246.com/article/1582778815353" target="_blank">键盘快捷键</a></li>
    </ul>
</div>
<div style="margin-top: 14px;flex: 1">
    <div>Vditor 支持</div>
    <ul style="list-style: none">
        <li><a href="https://github.com/Vanessa219/vditor/issues" target="_blank">Issues</a></li>
        <li><a href="https://ld246.com/tag/vditor" target="_blank">官方讨论区</a></li>
        <li><a href="https://ld246.com/article/1549638745630" target="_blank">开发手册</a></li>
        <li><a href="https://ld246.com/guide/markdown" target="_blank">演示地址</a></li>
    </ul>
</div></div>`,0)}),r}return qo(t,e),t}(ze),Vo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),zo=function(e){function t(n,i){var r=e.call(this,n,i)||this;return r.element.children[0].addEventListener((0,f.Le)(),function(s){if(s.preventDefault(),!r.element.firstElementChild.classList.contains(v.g.CLASS_MENU_DISABLED)&&n.currentMode!=="sv"){var d=(0,H.zh)(n),w=(0,S.lG)(d.startContainer,"LI");w&&vr(n,w,d)}}),r}return Vo(t,e),t}(ze),Wo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Go=function(e){function t(n,i){var r=e.call(this,n,i)||this;return r.element.children[0].addEventListener((0,f.Le)(),function(s){s.preventDefault(),n.tip.show(`<div style="max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;">
<p style="text-align: center;margin: 14px 0">
    <em>下一代的 Markdown 编辑器，为未来而构建</em>
</p>
<div style="display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center">
    <img src="`+n.options.staticPath.logo+`" style="margin: 0 auto;height: 68px"/>
    <div>&nbsp;&nbsp;</div>
    <div style="flex: 1;min-width: 250px">
        Vditor 是一款浏览器端的 Markdown 编辑器，支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。
        它使用 TypeScript 实现，支持原生 JavaScript 以及 Vue、React、Angular 和 Svelte 等框架。
    </div>
</div>
<div style="display: flex;flex-wrap: wrap;">
    <ul style="list-style: none;flex: 1;min-width:148px">
        <li>
        项目地址：<a href="https://b3log.org/vditor" target="_blank">b3log.org/vditor</a>
        </li>
        <li>
        开源协议：MIT
        </li>
    </ul>
    <ul style="list-style: none;margin-right: 18px">
        <li>
        组件版本：Vditor v`+v.H+" / Lute v"+Lute.Version+`
        </li>
        <li>
        赞助捐赠：<a href="https://ld246.com/sponsor" target="_blank">https://ld246.com/sponsor</a>
        </li>
    </ul>
</div>
</div>`,0)}),r}return Wo(t,e),t}(ze),Ko=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Jo=function(e){function t(n,i){var r=e.call(this,n,i)||this;return r.element.children[0].addEventListener((0,f.Le)(),function(s){s.preventDefault(),r.element.firstElementChild.classList.contains(v.g.CLASS_MENU_DISABLED)||n.currentMode==="sv"||en(n,"afterend")}),r}return Ko(t,e),t}(ze),Xo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Zo=function(e){function t(n,i){var r=e.call(this,n,i)||this;return r.element.children[0].addEventListener((0,f.Le)(),function(s){s.preventDefault(),r.element.firstElementChild.classList.contains(v.g.CLASS_MENU_DISABLED)||n.currentMode==="sv"||en(n,"beforebegin")}),r}return Xo(t,e),t}(ze),Yo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Qo=function(e){function t(n,i){var r=e.call(this,n,i)||this;return r.element.children[0].addEventListener((0,f.Le)(),function(s){if(s.preventDefault(),!r.element.firstElementChild.classList.contains(v.g.CLASS_MENU_DISABLED)&&n.currentMode!=="sv"){var d=(0,H.zh)(n),w=(0,S.lG)(d.startContainer,"LI");w&&Ln(n,w,d,w.parentElement)}}),r}return Yo(t,e),t}(ze),$o=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),ea=function(e){function t(n,i){var r=e.call(this,n,i)||this;return n.options.outline&&r.element.firstElementChild.classList.add("vditor-menu--current"),r.element.children[0].addEventListener((0,f.Le)(),function(s){s.preventDefault(),n.toolbar.elements.outline.firstElementChild.classList.contains(v.g.CLASS_MENU_DISABLED)||(n.options.outline.enable=!r.element.firstElementChild.classList.contains("vditor-menu--current"),n.outline.toggle(n,n.options.outline.enable))}),r}return $o(t,e),t}(ze),ta=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),na=function(e){function t(n,i){var r=e.call(this,n,i)||this;return r._bindEvent(n),r}return ta(t,e),t.prototype._bindEvent=function(n){var i=this;this.element.children[0].addEventListener((0,f.Le)(),function(r){r.preventDefault();var s=i.element.firstElementChild;if(!s.classList.contains(v.g.CLASS_MENU_DISABLED)){var d=v.g.EDIT_TOOLBARS.concat(["both","edit-mode","devtools"]);s.classList.contains("vditor-menu--current")?(s.classList.remove("vditor-menu--current"),n.currentMode==="sv"?(n.sv.element.style.display="block",n.options.preview.mode==="both"?n.preview.element.style.display="block":n.preview.element.style.display="none"):(n[n.currentMode].element.parentElement.style.display="block",n.preview.element.style.display="none"),N(n.toolbar.elements,d),n.outline.render(n)):(R(n.toolbar.elements,d),n.preview.element.style.display="block",n.currentMode==="sv"?n.sv.element.style.display="none":n[n.currentMode].element.parentElement.style.display="none",n.preview.render(n),s.classList.add("vditor-menu--current"),D(n,["subToolbar","hint","popover"]),setTimeout(function(){n.outline.render(n)},n.options.preview.delay+10)),Le(n)}})},t}(ze),ra=function(){function e(t){var n;if(this.SAMPLE_RATE=5e3,this.isRecording=!1,this.readyFlag=!1,this.leftChannel=[],this.rightChannel=[],this.recordingLength=0,typeof AudioContext<"u")n=new AudioContext;else{if(!webkitAudioContext)return;n=new webkitAudioContext}this.DEFAULT_SAMPLE_RATE=n.sampleRate;var i=n.createGain();n.createMediaStreamSource(t).connect(i),this.recorder=n.createScriptProcessor(2048,2,1),this.recorder.onaudioprocess=null,i.connect(this.recorder),this.recorder.connect(n.destination),this.readyFlag=!0}return e.prototype.cloneChannelData=function(t,n){this.leftChannel.push(new Float32Array(t)),this.rightChannel.push(new Float32Array(n)),this.recordingLength+=2048},e.prototype.startRecordingNewWavFile=function(){this.readyFlag&&(this.isRecording=!0,this.leftChannel.length=this.rightChannel.length=0,this.recordingLength=0)},e.prototype.stopRecording=function(){this.isRecording=!1},e.prototype.buildWavFileBlob=function(){for(var t=this.mergeBuffers(this.leftChannel),n=this.mergeBuffers(this.rightChannel),i=new Float32Array(t.length),r=0;r<t.length;++r)i[r]=.5*(t[r]+n[r]);this.DEFAULT_SAMPLE_RATE>this.SAMPLE_RATE&&(i=this.downSampleBuffer(i,this.SAMPLE_RATE));var s=44+2*i.length,d=new ArrayBuffer(s),w=new DataView(d);this.writeUTFBytes(w,0,"RIFF"),w.setUint32(4,s,!0),this.writeUTFBytes(w,8,"WAVE"),this.writeUTFBytes(w,12,"fmt "),w.setUint32(16,16,!0),w.setUint16(20,1,!0),w.setUint16(22,1,!0),w.setUint32(24,this.SAMPLE_RATE,!0),w.setUint32(28,2*this.SAMPLE_RATE,!0),w.setUint16(32,2,!0),w.setUint16(34,16,!0);var M=2*i.length;this.writeUTFBytes(w,36,"data"),w.setUint32(40,M,!0);for(var _=i.length,L=44,F=0;F<_;F++)w.setInt16(L,32767*i[F],!0),L+=2;return new Blob([w],{type:"audio/wav"})},e.prototype.downSampleBuffer=function(t,n){if(n===this.DEFAULT_SAMPLE_RATE||n>this.DEFAULT_SAMPLE_RATE)return t;for(var i=this.DEFAULT_SAMPLE_RATE/n,r=Math.round(t.length/i),s=new Float32Array(r),d=0,w=0;d<s.length;){for(var M=Math.round((d+1)*i),_=0,L=0,F=w;F<M&&F<t.length;F++)_+=t[F],L++;s[d]=_/L,d++,w=M}return s},e.prototype.mergeBuffers=function(t){for(var n=new Float32Array(this.recordingLength),i=0,r=t.length,s=0;s<r;++s){var d=t[s];n.set(d,i),i+=d.length}return n},e.prototype.writeUTFBytes=function(t,n,i){for(var r=i.length,s=0;s<r;s++)t.setUint8(n+s,i.charCodeAt(s))},e}(),ia=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),oa=function(e){function t(n,i){var r=e.call(this,n,i)||this;return r._bindEvent(n),r}return ia(t,e),t.prototype._bindEvent=function(n){var i,r=this;this.element.children[0].addEventListener((0,f.Le)(),function(s){if(s.preventDefault(),!r.element.firstElementChild.classList.contains(v.g.CLASS_MENU_DISABLED)){var d=n[n.currentMode].element;if(i)if(i.isRecording){i.stopRecording(),n.tip.hide();var w=new File([i.buildWavFileBlob()],"record"+new Date().getTime()+".wav",{type:"video/webm"});Cn(n,[w]),r.element.children[0].classList.remove("vditor-menu--current")}else n.tip.show(window.VditorI18n.recording),d.setAttribute("contenteditable","false"),i.startRecordingNewWavFile(),r.element.children[0].classList.add("vditor-menu--current");else navigator.mediaDevices.getUserMedia({audio:!0}).then(function(M){(i=new ra(M)).recorder.onaudioprocess=function(_){if(i.isRecording){var L=_.inputBuffer.getChannelData(0),F=_.inputBuffer.getChannelData(1);i.cloneChannelData(L,F)}},i.startRecordingNewWavFile(),n.tip.show(window.VditorI18n.recording),d.setAttribute("contenteditable","false"),r.element.children[0].classList.add("vditor-menu--current")}).catch(function(){n.tip.show(window.VditorI18n["record-tip"])})}})},t}(ze),aa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),sa=function(e){function t(n,i){var r=e.call(this,n,i)||this;return R({redo:r.element},["redo"]),r.element.children[0].addEventListener((0,f.Le)(),function(s){s.preventDefault(),r.element.firstElementChild.classList.contains(v.g.CLASS_MENU_DISABLED)||n.undo.redo(n)}),r}return aa(t,e),t}(ze),la=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),ca=function(e){function t(n,i){var r=e.call(this,n,i)||this;return R({undo:r.element},["undo"]),r.element.children[0].addEventListener((0,f.Le)(),function(s){s.preventDefault(),r.element.firstElementChild.classList.contains(v.g.CLASS_MENU_DISABLED)||n.undo.undo(n)}),r}return la(t,e),t}(ze),da=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),ua=function(e){function t(n,i){var r=e.call(this,n,i)||this,s='<input type="file"';return n.options.upload.multiple&&(s+=' multiple="multiple"'),n.options.upload.accept&&(s+=' accept="'+n.options.upload.accept+'"'),r.element.children[0].innerHTML=""+(i.icon||'<svg><use xlink:href="#vditor-icon-upload"></use></svg>')+s+">",r._bindEvent(n),r}return da(t,e),t.prototype._bindEvent=function(n){var i=this;this.element.children[0].addEventListener((0,f.Le)(),function(r){if(i.element.firstElementChild.classList.contains(v.g.CLASS_MENU_DISABLED))return r.stopPropagation(),void r.preventDefault()}),this.element.querySelector("input").addEventListener("change",function(r){if(i.element.firstElementChild.classList.contains(v.g.CLASS_MENU_DISABLED))return r.stopPropagation(),void r.preventDefault();r.target.files.length!==0&&Cn(n,r.target.files,r.target)})},t}(ze),pa=function(){function e(t){var n=this,i=t.options;this.elements={},this.element=document.createElement("div"),this.element.className="vditor-toolbar",i.toolbar.forEach(function(r,s){var d=n.genItem(t,r,s);if(n.element.appendChild(d),r.toolbar){var w=document.createElement("div");w.className="vditor-hint vditor-panel--arrow",w.addEventListener((0,f.Le)(),function(M){w.style.display="none"}),r.toolbar.forEach(function(M,_){M.level=2,w.appendChild(n.genItem(t,M,s+_))}),d.appendChild(w),I(t,w,d.children[0])}}),t.options.toolbarConfig.hide&&this.element.classList.add("vditor-toolbar--hide"),t.options.toolbarConfig.pin&&this.element.classList.add("vditor-toolbar--pin"),t.options.counter.enable&&(t.counter=new Co(t),this.element.appendChild(t.counter.element))}return e.prototype.genItem=function(t,n,i){var r;switch(n.name){case"bold":case"italic":case"more":case"strike":case"line":case"quote":case"list":case"ordered-list":case"check":case"code":case"inline-code":case"link":case"table":r=new ze(t,n);break;case"emoji":r=new Do(t,n);break;case"headings":r=new Uo(t,n);break;case"|":r=new No;break;case"br":r=new ko;break;case"undo":r=new ca(t,n);break;case"redo":r=new sa(t,n);break;case"help":r=new Fo(t,n);break;case"both":r=new Eo(t,n);break;case"preview":r=new na(t,n);break;case"fullscreen":r=new Bo(t,n);break;case"upload":r=new ua(t,n);break;case"record":r=new oa(t,n);break;case"info":r=new Go(t,n);break;case"edit-mode":r=new Zi(t,n);break;case"devtools":r=new Oo(t,n);break;case"outdent":r=new Qo(t,n);break;case"indent":r=new zo(t,n);break;case"outline":r=new ea(t,n);break;case"insert-after":r=new Jo(t,n);break;case"insert-before":r=new Zo(t,n);break;case"code-theme":r=new So(t,n);break;case"content-theme":r=new Ao(t,n);break;case"export":r=new Io(t,n);break;default:r=new _o(t,n)}if(r){var s=n.name;return s!=="br"&&s!=="|"||(s+=i),this.elements[s]=r.element,r.element}},e}(),ma=b(471),fa=function(){function e(){this.stackSize=50,this.resetStack(),this.dmp=new ma}return e.prototype.clearStack=function(t){this.resetStack(),this.resetIcon(t)},e.prototype.resetIcon=function(t){t.toolbar&&(this[t.currentMode].undoStack.length>1?N(t.toolbar.elements,["undo"]):R(t.toolbar.elements,["undo"]),this[t.currentMode].redoStack.length!==0?N(t.toolbar.elements,["redo"]):R(t.toolbar.elements,["redo"]))},e.prototype.undo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"&&!(this[t.currentMode].undoStack.length<2)){var n=this[t.currentMode].undoStack.pop();n&&(this[t.currentMode].redoStack.push(n),this.renderDiff(n,t),this[t.currentMode].hasUndo=!0,D(t,["hint"]))}},e.prototype.redo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"){var n=this[t.currentMode].redoStack.pop();n&&(this[t.currentMode].undoStack.push(n),this.renderDiff(n,t,!0))}},e.prototype.recordFirstPosition=function(t,n){if(getSelection().rangeCount!==0&&!(this[t.currentMode].undoStack.length!==1||this[t.currentMode].undoStack[0].length===0||this[t.currentMode].redoStack.length>0||(0,f.vU)()&&n.key==="Backspace"||(0,f.G6)())){var i=this.addCaret(t);i.replace("<wbr>","").replace(" vditor-ir__node--expand","")===this[t.currentMode].undoStack[0][0].diffs[0][1].replace("<wbr>","")&&(this[t.currentMode].undoStack[0][0].diffs[0][1]=i,this[t.currentMode].lastText=i)}},e.prototype.addToUndoStack=function(t){var n=this.addCaret(t,!0),i=this.dmp.diff_main(n,this[t.currentMode].lastText,!0),r=this.dmp.patch_make(n,this[t.currentMode].lastText,i);r.length===0&&this[t.currentMode].undoStack.length>0||(this[t.currentMode].lastText=n,this[t.currentMode].undoStack.push(r),this[t.currentMode].undoStack.length>this.stackSize&&this[t.currentMode].undoStack.shift(),this[t.currentMode].hasUndo&&(this[t.currentMode].redoStack=[],this[t.currentMode].hasUndo=!1,R(t.toolbar.elements,["redo"])),this[t.currentMode].undoStack.length>1&&N(t.toolbar.elements,["undo"]))},e.prototype.renderDiff=function(t,n,i){var r;if(i===void 0&&(i=!1),i){var s=this.dmp.patch_deepCopy(t).reverse();s.forEach(function(w){w.diffs.forEach(function(M){M[0]=-M[0]})}),r=this.dmp.patch_apply(s,this[n.currentMode].lastText)[0]}else r=this.dmp.patch_apply(t,this[n.currentMode].lastText)[0];if(this[n.currentMode].lastText=r,n[n.currentMode].element.innerHTML=r,n.currentMode!=="sv"&&n[n.currentMode].element.querySelectorAll(".vditor-"+n.currentMode+"__preview[data-render='2']").forEach(function(w){Be(w,n)}),n[n.currentMode].element.querySelector("wbr"))(0,H.ib)(n[n.currentMode].element,n[n.currentMode].element.ownerDocument.createRange()),Ge(n);else{var d=getSelection().getRangeAt(0);d.setEndBefore(n[n.currentMode].element),d.collapse(!1)}pe(n),Ae(n,{enableAddUndoStack:!1,enableHint:!1,enableInput:!0}),He(n),n[n.currentMode].element.querySelectorAll(".vditor-"+n.currentMode+"__preview[data-render='2']").forEach(function(w){Be(w,n)}),this[n.currentMode].undoStack.length>1?N(n.toolbar.elements,["undo"]):R(n.toolbar.elements,["undo"]),this[n.currentMode].redoStack.length!==0?N(n.toolbar.elements,["redo"]):R(n.toolbar.elements,["redo"])},e.prototype.resetStack=function(){this.ir={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.sv={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.wysiwyg={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]}},e.prototype.addCaret=function(t,n){var i;if(n===void 0&&(n=!1),getSelection().rangeCount!==0&&!t[t.currentMode].element.querySelector("wbr")){var r=getSelection().getRangeAt(0);if(t[t.currentMode].element.contains(r.startContainer)){i=r.cloneRange();var s=document.createElement("span");s.className="vditor-wbr",r.insertNode(s)}}t.ir.element.cloneNode(!0).querySelectorAll(".vditor-"+t.currentMode+"__preview[data-render='1']").forEach(function(w){w.firstElementChild&&(w.firstElementChild.classList.contains("language-echarts")||w.firstElementChild.classList.contains("language-plantuml")||w.firstElementChild.classList.contains("language-mindmap")?(w.firstElementChild.removeAttribute("_echarts_instance_"),w.firstElementChild.removeAttribute("data-processed"),w.firstElementChild.innerHTML=w.previousElementSibling.firstElementChild.innerHTML,w.setAttribute("data-render","2")):w.firstElementChild.classList.contains("language-math")&&(w.setAttribute("data-render","2"),w.firstElementChild.textContent=w.firstElementChild.getAttribute("data-math"),w.firstElementChild.removeAttribute("data-math")))});var d=t[t.currentMode].element.innerHTML;return t[t.currentMode].element.querySelectorAll(".vditor-wbr").forEach(function(w){w.remove()}),n&&i&&(0,H.Hc)(i),d.replace('<span class="vditor-wbr"></span>',"<wbr>")},e}(),Ir=b(640),ha=function(){function e(t){this.defaultOptions={rtl:!1,after:void 0,cache:{enable:!0},cdn:v.g.CDN,dist:v.g.DIST,classes:{preview:""},comment:{enable:!1},counter:{enable:!1,type:"markdown"},debugger:!1,fullscreen:{index:90},height:"auto",hint:{delay:200,emoji:{"+1":"👍","-1":"👎",confused:"😕",eyes:"👀️",heart:"❤️",rocket:"🚀️",smile:"😄",tada:"🎉️"},emojiPath:v.g.CDN+"/"+v.g.DIST+"/images/emoji",extend:[],parse:!0},icon:"ant",lang:"zh_CN",mode:"ir",outline:{enable:!1,position:"left"},placeholder:"",preview:{actions:["desktop","tablet","mobile","mp-wechat","zhihu"],delay:1e3,hljs:v.g.HLJS_OPTIONS,markdown:v.g.MARKDOWN_OPTIONS,math:v.g.MATH_OPTIONS,maxWidth:800,mode:"both",theme:v.g.THEME_OPTIONS},link:{isOpen:!0},image:{isPreview:!0},resize:{enable:!1,position:"bottom"},theme:"classic",toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","record","table","|","undo","redo","|","fullscreen","edit-mode",{name:"more",toolbar:["both","code-theme","content-theme","export","outline","preview","devtools","info","help"]}],toolbarConfig:{hide:!1,pin:!1},typewriterMode:!1,undoDelay:800,upload:{extraData:{},fieldName:"file[]",filename:function(n){return n.replace(/\W/g,"")},linkToImgUrl:"",max:10485760,multiple:!0,url:"",withCredentials:!1},value:"",width:"auto"},this.options=t}return e.prototype.merge=function(){var t,n,i;this.options&&(this.options.toolbar?this.options.toolbar=this.mergeToolbar(this.options.toolbar):this.options.toolbar=this.mergeToolbar(this.defaultOptions.toolbar),!((n=(t=this.options.preview)===null||t===void 0?void 0:t.theme)===null||n===void 0)&&n.list&&(this.defaultOptions.preview.theme.list=this.options.preview.theme.list),!((i=this.options.hint)===null||i===void 0)&&i.emoji&&(this.defaultOptions.hint.emoji=this.options.hint.emoji),this.options.comment&&(this.defaultOptions.comment=this.options.comment));var r=(0,Ir.T)(this.defaultOptions,this.options);if(r.cache.enable&&!r.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");return r.baseURL=r._baseURL||r.cdn+"/"+r.dist,r.staticPath=(0,Ir.T)({logo:r.baseURL+"/"+v.g._STATIC_PATH.logo,method:r.baseURL+"/"+v.g._STATIC_PATH.method,style:r.baseURL+"/"+v.g._STATIC_PATH.style,emoji:r.baseURL+"/"+v.g._STATIC_PATH.emoji,i18n:r.baseURL+"/"+v.g._STATIC_PATH.i18n,icons:r.baseURL+"/"+v.g._STATIC_PATH.icons,theme:r.baseURL+"/"+v.g._STATIC_PATH.theme,abc:r.baseURL+"/"+v.g._STATIC_PATH.abc,echarts:r.baseURL+"/"+v.g._STATIC_PATH.echarts,flowchart:r.baseURL+"/"+v.g._STATIC_PATH.flowchart,graphviz:r.baseURL+"/"+v.g._STATIC_PATH.graphviz,lute:r.baseURL+"/"+v.g._STATIC_PATH.lute,markmap:r.baseURL+"/"+v.g._STATIC_PATH.markmap,mermaid:r.baseURL+"/"+v.g._STATIC_PATH.mermaid,plantuml:r.baseURL+"/"+v.g._STATIC_PATH.plantuml,highlight:r.baseURL+"/"+v.g._STATIC_PATH.highlight,katex:r.baseURL+"/"+v.g._STATIC_PATH.katex,mathjax:r.baseURL+"/"+v.g._STATIC_PATH.mathjax},r._staticPath),r},e.prototype.mergeToolbar=function(t){var n=this,i=[{icon:'<svg><use xlink:href="#vditor-icon-export"></use></svg>',name:"export",tipPosition:"ne"},{hotkey:"⌘E",icon:'<svg><use xlink:href="#vditor-icon-emoji"></use></svg>',name:"emoji",tipPosition:"ne"},{hotkey:"⌘H",icon:'<svg><use xlink:href="#vditor-icon-headings"></use></svg>',name:"headings",tipPosition:"ne"},{hotkey:"⌘B",icon:'<svg><use xlink:href="#vditor-icon-bold"></use></svg>',name:"bold",prefix:"**",suffix:"**",tipPosition:"ne"},{hotkey:"⌘I",icon:'<svg><use xlink:href="#vditor-icon-italic"></use></svg>',name:"italic",prefix:"*",suffix:"*",tipPosition:"ne"},{hotkey:"⌘D",icon:'<svg><use xlink:href="#vditor-icon-strike"></use></svg>',name:"strike",prefix:"~~",suffix:"~~",tipPosition:"ne"},{hotkey:"⌘K",icon:'<svg><use xlink:href="#vditor-icon-link"></use></svg>',name:"link",prefix:"[",suffix:"](https://)",tipPosition:"n"},{name:"|"},{hotkey:"⌘L",icon:'<svg><use xlink:href="#vditor-icon-list"></use></svg>',name:"list",prefix:"* ",tipPosition:"n"},{hotkey:"⌘O",icon:'<svg><use xlink:href="#vditor-icon-ordered-list"></use></svg>',name:"ordered-list",prefix:"1. ",tipPosition:"n"},{hotkey:"⌘J",icon:'<svg><use xlink:href="#vditor-icon-check"></use></svg>',name:"check",prefix:"* [ ] ",tipPosition:"n"},{hotkey:"⇧⌘I",icon:'<svg><use xlink:href="#vditor-icon-outdent"></use></svg>',name:"outdent",tipPosition:"n"},{hotkey:"⇧⌘O",icon:'<svg><use xlink:href="#vditor-icon-indent"></use></svg>',name:"indent",tipPosition:"n"},{name:"|"},{hotkey:"⌘;",icon:'<svg><use xlink:href="#vditor-icon-quote"></use></svg>',name:"quote",prefix:"> ",tipPosition:"n"},{hotkey:"⇧⌘H",icon:'<svg><use xlink:href="#vditor-icon-line"></use></svg>',name:"line",prefix:"---",tipPosition:"n"},{hotkey:"⌘U",icon:'<svg><use xlink:href="#vditor-icon-code"></use></svg>',name:"code",prefix:"```",suffix:"\n```",tipPosition:"n"},{hotkey:"⌘G",icon:'<svg><use xlink:href="#vditor-icon-inline-code"></use></svg>',name:"inline-code",prefix:"`",suffix:"`",tipPosition:"n"},{hotkey:"⇧⌘B",icon:'<svg><use xlink:href="#vditor-icon-before"></use></svg>',name:"insert-before",tipPosition:"n"},{hotkey:"⇧⌘E",icon:'<svg><use xlink:href="#vditor-icon-after"></use></svg>',name:"insert-after",tipPosition:"n"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-upload"></use></svg>',name:"upload",tipPosition:"n"},{icon:'<svg><use xlink:href="#vditor-icon-record"></use></svg>',name:"record",tipPosition:"n"},{hotkey:"⌘M",icon:'<svg><use xlink:href="#vditor-icon-table"></use></svg>',name:"table",prefix:"| col1",suffix:` | col2 | col3 |
| --- | --- | --- |
|  |  |  |
|  |  |  |`,tipPosition:"n"},{name:"|"},{hotkey:"⌘Z",icon:'<svg><use xlink:href="#vditor-icon-undo"></use></svg>',name:"undo",tipPosition:"nw"},{hotkey:"⌘Y",icon:'<svg><use xlink:href="#vditor-icon-redo"></use></svg>',name:"redo",tipPosition:"nw"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-more"></use></svg>',name:"more",tipPosition:"e"},{hotkey:"⌘'",icon:'<svg><use xlink:href="#vditor-icon-fullscreen"></use></svg>',name:"fullscreen",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-edit"></use></svg>',name:"edit-mode",tipPosition:"nw"},{hotkey:"⌘P",icon:'<svg><use xlink:href="#vditor-icon-both"></use></svg>',name:"both",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-preview"></use></svg>',name:"preview",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',name:"outline",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',name:"content-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-code-theme"></use></svg>',name:"code-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-bug"></use></svg>',name:"devtools",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-info"></use></svg>',name:"info",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-help"></use></svg>',name:"help",tipPosition:"nw"},{name:"br"}],r=[];return t.forEach(function(s){var d=s;i.forEach(function(w){typeof s=="string"&&w.name===s&&(d=w),typeof s=="object"&&w.name===s.name&&(d=Object.assign({},w,s))}),s.toolbar&&(d.toolbar=n.mergeToolbar(s.toolbar)),r.push(d)}),r},e}(),ga=function(){function e(t){var n=this;this.composingLock=!1,this.commentIds=[];var i=document.createElement("div");i.className="vditor-wysiwyg",i.innerHTML='<pre class="vditor-reset" placeholder="'+t.options.placeholder+`"
 contenteditable="true" spellcheck="false"></pre>
<div class="vditor-panel vditor-panel--none"></div>
<div class="vditor-panel vditor-panel--none">
    <button type="button" aria-label="`+window.VditorI18n.comment+`" class="vditor-icon vditor-tooltipped vditor-tooltipped__n">
        <svg><use xlink:href="#vditor-icon-comment"></use></svg>
    </button>
</div>`,this.element=i.firstElementChild,this.popover=i.firstElementChild.nextElementSibling,this.selectPopover=i.lastElementChild,this.bindEvent(t),wn(t,this.element),sr(t,this.element),En(t,this.element),Tn(t,this.element),An(t,this.element),kn(t,this.element),xn(t,this.element,this.copy),Sn(t,this.element,this.copy),t.options.comment.enable&&(this.selectPopover.querySelector("button").onclick=function(){var r,s,d=Lute.NewNodeID(),w=getSelection().getRangeAt(0),M=w.cloneRange(),_=w.extractContents(),L=!1,F=!1;_.childNodes.forEach(function(j,Q){var oe=!1;if(j.nodeType===3?oe=!0:j.classList.contains("vditor-comment")?j.classList.contains("vditor-comment")&&j.setAttribute("data-cmtids",j.getAttribute("data-cmtids")+" "+d):oe=!0,oe)if(j.nodeType!==3&&j.getAttribute("data-block")==="0"&&Q===0&&M.startOffset>0)j.innerHTML='<span class="vditor-comment" data-cmtids="'+d+'">'+j.innerHTML+"</span>",r=j;else if(j.nodeType!==3&&j.getAttribute("data-block")==="0"&&Q===_.childNodes.length-1&&M.endOffset<M.endContainer.textContent.length)j.innerHTML='<span class="vditor-comment" data-cmtids="'+d+'">'+j.innerHTML+"</span>",s=j;else if(j.nodeType!==3&&j.getAttribute("data-block")==="0")Q===0?L=!0:Q===_.childNodes.length-1&&(F=!0),j.innerHTML='<span class="vditor-comment" data-cmtids="'+d+'">'+j.innerHTML+"</span>";else{var ne=document.createElement("span");ne.classList.add("vditor-comment"),ne.setAttribute("data-cmtids",d),j.parentNode.insertBefore(ne,j),ne.appendChild(j)}});var $=(0,S.F9)(M.startContainer);$&&(r?($.insertAdjacentHTML("beforeend",r.innerHTML),r.remove()):$.textContent.trim().replace(v.g.ZWSP,"")===""&&L&&$.remove());var ee=(0,S.F9)(M.endContainer);ee&&(s?(ee.insertAdjacentHTML("afterbegin",s.innerHTML),s.remove()):ee.textContent.trim().replace(v.g.ZWSP,"")===""&&F&&ee.remove()),w.insertNode(_),t.options.comment.add(d,w.toString(),n.getComments(t,!0)),Ie(t,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),n.hideComment()})}return e.prototype.getComments=function(t,n){var i=this;if(n===void 0&&(n=!1),t.currentMode!=="wysiwyg"||!t.options.comment.enable)return[];this.commentIds=[],this.element.querySelectorAll(".vditor-comment").forEach(function(s){i.commentIds=i.commentIds.concat(s.getAttribute("data-cmtids").split(" "))}),this.commentIds=Array.from(new Set(this.commentIds));var r=[];return n?(this.commentIds.forEach(function(s){r.push({id:s,top:i.element.querySelector('.vditor-comment[data-cmtids="'+s+'"]').offsetTop})}),r):void 0},e.prototype.triggerRemoveComment=function(t){var n,i,r;if(t.currentMode==="wysiwyg"&&t.options.comment.enable&&t.wysiwyg.commentIds.length>0){var s=JSON.parse(JSON.stringify(this.commentIds));this.getComments(t);var d=(n=s,i=this.commentIds,r=new Set(i),n.filter(function(w){return!r.has(w)}));d.length>0&&t.options.comment.remove(d)}},e.prototype.showComment=function(){var t=(0,H.Ny)(this.element);this.selectPopover.setAttribute("style","left:"+t.left+"px;display:block;top:"+Math.max(-8,t.top-21)+"px")},e.prototype.hideComment=function(){this.selectPopover.setAttribute("style","display:none")},e.prototype.unbindListener=function(){window.removeEventListener("scroll",this.scrollListener)},e.prototype.copy=function(t,n){var i=getSelection().getRangeAt(0);if(i.toString()!==""){t.stopPropagation(),t.preventDefault();var r=(0,S.lG)(i.startContainer,"CODE"),s=(0,S.lG)(i.endContainer,"CODE");if(r&&s&&s.isSameNode(r)){var d="";return d=r.parentElement.tagName==="PRE"?i.toString():"`"+i.toString()+"`",t.clipboardData.setData("text/plain",d),void t.clipboardData.setData("text/html","")}var w=(0,S.lG)(i.startContainer,"A"),M=(0,S.lG)(i.endContainer,"A");if(w&&M&&M.isSameNode(w)){var _=w.getAttribute("title")||"";return _&&(_=' "'+_+'"'),t.clipboardData.setData("text/plain","["+i.toString()+"]("+w.getAttribute("href")+_+")"),void t.clipboardData.setData("text/html","")}var L=document.createElement("div");L.appendChild(i.cloneContents()),t.clipboardData.setData("text/plain",n.lute.VditorDOM2Md(L.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var n=this;this.unbindListener(),window.addEventListener("scroll",this.scrollListener=function(){if(D(t,["hint"]),n.popover.style.display==="block"&&n.selectPopover.style.display==="block"){var i=parseInt(n.popover.getAttribute("data-top"),10);if(t.options.height==="auto"){if(t.options.toolbarConfig.pin){var r=Math.max(i,window.scrollY-t.element.offsetTop-8)+"px";n.popover.style.display==="block"&&(n.popover.style.top=r),n.selectPopover.style.display==="block"&&(n.selectPopover.style.top=r)}}else if(t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0){var s=Math.max(window.scrollY-t.element.offsetTop-8,Math.min(i-t.wysiwyg.element.scrollTop,n.element.clientHeight-21))+"px";n.popover.style.display==="block"&&(n.popover.style.top=s),n.selectPopover.style.display==="block"&&(n.selectPopover.style.top=s)}}}),this.element.addEventListener("scroll",function(){if(D(t,["hint"]),t.options.comment&&t.options.comment.enable&&t.options.comment.scroll&&t.options.comment.scroll(t.wysiwyg.element.scrollTop),n.popover.style.display==="block"){var i=parseInt(n.popover.getAttribute("data-top"),10)-t.wysiwyg.element.scrollTop,r=-8;t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0&&(r=window.scrollY-t.element.offsetTop+r);var s=Math.max(r,Math.min(i,n.element.clientHeight-21))+"px";n.popover.style.top=s,n.selectPopover.style.top=s}}),this.element.addEventListener("paste",function(i){on(t,i,{pasteCode:function(r){var s=(0,H.zh)(t),d=document.createElement("template");d.innerHTML=r,s.insertNode(d.content.cloneNode(!0));var w=(0,S.a1)(s.startContainer,"data-block","0");w?w.outerHTML=t.lute.SpinVditorDOM(w.outerHTML):t.wysiwyg.element.innerHTML=t.lute.SpinVditorDOM(t.wysiwyg.element.innerHTML),(0,H.ib)(t.wysiwyg.element,s)}})}),this.element.addEventListener("compositionstart",function(){n.composingLock=!0}),this.element.addEventListener("compositionend",function(i){var r=(0,Z.W)(getSelection().getRangeAt(0).startContainer);r&&r.textContent===""?pe(t):((0,f.vU)()||$t(t,getSelection().getRangeAt(0).cloneRange(),i),n.composingLock=!1)}),this.element.addEventListener("input",function(i){if(i.inputType!=="deleteByDrag"&&i.inputType!=="insertFromDrop"){if(n.preventInput)return n.preventInput=!1,void Ie(t);if(n.composingLock||i.data==="‘"||i.data==="“"||i.data==="《")Ie(t);else{var r=getSelection().getRangeAt(0),s=(0,S.F9)(r.startContainer);if(s||($e(t,r),s=(0,S.F9)(r.startContainer)),s){for(var d=(0,H.im)(s,t.wysiwyg.element,r).start,w=!0,M=d-1;M>s.textContent.substr(0,d).lastIndexOf(`
`);M--)if(s.textContent.charAt(M)!==" "&&s.textContent.charAt(M)!=="	"){w=!1;break}d===0&&(w=!1);var _=!0;for(M=d-1;M<s.textContent.length;M++)if(s.textContent.charAt(M)!==" "&&s.textContent.charAt(M)!==`
`){_=!1;break}var L=(0,Z.W)(getSelection().getRangeAt(0).startContainer);L&&L.textContent===""&&(pe(t),L.remove()),w&&s.getAttribute("data-type")!=="code-block"||_||Mn(s.innerHTML)||_n(s.innerHTML)&&s.previousElementSibling?typeof t.options.input=="function"&&t.options.input(p(t)):$t(t,r,i)}}}}),this.element.addEventListener("click",function(i){if(i.target.tagName==="INPUT"){var r=i.target;return r.checked?r.setAttribute("checked","checked"):r.removeAttribute("checked"),n.preventInput=!0,void Ie(t)}if(i.target.tagName!=="IMG"||i.target.parentElement.classList.contains("vditor-wysiwyg__preview")){if(i.target.tagName==="A")return t.options.link.click?t.options.link.click(i.target):t.options.link.isOpen&&window.open(i.target.getAttribute("href")),void i.preventDefault();var s=(0,H.zh)(t);if(i.target.isEqualNode(n.element)&&n.element.lastElementChild&&s.collapsed){var d=n.element.lastElementChild.getBoundingClientRect();i.y>d.top+d.height&&(n.element.lastElementChild.tagName==="P"&&n.element.lastElementChild.textContent.trim().replace(v.g.ZWSP,"")===""?(s.selectNodeContents(n.element.lastElementChild),s.collapse(!1)):(n.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+v.g.ZWSP+"<wbr></p>"),(0,H.ib)(n.element,s)))}k(t);var w=(0,S.fb)(i.target,"vditor-wysiwyg__preview");w||(w=(0,S.fb)((0,H.zh)(t).startContainer,"vditor-wysiwyg__preview")),w&&Ye(w,t),ve(i,t)}else i.target.getAttribute("data-type")==="link-ref"?u(t,i.target):function(M,_){var L=M.target;_.wysiwyg.popover.innerHTML="";var F=function(){L.setAttribute("src",ee.value),L.setAttribute("alt",Q.value),L.setAttribute("title",ne.value)},$=document.createElement("span");$.setAttribute("aria-label",window.VditorI18n.imageURL),$.className="vditor-tooltipped vditor-tooltipped__n";var ee=document.createElement("input");$.appendChild(ee),ee.className="vditor-input",ee.setAttribute("placeholder",window.VditorI18n.imageURL),ee.value=L.getAttribute("src")||"",ee.oninput=function(){F()},ee.onkeydown=function(ie){Ze(_,ie)};var j=document.createElement("span");j.setAttribute("aria-label",window.VditorI18n.alternateText),j.className="vditor-tooltipped vditor-tooltipped__n";var Q=document.createElement("input");j.appendChild(Q),Q.className="vditor-input",Q.setAttribute("placeholder",window.VditorI18n.alternateText),Q.style.width="52px",Q.value=L.getAttribute("alt")||"",Q.oninput=function(){F()},Q.onkeydown=function(ie){Ze(_,ie)};var oe=document.createElement("span");oe.setAttribute("aria-label",window.VditorI18n.title),oe.className="vditor-tooltipped vditor-tooltipped__n";var ne=document.createElement("input");oe.appendChild(ne),ne.className="vditor-input",ne.setAttribute("placeholder",window.VditorI18n.title),ne.value=L.getAttribute("title")||"",ne.oninput=function(){F()},ne.onkeydown=function(ie){Ze(_,ie)},q(L,_),_.wysiwyg.popover.insertAdjacentElement("beforeend",$),_.wysiwyg.popover.insertAdjacentElement("beforeend",j),_.wysiwyg.popover.insertAdjacentElement("beforeend",oe),c(_,L)}(i,t)}),this.element.addEventListener("keyup",function(i){if(!i.isComposing&&!(0,f.yl)(i)){i.key==="Enter"&&Ge(t),i.key!=="Backspace"&&i.key!=="Delete"||t.wysiwyg.element.innerHTML===""||t.wysiwyg.element.childNodes.length!==1||!t.wysiwyg.element.firstElementChild||t.wysiwyg.element.firstElementChild.tagName!=="P"||t.wysiwyg.element.firstElementChild.childElementCount!==0||t.wysiwyg.element.textContent!==""&&t.wysiwyg.element.textContent!==`
`||(t.wysiwyg.element.innerHTML="");var r=(0,H.zh)(t);if(i.key==="Backspace"&&(0,f.vU)()&&r.startContainer.textContent===`
`&&r.startOffset===1&&(r.startContainer.textContent=""),$e(t,r),k(t),i.key==="ArrowDown"||i.key==="ArrowRight"||i.key==="Backspace"||i.key==="ArrowLeft"||i.key==="ArrowUp"){i.key!=="ArrowLeft"&&i.key!=="ArrowRight"||t.hint.render(t);var s=(0,S.fb)(r.startContainer,"vditor-wysiwyg__preview");if(!s&&r.startContainer.nodeType!==3&&r.startOffset>0&&(w=r.startContainer).classList.contains("vditor-wysiwyg__block")&&(s=w.lastElementChild),s)if(s.previousElementSibling.style.display!=="none"){var d=s.previousElementSibling;if(d.tagName==="PRE"&&(d=d.firstElementChild),i.key==="ArrowDown"||i.key==="ArrowRight"){var w,M=function(L){for(var F=L;F&&!F.nextSibling;)F=F.parentElement;return F.nextSibling}(w=s.parentElement);if(M&&M.nodeType!==3){var _=M.querySelector(".vditor-wysiwyg__preview");if(_)return void Ye(_,t)}if(M.nodeType===3){for(;M.textContent.length===0&&M.nextSibling;)M=M.nextSibling;r.setStart(M,1)}else r.setStart(M.firstChild,0)}else r.selectNodeContents(d),r.collapse(!1)}else i.key==="ArrowDown"||i.key==="ArrowRight"?Ye(s,t):Ye(s,t,!1)}}})},e}(),va=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}();const ya=function(e){function t(n,i){var r=e.call(this)||this;r.version=v.H,typeof n=="string"&&(i?i.cache?i.cache.id||(i.cache.id="vditor"+n):i.cache={id:"vditor"+n}:i={cache:{id:"vditor"+n}},n=document.getElementById(n));var s=new ha(i).merge();if(s.i18n)window.VditorI18n=s.i18n,r.init(n,s);else{if(!["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(s.lang))throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");var d="vditorI18nScript",w=d+s.lang;document.querySelectorAll('head script[id^="vditorI18nScript"]').forEach(function(M){M.id!==w&&document.head.removeChild(M)}),(0,m.G)(s.staticPath.i18n+"/"+s.lang+".js",w).then(function(){r.init(n,s)})}return r}return va(t,e),t.prototype.setTheme=function(n,i,r,s){this.vditor.options.theme=n,Ve(this.vditor),i&&(this.vditor.options.preview.theme.current=i,(0,Se.Z)(i,s||this.vditor.options.preview.theme.path)),r&&(this.vditor.options.preview.hljs.style=r,(0,Dr.Y)(r,this.vditor.options.staticPath.highlight))},t.prototype.getValue=function(){return p(this.vditor)},t.prototype.getCurrentMode=function(){return this.vditor.currentMode},t.prototype.focus=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.focus():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.focus():this.vditor.currentMode==="ir"&&this.vditor.ir.element.focus()},t.prototype.blur=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.blur():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.blur():this.vditor.currentMode==="ir"&&this.vditor.ir.element.blur()},t.prototype.disabled=function(){D(this.vditor,["subToolbar","hint","popover"]),R(this.vditor.toolbar.elements,v.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","false")},t.prototype.enable=function(){N(this.vditor.toolbar.elements,v.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor.undo.resetIcon(this.vditor),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","true")},t.prototype.getSelection=function(){return this.vditor.currentMode==="wysiwyg"?qt(this.vditor.wysiwyg.element):this.vditor.currentMode==="sv"?qt(this.vditor.sv.element):this.vditor.currentMode==="ir"?qt(this.vditor.ir.element):void 0},t.prototype.renderPreview=function(n){this.vditor.preview.render(this.vditor,n)},t.prototype.getCursorPosition=function(){return(0,H.Ny)(this.vditor[this.vditor.currentMode].element)},t.prototype.isUploading=function(){return this.vditor.upload.isUploading},t.prototype.clearCache=function(){localStorage.removeItem(this.vditor.options.cache.id)},t.prototype.disabledCache=function(){this.vditor.options.cache.enable=!1},t.prototype.enableCache=function(){if(!this.vditor.options.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");this.vditor.options.cache.enable=!0},t.prototype.html2md=function(n){return this.vditor.lute.HTML2Md(n)},t.prototype.exportJSON=function(n){return this.vditor.lute.RenderJSON(n)},t.prototype.getHTML=function(){return Nr(this.vditor)},t.prototype.tip=function(n,i){this.vditor.tip.show(n,i)},t.prototype.setPreviewMode=function(n){Nn(n,this.vditor)},t.prototype.deleteValue=function(){window.getSelection().isCollapsed||document.execCommand("delete",!1)},t.prototype.updateValue=function(n){document.execCommand("insertHTML",!1,n)},t.prototype.insertValue=function(n,i){i===void 0&&(i=!0);var r=(0,H.zh)(this.vditor);r.collapse(!0);var s=document.createElement("template");s.innerHTML=n,r.insertNode(s.content.cloneNode(!0)),r.collapse(!1),this.vditor.currentMode==="sv"?(this.vditor.sv.preventInput=!0,i&&Ce(this.vditor)):this.vditor.currentMode==="wysiwyg"?(this.vditor.wysiwyg.preventInput=!0,i&&$t(this.vditor,getSelection().getRangeAt(0))):this.vditor.currentMode==="ir"&&(this.vditor.ir.preventInput=!0,i&&me(this.vditor,getSelection().getRangeAt(0),!0))},t.prototype.setValue=function(n,i){var r=this;i===void 0&&(i=!1),this.vditor.currentMode==="sv"?(this.vditor.sv.element.innerHTML="<div data-block='0'>"+this.vditor.lute.SpinVditorSVDOM(n)+"</div>",Xe(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})):this.vditor.currentMode==="wysiwyg"?qe(this.vditor,n,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}):(this.vditor.ir.element.innerHTML=this.vditor.lute.Md2VditorIRDOM(n),this.vditor.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(s){Be(s,r.vditor)}),mt(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})),this.vditor.outline.render(this.vditor),n||(D(this.vditor,["emoji","headings","submenu","hint"]),this.vditor.wysiwyg.popover&&(this.vditor.wysiwyg.popover.style.display="none"),this.clearCache()),i&&this.clearStack()},t.prototype.clearStack=function(){this.vditor.undo.clearStack(this.vditor),this.vditor.undo.addToUndoStack(this.vditor)},t.prototype.destroy=function(){this.vditor.element.innerHTML=this.vditor.originalInnerHTML,this.vditor.element.classList.remove("vditor"),this.vditor.element.removeAttribute("style");var n=document.getElementById("vditorIconScript");n&&n.remove(),this.clearCache(),ye(),this.vditor.wysiwyg.unbindListener()},t.prototype.getCommentIds=function(){return this.vditor.currentMode!=="wysiwyg"?[]:this.vditor.wysiwyg.getComments(this.vditor,!0)},t.prototype.hlCommentIds=function(n){if(this.vditor.currentMode==="wysiwyg"){var i=function(r){r.classList.remove("vditor-comment--hover"),n.forEach(function(s){r.getAttribute("data-cmtids").indexOf(s)>-1&&r.classList.add("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(r){i(r)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(r){i(r)})}},t.prototype.unHlCommentIds=function(n){if(this.vditor.currentMode==="wysiwyg"){var i=function(r){n.forEach(function(s){r.getAttribute("data-cmtids").indexOf(s)>-1&&r.classList.remove("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(r){i(r)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(r){i(r)})}},t.prototype.removeCommentIds=function(n){var i=this;if(this.vditor.currentMode==="wysiwyg"){var r=function(s,d){var w=s.getAttribute("data-cmtids").split(" ");w.find(function(M,_){if(M===d)return w.splice(_,1),!0}),w.length===0?(s.outerHTML=s.innerHTML,(0,H.zh)(i.vditor).collapse(!0)):s.setAttribute("data-cmtids",w.join(" "))};n.forEach(function(s){i.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(d){r(d,s)}),i.vditor.preview.element.style.display!=="none"&&i.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(d){r(d,s)})}),Ie(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})}},t.prototype.init=function(n,i){var r=this;this.vditor={currentMode:i.mode,element:n,hint:new uo(i.hint.extend),lute:void 0,options:i,originalInnerHTML:n.innerHTML,outline:new fo(window.VditorI18n.outline),tip:new bo},this.vditor.sv=new yo(this.vditor),this.vditor.undo=new fa,this.vditor.wysiwyg=new ga(this.vditor),this.vditor.ir=new po(this.vditor),this.vditor.toolbar=new pa(this.vditor),i.resize.enable&&(this.vditor.resize=new vo(this.vditor)),this.vditor.toolbar.elements.devtools&&(this.vditor.devtools=new A),(i.upload.url||i.upload.handler)&&(this.vditor.upload=new to),(0,m.G)(i._lutePath||i.staticPath.lute,"vditorLuteScript").then(function(){r.vditor.lute=(0,mo.X)({autoSpace:r.vditor.options.preview.markdown.autoSpace,gfmAutoLink:r.vditor.options.preview.markdown.gfmAutoLink,codeBlockPreview:r.vditor.options.preview.markdown.codeBlockPreview,emojiSite:r.vditor.options.hint.emojiPath,emojis:r.vditor.options.hint.emoji,fixTermTypo:r.vditor.options.preview.markdown.fixTermTypo,footnotes:r.vditor.options.preview.markdown.footnotes,headingAnchor:!1,inlineMathDigit:r.vditor.options.preview.math.inlineDigit,linkBase:r.vditor.options.preview.markdown.linkBase,linkPrefix:r.vditor.options.preview.markdown.linkPrefix,listStyle:r.vditor.options.preview.markdown.listStyle,mark:r.vditor.options.preview.markdown.mark,mathBlockPreview:r.vditor.options.preview.markdown.mathBlockPreview,paragraphBeginningSpace:r.vditor.options.preview.markdown.paragraphBeginningSpace,sanitize:r.vditor.options.preview.markdown.sanitize,toc:r.vditor.options.preview.markdown.toc}),r.vditor.preview=new go(r.vditor),function(s){s.element.innerHTML="",s.element.classList.add("vditor"),s.options.rtl&&s.element.setAttribute("dir","rtl"),Ve(s),(0,Se.Z)(s.options.preview.theme.current,s.options.preview.theme.path),typeof s.options.height=="number"?s.element.style.height=s.options.height+"px":s.element.style.height=s.options.height,typeof s.options.minHeight=="number"&&(s.element.style.minHeight=s.options.minHeight+"px"),typeof s.options.width=="number"?s.element.style.width=s.options.width+"px":s.element.style.width=s.options.width,s.element.appendChild(s.toolbar.element);var d=document.createElement("div");if(d.className="vditor-content",s.options.outline.position==="left"&&d.appendChild(s.outline.element),d.appendChild(s.wysiwyg.element.parentElement),d.appendChild(s.sv.element),d.appendChild(s.ir.element.parentElement),d.appendChild(s.preview.element),s.toolbar.elements.devtools&&d.appendChild(s.devtools.element),s.options.outline.position==="right"&&(s.outline.element.classList.add("vditor-outline--right"),d.appendChild(s.outline.element)),s.upload&&d.appendChild(s.upload.element),s.options.resize.enable&&d.appendChild(s.resize.element),d.appendChild(s.hint.element),d.appendChild(s.tip.element),s.element.appendChild(d),d.addEventListener("click",function(){D(s,["subToolbar"])}),s.toolbar.elements.export&&s.element.insertAdjacentHTML("beforeend",'<iframe id="vditorExportIframe" style="width: 100%;height: 0;border: 0"></iframe>'),St(s,s.options.mode,Bt(s)),document.execCommand("DefaultParagraphSeparator",!1,"p"),navigator.userAgent.indexOf("iPhone")>-1&&window.visualViewport!==void 0){var w=!1,M=function(_){w||(w=!0,requestAnimationFrame(function(){w=!1;var L=s.toolbar.element;L.style.transform="none",L.getBoundingClientRect().top<0&&(L.style.transform="translate(0, "+-L.getBoundingClientRect().top+"px)")}))};window.visualViewport.addEventListener("scroll",M),window.visualViewport.addEventListener("resize",M)}}(r.vditor),i.after&&i.after(),i.icon&&(0,m.J)(i.staticPath.icons+"/"+i.icon+".js","vditorIconScript")})},t}(h.default)})(),C=C.default})())})(mi);var Ua=mi.exports;const qa=Zn(Ua),Fa=`<svg
    class="icon-save"
    viewBox="0 0 1073 1024"
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
>
    <path d="M190.526479 1023.999744h691.891719a190.782735 190.782735 0 0 0 191.038991-190.526479V190.526479A190.782735 190.782735 0 0 0 882.802582 0h-691.891719A190.782735 190.782735 0 0 0 0 190.526479v642.946786a190.782735 190.782735 0 0 0 190.526479 190.526479z m0-939.563329h25.625619v259.203139a145.809773 145.809773 0 0 0 146.06603 145.681645h350.942855A145.809773 145.809773 0 0 0 858.458244 343.639554V84.436415h24.344338a106.218192 106.218192 0 0 1 106.218192 106.090064v642.946786a106.34632 106.34632 0 0 1-106.218192 106.090063h-691.891719a106.218192 106.218192 0 0 1-106.090063-106.090063V190.526479a106.090064 106.090064 0 0 1 105.705679-106.090064z m110.446419 6.406405h474.073955v252.796734a61.373358 61.373358 0 0 1-61.24523 61.24523H362.218128a61.24523 61.24523 0 0 1-61.24523-61.24523z"/>
    <path d="M693.81364 397.197098a42.154144 42.154144 0 0 0 42.282272-42.154144v-153.753715a42.282272 42.282272 0 0 0-84.436415 0v153.753715A42.154144 42.154144 0 0 0 693.81364 397.197098z"/>
</svg>
`;const Va={ez:"application/andrew-inset",aw:"application/applixware",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomdeleted:"application/atomdeleted+xml",atomsvc:"application/atomsvc+xml",dwd:"application/atsc-dwd+xml",held:"application/atsc-held+xml",rsat:"application/atsc-rsat+xml",bdoc:"application/bdoc",xcs:"application/calendar+xml",ccxml:"application/ccxml+xml",cdfx:"application/cdfx+xml",cdmia:"application/cdmi-capability",cdmic:"application/cdmi-container",cdmid:"application/cdmi-domain",cdmio:"application/cdmi-object",cdmiq:"application/cdmi-queue",cu:"application/cu-seeme",mpd:"application/dash+xml",davmount:"application/davmount+xml",dbk:"application/docbook+xml",dssc:"application/dssc+der",xdssc:"application/dssc+xml",es:"application/ecmascript",ecma:"application/ecmascript",emma:"application/emma+xml",emotionml:"application/emotionml+xml",epub:"application/epub+zip",exi:"application/exi",fdt:"application/fdt+xml",pfr:"application/font-tdpfr",geojson:"application/geo+json",gml:"application/gml+xml",gpx:"application/gpx+xml",gxf:"application/gxf",gz:"application/gzip",hjson:"application/hjson",stk:"application/hyperstudio",ink:"application/inkml+xml",inkml:"application/inkml+xml",ipfix:"application/ipfix",its:"application/its+xml",jar:"application/java-archive",war:"application/java-archive",ear:"application/java-archive",ser:"application/java-serialized-object",class:"application/java-vm",js:"application/javascript",mjs:"application/javascript",json:"application/json",map:"application/json",json5:"application/json5",jsonml:"application/jsonml+json",jsonld:"application/ld+json",lgr:"application/lgr+xml",lostxml:"application/lost+xml",hqx:"application/mac-binhex40",cpt:"application/mac-compactpro",mads:"application/mads+xml",webmanifest:"application/manifest+json",mrc:"application/marc",mrcx:"application/marcxml+xml",ma:"application/mathematica",nb:"application/mathematica",mb:"application/mathematica",mathml:"application/mathml+xml",mbox:"application/mbox",mscml:"application/mediaservercontrol+xml",metalink:"application/metalink+xml",meta4:"application/metalink4+xml",mets:"application/mets+xml",maei:"application/mmt-aei+xml",musd:"application/mmt-usd+xml",mods:"application/mods+xml",m21:"application/mp21",mp21:"application/mp21",mp4s:"application/mp4",m4p:"application/mp4",doc:"application/msword",dot:"application/msword",mxf:"application/mxf",nq:"application/n-quads",nt:"application/n-triples",cjs:"application/node",bin:"application/octet-stream",dms:"application/octet-stream",lrf:"application/octet-stream",mar:"application/octet-stream",so:"application/octet-stream",dist:"application/octet-stream",distz:"application/octet-stream",pkg:"application/octet-stream",bpk:"application/octet-stream",dump:"application/octet-stream",elc:"application/octet-stream",deploy:"application/octet-stream",exe:"application/octet-stream",dll:"application/octet-stream",deb:"application/octet-stream",dmg:"application/octet-stream",iso:"application/octet-stream",img:"application/octet-stream",msi:"application/octet-stream",msp:"application/octet-stream",msm:"application/octet-stream",buffer:"application/octet-stream",oda:"application/oda",opf:"application/oebps-package+xml",ogx:"application/ogg",omdoc:"application/omdoc+xml",onetoc:"application/onenote",onetoc2:"application/onenote",onetmp:"application/onenote",onepkg:"application/onenote",oxps:"application/oxps",relo:"application/p2p-overlay+xml",xer:"application/patch-ops-error+xml",pdf:"application/pdf",pgp:"application/pgp-encrypted",asc:"application/pgp-signature",sig:"application/pgp-signature",prf:"application/pics-rules",p10:"application/pkcs10",p7m:"application/pkcs7-mime",p7c:"application/pkcs7-mime",p7s:"application/pkcs7-signature",p8:"application/pkcs8",ac:"application/pkix-attr-cert",cer:"application/pkix-cert",crl:"application/pkix-crl",pkipath:"application/pkix-pkipath",pki:"application/pkixcmp",pls:"application/pls+xml",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",provx:"application/provenance+xml",cww:"application/prs.cww",pskcxml:"application/pskc+xml",raml:"application/raml+yaml",rdf:"application/rdf+xml",owl:"application/rdf+xml",rif:"application/reginfo+xml",rnc:"application/relax-ng-compact-syntax",rl:"application/resource-lists+xml",rld:"application/resource-lists-diff+xml",rs:"application/rls-services+xml",rapd:"application/route-apd+xml",sls:"application/route-s-tsid+xml",rusd:"application/route-usd+xml",gbr:"application/rpki-ghostbusters",mft:"application/rpki-manifest",roa:"application/rpki-roa",rsd:"application/rsd+xml",rss:"application/rss+xml",rtf:"application/rtf",sbml:"application/sbml+xml",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",spq:"application/scvp-vp-request",spp:"application/scvp-vp-response",sdp:"application/sdp",senmlx:"application/senml+xml",sensmlx:"application/sensml+xml",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",shf:"application/shf+xml",siv:"application/sieve",sieve:"application/sieve",smi:"application/smil+xml",smil:"application/smil+xml",rq:"application/sparql-query",srx:"application/sparql-results+xml",gram:"application/srgs",grxml:"application/srgs+xml",sru:"application/sru+xml",ssdl:"application/ssdl+xml",ssml:"application/ssml+xml",swidtag:"application/swid+xml",tei:"application/tei+xml",teicorpus:"application/tei+xml",tfi:"application/thraud+xml",tsd:"application/timestamped-data",toml:"application/toml",trig:"application/trig",ttml:"application/ttml+xml",ubj:"application/ubjson",rsheet:"application/urc-ressheet+xml",td:"application/urc-targetdesc+xml",vxml:"application/voicexml+xml",wasm:"application/wasm",wgt:"application/widget",hlp:"application/winhlp",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml",xaml:"application/xaml+xml",xav:"application/xcap-att+xml",xca:"application/xcap-caps+xml",xdf:"application/xcap-diff+xml",xel:"application/xcap-el+xml",xns:"application/xcap-ns+xml",xenc:"application/xenc+xml",xhtml:"application/xhtml+xml",xht:"application/xhtml+xml",xlf:"application/xliff+xml",xml:"application/xml",xsl:"application/xml",xsd:"application/xml",rng:"application/xml",dtd:"application/xml-dtd",xop:"application/xop+xml",xpl:"application/xproc+xml",xslt:"application/xml",xspf:"application/xspf+xml",mxml:"application/xv+xml",xhvml:"application/xv+xml",xvml:"application/xv+xml",xvm:"application/xv+xml",yang:"application/yang",yin:"application/yin+xml",zip:"application/zip","3gpp":"video/3gpp",adp:"audio/adpcm",amr:"audio/amr",au:"audio/basic",snd:"audio/basic",mid:"audio/midi",midi:"audio/midi",kar:"audio/midi",rmi:"audio/midi",mxmf:"audio/mobile-xmf",mp3:"audio/mpeg",m4a:"audio/mp4",mp4a:"audio/mp4",mpga:"audio/mpeg",mp2:"audio/mpeg",mp2a:"audio/mpeg",m2a:"audio/mpeg",m3a:"audio/mpeg",oga:"audio/ogg",ogg:"audio/ogg",spx:"audio/ogg",opus:"audio/ogg",s3m:"audio/s3m",sil:"audio/silk",wav:"audio/wav",weba:"audio/webm",xm:"audio/xm",ttc:"font/collection",otf:"font/otf",ttf:"font/ttf",woff:"font/woff",woff2:"font/woff2",exr:"image/aces",apng:"image/apng",avif:"image/avif",bmp:"image/bmp",cgm:"image/cgm",drle:"image/dicom-rle",emf:"image/emf",fits:"image/fits",g3:"image/g3fax",gif:"image/gif",heic:"image/heic",heics:"image/heic-sequence",heif:"image/heif",heifs:"image/heif-sequence",hej2:"image/hej2k",hsj2:"image/hsj2",ief:"image/ief",jls:"image/jls",jp2:"image/jp2",jpg2:"image/jp2",jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",jph:"image/jph",jhc:"image/jphc",jpm:"image/jpm",jpx:"image/jpx",jpf:"image/jpx",jxr:"image/jxr",jxra:"image/jxra",jxrs:"image/jxrs",jxs:"image/jxs",jxsc:"image/jxsc",jxsi:"image/jxsi",jxss:"image/jxss",ktx:"image/ktx",ktx2:"image/ktx2",png:"image/png",btif:"image/prs.btif",pti:"image/prs.pti",sgi:"image/sgi",svg:"image/svg+xml",svgz:"image/svg+xml",t38:"image/t38",tif:"image/tiff",tiff:"image/tiff",tfx:"image/tiff-fx",webp:"image/webp",wmf:"image/wmf","disposition-notification":"message/disposition-notification",u8msg:"message/global",u8dsn:"message/global-delivery-status",u8mdn:"message/global-disposition-notification",u8hdr:"message/global-headers",eml:"message/rfc822",mime:"message/rfc822","3mf":"model/3mf",gltf:"model/gltf+json",glb:"model/gltf-binary",igs:"model/iges",iges:"model/iges",msh:"model/mesh",mesh:"model/mesh",silo:"model/mesh",mtl:"model/mtl",obj:"model/obj",stpz:"model/step+zip",stpxz:"model/step-xml+zip",stl:"model/stl",wrl:"model/vrml",vrml:"model/vrml",x3db:"model/x3d+fastinfoset",x3dbz:"model/x3d+binary",x3dv:"model/x3d-vrml",x3dvz:"model/x3d+vrml",x3d:"model/x3d+xml",x3dz:"model/x3d+xml",appcache:"text/cache-manifest",manifest:"text/cache-manifest",ics:"text/calendar",ifb:"text/calendar",coffee:"text/coffeescript",litcoffee:"text/coffeescript",css:"text/css",csv:"text/csv",html:"text/html",htm:"text/html",shtml:"text/html",jade:"text/jade",jsx:"text/jsx",less:"text/less",markdown:"text/markdown",md:"text/markdown",mml:"text/mathml",mdx:"text/mdx",n3:"text/n3",txt:"text/plain",text:"text/plain",conf:"text/plain",def:"text/plain",list:"text/plain",log:"text/plain",in:"text/plain",ini:"text/plain",dsc:"text/prs.lines.tag",rtx:"text/richtext",sgml:"text/sgml",sgm:"text/sgml",shex:"text/shex",slim:"text/slim",slm:"text/slim",spdx:"text/spdx",stylus:"text/stylus",styl:"text/stylus",tsv:"text/tab-separated-values",t:"text/troff",tr:"text/troff",roff:"text/troff",man:"text/troff",me:"text/troff",ms:"text/troff",ttl:"text/turtle",uri:"text/uri-list",uris:"text/uri-list",urls:"text/uri-list",vcard:"text/vcard",vtt:"text/vtt",yaml:"text/yaml",yml:"text/yaml","3gp":"video/3gpp","3g2":"video/3gpp2",h261:"video/h261",h263:"video/h263",h264:"video/h264",m4s:"video/iso.segment",jpgv:"video/jpeg",jpgm:"image/jpm",mj2:"video/mj2",mjp2:"video/mj2",ts:"video/mp2t",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg",ogv:"video/ogg",qt:"video/quicktime",mov:"video/quicktime",webm:"video/webm"};function za(o){let a=(""+o).trim().toLowerCase(),l=a.lastIndexOf(".");return Va[~l?a.substring(++l):a]}function ct(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function Vr(o,a){for(var l="",y=0,b=-1,C=0,x,h=0;h<=o.length;++h){if(h<o.length)x=o.charCodeAt(h);else{if(x===47)break;x=47}if(x===47){if(!(b===h-1||C===1))if(b!==h-1&&C===2){if(l.length<2||y!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){var v=l.lastIndexOf("/");if(v!==l.length-1){v===-1?(l="",y=0):(l=l.slice(0,v),y=l.length-1-l.lastIndexOf("/")),b=h,C=0;continue}}else if(l.length===2||l.length===1){l="",y=0,b=h,C=0;continue}}a&&(l.length>0?l+="/..":l="..",y=2)}else l.length>0?l+="/"+o.slice(b+1,h):l=o.slice(b+1,h),y=h-b-1;b=h,C=0}else x===46&&C!==-1?++C:C=-1}return l}function Wa(o,a){var l=a.dir||a.root,y=a.base||(a.name||"")+(a.ext||"");return l?l===a.root?l+y:l+o+y:y}var Pt={resolve:function(){for(var a="",l=!1,y,b=arguments.length-1;b>=-1&&!l;b--){var C;b>=0?C=arguments[b]:(y===void 0&&(y=process.cwd()),C=y),ct(C),C.length!==0&&(a=C+"/"+a,l=C.charCodeAt(0)===47)}return a=Vr(a,!l),l?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(a){if(ct(a),a.length===0)return".";var l=a.charCodeAt(0)===47,y=a.charCodeAt(a.length-1)===47;return a=Vr(a,!l),a.length===0&&!l&&(a="."),a.length>0&&y&&(a+="/"),l?"/"+a:a},isAbsolute:function(a){return ct(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,l=0;l<arguments.length;++l){var y=arguments[l];ct(y),y.length>0&&(a===void 0?a=y:a+="/"+y)}return a===void 0?".":Pt.normalize(a)},relative:function(a,l){if(ct(a),ct(l),a===l||(a=Pt.resolve(a),l=Pt.resolve(l),a===l))return"";for(var y=1;y<a.length&&a.charCodeAt(y)===47;++y);for(var b=a.length,C=b-y,x=1;x<l.length&&l.charCodeAt(x)===47;++x);for(var h=l.length,v=h-x,g=C<v?C:v,p=-1,m=0;m<=g;++m){if(m===g){if(v>g){if(l.charCodeAt(x+m)===47)return l.slice(x+m+1);if(m===0)return l.slice(x+m)}else C>g&&(a.charCodeAt(y+m)===47?p=m:m===0&&(p=0));break}var A=a.charCodeAt(y+m),f=l.charCodeAt(x+m);if(A!==f)break;A===47&&(p=m)}var E="";for(m=y+p+1;m<=b;++m)(m===b||a.charCodeAt(m)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+l.slice(x+p):(x+=p,l.charCodeAt(x)===47&&++x,l.slice(x))},_makeLong:function(a){return a},dirname:function(a){if(ct(a),a.length===0)return".";for(var l=a.charCodeAt(0),y=l===47,b=-1,C=!0,x=a.length-1;x>=1;--x)if(l=a.charCodeAt(x),l===47){if(!C){b=x;break}}else C=!1;return b===-1?y?"/":".":y&&b===1?"//":a.slice(0,b)},basename:function(a,l){if(l!==void 0&&typeof l!="string")throw new TypeError('"ext" argument must be a string');ct(a);var y=0,b=-1,C=!0,x;if(l!==void 0&&l.length>0&&l.length<=a.length){if(l.length===a.length&&l===a)return"";var h=l.length-1,v=-1;for(x=a.length-1;x>=0;--x){var g=a.charCodeAt(x);if(g===47){if(!C){y=x+1;break}}else v===-1&&(C=!1,v=x+1),h>=0&&(g===l.charCodeAt(h)?--h===-1&&(b=x):(h=-1,b=v))}return y===b?b=v:b===-1&&(b=a.length),a.slice(y,b)}else{for(x=a.length-1;x>=0;--x)if(a.charCodeAt(x)===47){if(!C){y=x+1;break}}else b===-1&&(C=!1,b=x+1);return b===-1?"":a.slice(y,b)}},extname:function(a){ct(a);for(var l=-1,y=0,b=-1,C=!0,x=0,h=a.length-1;h>=0;--h){var v=a.charCodeAt(h);if(v===47){if(!C){y=h+1;break}continue}b===-1&&(C=!1,b=h+1),v===46?l===-1?l=h:x!==1&&(x=1):l!==-1&&(x=-1)}return l===-1||b===-1||x===0||x===1&&l===b-1&&l===y+1?"":a.slice(l,b)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return Wa("/",a)},parse:function(a){ct(a);var l={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return l;var y=a.charCodeAt(0),b=y===47,C;b?(l.root="/",C=1):C=0;for(var x=-1,h=0,v=-1,g=!0,p=a.length-1,m=0;p>=C;--p){if(y=a.charCodeAt(p),y===47){if(!g){h=p+1;break}continue}v===-1&&(g=!1,v=p+1),y===46?x===-1?x=p:m!==1&&(m=1):x!==-1&&(m=-1)}return x===-1||v===-1||m===0||m===1&&x===v-1&&x===h+1?v!==-1&&(h===0&&b?l.base=l.name=a.slice(1,v):l.base=l.name=a.slice(h,v)):(h===0&&b?(l.name=a.slice(1,x),l.base=a.slice(1,v)):(l.name=a.slice(h,x),l.base=a.slice(h,v)),l.ext=a.slice(x,v)),h>0?l.dir=a.slice(0,h-1):b&&(l.dir="/"),l},sep:"/",delimiter:":",win32:null,posix:null};Pt.posix=Pt;var Ga=Pt;const fi=Zn(Ga);function Ot(...o){return fi.join(...o)}function Ka(o){return fi.parse(o)}const{replace:Ja}="",Xa=/[&<>'"]/g,Za={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},Ya=o=>Za[o],Qa=o=>Ja.call(o,Xa,Ya);function $a(o){return o.replaceAll(/([\<\>\{\}\[\]\(\)\`\~\#\$\^\*\_\=\|\:\-\\])/g,"\\$1")}var hi={exports:{}};(function(o){(function(a,l){o.exports?o.exports=l():a.validDataUrl=l()})(pi,function(){function a(l){return a.regex.test((l||"").trim())}return a.regex=/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i,a})})(hi);var es=hi.exports;const zr=es;var ts=o=>{if(!zr(o))return!1;const a=o.trim().match(zr.regex),l={};if(a[1]){l.mediaType=a[1].toLowerCase();const y=a[1].split(";").map(b=>b.toLowerCase());l.contentType=y[0],y.slice(1).forEach(b=>{const C=b.split("=");l[C[0]]=C[1]})}return l.base64=!!a[a.length-2],l.data=a[a.length-1]||"",l.toBuffer=()=>{const y=l.base64?"base64":"utf8";return Buffer.from(l.base64?l.data:decodeURIComponent(l.data),y)},l};const ns=Zn(ts);var gi={},fn={};fn.byteLength=os;fn.toByteArray=ss;fn.fromByteArray=ds;var ut=[],it=[],rs=typeof Uint8Array<"u"?Uint8Array:Array,In="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Nt=0,is=In.length;Nt<is;++Nt)ut[Nt]=In[Nt],it[In.charCodeAt(Nt)]=Nt;it["-".charCodeAt(0)]=62;it["_".charCodeAt(0)]=63;function vi(o){var a=o.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=o.indexOf("=");l===-1&&(l=a);var y=l===a?0:4-l%4;return[l,y]}function os(o){var a=vi(o),l=a[0],y=a[1];return(l+y)*3/4-y}function as(o,a,l){return(a+l)*3/4-l}function ss(o){var a,l=vi(o),y=l[0],b=l[1],C=new rs(as(o,y,b)),x=0,h=b>0?y-4:y,v;for(v=0;v<h;v+=4)a=it[o.charCodeAt(v)]<<18|it[o.charCodeAt(v+1)]<<12|it[o.charCodeAt(v+2)]<<6|it[o.charCodeAt(v+3)],C[x++]=a>>16&255,C[x++]=a>>8&255,C[x++]=a&255;return b===2&&(a=it[o.charCodeAt(v)]<<2|it[o.charCodeAt(v+1)]>>4,C[x++]=a&255),b===1&&(a=it[o.charCodeAt(v)]<<10|it[o.charCodeAt(v+1)]<<4|it[o.charCodeAt(v+2)]>>2,C[x++]=a>>8&255,C[x++]=a&255),C}function ls(o){return ut[o>>18&63]+ut[o>>12&63]+ut[o>>6&63]+ut[o&63]}function cs(o,a,l){for(var y,b=[],C=a;C<l;C+=3)y=(o[C]<<16&16711680)+(o[C+1]<<8&65280)+(o[C+2]&255),b.push(ls(y));return b.join("")}function ds(o){for(var a,l=o.length,y=l%3,b=[],C=16383,x=0,h=l-y;x<h;x+=C)b.push(cs(o,x,x+C>h?h:x+C));return y===1?(a=o[l-1],b.push(ut[a>>2]+ut[a<<4&63]+"==")):y===2&&(a=(o[l-2]<<8)+o[l-1],b.push(ut[a>>10]+ut[a>>4&63]+ut[a<<2&63]+"=")),b.join("")}var Qn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Qn.read=function(o,a,l,y,b){var C,x,h=b*8-y-1,v=(1<<h)-1,g=v>>1,p=-7,m=l?b-1:0,A=l?-1:1,f=o[a+m];for(m+=A,C=f&(1<<-p)-1,f>>=-p,p+=h;p>0;C=C*256+o[a+m],m+=A,p-=8);for(x=C&(1<<-p)-1,C>>=-p,p+=y;p>0;x=x*256+o[a+m],m+=A,p-=8);if(C===0)C=1-g;else{if(C===v)return x?NaN:(f?-1:1)*(1/0);x=x+Math.pow(2,y),C=C-g}return(f?-1:1)*x*Math.pow(2,C-y)};Qn.write=function(o,a,l,y,b,C){var x,h,v,g=C*8-b-1,p=(1<<g)-1,m=p>>1,A=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=y?0:C-1,E=y?1:-1,T=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(h=isNaN(a)?1:0,x=p):(x=Math.floor(Math.log(a)/Math.LN2),a*(v=Math.pow(2,-x))<1&&(x--,v*=2),x+m>=1?a+=A/v:a+=A*Math.pow(2,1-m),a*v>=2&&(x++,v/=2),x+m>=p?(h=0,x=p):x+m>=1?(h=(a*v-1)*Math.pow(2,b),x=x+m):(h=a*Math.pow(2,m-1)*Math.pow(2,b),x=0));b>=8;o[l+f]=h&255,f+=E,h/=256,b-=8);for(x=x<<b|h,g+=b;g>0;o[l+f]=x&255,f+=E,x/=256,g-=8);o[l+f-E]|=T*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(o){const a=fn,l=Qn,y=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;o.Buffer=h,o.SlowBuffer=P,o.INSPECT_MAX_BYTES=50;const b=2147483647;o.kMaxLength=b,h.TYPED_ARRAY_SUPPORT=C(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function C(){try{const k=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(k,c),k.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function x(k){if(k>b)throw new RangeError('The value "'+k+'" is invalid for option "size"');const c=new Uint8Array(k);return Object.setPrototypeOf(c,h.prototype),c}function h(k,c,u){if(typeof k=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(k)}return v(k,c,u)}h.poolSize=8192;function v(k,c,u){if(typeof k=="string")return A(k,c);if(ArrayBuffer.isView(k))return E(k);if(k==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if($e(k,ArrayBuffer)||k&&$e(k.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($e(k,SharedArrayBuffer)||k&&$e(k.buffer,SharedArrayBuffer)))return T(k,c,u);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const O=k.valueOf&&k.valueOf();if(O!=null&&O!==k)return h.from(O,c,u);const B=N(k);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return h.from(k[Symbol.toPrimitive]("string"),c,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}h.from=function(k,c,u){return v(k,c,u)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function g(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function p(k,c,u){return g(k),k<=0?x(k):c!==void 0?typeof u=="string"?x(k).fill(c,u):x(k).fill(c):x(k)}h.alloc=function(k,c,u){return p(k,c,u)};function m(k){return g(k),x(k<0?0:R(k)|0)}h.allocUnsafe=function(k){return m(k)},h.allocUnsafeSlow=function(k){return m(k)};function A(k,c){if((typeof c!="string"||c==="")&&(c="utf8"),!h.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const u=U(k,c)|0;let O=x(u);const B=O.write(k,c);return B!==u&&(O=O.slice(0,B)),O}function f(k){const c=k.length<0?0:R(k.length)|0,u=x(c);for(let O=0;O<c;O+=1)u[O]=k[O]&255;return u}function E(k){if($e(k,Uint8Array)){const c=new Uint8Array(k);return T(c.buffer,c.byteOffset,c.byteLength)}return f(k)}function T(k,c,u){if(c<0||k.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<c+(u||0))throw new RangeError('"length" is outside of buffer bounds');let O;return c===void 0&&u===void 0?O=new Uint8Array(k):u===void 0?O=new Uint8Array(k,c):O=new Uint8Array(k,c,u),Object.setPrototypeOf(O,h.prototype),O}function N(k){if(h.isBuffer(k)){const c=R(k.length)|0,u=x(c);return u.length===0||k.copy(u,0,0,c),u}if(k.length!==void 0)return typeof k.length!="number"||yt(k.length)?x(0):f(k);if(k.type==="Buffer"&&Array.isArray(k.data))return f(k.data)}function R(k){if(k>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return k|0}function P(k){return+k!=k&&(k=0),h.alloc(+k)}h.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==h.prototype},h.compare=function(c,u){if($e(c,Uint8Array)&&(c=h.from(c,c.offset,c.byteLength)),$e(u,Uint8Array)&&(u=h.from(u,u.offset,u.byteLength)),!h.isBuffer(c)||!h.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===u)return 0;let O=c.length,B=u.length;for(let q=0,G=Math.min(O,B);q<G;++q)if(c[q]!==u[q]){O=c[q],B=u[q];break}return O<B?-1:B<O?1:0},h.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(c,u){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return h.alloc(0);let O;if(u===void 0)for(u=0,O=0;O<c.length;++O)u+=c[O].length;const B=h.allocUnsafe(u);let q=0;for(O=0;O<c.length;++O){let G=c[O];if($e(G,Uint8Array))q+G.length>B.length?(h.isBuffer(G)||(G=h.from(G)),G.copy(B,q)):Uint8Array.prototype.set.call(B,G,q);else if(h.isBuffer(G))G.copy(B,q);else throw new TypeError('"list" argument must be an Array of Buffers');q+=G.length}return B};function U(k,c){if(h.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||$e(k,ArrayBuffer))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);const u=k.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&u===0)return 0;let B=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return Bt(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return jt(k).length;default:if(B)return O?-1:Bt(k).length;c=(""+c).toLowerCase(),B=!0}}h.byteLength=U;function D(k,c,u){let O=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,c>>>=0,u<=c))return"";for(k||(k="utf8");;)switch(k){case"hex":return tt(this,c,u);case"utf8":case"utf-8":return Te(this,c,u);case"ascii":return Ue(this,c,u);case"latin1":case"binary":return Fe(this,c,u);case"base64":return De(this,c,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,c,u);default:if(O)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),O=!0}}h.prototype._isBuffer=!0;function I(k,c,u){const O=k[c];k[c]=k[u],k[u]=O}h.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<c;u+=2)I(this,u,u+1);return this},h.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<c;u+=4)I(this,u,u+3),I(this,u+1,u+2);return this},h.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<c;u+=8)I(this,u,u+7),I(this,u+1,u+6),I(this,u+2,u+5),I(this,u+3,u+4);return this},h.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?Te(this,0,c):D.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(c){if(!h.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:h.compare(this,c)===0},h.prototype.inspect=function(){let c="";const u=o.INSPECT_MAX_BYTES;return c=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(c+=" ... "),"<Buffer "+c+">"},y&&(h.prototype[y]=h.prototype.inspect),h.prototype.compare=function(c,u,O,B,q){if($e(c,Uint8Array)&&(c=h.from(c,c.offset,c.byteLength)),!h.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(u===void 0&&(u=0),O===void 0&&(O=c?c.length:0),B===void 0&&(B=0),q===void 0&&(q=this.length),u<0||O>c.length||B<0||q>this.length)throw new RangeError("out of range index");if(B>=q&&u>=O)return 0;if(B>=q)return-1;if(u>=O)return 1;if(u>>>=0,O>>>=0,B>>>=0,q>>>=0,this===c)return 0;let G=q-B,ke=O-u;const Me=Math.min(G,ke),He=this.slice(B,q),qe=c.slice(u,O);for(let Pe=0;Pe<Me;++Pe)if(He[Pe]!==qe[Pe]){G=He[Pe],ke=qe[Pe];break}return G<ke?-1:ke<G?1:0};function S(k,c,u,O,B){if(k.length===0)return-1;if(typeof u=="string"?(O=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,yt(u)&&(u=B?0:k.length-1),u<0&&(u=k.length+u),u>=k.length){if(B)return-1;u=k.length-1}else if(u<0)if(B)u=0;else return-1;if(typeof c=="string"&&(c=h.from(c,O)),h.isBuffer(c))return c.length===0?-1:Z(k,c,u,O,B);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(k,c,u):Uint8Array.prototype.lastIndexOf.call(k,c,u):Z(k,[c],u,O,B);throw new TypeError("val must be string, number or Buffer")}function Z(k,c,u,O,B){let q=1,G=k.length,ke=c.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(k.length<2||c.length<2)return-1;q=2,G/=2,ke/=2,u/=2}function Me(qe,Pe){return q===1?qe[Pe]:qe.readUInt16BE(Pe*q)}let He;if(B){let qe=-1;for(He=u;He<G;He++)if(Me(k,He)===Me(c,qe===-1?0:He-qe)){if(qe===-1&&(qe=He),He-qe+1===ke)return qe*q}else qe!==-1&&(He-=He-qe),qe=-1}else for(u+ke>G&&(u=G-ke),He=u;He>=0;He--){let qe=!0;for(let Pe=0;Pe<ke;Pe++)if(Me(k,He+Pe)!==Me(c,Pe)){qe=!1;break}if(qe)return He}return-1}h.prototype.includes=function(c,u,O){return this.indexOf(c,u,O)!==-1},h.prototype.indexOf=function(c,u,O){return S(this,c,u,O,!0)},h.prototype.lastIndexOf=function(c,u,O){return S(this,c,u,O,!1)};function W(k,c,u,O){u=Number(u)||0;const B=k.length-u;O?(O=Number(O),O>B&&(O=B)):O=B;const q=c.length;O>q/2&&(O=q/2);let G;for(G=0;G<O;++G){const ke=parseInt(c.substr(G*2,2),16);if(yt(ke))return G;k[u+G]=ke}return G}function le(k,c,u,O){return xt(Bt(c,k.length-u),k,u,O)}function de(k,c,u,O){return xt(kt(c),k,u,O)}function be(k,c,u,O){return xt(jt(c),k,u,O)}function we(k,c,u,O){return xt(Ie(c,k.length-u),k,u,O)}h.prototype.write=function(c,u,O,B){if(u===void 0)B="utf8",O=this.length,u=0;else if(O===void 0&&typeof u=="string")B=u,O=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(O)?(O=O>>>0,B===void 0&&(B="utf8")):(B=O,O=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const q=this.length-u;if((O===void 0||O>q)&&(O=q),c.length>0&&(O<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let G=!1;for(;;)switch(B){case"hex":return W(this,c,u,O);case"utf8":case"utf-8":return le(this,c,u,O);case"ascii":case"latin1":case"binary":return de(this,c,u,O);case"base64":return be(this,c,u,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,c,u,O);default:if(G)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),G=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function De(k,c,u){return c===0&&u===k.length?a.fromByteArray(k):a.fromByteArray(k.slice(c,u))}function Te(k,c,u){u=Math.min(k.length,u);const O=[];let B=c;for(;B<u;){const q=k[B];let G=null,ke=q>239?4:q>223?3:q>191?2:1;if(B+ke<=u){let Me,He,qe,Pe;switch(ke){case 1:q<128&&(G=q);break;case 2:Me=k[B+1],(Me&192)===128&&(Pe=(q&31)<<6|Me&63,Pe>127&&(G=Pe));break;case 3:Me=k[B+1],He=k[B+2],(Me&192)===128&&(He&192)===128&&(Pe=(q&15)<<12|(Me&63)<<6|He&63,Pe>2047&&(Pe<55296||Pe>57343)&&(G=Pe));break;case 4:Me=k[B+1],He=k[B+2],qe=k[B+3],(Me&192)===128&&(He&192)===128&&(qe&192)===128&&(Pe=(q&15)<<18|(Me&63)<<12|(He&63)<<6|qe&63,Pe>65535&&Pe<1114112&&(G=Pe))}}G===null?(G=65533,ke=1):G>65535&&(G-=65536,O.push(G>>>10&1023|55296),G=56320|G&1023),O.push(G),B+=ke}return Ne(O)}const xe=4096;function Ne(k){const c=k.length;if(c<=xe)return String.fromCharCode.apply(String,k);let u="",O=0;for(;O<c;)u+=String.fromCharCode.apply(String,k.slice(O,O+=xe));return u}function Ue(k,c,u){let O="";u=Math.min(k.length,u);for(let B=c;B<u;++B)O+=String.fromCharCode(k[B]&127);return O}function Fe(k,c,u){let O="";u=Math.min(k.length,u);for(let B=c;B<u;++B)O+=String.fromCharCode(k[B]);return O}function tt(k,c,u){const O=k.length;(!c||c<0)&&(c=0),(!u||u<0||u>O)&&(u=O);let B="";for(let q=c;q<u;++q)B+=Ut[k[q]];return B}function Be(k,c,u){const O=k.slice(c,u);let B="";for(let q=0;q<O.length-1;q+=2)B+=String.fromCharCode(O[q]+O[q+1]*256);return B}h.prototype.slice=function(c,u){const O=this.length;c=~~c,u=u===void 0?O:~~u,c<0?(c+=O,c<0&&(c=0)):c>O&&(c=O),u<0?(u+=O,u<0&&(u=0)):u>O&&(u=O),u<c&&(u=c);const B=this.subarray(c,u);return Object.setPrototypeOf(B,h.prototype),B};function H(k,c,u){if(k%1!==0||k<0)throw new RangeError("offset is not uint");if(k+c>u)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(c,u,O){c=c>>>0,u=u>>>0,O||H(c,u,this.length);let B=this[c],q=1,G=0;for(;++G<u&&(q*=256);)B+=this[c+G]*q;return B},h.prototype.readUintBE=h.prototype.readUIntBE=function(c,u,O){c=c>>>0,u=u>>>0,O||H(c,u,this.length);let B=this[c+--u],q=1;for(;u>0&&(q*=256);)B+=this[c+--u]*q;return B},h.prototype.readUint8=h.prototype.readUInt8=function(c,u){return c=c>>>0,u||H(c,1,this.length),this[c]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(c,u){return c=c>>>0,u||H(c,2,this.length),this[c]|this[c+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(c,u){return c=c>>>0,u||H(c,2,this.length),this[c]<<8|this[c+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(c,u){return c=c>>>0,u||H(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(c,u){return c=c>>>0,u||H(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},h.prototype.readBigUInt64LE=Ye(function(c){c=c>>>0,_e(c,"offset");const u=this[c],O=this[c+7];(u===void 0||O===void 0)&&ye(c,this.length-8);const B=u+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,q=this[++c]+this[++c]*2**8+this[++c]*2**16+O*2**24;return BigInt(B)+(BigInt(q)<<BigInt(32))}),h.prototype.readBigUInt64BE=Ye(function(c){c=c>>>0,_e(c,"offset");const u=this[c],O=this[c+7];(u===void 0||O===void 0)&&ye(c,this.length-8);const B=u*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],q=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+O;return(BigInt(B)<<BigInt(32))+BigInt(q)}),h.prototype.readIntLE=function(c,u,O){c=c>>>0,u=u>>>0,O||H(c,u,this.length);let B=this[c],q=1,G=0;for(;++G<u&&(q*=256);)B+=this[c+G]*q;return q*=128,B>=q&&(B-=Math.pow(2,8*u)),B},h.prototype.readIntBE=function(c,u,O){c=c>>>0,u=u>>>0,O||H(c,u,this.length);let B=u,q=1,G=this[c+--B];for(;B>0&&(q*=256);)G+=this[c+--B]*q;return q*=128,G>=q&&(G-=Math.pow(2,8*u)),G},h.prototype.readInt8=function(c,u){return c=c>>>0,u||H(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},h.prototype.readInt16LE=function(c,u){c=c>>>0,u||H(c,2,this.length);const O=this[c]|this[c+1]<<8;return O&32768?O|4294901760:O},h.prototype.readInt16BE=function(c,u){c=c>>>0,u||H(c,2,this.length);const O=this[c+1]|this[c]<<8;return O&32768?O|4294901760:O},h.prototype.readInt32LE=function(c,u){return c=c>>>0,u||H(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},h.prototype.readInt32BE=function(c,u){return c=c>>>0,u||H(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},h.prototype.readBigInt64LE=Ye(function(c){c=c>>>0,_e(c,"offset");const u=this[c],O=this[c+7];(u===void 0||O===void 0)&&ye(c,this.length-8);const B=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(O<<24);return(BigInt(B)<<BigInt(32))+BigInt(u+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),h.prototype.readBigInt64BE=Ye(function(c){c=c>>>0,_e(c,"offset");const u=this[c],O=this[c+7];(u===void 0||O===void 0)&&ye(c,this.length-8);const B=(u<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(B)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+O)}),h.prototype.readFloatLE=function(c,u){return c=c>>>0,u||H(c,4,this.length),l.read(this,c,!0,23,4)},h.prototype.readFloatBE=function(c,u){return c=c>>>0,u||H(c,4,this.length),l.read(this,c,!1,23,4)},h.prototype.readDoubleLE=function(c,u){return c=c>>>0,u||H(c,8,this.length),l.read(this,c,!0,52,8)},h.prototype.readDoubleBE=function(c,u){return c=c>>>0,u||H(c,8,this.length),l.read(this,c,!1,52,8)};function pe(k,c,u,O,B,q){if(!h.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>B||c<q)throw new RangeError('"value" argument is out of bounds');if(u+O>k.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(c,u,O,B){if(c=+c,u=u>>>0,O=O>>>0,!B){const ke=Math.pow(2,8*O)-1;pe(this,c,u,O,ke,0)}let q=1,G=0;for(this[u]=c&255;++G<O&&(q*=256);)this[u+G]=c/q&255;return u+O},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(c,u,O,B){if(c=+c,u=u>>>0,O=O>>>0,!B){const ke=Math.pow(2,8*O)-1;pe(this,c,u,O,ke,0)}let q=O-1,G=1;for(this[u+q]=c&255;--q>=0&&(G*=256);)this[u+q]=c/G&255;return u+O},h.prototype.writeUint8=h.prototype.writeUInt8=function(c,u,O){return c=+c,u=u>>>0,O||pe(this,c,u,1,255,0),this[u]=c&255,u+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(c,u,O){return c=+c,u=u>>>0,O||pe(this,c,u,2,65535,0),this[u]=c&255,this[u+1]=c>>>8,u+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(c,u,O){return c=+c,u=u>>>0,O||pe(this,c,u,2,65535,0),this[u]=c>>>8,this[u+1]=c&255,u+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(c,u,O){return c=+c,u=u>>>0,O||pe(this,c,u,4,4294967295,0),this[u+3]=c>>>24,this[u+2]=c>>>16,this[u+1]=c>>>8,this[u]=c&255,u+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(c,u,O){return c=+c,u=u>>>0,O||pe(this,c,u,4,4294967295,0),this[u]=c>>>24,this[u+1]=c>>>16,this[u+2]=c>>>8,this[u+3]=c&255,u+4};function ve(k,c,u,O,B){Le(c,O,B,k,u,7);let q=Number(c&BigInt(4294967295));k[u++]=q,q=q>>8,k[u++]=q,q=q>>8,k[u++]=q,q=q>>8,k[u++]=q;let G=Number(c>>BigInt(32)&BigInt(4294967295));return k[u++]=G,G=G>>8,k[u++]=G,G=G>>8,k[u++]=G,G=G>>8,k[u++]=G,u}function J(k,c,u,O,B){Le(c,O,B,k,u,7);let q=Number(c&BigInt(4294967295));k[u+7]=q,q=q>>8,k[u+6]=q,q=q>>8,k[u+5]=q,q=q>>8,k[u+4]=q;let G=Number(c>>BigInt(32)&BigInt(4294967295));return k[u+3]=G,G=G>>8,k[u+2]=G,G=G>>8,k[u+1]=G,G=G>>8,k[u]=G,u+8}h.prototype.writeBigUInt64LE=Ye(function(c,u=0){return ve(this,c,u,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=Ye(function(c,u=0){return J(this,c,u,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(c,u,O,B){if(c=+c,u=u>>>0,!B){const Me=Math.pow(2,8*O-1);pe(this,c,u,O,Me-1,-Me)}let q=0,G=1,ke=0;for(this[u]=c&255;++q<O&&(G*=256);)c<0&&ke===0&&this[u+q-1]!==0&&(ke=1),this[u+q]=(c/G>>0)-ke&255;return u+O},h.prototype.writeIntBE=function(c,u,O,B){if(c=+c,u=u>>>0,!B){const Me=Math.pow(2,8*O-1);pe(this,c,u,O,Me-1,-Me)}let q=O-1,G=1,ke=0;for(this[u+q]=c&255;--q>=0&&(G*=256);)c<0&&ke===0&&this[u+q+1]!==0&&(ke=1),this[u+q]=(c/G>>0)-ke&255;return u+O},h.prototype.writeInt8=function(c,u,O){return c=+c,u=u>>>0,O||pe(this,c,u,1,127,-128),c<0&&(c=255+c+1),this[u]=c&255,u+1},h.prototype.writeInt16LE=function(c,u,O){return c=+c,u=u>>>0,O||pe(this,c,u,2,32767,-32768),this[u]=c&255,this[u+1]=c>>>8,u+2},h.prototype.writeInt16BE=function(c,u,O){return c=+c,u=u>>>0,O||pe(this,c,u,2,32767,-32768),this[u]=c>>>8,this[u+1]=c&255,u+2},h.prototype.writeInt32LE=function(c,u,O){return c=+c,u=u>>>0,O||pe(this,c,u,4,2147483647,-2147483648),this[u]=c&255,this[u+1]=c>>>8,this[u+2]=c>>>16,this[u+3]=c>>>24,u+4},h.prototype.writeInt32BE=function(c,u,O){return c=+c,u=u>>>0,O||pe(this,c,u,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[u]=c>>>24,this[u+1]=c>>>16,this[u+2]=c>>>8,this[u+3]=c&255,u+4},h.prototype.writeBigInt64LE=Ye(function(c,u=0){return ve(this,c,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=Ye(function(c,u=0){return J(this,c,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function me(k,c,u,O,B,q){if(u+O>k.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function X(k,c,u,O,B){return c=+c,u=u>>>0,B||me(k,c,u,4),l.write(k,c,u,O,23,4),u+4}h.prototype.writeFloatLE=function(c,u,O){return X(this,c,u,!0,O)},h.prototype.writeFloatBE=function(c,u,O){return X(this,c,u,!1,O)};function Y(k,c,u,O,B){return c=+c,u=u>>>0,B||me(k,c,u,8),l.write(k,c,u,O,52,8),u+8}h.prototype.writeDoubleLE=function(c,u,O){return Y(this,c,u,!0,O)},h.prototype.writeDoubleBE=function(c,u,O){return Y(this,c,u,!1,O)},h.prototype.copy=function(c,u,O,B){if(!h.isBuffer(c))throw new TypeError("argument should be a Buffer");if(O||(O=0),!B&&B!==0&&(B=this.length),u>=c.length&&(u=c.length),u||(u=0),B>0&&B<O&&(B=O),B===O||c.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),c.length-u<B-O&&(B=c.length-u+O);const q=B-O;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,O,B):Uint8Array.prototype.set.call(c,this.subarray(O,B),u),q},h.prototype.fill=function(c,u,O,B){if(typeof c=="string"){if(typeof u=="string"?(B=u,u=0,O=this.length):typeof O=="string"&&(B=O,O=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!h.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(c.length===1){const G=c.charCodeAt(0);(B==="utf8"&&G<128||B==="latin1")&&(c=G)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(u<0||this.length<u||this.length<O)throw new RangeError("Out of range index");if(O<=u)return this;u=u>>>0,O=O===void 0?this.length:O>>>0,c||(c=0);let q;if(typeof c=="number")for(q=u;q<O;++q)this[q]=c;else{const G=h.isBuffer(c)?c:h.from(c,B),ke=G.length;if(ke===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(q=0;q<O-u;++q)this[q+u]=G[q%ke]}return this};const re={};function Ce(k,c,u){re[k]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${k}]`,this.stack,delete this.name}get code(){return k}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${k}]: ${this.message}`}}}Ce("ERR_BUFFER_OUT_OF_BOUNDS",function(k){return k?`${k} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ce("ERR_INVALID_ARG_TYPE",function(k,c){return`The "${k}" argument must be of type number. Received type ${typeof c}`},TypeError),Ce("ERR_OUT_OF_RANGE",function(k,c,u){let O=`The value of "${k}" is out of range.`,B=u;return Number.isInteger(u)&&Math.abs(u)>2**32?B=Se(String(u)):typeof u=="bigint"&&(B=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(B=Se(B)),B+="n"),O+=` It must be ${c}. Received ${B}`,O},RangeError);function Se(k){let c="",u=k.length;const O=k[0]==="-"?1:0;for(;u>=O+4;u-=3)c=`_${k.slice(u-3,u)}${c}`;return`${k.slice(0,u)}${c}`}function Ve(k,c,u){_e(c,"offset"),(k[c]===void 0||k[c+u]===void 0)&&ye(c,k.length-(u+1))}function Le(k,c,u,O,B,q){if(k>u||k<c){const G=typeof c=="bigint"?"n":"";let ke;throw q>3?c===0||c===BigInt(0)?ke=`>= 0${G} and < 2${G} ** ${(q+1)*8}${G}`:ke=`>= -(2${G} ** ${(q+1)*8-1}${G}) and < 2 ** ${(q+1)*8-1}${G}`:ke=`>= ${c}${G} and <= ${u}${G}`,new re.ERR_OUT_OF_RANGE("value",ke,k)}Ve(O,B,q)}function _e(k,c){if(typeof k!="number")throw new re.ERR_INVALID_ARG_TYPE(c,"number",k)}function ye(k,c,u){throw Math.floor(k)!==k?(_e(k,u),new re.ERR_OUT_OF_RANGE(u||"offset","an integer",k)):c<0?new re.ERR_BUFFER_OUT_OF_BOUNDS:new re.ERR_OUT_OF_RANGE(u||"offset",`>= ${u?1:0} and <= ${c}`,k)}const lt=/[^+/0-9A-Za-z-_]/g;function Yt(k){if(k=k.split("=")[0],k=k.trim().replace(lt,""),k.length<2)return"";for(;k.length%4!==0;)k=k+"=";return k}function Bt(k,c){c=c||1/0;let u;const O=k.length;let B=null;const q=[];for(let G=0;G<O;++G){if(u=k.charCodeAt(G),u>55295&&u<57344){if(!B){if(u>56319){(c-=3)>-1&&q.push(239,191,189);continue}else if(G+1===O){(c-=3)>-1&&q.push(239,191,189);continue}B=u;continue}if(u<56320){(c-=3)>-1&&q.push(239,191,189),B=u;continue}u=(B-55296<<10|u-56320)+65536}else B&&(c-=3)>-1&&q.push(239,191,189);if(B=null,u<128){if((c-=1)<0)break;q.push(u)}else if(u<2048){if((c-=2)<0)break;q.push(u>>6|192,u&63|128)}else if(u<65536){if((c-=3)<0)break;q.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((c-=4)<0)break;q.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return q}function kt(k){const c=[];for(let u=0;u<k.length;++u)c.push(k.charCodeAt(u)&255);return c}function Ie(k,c){let u,O,B;const q=[];for(let G=0;G<k.length&&!((c-=2)<0);++G)u=k.charCodeAt(G),O=u>>8,B=u%256,q.push(B),q.push(O);return q}function jt(k){return a.toByteArray(Yt(k))}function xt(k,c,u,O){let B;for(B=0;B<O&&!(B+u>=c.length||B>=k.length);++B)c[B+u]=k[B];return B}function $e(k,c){return k instanceof c||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===c.name}function yt(k){return k!==k}const Ut=function(){const k="0123456789abcdef",c=new Array(256);for(let u=0;u<16;++u){const O=u*16;for(let B=0;B<16;++B)c[O+B]=k[u]+k[B]}return c}();function Ye(k){return typeof BigInt>"u"?Ze:k}function Ze(){throw new Error("BigInt not supported")}})(gi);globalThis.Buffer=gi.Buffer;function us(o){const a=ns(o);if(a)return new Blob([a.toBuffer()],{type:a.contentType})}function ps(o,a){const l=`data:${a};base64,${o}`;return us(l)}function Wr(o,a=!0){switch(o.startsWith("/")&&(o=o.substring(1)),!0){case o.startsWith("stage/"):return!a;case o.startsWith("appearance/"):case o.startsWith("export/"):case o.startsWith("history/"):case o.startsWith("assets/"):case o.startsWith("emojies/"):case o.startsWith("plugins/"):case o.startsWith("public/"):case o.startsWith("snippets/"):case o.startsWith("templates/"):case o.startsWith("widgets/"):return!0;default:return!1}}function ms(o){switch(o.startsWith("/")&&(o=o.substring(1)),!0){case o.startsWith("assets/"):case o.startsWith("emojies/"):case o.startsWith("plugins/"):case o.startsWith("public/"):case o.startsWith("snippets/"):case o.startsWith("templates/"):case o.startsWith("widgets/"):return`data/${o}`;case o.startsWith("appearance/"):return`conf/${o}`;case o.startsWith("export/"):return`temp/${o}`;case o.startsWith("history/"):return o;default:throw new Error(`'${o}' is not a valid file pathname`)}}const Gr=new Set(["abap","algol_nu","algol","ant-design","arduino","autumn","borland","bw","colorful","dracula","emacs","friendly","fruity","github","igor","lovelace","manni","monokai","monokailight","murphy","native","paraiso-dark","paraiso-light","pastie","perldoc","pygments","rainbow_dash","rrt","solarized-dark","solarized-dark256","solarized-light","swapoff","tango","trac","vim","vs","xcode"]);var Gt=(o=>(o[o.assets=0]="assets",o[o.relative=1]="relative",o[o.absolute=2]="absolute",o))(Gt||{});function fs(){return/[<>:"/\\|?*\u0000-\u001F]/g}function hs(){return/^(con|prn|aux|nul|com\d|lpt\d)$/i}function gs(o){return!(!o||o.length>255||fs().test(o)||hs().test(o)||o==="."||o==="..")}function vs(o){switch(!0){case!gs(o):case o===".".repeat(o.length):return!1;default:return!0}}const rt={path:"/",get vditorID(){return`vditor-${Date.now()}`},assetsDirPath:"/assets/vditor/",assetsUploadMode:Gt.assets,options:{},value:"",get theme(){return ba()},codeBlockThemeLight:"xcode",codeBlockThemeDark:"dracula",updatable:!0,changable:!1,debug:!1};function ys(o){let a;return{c(){a=xa("div"),Pn(a,"id",o[0]),Pn(a,"class","vditor")},m(l,y){Sa(l,a,y),o[18](a)},p(l,y){y[0]&1&&Pn(a,"id",l[0])},i:Fr,o:Fr,d(l){l&&Ta(a),o[18](null)}}}function bs(o,a,l){let y,{plugin:b}=a,{src2url:C}=a,{baseURL:x}=a,{rootURL:h}=a,{path:v=rt.path}=a,{vditorID:g=rt.vditorID}=a,{assetsDirPath:p=rt.assetsDirPath}=a,{assetsUploadMode:m=rt.assetsUploadMode}=a,{options:A=rt.options}=a,{value:f=rt.value}=a,{theme:E=rt.theme}=a,{codeBlockThemeLight:T=rt.codeBlockThemeLight}=a,{codeBlockThemeDark:N=rt.codeBlockThemeDark}=a,{updatable:R=rt.updatable}=a,{changable:P=rt.changable}=a,{debug:U=rt.debug}=a,D,I,S,Z,W;const le=Aa();function de(H,pe=!1,ve=T,J=N){var me,X;I=H?"classic":"dark",S=H?S==="dark"?"light":((X=(me=W==null?void 0:W.vditor.options.preview)==null?void 0:me.theme)==null?void 0:X.current)??"light":"dark",pe?(Z=H?Gr.has(ve)?ve:"xcode":Gr.has(J)?J:"dracula",W==null||W.setTheme(I,S,Z)):W==null||W.setTheme(I,S)}function be(H){W==null||W.setValue(H)}function we(H){H?W==null||W.enable():W==null||W.disabled()}function De(H){H?W==null||W.enableCache():W==null||W.disabledCache()}function Te(H){if(H.length<=0)return;const pe=[];for(const[ve,J]of H){const me=za(ve),X=$a(ve),Y=Qa(J),re=encodeURI(J);if(me)switch(!0){case me.startsWith("image/"):pe.push(`![${X}](${re})`);continue;case me.startsWith("audio/"):pe.push(`<audio controls="controls" src="${Y}"/>`);continue;case me.startsWith("video/"):pe.push(`<video controls="controls" src="${Y}"/>`);continue}pe.push(`[${X}](${re})`)}W&&pe.length>0&&W.insertValue(pe.join(`
`))}async function xe(H,pe){const ve=pe?Ot(y.dir,p):p,J=[],me=H.filter(Y=>vs(Y.name)).map(Y=>({file:Y,name:Y.name,path:pe?`./${Ot(p,Y.name)}`:`/${Ot(Ba(p,"/"),Y.name)}`,fullpath:Ot(ve,Y.name)}));return(await Promise.allSettled(me.map(Y=>b.client.putFile({path:Y.fullpath,file:Y.file})))).forEach((Y,re)=>{if(Y.status==="fulfilled"){const Ce=me[re];J.push([Ce.name,Ce.path])}}),Te(J),null}function Ne(H,pe=(ve=>(ve=W==null?void 0:W.vditor)==null?void 0:ve.options)()){if(pe!=null&&pe.upload)switch(H){case Gt.assets:pe.upload.handler=void 0;break;case Gt.relative:pe.upload.handler=J=>xe(J,!0);break;case Gt.absolute:pe.upload.handler=J=>xe(J,!1);break}}function Ue(H){switch(!0){case H.startsWith("./"):case H.startsWith("../"):return Ot(y.dir,H);case H.startsWith("//"):return"";case H.startsWith("/"):return H;case Wr(H):return ms(H);default:return""}}async function Fe(H){const pe=H.target;if(pe instanceof HTMLElement&&["img","video","audio","source","track"].includes(pe.localName)){const ve=pe,J=ve.getAttribute("src")||ve.getAttribute("srcset");if(!J)return;const me=C.get(J);let X=J;if(me)X=me;else{let Y=0;switch(!0){case J.startsWith("//"):X=`https:${J}`;case J.startsWith("http://"):case J.startsWith("https://"):Y=2;break;case J.startsWith("./"):case J.startsWith("../"):case J.startsWith("/"):X=Ue(J),Y=1;break;case Wr(J):X=Ot(h,J);break;default:return}switch(Y){case 1:try{const re=await b.client.getFile({path:X},"blob"),Ce=URL.createObjectURL(re);C.set(J,Ce),X=Ce;break}catch{return}case 2:try{const re=await b.client.forwardProxy({url:X,headers:[],responseEncoding:"base64"}),Ce=ps(re.data.body,re.data.contentType),Se=URL.createObjectURL(Ce);C.set(J,Se),X=Se;break}catch{return}}}ve.src?ve.src=X:ve.srcset=X}}function tt(H,pe){if(H)try{W==null||W.destroy()}catch{}finally{Ne(m,pe),l(17,W=new qa(H,pe))}}Ca(()=>{var pe;const H=_a({_lutePath:void 0,_staticPath:{i18n:`${x}/js/i18n`,icons:`${x}/js/icons`,mathjax:`${x}/js/jsthjax`,highlight:`${x}/js/highlight.js`,method:`${x}/js/method.min.js`,style:`${x}/css/index.css`,logo:`${x}/images/logo.png`,emoji:`${h}/emojies`},value:f,debugger:U,height:"100%",lang:Ma("zh-Hans"),toolbar:[{name:"save",icon:Fa,hotkey:"⌘S",tip:(pe=b.i18n)==null?void 0:pe.editor.action.save.label,tipPosition:"se",click(ve,J){R&&le("save",{markdown:W==null?void 0:W.getValue()})}},"|",{name:"undo",tipPosition:"se"},{name:"redo",tipPosition:"se"},"|",{name:"insert-before",tipPosition:"se"},{name:"insert-after",tipPosition:"se"},{name:"outdent",tipPosition:"se"},{name:"indent",tipPosition:"se"},"|",{name:"headings",tipPosition:"s"},"|",{name:"bold",tipPosition:"s"},{name:"italic",tipPosition:"s"},{name:"strike",tipPosition:"s"},{name:"inline-code",tipPosition:"s"},{name:"link",tipPosition:"s"},{name:"emoji",tipPosition:"s"},"|",{name:"list",tipPosition:"s"},{name:"ordered-list",tipPosition:"s"},{name:"check",tipPosition:"s"},"|",{name:"quote",tipPosition:"s"},{name:"line",tipPosition:"s"},{name:"code",tipPosition:"s"},"|",{name:"upload",tipPosition:"s"},{name:"record",tipPosition:"s"},"|",{name:"edit-mode",tipPosition:"sw"},{name:"both",tipPosition:"sw"},{name:"fullscreen",tipPosition:"sw"},{name:"outline",tipPosition:"sw"},"|",{name:"style",icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',tip:"🎨",tipPosition:"w",click(){},toolbar:[{name:"theme",icon:"🔆 | 🌙",click(ve,J){switch(J.options.theme){case"dark":{de(!0);break}case"classic":default:{de(!1);break}}}},"content-theme","code-theme"]},{name:"more",tipPosition:"e",toolbar:["preview","export","devtools","info","help"]}],counter:{enable:!0,type:"text",after(ve,J){}},cache:{id:v,enable:P,after(ve){P&&le("changed",{markdown:ve})}},mode:"ir",preview:{hljs:{lineNumber:!0,style:Z},math:{inlineDigit:!1},markdown:{autoSpace:!0,toc:!0},theme:{current:S,path:`${x}/css/themes`},parse(ve){},transform(ve){return ve}},link:{click(ve){switch(!0){case ve instanceof HTMLAnchorElement:{const J=ve;le("open-link",{path:{current:v,target:Ue(J.href)},href:J.href,title:J.title,anchor:J.textContent,target:J.target});break}case(ve instanceof HTMLSpanElement&&ve.classList.contains("vditor-ir__marker--link")):{const J=ve;let me=J,X=J;for(;me&&!me.classList.contains("vditor-ir__link");)me=me.previousElementSibling;for(;X&&!X.classList.contains("vditor-ir__marker--title");)X=X.nextElementSibling;le("open-link",{path:{current:v,target:Ue(J.textContent)},href:J.textContent,title:X==null?void 0:X.textContent,anchor:me==null?void 0:me.textContent})}}}},image:{preview(ve){}},hint:{emojiPath:"https://unpkg.com/vditor@1.8.3/dist/images/emoji",parse:!1},toolbarConfig:{pin:!0},theme:I,upload:{url:`${h}/api/asset/upload`,max:1/0,extraData:{assetsDirPath:p},file(ve){return ve},validate(ve){return!0},filename(ve){return ve},success(ve,J){try{const X=JSON.parse(J).data.succMap;Te(Object.entries(X))}catch(me){b.logger.warn(me)}},error(ve){b.logger.warns("upload.error",ve)},format(ve,J){return J},linkToImgFormat(ve){return ve},linkToImgCallback(ve){}},cdn:h,dist:"stage/protyle",tab:"	",outline:{enable:!0,position:"right"}},A);D.addEventListener("error",Fe,!0),tt(D,H)}),La(()=>{W&&(W.clearCache(),W.clearStack(),W.destroy())});function Be(H){Oa[H?"unshift":"push"](()=>{D=H,l(1,D)})}return o.$$set=H=>{"plugin"in H&&l(2,b=H.plugin),"src2url"in H&&l(3,C=H.src2url),"baseURL"in H&&l(4,x=H.baseURL),"rootURL"in H&&l(5,h=H.rootURL),"path"in H&&l(6,v=H.path),"vditorID"in H&&l(0,g=H.vditorID),"assetsDirPath"in H&&l(7,p=H.assetsDirPath),"assetsUploadMode"in H&&l(8,m=H.assetsUploadMode),"options"in H&&l(9,A=H.options),"value"in H&&l(10,f=H.value),"theme"in H&&l(11,E=H.theme),"codeBlockThemeLight"in H&&l(12,T=H.codeBlockThemeLight),"codeBlockThemeDark"in H&&l(13,N=H.codeBlockThemeDark),"updatable"in H&&l(14,R=H.updatable),"changable"in H&&l(15,P=H.changable),"debug"in H&&l(16,U=H.debug)},o.$$.update=()=>{o.$$.dirty[0]&64&&(y=Ka(v)),o.$$.dirty[0]&196608&&(U?globalThis.vditor=W:delete globalThis.vditor),o.$$.dirty[0]&1024&&be(f),o.$$.dirty[0]&16384&&we(R),o.$$.dirty[0]&32768&&De(P),o.$$.dirty[0]&256&&Ne(m),o.$$.dirty[0]&14336&&de(E,!0,T,N)},[g,D,b,C,x,h,v,p,m,A,f,E,T,N,R,P,U,W,Be]}class yi extends wa{constructor(a){super(),Ea(this,a,bs,ys,ka,{plugin:2,src2url:3,baseURL:4,rootURL:5,path:6,vditorID:0,assetsDirPath:7,assetsUploadMode:8,options:9,value:10,theme:11,codeBlockThemeLight:12,codeBlockThemeDark:13,updatable:14,changable:15,debug:16},null,[-1,-1])}}class ws extends Na{constructor(a=()=>{}){super(a),this.oninited=a}ready(a={status:!0}){const l={channel:"vditor-ready",data:a};this.port.postMessage(l)}changed(a){const l={channel:"vditor-changed",data:a};this.port.postMessage(l)}save(a){const l={channel:"vditor-save",data:a};this.port.postMessage(l)}openLink(a){const l={channel:"vditor-open-link",data:a};this.port.postMessage(l)}}var Es=Object.defineProperty,ks=(o,a,l)=>a in o?Es(o,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[a]=l,gt=(o,a,l)=>(ks(o,typeof a!="symbol"?a+"":a,l),l);const xs=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Ss=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ts=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function As(o,a){if(o==="__proto__"||o==="constructor"&&a&&typeof a=="object"&&"prototype"in a){Cs(o);return}return a}function Cs(o){console.warn(`[destr] Dropping "${o}" key to prevent prototype pollution.`)}function Ls(o,a={}){if(typeof o!="string")return o;const l=o.trim();if(o[0]==='"'&&o[o.length-1]==='"')return l.slice(1,-1);if(l.length<=9){const y=l.toLowerCase();if(y==="true")return!0;if(y==="false")return!1;if(y==="undefined")return;if(y==="null")return null;if(y==="nan")return Number.NaN;if(y==="infinity")return Number.POSITIVE_INFINITY;if(y==="-infinity")return Number.NEGATIVE_INFINITY}if(!Ts.test(o)){if(a.strict)throw new SyntaxError("[destr] Invalid JSON");return o}try{if(xs.test(o)||Ss.test(o)){if(a.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(o,As)}return JSON.parse(o)}catch(y){if(a.strict)throw y;return o}}const _s=/#/g,Ms=/&/g,Os=/=/g,$n=/\+/g,Ns=/%5e/gi,Hs=/%60/gi,Ds=/%7c/gi,Ps=/%20/gi;function Is(o){return encodeURI(""+o).replace(Ds,"|")}function Vn(o){return Is(typeof o=="string"?o:JSON.stringify(o)).replace($n,"%2B").replace(Ps,"+").replace(_s,"%23").replace(Ms,"%26").replace(Hs,"`").replace(Ns,"^")}function Rn(o){return Vn(o).replace(Os,"%3D")}function bi(o=""){try{return decodeURIComponent(""+o)}catch{return""+o}}function Rs(o){return bi(o.replace($n," "))}function Bs(o){return bi(o.replace($n," "))}function js(o=""){const a={};o[0]==="?"&&(o=o.slice(1));for(const l of o.split("&")){const y=l.match(/([^=]+)=?(.*)/)||[];if(y.length<2)continue;const b=Rs(y[1]);if(b==="__proto__"||b==="constructor")continue;const C=Bs(y[2]||"");a[b]===void 0?a[b]=C:Array.isArray(a[b])?a[b].push(C):a[b]=[a[b],C]}return a}function Us(o,a){return(typeof a=="number"||typeof a=="boolean")&&(a=String(a)),a?Array.isArray(a)?a.map(l=>`${Rn(o)}=${Vn(l)}`).join("&"):`${Rn(o)}=${Vn(a)}`:Rn(o)}function qs(o){return Object.keys(o).filter(a=>o[a]!==void 0).map(a=>Us(a,o[a])).filter(Boolean).join("&")}const Fs=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Vs=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,zs=/^([/\\]\s*){2,}[^/\\]/;function wi(o,a={}){return typeof a=="boolean"&&(a={acceptRelative:a}),a.strict?Fs.test(o):Vs.test(o)||(a.acceptRelative?zs.test(o):!1)}const Ws=/\/$|\/\?/;function zn(o="",a=!1){return a?Ws.test(o):o.endsWith("/")}function Gs(o="",a=!1){if(!a)return(zn(o)?o.slice(0,-1):o)||"/";if(!zn(o,!0))return o||"/";const[l,...y]=o.split("?");return(l.slice(0,-1)||"/")+(y.length>0?`?${y.join("?")}`:"")}function Ks(o="",a=!1){if(!a)return o.endsWith("/")?o:o+"/";if(zn(o,!0))return o||"/";const[l,...y]=o.split("?");return l+"/"+(y.length>0?`?${y.join("?")}`:"")}function Js(o,a){if(Zs(a)||wi(o))return o;const l=Gs(a);return o.startsWith(l)?o:$s(l,o)}function Xs(o,a){const l=Ei(o),y={...js(l.search),...a};return l.search=qs(y),el(l)}function Zs(o){return!o||o==="/"}function Ys(o){return o&&o!=="/"}const Qs=/^\.?\//;function $s(o,...a){let l=o||"";for(const y of a.filter(b=>Ys(b)))if(l){const b=y.replace(Qs,"");l=Ks(l)+b}else l=y;return l}function Ei(o="",a){const l=o.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/);if(l){const[,m,A=""]=l;return{protocol:m,pathname:A,href:m+A,auth:"",host:"",search:"",hash:""}}if(!wi(o,{acceptRelative:!0}))return a?Ei(a+o):Kr(o);const[,y="",b,C=""]=o.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,x="",h=""]=C.match(/([^#/?]*)(.*)?/)||[],{pathname:v,search:g,hash:p}=Kr(h.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:y,auth:b?b.slice(0,Math.max(0,b.length-1)):"",host:x,pathname:v,search:g,hash:p}}function Kr(o=""){const[a="",l="",y=""]=(o.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:a,search:l,hash:y}}function el(o){const a=o.pathname||"",l=o.search?(o.search.startsWith("?")?"":"?")+o.search:"",y=o.hash||"",b=o.auth?o.auth+"@":"",C=o.host||"";return(o.protocol?o.protocol+"//":"")+b+C+a+l+y}class tl extends Error{constructor(a,l){super(a,l),this.name="FetchError",l!=null&&l.cause&&!this.cause&&(this.cause=l.cause)}}function nl(o){var a,l,y,b,C;const x=((a=o.error)==null?void 0:a.message)||((l=o.error)==null?void 0:l.toString())||"",h=((y=o.request)==null?void 0:y.method)||((b=o.options)==null?void 0:b.method)||"GET",v=((C=o.request)==null?void 0:C.url)||String(o.request)||"/",g=`[${h}] ${JSON.stringify(v)}`,p=o.response?`${o.response.status} ${o.response.statusText}`:"<no response>",m=`${g}: ${p}${x?` ${x}`:""}`,A=new tl(m,o.error?{cause:o.error}:void 0);for(const f of["request","options","response"])Object.defineProperty(A,f,{get(){return o[f]}});for(const[f,E]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(A,f,{get(){return o.response&&o.response[E]}});return A}const rl=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Jr(o="GET"){return rl.has(o.toUpperCase())}function il(o){if(o===void 0)return!1;const a=typeof o;return a==="string"||a==="number"||a==="boolean"||a===null?!0:a!=="object"?!1:Array.isArray(o)?!0:o.buffer?!1:o.constructor&&o.constructor.name==="Object"||typeof o.toJSON=="function"}const ol=new Set(["image/svg","application/xml","application/xhtml","application/html"]),al=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function sl(o=""){if(!o)return"json";const a=o.split(";").shift()||"";return al.test(a)?"json":ol.has(a)||a.startsWith("text/")?"text":"blob"}function ll(o,a,l=globalThis.Headers){const y={...a,...o};if(a!=null&&a.params&&o!=null&&o.params&&(y.params={...a==null?void 0:a.params,...o==null?void 0:o.params}),a!=null&&a.query&&o!=null&&o.query&&(y.query={...a==null?void 0:a.query,...o==null?void 0:o.query}),a!=null&&a.headers&&o!=null&&o.headers){y.headers=new l((a==null?void 0:a.headers)||{});for(const[b,C]of new l((o==null?void 0:o.headers)||{}))y.headers.set(b,C)}return y}const cl=new Set([408,409,425,429,500,502,503,504]),dl=new Set([101,204,205,304]);function ki(o={}){const{fetch:a=globalThis.fetch,Headers:l=globalThis.Headers,AbortController:y=globalThis.AbortController}=o;async function b(h){const v=h.error&&h.error.name==="AbortError"&&!h.options.timeout||!1;if(h.options.retry!==!1&&!v){let p;typeof h.options.retry=="number"?p=h.options.retry:p=Jr(h.options.method)?0:1;const m=h.response&&h.response.status||500;if(p>0&&(Array.isArray(h.options.retryStatusCodes)?h.options.retryStatusCodes.includes(m):cl.has(m))){const A=h.options.retryDelay||0;return A>0&&await new Promise(f=>setTimeout(f,A)),C(h.request,{...h.options,retry:p-1,timeout:h.options.timeout})}}const g=nl(h);throw Error.captureStackTrace&&Error.captureStackTrace(g,C),g}const C=async function(h,v={}){var g;const p={request:h,options:ll(v,o.defaults,l),response:void 0,error:void 0};if(p.options.method=(g=p.options.method)==null?void 0:g.toUpperCase(),p.options.onRequest&&await p.options.onRequest(p),typeof p.request=="string"&&(p.options.baseURL&&(p.request=Js(p.request,p.options.baseURL)),(p.options.query||p.options.params)&&(p.request=Xs(p.request,{...p.options.params,...p.options.query}))),p.options.body&&Jr(p.options.method)&&(il(p.options.body)?(p.options.body=typeof p.options.body=="string"?p.options.body:JSON.stringify(p.options.body),p.options.headers=new l(p.options.headers||{}),p.options.headers.has("content-type")||p.options.headers.set("content-type","application/json"),p.options.headers.has("accept")||p.options.headers.set("accept","application/json")):("pipeTo"in p.options.body&&typeof p.options.body.pipeTo=="function"||typeof p.options.body.pipe=="function")&&("duplex"in p.options||(p.options.duplex="half"))),!p.options.signal&&p.options.timeout){const m=new y;setTimeout(()=>m.abort(),p.options.timeout),p.options.signal=m.signal}try{p.response=await a(p.request,p.options)}catch(m){return p.error=m,p.options.onRequestError&&await p.options.onRequestError(p),await b(p)}if(p.response.body&&!dl.has(p.response.status)&&p.options.method!=="HEAD"){const m=(p.options.parseResponse?"json":p.options.responseType)||sl(p.response.headers.get("content-type")||"");switch(m){case"json":{const A=await p.response.text(),f=p.options.parseResponse||Ls;p.response._data=f(A);break}case"stream":{p.response._data=p.response.body;break}default:p.response._data=await p.response[m]()}}return p.options.onResponse&&await p.options.onResponse(p),!p.options.ignoreResponseError&&p.response.status>=400&&p.response.status<600?(p.options.onResponseError&&await p.options.onResponseError(p),await b(p)):p.response},x=async function(h,v){return(await C(h,v))._data};return x.raw=C,x.native=(...h)=>a(...h),x.create=(h={})=>ki({...o,defaults:{...o.defaults,...h}}),x}const er=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),ul=er.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),pl=er.Headers,ml=er.AbortController,fl=ki({fetch:ul,Headers:pl,AbortController:ml});class hl extends Error{constructor(a){super(a.statusText),gt(this,"status"),this.response=a,this.status=a.status}}class Xr extends Error{constructor(a,l){super(a.msg),gt(this,"code"),this.body=a,this.response=l,this.code=a.code}}function dt(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function Zr(o,a){for(var l="",y=0,b=-1,C=0,x,h=0;h<=o.length;++h){if(h<o.length)x=o.charCodeAt(h);else{if(x===47)break;x=47}if(x===47){if(!(b===h-1||C===1))if(b!==h-1&&C===2){if(l.length<2||y!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){var v=l.lastIndexOf("/");if(v!==l.length-1){v===-1?(l="",y=0):(l=l.slice(0,v),y=l.length-1-l.lastIndexOf("/")),b=h,C=0;continue}}else if(l.length===2||l.length===1){l="",y=0,b=h,C=0;continue}}a&&(l.length>0?l+="/..":l="..",y=2)}else l.length>0?l+="/"+o.slice(b+1,h):l=o.slice(b+1,h),y=h-b-1;b=h,C=0}else x===46&&C!==-1?++C:C=-1}return l}function gl(o,a){var l=a.dir||a.root,y=a.base||(a.name||"")+(a.ext||"");return l?l===a.root?l+y:l+o+y:y}var Kt={resolve:function(){for(var o="",a=!1,l,y=arguments.length-1;y>=-1&&!a;y--){var b;y>=0?b=arguments[y]:(l===void 0&&(l=process.cwd()),b=l),dt(b),b.length!==0&&(o=b+"/"+o,a=b.charCodeAt(0)===47)}return o=Zr(o,!a),a?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(o){if(dt(o),o.length===0)return".";var a=o.charCodeAt(0)===47,l=o.charCodeAt(o.length-1)===47;return o=Zr(o,!a),o.length===0&&!a&&(o="."),o.length>0&&l&&(o+="/"),a?"/"+o:o},isAbsolute:function(o){return dt(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,a=0;a<arguments.length;++a){var l=arguments[a];dt(l),l.length>0&&(o===void 0?o=l:o+="/"+l)}return o===void 0?".":Kt.normalize(o)},relative:function(o,a){if(dt(o),dt(a),o===a||(o=Kt.resolve(o),a=Kt.resolve(a),o===a))return"";for(var l=1;l<o.length&&o.charCodeAt(l)===47;++l);for(var y=o.length,b=y-l,C=1;C<a.length&&a.charCodeAt(C)===47;++C);for(var x=a.length,h=x-C,v=b<h?b:h,g=-1,p=0;p<=v;++p){if(p===v){if(h>v){if(a.charCodeAt(C+p)===47)return a.slice(C+p+1);if(p===0)return a.slice(C+p)}else b>v&&(o.charCodeAt(l+p)===47?g=p:p===0&&(g=0));break}var m=o.charCodeAt(l+p),A=a.charCodeAt(C+p);if(m!==A)break;m===47&&(g=p)}var f="";for(p=l+g+1;p<=y;++p)(p===y||o.charCodeAt(p)===47)&&(f.length===0?f+="..":f+="/..");return f.length>0?f+a.slice(C+g):(C+=g,a.charCodeAt(C)===47&&++C,a.slice(C))},_makeLong:function(o){return o},dirname:function(o){if(dt(o),o.length===0)return".";for(var a=o.charCodeAt(0),l=a===47,y=-1,b=!0,C=o.length-1;C>=1;--C)if(a=o.charCodeAt(C),a===47){if(!b){y=C;break}}else b=!1;return y===-1?l?"/":".":l&&y===1?"//":o.slice(0,y)},basename:function(o,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');dt(o);var l=0,y=-1,b=!0,C;if(a!==void 0&&a.length>0&&a.length<=o.length){if(a.length===o.length&&a===o)return"";var x=a.length-1,h=-1;for(C=o.length-1;C>=0;--C){var v=o.charCodeAt(C);if(v===47){if(!b){l=C+1;break}}else h===-1&&(b=!1,h=C+1),x>=0&&(v===a.charCodeAt(x)?--x===-1&&(y=C):(x=-1,y=h))}return l===y?y=h:y===-1&&(y=o.length),o.slice(l,y)}else{for(C=o.length-1;C>=0;--C)if(o.charCodeAt(C)===47){if(!b){l=C+1;break}}else y===-1&&(b=!1,y=C+1);return y===-1?"":o.slice(l,y)}},extname:function(o){dt(o);for(var a=-1,l=0,y=-1,b=!0,C=0,x=o.length-1;x>=0;--x){var h=o.charCodeAt(x);if(h===47){if(!b){l=x+1;break}continue}y===-1&&(b=!1,y=x+1),h===46?a===-1?a=x:C!==1&&(C=1):a!==-1&&(C=-1)}return a===-1||y===-1||C===0||C===1&&a===y-1&&a===l+1?"":o.slice(a,y)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return gl("/",o)},parse:function(o){dt(o);var a={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return a;var l=o.charCodeAt(0),y=l===47,b;y?(a.root="/",b=1):b=0;for(var C=-1,x=0,h=-1,v=!0,g=o.length-1,p=0;g>=b;--g){if(l=o.charCodeAt(g),l===47){if(!v){x=g+1;break}continue}h===-1&&(v=!1,h=g+1),l===46?C===-1?C=g:p!==1&&(p=1):C!==-1&&(p=-1)}return C===-1||h===-1||p===0||p===1&&C===h-1&&C===x+1?h!==-1&&(x===0&&y?a.base=a.name=o.slice(1,h):a.base=a.name=o.slice(x,h)):(x===0&&y?(a.name=o.slice(1,C),a.base=o.slice(1,h)):(a.name=o.slice(x,C),a.base=o.slice(x,h)),a.ext=o.slice(C,h)),x>0?a.dir=o.slice(0,x-1):y&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};Kt.posix=Kt;function xi(o,a){return function(){return o.apply(a,arguments)}}const{toString:vl}=Object.prototype,{getPrototypeOf:tr}=Object,hn=(o=>a=>{const l=vl.call(a);return o[l]||(o[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),pt=o=>(o=o.toLowerCase(),a=>hn(a)===o),gn=o=>a=>typeof a===o,{isArray:Rt}=Array,Jt=gn("undefined");function yl(o){return o!==null&&!Jt(o)&&o.constructor!==null&&!Jt(o.constructor)&&ot(o.constructor.isBuffer)&&o.constructor.isBuffer(o)}const Si=pt("ArrayBuffer");function bl(o){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(o):a=o&&o.buffer&&Si(o.buffer),a}const wl=gn("string"),ot=gn("function"),Ti=gn("number"),vn=o=>o!==null&&typeof o=="object",El=o=>o===!0||o===!1,cn=o=>{if(hn(o)!=="object")return!1;const a=tr(o);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},kl=pt("Date"),xl=pt("File"),Sl=pt("Blob"),Tl=pt("FileList"),Al=o=>vn(o)&&ot(o.pipe),Cl=o=>{let a;return o&&(typeof FormData=="function"&&o instanceof FormData||ot(o.append)&&((a=hn(o))==="formdata"||a==="object"&&ot(o.toString)&&o.toString()==="[object FormData]"))},Ll=pt("URLSearchParams"),_l=o=>o.trim?o.trim():o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xt(o,a,{allOwnKeys:l=!1}={}){if(o===null||typeof o>"u")return;let y,b;if(typeof o!="object"&&(o=[o]),Rt(o))for(y=0,b=o.length;y<b;y++)a.call(null,o[y],y,o);else{const C=l?Object.getOwnPropertyNames(o):Object.keys(o),x=C.length;let h;for(y=0;y<x;y++)h=C[y],a.call(null,o[h],h,o)}}function Ai(o,a){a=a.toLowerCase();const l=Object.keys(o);let y=l.length,b;for(;y-- >0;)if(b=l[y],a===b.toLowerCase())return b;return null}const Ci=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Li=o=>!Jt(o)&&o!==Ci;function Wn(){const{caseless:o}=Li(this)&&this||{},a={},l=(y,b)=>{const C=o&&Ai(a,b)||b;cn(a[C])&&cn(y)?a[C]=Wn(a[C],y):cn(y)?a[C]=Wn({},y):Rt(y)?a[C]=y.slice():a[C]=y};for(let y=0,b=arguments.length;y<b;y++)arguments[y]&&Xt(arguments[y],l);return a}const Ml=(o,a,l,{allOwnKeys:y}={})=>(Xt(a,(b,C)=>{l&&ot(b)?o[C]=xi(b,l):o[C]=b},{allOwnKeys:y}),o),Ol=o=>(o.charCodeAt(0)===65279&&(o=o.slice(1)),o),Nl=(o,a,l,y)=>{o.prototype=Object.create(a.prototype,y),o.prototype.constructor=o,Object.defineProperty(o,"super",{value:a.prototype}),l&&Object.assign(o.prototype,l)},Hl=(o,a,l,y)=>{let b,C,x;const h={};if(a=a||{},o==null)return a;do{for(b=Object.getOwnPropertyNames(o),C=b.length;C-- >0;)x=b[C],(!y||y(x,o,a))&&!h[x]&&(a[x]=o[x],h[x]=!0);o=l!==!1&&tr(o)}while(o&&(!l||l(o,a))&&o!==Object.prototype);return a},Dl=(o,a,l)=>{o=String(o),(l===void 0||l>o.length)&&(l=o.length),l-=a.length;const y=o.indexOf(a,l);return y!==-1&&y===l},Pl=o=>{if(!o)return null;if(Rt(o))return o;let a=o.length;if(!Ti(a))return null;const l=new Array(a);for(;a-- >0;)l[a]=o[a];return l},Il=(o=>a=>o&&a instanceof o)(typeof Uint8Array<"u"&&tr(Uint8Array)),Rl=(o,a)=>{const l=(o&&o[Symbol.iterator]).call(o);let y;for(;(y=l.next())&&!y.done;){const b=y.value;a.call(o,b[0],b[1])}},Bl=(o,a)=>{let l;const y=[];for(;(l=o.exec(a))!==null;)y.push(l);return y},jl=pt("HTMLFormElement"),Ul=o=>o.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,l,y){return l.toUpperCase()+y}),Yr=(({hasOwnProperty:o})=>(a,l)=>o.call(a,l))(Object.prototype),ql=pt("RegExp"),_i=(o,a)=>{const l=Object.getOwnPropertyDescriptors(o),y={};Xt(l,(b,C)=>{let x;(x=a(b,C,o))!==!1&&(y[C]=x||b)}),Object.defineProperties(o,y)},Fl=o=>{_i(o,(a,l)=>{if(ot(o)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const y=o[l];if(ot(y)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},Vl=(o,a)=>{const l={},y=b=>{b.forEach(C=>{l[C]=!0})};return Rt(o)?y(o):y(String(o).split(a)),l},zl=()=>{},Wl=(o,a)=>(o=+o,Number.isFinite(o)?o:a),Bn="abcdefghijklmnopqrstuvwxyz",Qr="0123456789",Mi={DIGIT:Qr,ALPHA:Bn,ALPHA_DIGIT:Bn+Bn.toUpperCase()+Qr},Gl=(o=16,a=Mi.ALPHA_DIGIT)=>{let l="";const{length:y}=a;for(;o--;)l+=a[Math.random()*y|0];return l};function Kl(o){return!!(o&&ot(o.append)&&o[Symbol.toStringTag]==="FormData"&&o[Symbol.iterator])}const Jl=o=>{const a=new Array(10),l=(y,b)=>{if(vn(y)){if(a.indexOf(y)>=0)return;if(!("toJSON"in y)){a[b]=y;const C=Rt(y)?[]:{};return Xt(y,(x,h)=>{const v=l(x,b+1);!Jt(v)&&(C[h]=v)}),a[b]=void 0,C}}return y};return l(o,0)},Xl=pt("AsyncFunction"),Zl=o=>o&&(vn(o)||ot(o))&&ot(o.then)&&ot(o.catch),K={isArray:Rt,isArrayBuffer:Si,isBuffer:yl,isFormData:Cl,isArrayBufferView:bl,isString:wl,isNumber:Ti,isBoolean:El,isObject:vn,isPlainObject:cn,isUndefined:Jt,isDate:kl,isFile:xl,isBlob:Sl,isRegExp:ql,isFunction:ot,isStream:Al,isURLSearchParams:Ll,isTypedArray:Il,isFileList:Tl,forEach:Xt,merge:Wn,extend:Ml,trim:_l,stripBOM:Ol,inherits:Nl,toFlatObject:Hl,kindOf:hn,kindOfTest:pt,endsWith:Dl,toArray:Pl,forEachEntry:Rl,matchAll:Bl,isHTMLForm:jl,hasOwnProperty:Yr,hasOwnProp:Yr,reduceDescriptors:_i,freezeMethods:Fl,toObjectSet:Vl,toCamelCase:Ul,noop:zl,toFiniteNumber:Wl,findKey:Ai,global:Ci,isContextDefined:Li,ALPHABET:Mi,generateString:Gl,isSpecCompliantForm:Kl,toJSONObject:Jl,isAsyncFn:Xl,isThenable:Zl};function Oe(o,a,l,y,b){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=o,this.name="AxiosError",a&&(this.code=a),l&&(this.config=l),y&&(this.request=y),b&&(this.response=b)}K.inherits(Oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Oi=Oe.prototype,Ni={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(o=>{Ni[o]={value:o}});Object.defineProperties(Oe,Ni);Object.defineProperty(Oi,"isAxiosError",{value:!0});Oe.from=(o,a,l,y,b,C)=>{const x=Object.create(Oi);return K.toFlatObject(o,x,function(h){return h!==Error.prototype},h=>h!=="isAxiosError"),Oe.call(x,o.message,a,l,y,b),x.cause=o,x.name=o.name,C&&Object.assign(x,C),x};const Yl=null;function Gn(o){return K.isPlainObject(o)||K.isArray(o)}function Hi(o){return K.endsWith(o,"[]")?o.slice(0,-2):o}function $r(o,a,l){return o?o.concat(a).map(function(y,b){return y=Hi(y),!l&&b?"["+y+"]":y}).join(l?".":""):a}function Ql(o){return K.isArray(o)&&!o.some(Gn)}const $l=K.toFlatObject(K,{},null,function(o){return/^is[A-Z]/.test(o)});function yn(o,a,l){if(!K.isObject(o))throw new TypeError("target must be an object");a=a||new FormData,l=K.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,E){return!K.isUndefined(E[f])});const y=l.metaTokens,b=l.visitor||g,C=l.dots,x=l.indexes,h=(l.Blob||typeof Blob<"u"&&Blob)&&K.isSpecCompliantForm(a);if(!K.isFunction(b))throw new TypeError("visitor must be a function");function v(f){if(f===null)return"";if(K.isDate(f))return f.toISOString();if(!h&&K.isBlob(f))throw new Oe("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(f)||K.isTypedArray(f)?h&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function g(f,E,T){let N=f;if(f&&!T&&typeof f=="object"){if(K.endsWith(E,"{}"))E=y?E:E.slice(0,-2),f=JSON.stringify(f);else if(K.isArray(f)&&Ql(f)||(K.isFileList(f)||K.endsWith(E,"[]"))&&(N=K.toArray(f)))return E=Hi(E),N.forEach(function(R,P){!(K.isUndefined(R)||R===null)&&a.append(x===!0?$r([E],P,C):x===null?E:E+"[]",v(R))}),!1}return Gn(f)?!0:(a.append($r(T,E,C),v(f)),!1)}const p=[],m=Object.assign($l,{defaultVisitor:g,convertValue:v,isVisitable:Gn});function A(f,E){if(!K.isUndefined(f)){if(p.indexOf(f)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(f),K.forEach(f,function(T,N){(!(K.isUndefined(T)||T===null)&&b.call(a,T,K.isString(N)?N.trim():N,E,m))===!0&&A(T,E?E.concat(N):[N])}),p.pop()}}if(!K.isObject(o))throw new TypeError("data must be an object");return A(o),a}function ei(o){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(o).replace(/[!'()~]|%20|%00/g,function(l){return a[l]})}function nr(o,a){this._pairs=[],o&&yn(o,this,a)}const Di=nr.prototype;Di.append=function(o,a){this._pairs.push([o,a])};Di.toString=function(o){const a=o?function(l){return o.call(this,l,ei)}:ei;return this._pairs.map(function(l){return a(l[0])+"="+a(l[1])},"").join("&")};function ec(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Pi(o,a,l){if(!a)return o;const y=l&&l.encode||ec,b=l&&l.serialize;let C;if(b?C=b(a,l):C=K.isURLSearchParams(a)?a.toString():new nr(a,l).toString(y),C){const x=o.indexOf("#");x!==-1&&(o=o.slice(0,x)),o+=(o.indexOf("?")===-1?"?":"&")+C}return o}class tc{constructor(){this.handlers=[]}use(a,l,y){return this.handlers.push({fulfilled:a,rejected:l,synchronous:y?y.synchronous:!1,runWhen:y?y.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){K.forEach(this.handlers,function(l){l!==null&&a(l)})}}const ti=tc,Ii={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nc=typeof URLSearchParams<"u"?URLSearchParams:nr,rc=typeof FormData<"u"?FormData:null,ic=typeof Blob<"u"?Blob:null,oc=(()=>{let o;return typeof navigator<"u"&&((o=navigator.product)==="ReactNative"||o==="NativeScript"||o==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),ac=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),st={isBrowser:!0,classes:{URLSearchParams:nc,FormData:rc,Blob:ic},isStandardBrowserEnv:oc,isStandardBrowserWebWorkerEnv:ac,protocols:["http","https","file","blob","url","data"]};function sc(o,a){return yn(o,new st.classes.URLSearchParams,Object.assign({visitor:function(l,y,b,C){return st.isNode&&K.isBuffer(l)?(this.append(y,l.toString("base64")),!1):C.defaultVisitor.apply(this,arguments)}},a))}function lc(o){return K.matchAll(/\w+|\[(\w*)]/g,o).map(a=>a[0]==="[]"?"":a[1]||a[0])}function cc(o){const a={},l=Object.keys(o);let y;const b=l.length;let C;for(y=0;y<b;y++)C=l[y],a[C]=o[C];return a}function Ri(o){function a(l,y,b,C){let x=l[C++];const h=Number.isFinite(+x),v=C>=l.length;return x=!x&&K.isArray(b)?b.length:x,v?(K.hasOwnProp(b,x)?b[x]=[b[x],y]:b[x]=y,!h):((!b[x]||!K.isObject(b[x]))&&(b[x]=[]),a(l,y,b[x],C)&&K.isArray(b[x])&&(b[x]=cc(b[x])),!h)}if(K.isFormData(o)&&K.isFunction(o.entries)){const l={};return K.forEachEntry(o,(y,b)=>{a(lc(y),b,l,0)}),l}return null}function dc(o,a,l){if(K.isString(o))try{return(a||JSON.parse)(o),K.trim(o)}catch(y){if(y.name!=="SyntaxError")throw y}return(l||JSON.stringify)(o)}const rr={transitional:Ii,adapter:st.isNode?"http":"xhr",transformRequest:[function(o,a){const l=a.getContentType()||"",y=l.indexOf("application/json")>-1,b=K.isObject(o);if(b&&K.isHTMLForm(o)&&(o=new FormData(o)),K.isFormData(o))return y&&y?JSON.stringify(Ri(o)):o;if(K.isArrayBuffer(o)||K.isBuffer(o)||K.isStream(o)||K.isFile(o)||K.isBlob(o))return o;if(K.isArrayBufferView(o))return o.buffer;if(K.isURLSearchParams(o))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let C;if(b){if(l.indexOf("application/x-www-form-urlencoded")>-1)return sc(o,this.formSerializer).toString();if((C=K.isFileList(o))||l.indexOf("multipart/form-data")>-1){const x=this.env&&this.env.FormData;return yn(C?{"files[]":o}:o,x&&new x,this.formSerializer)}}return b||y?(a.setContentType("application/json",!1),dc(o)):o}],transformResponse:[function(o){const a=this.transitional||rr.transitional,l=a&&a.forcedJSONParsing,y=this.responseType==="json";if(o&&K.isString(o)&&(l&&!this.responseType||y)){const b=!(a&&a.silentJSONParsing)&&y;try{return JSON.parse(o)}catch(C){if(b)throw C.name==="SyntaxError"?Oe.from(C,Oe.ERR_BAD_RESPONSE,this,null,this.response):C}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:st.classes.FormData,Blob:st.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],o=>{rr.headers[o]={}});const ir=rr,uc=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pc=o=>{const a={};let l,y,b;return o&&o.split(`
`).forEach(function(C){b=C.indexOf(":"),l=C.substring(0,b).trim().toLowerCase(),y=C.substring(b+1).trim(),!(!l||a[l]&&uc[l])&&(l==="set-cookie"?a[l]?a[l].push(y):a[l]=[y]:a[l]=a[l]?a[l]+", "+y:y)}),a},ni=Symbol("internals");function Wt(o){return o&&String(o).trim().toLowerCase()}function dn(o){return o===!1||o==null?o:K.isArray(o)?o.map(dn):String(o)}function mc(o){const a=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let y;for(;y=l.exec(o);)a[y[1]]=y[2];return a}const fc=o=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(o.trim());function jn(o,a,l,y,b){if(K.isFunction(y))return y.call(this,a,l);if(b&&(a=l),!!K.isString(a)){if(K.isString(y))return a.indexOf(y)!==-1;if(K.isRegExp(y))return y.test(a)}}function hc(o){return o.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,l,y)=>l.toUpperCase()+y)}function gc(o,a){const l=K.toCamelCase(" "+a);["get","set","has"].forEach(y=>{Object.defineProperty(o,y+l,{value:function(b,C,x){return this[y].call(this,a,b,C,x)},configurable:!0})})}let bn=class{constructor(o){o&&this.set(o)}set(o,a,l){const y=this;function b(x,h,v){const g=Wt(h);if(!g)throw new Error("header name must be a non-empty string");const p=K.findKey(y,g);(!p||y[p]===void 0||v===!0||v===void 0&&y[p]!==!1)&&(y[p||h]=dn(x))}const C=(x,h)=>K.forEach(x,(v,g)=>b(v,g,h));return K.isPlainObject(o)||o instanceof this.constructor?C(o,a):K.isString(o)&&(o=o.trim())&&!fc(o)?C(pc(o),a):o!=null&&b(a,o,l),this}get(o,a){if(o=Wt(o),o){const l=K.findKey(this,o);if(l){const y=this[l];if(!a)return y;if(a===!0)return mc(y);if(K.isFunction(a))return a.call(this,y,l);if(K.isRegExp(a))return a.exec(y);throw new TypeError("parser must be boolean|regexp|function")}}}has(o,a){if(o=Wt(o),o){const l=K.findKey(this,o);return!!(l&&this[l]!==void 0&&(!a||jn(this,this[l],l,a)))}return!1}delete(o,a){const l=this;let y=!1;function b(C){if(C=Wt(C),C){const x=K.findKey(l,C);x&&(!a||jn(l,l[x],x,a))&&(delete l[x],y=!0)}}return K.isArray(o)?o.forEach(b):b(o),y}clear(o){const a=Object.keys(this);let l=a.length,y=!1;for(;l--;){const b=a[l];(!o||jn(this,this[b],b,o,!0))&&(delete this[b],y=!0)}return y}normalize(o){const a=this,l={};return K.forEach(this,(y,b)=>{const C=K.findKey(l,b);if(C){a[C]=dn(y),delete a[b];return}const x=o?hc(b):String(b).trim();x!==b&&delete a[b],a[x]=dn(y),l[x]=!0}),this}concat(...o){return this.constructor.concat(this,...o)}toJSON(o){const a=Object.create(null);return K.forEach(this,(l,y)=>{l!=null&&l!==!1&&(a[y]=o&&K.isArray(l)?l.join(", "):l)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([o,a])=>o+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(o){return o instanceof this?o:new this(o)}static concat(o,...a){const l=new this(o);return a.forEach(y=>l.set(y)),l}static accessor(o){const a=(this[ni]=this[ni]={accessors:{}}).accessors,l=this.prototype;function y(b){const C=Wt(b);a[C]||(gc(l,b),a[C]=!0)}return K.isArray(o)?o.forEach(y):y(o),this}};bn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);K.reduceDescriptors(bn.prototype,({value:o},a)=>{let l=a[0].toUpperCase()+a.slice(1);return{get:()=>o,set(y){this[l]=y}}});K.freezeMethods(bn);const vt=bn;function Un(o,a){const l=this||ir,y=a||l,b=vt.from(y.headers);let C=y.data;return K.forEach(o,function(x){C=x.call(l,C,b.normalize(),a?a.status:void 0)}),b.normalize(),C}function Bi(o){return!!(o&&o.__CANCEL__)}function Zt(o,a,l){Oe.call(this,o??"canceled",Oe.ERR_CANCELED,a,l),this.name="CanceledError"}K.inherits(Zt,Oe,{__CANCEL__:!0});function vc(o,a,l){const y=l.config.validateStatus;!l.status||!y||y(l.status)?o(l):a(new Oe("Request failed with status code "+l.status,[Oe.ERR_BAD_REQUEST,Oe.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}const yc=st.isStandardBrowserEnv?function(){return{write:function(o,a,l,y,b,C){const x=[];x.push(o+"="+encodeURIComponent(a)),K.isNumber(l)&&x.push("expires="+new Date(l).toGMTString()),K.isString(y)&&x.push("path="+y),K.isString(b)&&x.push("domain="+b),C===!0&&x.push("secure"),document.cookie=x.join("; ")},read:function(o){const a=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function bc(o){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(o)}function wc(o,a){return a?o.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,""):o}function ji(o,a){return o&&!bc(a)?wc(o,a):a}const Ec=st.isStandardBrowserEnv?function(){const o=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");let l;function y(b){let C=b;return o&&(a.setAttribute("href",C),C=a.href),a.setAttribute("href",C),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return l=y(window.location.href),function(b){const C=K.isString(b)?y(b):b;return C.protocol===l.protocol&&C.host===l.host}}():function(){return function(){return!0}}();function kc(o){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(o);return a&&a[1]||""}function xc(o,a){o=o||10;const l=new Array(o),y=new Array(o);let b=0,C=0,x;return a=a!==void 0?a:1e3,function(h){const v=Date.now(),g=y[C];x||(x=v),l[b]=h,y[b]=v;let p=C,m=0;for(;p!==b;)m+=l[p++],p=p%o;if(b=(b+1)%o,b===C&&(C=(C+1)%o),v-x<a)return;const A=g&&v-g;return A?Math.round(m*1e3/A):void 0}}function ri(o,a){let l=0;const y=xc(50,250);return b=>{const C=b.loaded,x=b.lengthComputable?b.total:void 0,h=C-l,v=y(h),g=C<=x;l=C;const p={loaded:C,total:x,progress:x?C/x:void 0,bytes:h,rate:v||void 0,estimated:v&&x&&g?(x-C)/v:void 0,event:b};p[a?"download":"upload"]=!0,o(p)}}const Sc=typeof XMLHttpRequest<"u",Tc=Sc&&function(o){return new Promise(function(a,l){let y=o.data;const b=vt.from(o.headers).normalize(),C=o.responseType;let x;function h(){o.cancelToken&&o.cancelToken.unsubscribe(x),o.signal&&o.signal.removeEventListener("abort",x)}K.isFormData(y)&&(st.isStandardBrowserEnv||st.isStandardBrowserWebWorkerEnv?b.setContentType(!1):b.setContentType("multipart/form-data;",!1));let v=new XMLHttpRequest;if(o.auth){const A=o.auth.username||"",f=o.auth.password?unescape(encodeURIComponent(o.auth.password)):"";b.set("Authorization","Basic "+btoa(A+":"+f))}const g=ji(o.baseURL,o.url);v.open(o.method.toUpperCase(),Pi(g,o.params,o.paramsSerializer),!0),v.timeout=o.timeout;function p(){if(!v)return;const A=vt.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),f={data:!C||C==="text"||C==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:A,config:o,request:v};vc(function(E){a(E),h()},function(E){l(E),h()},f),v=null}if("onloadend"in v?v.onloadend=p:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(p)},v.onabort=function(){v&&(l(new Oe("Request aborted",Oe.ECONNABORTED,o,v)),v=null)},v.onerror=function(){l(new Oe("Network Error",Oe.ERR_NETWORK,o,v)),v=null},v.ontimeout=function(){let A=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const f=o.transitional||Ii;o.timeoutErrorMessage&&(A=o.timeoutErrorMessage),l(new Oe(A,f.clarifyTimeoutError?Oe.ETIMEDOUT:Oe.ECONNABORTED,o,v)),v=null},st.isStandardBrowserEnv){const A=(o.withCredentials||Ec(g))&&o.xsrfCookieName&&yc.read(o.xsrfCookieName);A&&b.set(o.xsrfHeaderName,A)}y===void 0&&b.setContentType(null),"setRequestHeader"in v&&K.forEach(b.toJSON(),function(A,f){v.setRequestHeader(f,A)}),K.isUndefined(o.withCredentials)||(v.withCredentials=!!o.withCredentials),C&&C!=="json"&&(v.responseType=o.responseType),typeof o.onDownloadProgress=="function"&&v.addEventListener("progress",ri(o.onDownloadProgress,!0)),typeof o.onUploadProgress=="function"&&v.upload&&v.upload.addEventListener("progress",ri(o.onUploadProgress)),(o.cancelToken||o.signal)&&(x=A=>{v&&(l(!A||A.type?new Zt(null,o,v):A),v.abort(),v=null)},o.cancelToken&&o.cancelToken.subscribe(x),o.signal&&(o.signal.aborted?x():o.signal.addEventListener("abort",x)));const m=kc(g);if(m&&st.protocols.indexOf(m)===-1){l(new Oe("Unsupported protocol "+m+":",Oe.ERR_BAD_REQUEST,o));return}v.send(y||null)})},un={http:Yl,xhr:Tc};K.forEach(un,(o,a)=>{if(o){try{Object.defineProperty(o,"name",{value:a})}catch{}Object.defineProperty(o,"adapterName",{value:a})}});const Ui={getAdapter:o=>{o=K.isArray(o)?o:[o];const{length:a}=o;let l,y;for(let b=0;b<a&&(l=o[b],!(y=K.isString(l)?un[l.toLowerCase()]:l));b++);if(!y)throw y===!1?new Oe(`Adapter ${l} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(K.hasOwnProp(un,l)?`Adapter '${l}' is not available in the build`:`Unknown adapter '${l}'`);if(!K.isFunction(y))throw new TypeError("adapter is not a function");return y},adapters:un};function qn(o){if(o.cancelToken&&o.cancelToken.throwIfRequested(),o.signal&&o.signal.aborted)throw new Zt(null,o)}function ii(o){return qn(o),o.headers=vt.from(o.headers),o.data=Un.call(o,o.transformRequest),["post","put","patch"].indexOf(o.method)!==-1&&o.headers.setContentType("application/x-www-form-urlencoded",!1),Ui.getAdapter(o.adapter||ir.adapter)(o).then(function(a){return qn(o),a.data=Un.call(o,o.transformResponse,a),a.headers=vt.from(a.headers),a},function(a){return Bi(a)||(qn(o),a&&a.response&&(a.response.data=Un.call(o,o.transformResponse,a.response),a.response.headers=vt.from(a.response.headers))),Promise.reject(a)})}const oi=o=>o instanceof vt?o.toJSON():o;function It(o,a){a=a||{};const l={};function y(g,p,m){return K.isPlainObject(g)&&K.isPlainObject(p)?K.merge.call({caseless:m},g,p):K.isPlainObject(p)?K.merge({},p):K.isArray(p)?p.slice():p}function b(g,p,m){if(K.isUndefined(p)){if(!K.isUndefined(g))return y(void 0,g,m)}else return y(g,p,m)}function C(g,p){if(!K.isUndefined(p))return y(void 0,p)}function x(g,p){if(K.isUndefined(p)){if(!K.isUndefined(g))return y(void 0,g)}else return y(void 0,p)}function h(g,p,m){if(m in a)return y(g,p);if(m in o)return y(void 0,g)}const v={url:C,method:C,data:C,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,beforeRedirect:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:h,headers:(g,p)=>b(oi(g),oi(p),!0)};return K.forEach(Object.keys(Object.assign({},o,a)),function(g){const p=v[g]||b,m=p(o[g],a[g],g);K.isUndefined(m)&&p!==h||(l[g]=m)}),l}const qi="1.5.0",or={};["object","boolean","number","function","string","symbol"].forEach((o,a)=>{or[o]=function(l){return typeof l===o||"a"+(a<1?"n ":" ")+o}});const ai={};or.transitional=function(o,a,l){function y(b,C){return"[Axios v"+qi+"] Transitional option '"+b+"'"+C+(l?". "+l:"")}return(b,C,x)=>{if(o===!1)throw new Oe(y(C," has been removed"+(a?" in "+a:"")),Oe.ERR_DEPRECATED);return a&&!ai[C]&&(ai[C]=!0,console.warn(y(C," has been deprecated since v"+a+" and will be removed in the near future"))),o?o(b,C,x):!0}};function Ac(o,a,l){if(typeof o!="object")throw new Oe("options must be an object",Oe.ERR_BAD_OPTION_VALUE);const y=Object.keys(o);let b=y.length;for(;b-- >0;){const C=y[b],x=a[C];if(x){const h=o[C],v=h===void 0||x(h,C,o);if(v!==!0)throw new Oe("option "+C+" must be "+v,Oe.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new Oe("Unknown option "+C,Oe.ERR_BAD_OPTION)}}const Kn={assertOptions:Ac,validators:or},wt=Kn.validators;let mn=class{constructor(o){this.defaults=o,this.interceptors={request:new ti,response:new ti}}request(o,a){typeof o=="string"?(a=a||{},a.url=o):a=o||{},a=It(this.defaults,a);const{transitional:l,paramsSerializer:y,headers:b}=a;l!==void 0&&Kn.assertOptions(l,{silentJSONParsing:wt.transitional(wt.boolean),forcedJSONParsing:wt.transitional(wt.boolean),clarifyTimeoutError:wt.transitional(wt.boolean)},!1),y!=null&&(K.isFunction(y)?a.paramsSerializer={serialize:y}:Kn.assertOptions(y,{encode:wt.function,serialize:wt.function},!0)),a.method=(a.method||this.defaults.method||"get").toLowerCase();let C=b&&K.merge(b.common,b[a.method]);b&&K.forEach(["delete","get","head","post","put","patch","common"],f=>{delete b[f]}),a.headers=vt.concat(C,b);const x=[];let h=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(a)===!1||(h=h&&f.synchronous,x.unshift(f.fulfilled,f.rejected))});const v=[];this.interceptors.response.forEach(function(f){v.push(f.fulfilled,f.rejected)});let g,p=0,m;if(!h){const f=[ii.bind(this),void 0];for(f.unshift.apply(f,x),f.push.apply(f,v),m=f.length,g=Promise.resolve(a);p<m;)g=g.then(f[p++],f[p++]);return g}m=x.length;let A=a;for(p=0;p<m;){const f=x[p++],E=x[p++];try{A=f(A)}catch(T){E.call(this,T);break}}try{g=ii.call(this,A)}catch(f){return Promise.reject(f)}for(p=0,m=v.length;p<m;)g=g.then(v[p++],v[p++]);return g}getUri(o){o=It(this.defaults,o);const a=ji(o.baseURL,o.url);return Pi(a,o.params,o.paramsSerializer)}};K.forEach(["delete","get","head","options"],function(o){mn.prototype[o]=function(a,l){return this.request(It(l||{},{method:o,url:a,data:(l||{}).data}))}});K.forEach(["post","put","patch"],function(o){function a(l){return function(y,b,C){return this.request(It(C||{},{method:o,headers:l?{"Content-Type":"multipart/form-data"}:{},url:y,data:b}))}}mn.prototype[o]=a(),mn.prototype[o+"Form"]=a(!0)});const pn=mn;let Cc=class Fi{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(b){l=b});const y=this;this.promise.then(b=>{if(!y._listeners)return;let C=y._listeners.length;for(;C-- >0;)y._listeners[C](b);y._listeners=null}),this.promise.then=b=>{let C;const x=new Promise(h=>{y.subscribe(h),C=h}).then(b);return x.cancel=function(){y.unsubscribe(C)},x},a(function(b,C,x){y.reason||(y.reason=new Zt(b,C,x),l(y.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const l=this._listeners.indexOf(a);l!==-1&&this._listeners.splice(l,1)}static source(){let a;return{token:new Fi(function(l){a=l}),cancel:a}}};const Lc=Cc;function _c(o){return function(a){return o.apply(null,a)}}function Mc(o){return K.isObject(o)&&o.isAxiosError===!0}const Jn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jn).forEach(([o,a])=>{Jn[a]=o});const Oc=Jn;function Vi(o){const a=new pn(o),l=xi(pn.prototype.request,a);return K.extend(l,pn.prototype,a,{allOwnKeys:!0}),K.extend(l,a,null,{allOwnKeys:!0}),l.create=function(y){return Vi(It(o,y))},l}const Je=Vi(ir);Je.Axios=pn;Je.CanceledError=Zt;Je.CancelToken=Lc;Je.isCancel=Bi;Je.VERSION=qi;Je.toFormData=yn;Je.AxiosError=Oe;Je.Cancel=Je.CanceledError;Je.all=function(o){return Promise.all(o)};Je.spread=_c;Je.isAxiosError=Mc;Je.mergeConfig=It;Je.AxiosHeaders=vt;Je.formToJSON=o=>Ri(K.isHTMLForm(o)?new FormData(o):o);Je.getAdapter=Ui.getAdapter;Je.HttpStatusCode=Oc;Je.default=Je;const zi=Je,{Axios:Ic,AxiosError:Rc,CanceledError:Bc,isCancel:jc,CancelToken:Uc,VERSION:qc,all:Fc,Cancel:Vc,isAxiosError:zc,spread:Wc,toFormData:Gc,AxiosHeaders:Kc,HttpStatusCode:ln,formToJSON:Jc,getAdapter:Xc,mergeConfig:Zc}=zi;var Dt=null;typeof WebSocket<"u"?Dt=WebSocket:typeof MozWebSocket<"u"?Dt=MozWebSocket:typeof global<"u"?Dt=global.WebSocket||global.MozWebSocket:typeof window<"u"?Dt=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Dt=self.WebSocket||self.MozWebSocket);const Nc=Dt,Fn={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};var si,li,ci,di,ui;const Xn=class z{constructor(a={},l="xhr"){gt(this,"_type","xhr"),gt(this,"_baseURL",((li=(si=globalThis.top)==null?void 0:si.document)==null?void 0:li.baseURI)??((di=(ci=globalThis.parent)==null?void 0:ci.document)==null?void 0:di.baseURI)??((ui=globalThis.location)==null?void 0:ui.origin)??Fn.SIYUAN_DEFAULT_BASE_URL),gt(this,"_token",Fn.SIYUAN_DEFAULT_TOKEN),gt(this,"_axios",zi.create({baseURL:this._baseURL,timeout:Fn.REQUEST_TIMEOUT,headers:{Authorization:`Token ${this._token}`}})),gt(this,"_fetch",fl.create({baseURL:this._baseURL,headers:{Authorization:`Token ${this._token}`}})),this._setClientType(l),this._updateOptions(a,l)}_setClientType(a){this._type=a}_updateOptions(a,l=this._type){switch(this._token=a.token??this._token,this._baseURL=a.baseURL??this._baseURL,l){case"fetch":const y=a;if(y.token){const b="Authorization",C=`Token ${a.token}`;Array.isArray(y.headers)?y.headers.push([b,C]):y.headers instanceof Headers?y.headers.set(b,C):typeof y.headers=="object"?y.headers[b]=C:y.headers={[b]:C},delete a.token}this._fetch=this._fetch.create(y);break;case"xhr":default:for(const[b,C]of Object.entries(a))switch(b){case"token":this._axios.defaults.headers.Authorization=`Token ${this._token}`;break;default:this._axios.defaults[b]=C;break}break}this._baseURL=a.baseURL??this._baseURL}broadcast(a,l,y){const b=(y==null?void 0:y.baseURL)??this._baseURL,C=(y==null?void 0:y.token)??this._token,x=new URLSearchParams(a);x.set("token",C);const h=new URL(b);return h.protocol=h.protocol.replace(/^http/,"ws"),h.pathname=h.pathname.endsWith("/")?`${h.pathname}${z.ws.broadcast.pathname.substring(1)}`:`${h.pathname}${z.ws.broadcast.pathname}`,h.search=x.toString(),new Nc(h,l)}async getConf(a){return await this._request(z.api.system.getConf.pathname,z.api.system.getConf.method,void 0,a)}async upload(a,l){const y=new FormData;return y.append("assetsDirPath",a.assetsDirPath??"/assets/"),a.files.forEach(b=>y.append("file[]",b)),await this._request(z.api.asset.upload.pathname,z.api.asset.upload.method,y,l)}async getBlockAttrs(a,l){return await this._request(z.api.attr.getBlockAttrs.pathname,z.api.attr.getBlockAttrs.method,a,l)}async getBookmarkLabels(a){return await this._request(z.api.attr.getBookmarkLabels.pathname,z.api.attr.getBookmarkLabels.method,void 0,a)}async setBlockAttrs(a,l){return await this._request(z.api.attr.setBlockAttrs.pathname,z.api.attr.setBlockAttrs.method,a,l)}async appendBlock(a,l){return await this._request(z.api.block.appendBlock.pathname,z.api.block.appendBlock.method,a,l)}async deleteBlock(a,l){return await this._request(z.api.block.deleteBlock.pathname,z.api.block.deleteBlock.method,a,l)}async getBlockBreadcrumb(a,l){return await this._request(z.api.block.getBlockBreadcrumb.pathname,z.api.block.getBlockBreadcrumb.method,a,l)}async getBlockDOM(a,l){return await this._request(z.api.block.getBlockDOM.pathname,z.api.block.getBlockDOM.method,a,l)}async getBlockInfo(a,l){return await this._request(z.api.block.getBlockInfo.pathname,z.api.block.getBlockInfo.method,a,l)}async getBlockKramdown(a,l){return await this._request(z.api.block.getBlockKramdown.pathname,z.api.block.getBlockKramdown.method,a,l)}async getChildBlocks(a,l){return await this._request(z.api.block.getChildBlocks.pathname,z.api.block.getChildBlocks.method,a,l)}async getDocInfo(a,l){return await this._request(z.api.block.getDocInfo.pathname,z.api.block.getDocInfo.method,a,l)}async insertBlock(a,l){return await this._request(z.api.block.insertBlock.pathname,z.api.block.insertBlock.method,a,l)}async moveBlock(a,l){return await this._request(z.api.block.moveBlock.pathname,z.api.block.moveBlock.method,a,l)}async prependBlock(a,l){return await this._request(z.api.block.prependBlock.pathname,z.api.block.prependBlock.method,a,l)}async transferBlockRef(a,l){return await this._request(z.api.block.transferBlockRef.pathname,z.api.block.transferBlockRef.method,a,l)}async updateBlock(a,l){return await this._request(z.api.block.updateBlock.pathname,z.api.block.updateBlock.method,a,l)}async channels(a){return await this._request(z.api.broadcast.channels.pathname,z.api.broadcast.channels.method,void 0,a)}async getChannelInfo(a,l){return await this._request(z.api.broadcast.getChannelInfo.pathname,z.api.broadcast.getChannelInfo.method,a,l)}async postMessage(a,l){return await this._request(z.api.broadcast.postMessage.pathname,z.api.broadcast.postMessage.method,a,l)}async pandoc(a,l){return await this._request(z.api.convert.pandoc.pathname,z.api.convert.pandoc.method,a,l)}async exportResources(a,l){return await this._request(z.api.export.exportResources.pathname,z.api.export.exportResources.method,a,l)}async exportMdContent(a,l){return await this._request(z.api.export.exportMdContent.pathname,z.api.export.exportMdContent.method,a,l)}async getFile(a,l="text",y){return await this._request(z.api.file.getFile.pathname,z.api.file.getFile.method,a,y,!1,l)}async putFile(a,l){a.file!==void 0&&!(a.file instanceof File)&&(a.file=new File([a.file],a.path.split("/").pop()));const y=new FormData;for(const[b,C]of Object.entries(a))a.hasOwnProperty(b)&&(C instanceof Blob?y.append(b,C):y.append(b,String(C)));return await this._request(z.api.file.putFile.pathname,z.api.file.putFile.method,y,l)}async readDir(a,l){return await this._request(z.api.file.readDir.pathname,z.api.file.readDir.method,a,l)}async removeFile(a,l){return await this._request(z.api.file.removeFile.pathname,z.api.file.removeFile.method,a,l)}async renameFile(a,l){return await this._request(z.api.file.renameFile.pathname,z.api.file.renameFile.method,a,l)}async createDocWithMd(a,l){return await this._request(z.api.filetree.createDocWithMd.pathname,z.api.filetree.createDocWithMd.method,a,l)}async getDoc(a,l){return await this._request(z.api.filetree.getDoc.pathname,z.api.filetree.getDoc.method,a,l)}async getHPathByID(a,l){return await this._request(z.api.filetree.getHPathByID.pathname,z.api.filetree.getHPathByID.method,a,l)}async getHPathByPath(a,l){return await this._request(z.api.filetree.getHPathByPath.pathname,z.api.filetree.getHPathByPath.method,a,l)}async listDocsByPath(a,l){return await this._request(z.api.filetree.listDocsByPath.pathname,z.api.filetree.listDocsByPath.method,a,l)}async moveDocs(a,l){return await this._request(z.api.filetree.moveDocs.pathname,z.api.filetree.moveDocs.method,a,l)}async removeDoc(a,l){return await this._request(z.api.filetree.removeDoc.pathname,z.api.filetree.removeDoc.method,a,l)}async renameDoc(a,l){return await this._request(z.api.filetree.renameDoc.pathname,z.api.filetree.renameDoc.method,a,l)}async searchDocs(a,l){return await this._request(z.api.filetree.searchDocs.pathname,z.api.filetree.searchDocs.method,a,l)}async getDocHistoryContent(a,l){return await this._request(z.api.history.getDocHistoryContent.pathname,z.api.history.getDocHistoryContent.method,a,l)}async getHistoryItems(a,l){return await this._request(z.api.history.getHistoryItems.pathname,z.api.history.getHistoryItems.method,a,l)}async getShorthand(a,l){return await this._request(z.api.inbox.getShorthand.pathname,z.api.inbox.getShorthand.method,a,l)}async forwardProxy(a,l){return await this._request(z.api.network.forwardProxy.pathname,z.api.network.forwardProxy.method,a,l)}async closeNotebook(a,l){return await this._request(z.api.notebook.closeNotebook.pathname,z.api.notebook.closeNotebook.method,a,l)}async createNotebook(a,l){return await this._request(z.api.notebook.createNotebook.pathname,z.api.notebook.createNotebook.method,a,l)}async getNotebookConf(a,l){return await this._request(z.api.notebook.getNotebookConf.pathname,z.api.notebook.getNotebookConf.method,a,l)}async lsNotebooks(a){return await this._request(z.api.notebook.lsNotebooks.pathname,z.api.notebook.lsNotebooks.method,void 0,a)}async openNotebook(a,l){return await this._request(z.api.notebook.openNotebook.pathname,z.api.notebook.openNotebook.method,a,l)}async removeNotebook(a,l){return await this._request(z.api.notebook.removeNotebook.pathname,z.api.notebook.removeNotebook.method,a,l)}async renameNotebook(a,l){return await this._request(z.api.notebook.renameNotebook.pathname,z.api.notebook.renameNotebook.method,a,l)}async setNotebookConf(a,l){return await this._request(z.api.notebook.setNotebookConf.pathname,z.api.notebook.setNotebookConf.method,a,l)}async pushErrMsg(a,l){return await this._request(z.api.notification.pushErrMsg.pathname,z.api.notification.pushErrMsg.method,a,l)}async pushMsg(a,l){return await this._request(z.api.notification.pushMsg.pathname,z.api.notification.pushMsg.method,a,l)}async sql(a,l){return await this._request(z.api.query.sql.pathname,z.api.query.sql.method,a,l)}async openRepoSnapshotDoc(a,l){return await this._request(z.api.repo.openRepoSnapshotDoc.pathname,z.api.repo.openRepoSnapshotDoc.method,a,l)}async fullTextSearchBlock(a,l){return await this._request(z.api.search.fullTextSearchBlock.pathname,z.api.search.fullTextSearchBlock.method,a,l)}async getSnippet(a,l){return await this._request(z.api.snippet.getSnippet.pathname,z.api.snippet.getSnippet.method,a,l)}async setSnippet(a,l){return await this._request(z.api.snippet.setSnippet.pathname,z.api.snippet.setSnippet.method,a,l)}async getRecentDocs(a){return await this._request(z.api.storage.getRecentDocs.pathname,z.api.storage.getRecentDocs.method,void 0,a)}async bootProgress(a){return await this._request(z.api.system.bootProgress.pathname,z.api.system.bootProgress.method,void 0,a)}async currentTime(a){return await this._request(z.api.system.currentTime.pathname,z.api.system.currentTime.method,void 0,a)}async version(a){return await this._request(z.api.system.version.pathname,z.api.system.version.method,void 0,a)}async render(a,l){return await this._request(z.api.template.render.pathname,z.api.template.render.method,a,l)}async renderSprig(a,l){return await this._request(z.api.template.renderSprig.pathname,z.api.template.renderSprig.method,a,l)}async _request(a,l,y,b,C=!0,x="json"){try{switch((b==null?void 0:b.type)??this._type){case"fetch":{const h=b==null?void 0:b.options;x=(()=>{switch(x){case"arraybuffer":return"arrayBuffer";case"document":return"text";default:return x}})();const v=await this._fetch(a,{method:l,body:y,responseType:x,onResponse:async g=>{switch(g.response.status){case ln.Ok:break;case ln.Accepted:a===z.api.file.getFile.pathname&&this._parseFetchResponse(g.response._data);break;default:break}},...h});return C&&x==="json"&&typeof v=="object"?this._parseFetchResponse(v):v}case"xhr":default:{const h=b==null?void 0:b.options;x=(()=>{switch(x){case"arrayBuffer":return"arraybuffer";default:return x}})();const v=await this._axios.request({url:a,method:l,data:y,responseType:x,...h});switch(v.status){case ln.Ok:return C&&x==="json"&&typeof v.data=="object"?this._parseAxiosResponse(v):v.data;case ln.Accepted:return a===z.api.file.getFile.pathname?this._parseAxiosResponse(v):v.data;default:throw new hl(v)}}}}catch(h){throw h}}_parseFetchResponse(a){if(a.code===0)return a;throw new Xr(a)}_parseAxiosResponse(a){if(a.data.code===0)return a.data;throw new Xr(a.data,a)}};gt(Xn,"ws",{broadcast:{pathname:"/ws/broadcast"}}),gt(Xn,"api",{asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getBlockDOM:{pathname:"/api/block/getBlockDOM",method:"POST"},getBlockInfo:{pathname:"/api/block/getBlockInfo",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"}},broadcast:{channels:{pathname:"/api/broadcast/channels",method:"GET"},getChannelInfo:{pathname:"/api/broadcast/getChannelInfo",method:"POST"},postMessage:{pathname:"/api/broadcast/postMessage",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"},exportResources:{pathname:"/api/export/exportResources",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getDoc:{pathname:"/api/filetree/getDoc",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},history:{getDocHistoryContent:{pathname:"/api/history/getDocHistoryContent",method:"POST"},getHistoryItems:{pathname:"/api/history/getHistoryItems",method:"POST"}},inbox:{getShorthand:{pathname:"/api/inbox/getShorthand",method:"POST"}},network:{forwardProxy:{pathname:"/api/network/forwardProxy",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},repo:{openRepoSnapshotDoc:{pathname:"/api/repo/openRepoSnapshotDoc",method:"POST"}},search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},snippet:{getSnippet:{pathname:"/api/snippet/getSnippet",method:"POST"},setSnippet:{pathname:"/api/snippet/setSnippet",method:"POST"}},storage:{getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},version:{pathname:"/api/system/version",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});let Hc=Xn;const Wi=new Map,Gi="./../libs/vditor",ar=ja(location.pathname,`/plugins/${Yn.name}/iframes/vditor.html`),Ki=new Da(`${Yn.name}-vditor-${(()=>{switch(!0){case Ra:return"window";case Ia:return"iframe";case Pa:return"popup";default:return"unknow"}})()}`),Ji=new Hc({baseURL:`${globalThis.location.origin}${ar}/`});var Et=new yi({target:globalThis.document.body,props:{plugin:{name:Yn.name,i18n:Ha,logger:Ki,client:Ji},src2url:Wi,baseURL:Gi,rootURL:ar}});const Ht=new ws(()=>{Ht.addEventListener("vditor-init",o=>{const{data:a}=o.data;Et&&Et.$destroy(),Et=new yi({target:globalThis.document.body,props:{plugin:{name:a.name,i18n:a.i18n,logger:Ki,client:Ji},src2url:Wi,baseURL:Gi,rootURL:ar,path:a.path,vditorID:a.vditorID,assetsDirPath:a.assetsDirPath,assetsUploadMode:a.assetsUploadMode,options:a.options,value:a.value,theme:a.theme,codeBlockThemeLight:a.codeBlockThemeLight,codeBlockThemeDark:a.codeBlockThemeDark,debug:a.debug}}),Et.$on("changed",l=>Ht.changed(l.detail)),Et.$on("save",l=>Ht.save(l.detail)),Et.$on("open-link",l=>Ht.openLink(l.detail))}),Ht.addEventListener("vditor-set",o=>{const{data:a}=o.data;Et&&Et.$set(a)}),Ht.ready()});
