import{g as vi,c as Ro,i as Ho,S as Bo,a as No,s as Io,e as jo,b as Bn,d as Uo,n as Jr,f as Fo,h as qo,o as Wo,u as Vo,k as zo,v as Ko,l as Go,B as Jo,p as Qn,q as Zo,L as Xo,r as Yo,j as Qo,F as $o}from"../chunks/slave-13a75a80.js";function es(o,r){return o.startsWith(r)?o.slice(r.length):o}function ts(o,r){return o.endsWith(r)?o.slice(0,-r.length):o}/*!
 * Vditor v3.9.6 - A markdown editor written in TypeScript.
 *
 * MIT License
 *
 * Copyright (c) 2018-present B3log 开源, b3log.org
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */var ns={471:o=>{var r=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},s=-1,m=1,y=0;r.Diff=function(c,u){return[c,u]},r.prototype.diff_main=function(c,u,f,b){typeof b>"u"&&(this.Diff_Timeout<=0?b=Number.MAX_VALUE:b=new Date().getTime()+this.Diff_Timeout*1e3);var v=b;if(c==null||u==null)throw new Error("Null input. (diff_main)");if(c==u)return c?[new r.Diff(y,c)]:[];typeof f>"u"&&(f=!0);var d=f,k=this.diff_commonPrefix(c,u),C=c.substring(0,k);c=c.substring(k),u=u.substring(k),k=this.diff_commonSuffix(c,u);var x=c.substring(c.length-k);c=c.substring(0,c.length-k),u=u.substring(0,u.length-k);var L=this.diff_compute_(c,u,d,v);return C&&L.unshift(new r.Diff(y,C)),x&&L.push(new r.Diff(y,x)),this.diff_cleanupMerge(L),L},r.prototype.diff_compute_=function(c,u,f,b){var v;if(!c)return[new r.Diff(m,u)];if(!u)return[new r.Diff(s,c)];var d=c.length>u.length?c:u,k=c.length>u.length?u:c,C=d.indexOf(k);if(C!=-1)return v=[new r.Diff(m,d.substring(0,C)),new r.Diff(y,k),new r.Diff(m,d.substring(C+k.length))],c.length>u.length&&(v[0][0]=v[2][0]=s),v;if(k.length==1)return[new r.Diff(s,c),new r.Diff(m,u)];var x=this.diff_halfMatch_(c,u);if(x){var L=x[0],w=x[1],O=x[2],I=x[3],W=x[4],z=this.diff_main(L,O,f,b),ie=this.diff_main(w,I,f,b);return z.concat([new r.Diff(y,W)],ie)}return f&&c.length>100&&u.length>100?this.diff_lineMode_(c,u,b):this.diff_bisect_(c,u,b)},r.prototype.diff_lineMode_=function(c,u,f){var b=this.diff_linesToChars_(c,u);c=b.chars1,u=b.chars2;var v=b.lineArray,d=this.diff_main(c,u,!1,f);this.diff_charsToLines_(d,v),this.diff_cleanupSemantic(d),d.push(new r.Diff(y,""));for(var k=0,C=0,x=0,L="",w="";k<d.length;){switch(d[k][0]){case m:x++,w+=d[k][1];break;case s:C++,L+=d[k][1];break;case y:if(C>=1&&x>=1){d.splice(k-C-x,C+x),k=k-C-x;for(var O=this.diff_main(L,w,!1,f),I=O.length-1;I>=0;I--)d.splice(k,0,O[I]);k=k+O.length}x=0,C=0,L="",w="";break}k++}return d.pop(),d},r.prototype.diff_bisect_=function(c,u,f){for(var b=c.length,v=u.length,d=Math.ceil((b+v)/2),k=d,C=2*d,x=new Array(C),L=new Array(C),w=0;w<C;w++)x[w]=-1,L[w]=-1;x[k+1]=0,L[k+1]=0;for(var O=b-v,I=O%2!=0,W=0,z=0,ie=0,ae=0,oe=0;oe<d&&!(new Date().getTime()>f);oe++){for(var pe=-oe+W;pe<=oe-z;pe+=2){var $=k+pe,ye;pe==-oe||pe!=oe&&x[$-1]<x[$+1]?ye=x[$+1]:ye=x[$-1]+1;for(var _e=ye-pe;ye<b&&_e<v&&c.charAt(ye)==u.charAt(_e);)ye++,_e++;if(x[$]=ye,ye>b)z+=2;else if(_e>v)W+=2;else if(I){var Le=k+O-pe;if(Le>=0&&Le<C&&L[Le]!=-1){var Te=b-L[Le];if(ye>=Te)return this.diff_bisectSplit_(c,u,ye,_e,f)}}}for(var Pe=-oe+ie;Pe<=oe-ae;Pe+=2){var Le=k+Pe,Te;Pe==-oe||Pe!=oe&&L[Le-1]<L[Le+1]?Te=L[Le+1]:Te=L[Le-1]+1;for(var be=Te-Pe;Te<b&&be<v&&c.charAt(b-Te-1)==u.charAt(v-be-1);)Te++,be++;if(L[Le]=Te,Te>b)ae+=2;else if(be>v)ie+=2;else if(!I){var $=k+O-Pe;if($>=0&&$<C&&x[$]!=-1){var ye=x[$],_e=k+ye-$;if(Te=b-Te,ye>=Te)return this.diff_bisectSplit_(c,u,ye,_e,f)}}}}return[new r.Diff(s,c),new r.Diff(m,u)]},r.prototype.diff_bisectSplit_=function(c,u,f,b,v){var d=c.substring(0,f),k=u.substring(0,b),C=c.substring(f),x=u.substring(b),L=this.diff_main(d,k,!1,v),w=this.diff_main(C,x,!1,v);return L.concat(w)},r.prototype.diff_linesToChars_=function(c,u){var f=[],b={};f[0]="";function v(x){for(var L="",w=0,O=-1,I=f.length;O<x.length-1;){O=x.indexOf(`
`,w),O==-1&&(O=x.length-1);var W=x.substring(w,O+1);(b.hasOwnProperty?b.hasOwnProperty(W):b[W]!==void 0)?L+=String.fromCharCode(b[W]):(I==d&&(W=x.substring(w),O=x.length),L+=String.fromCharCode(I),b[W]=I,f[I++]=W),w=O+1}return L}var d=4e4,k=v(c);d=65535;var C=v(u);return{chars1:k,chars2:C,lineArray:f}},r.prototype.diff_charsToLines_=function(c,u){for(var f=0;f<c.length;f++){for(var b=c[f][1],v=[],d=0;d<b.length;d++)v[d]=u[b.charCodeAt(d)];c[f][1]=v.join("")}},r.prototype.diff_commonPrefix=function(c,u){if(!c||!u||c.charAt(0)!=u.charAt(0))return 0;for(var f=0,b=Math.min(c.length,u.length),v=b,d=0;f<v;)c.substring(d,v)==u.substring(d,v)?(f=v,d=f):b=v,v=Math.floor((b-f)/2+f);return v},r.prototype.diff_commonSuffix=function(c,u){if(!c||!u||c.charAt(c.length-1)!=u.charAt(u.length-1))return 0;for(var f=0,b=Math.min(c.length,u.length),v=b,d=0;f<v;)c.substring(c.length-v,c.length-d)==u.substring(u.length-v,u.length-d)?(f=v,d=f):b=v,v=Math.floor((b-f)/2+f);return v},r.prototype.diff_commonOverlap_=function(c,u){var f=c.length,b=u.length;if(f==0||b==0)return 0;f>b?c=c.substring(f-b):f<b&&(u=u.substring(0,f));var v=Math.min(f,b);if(c==u)return v;for(var d=0,k=1;;){var C=c.substring(v-k),x=u.indexOf(C);if(x==-1)return d;k+=x,(x==0||c.substring(v-k)==u.substring(0,k))&&(d=k,k++)}},r.prototype.diff_halfMatch_=function(c,u){if(this.Diff_Timeout<=0)return null;var f=c.length>u.length?c:u,b=c.length>u.length?u:c;if(f.length<4||b.length*2<f.length)return null;var v=this;function d(z,ie,ae){for(var oe=z.substring(ae,ae+Math.floor(z.length/4)),pe=-1,$="",ye,_e,Le,Te;(pe=ie.indexOf(oe,pe+1))!=-1;){var Pe=v.diff_commonPrefix(z.substring(ae),ie.substring(pe)),be=v.diff_commonSuffix(z.substring(0,ae),ie.substring(0,pe));$.length<be+Pe&&($=ie.substring(pe-be,pe)+ie.substring(pe,pe+Pe),ye=z.substring(0,ae-be),_e=z.substring(ae+Pe),Le=ie.substring(0,pe-be),Te=ie.substring(pe+Pe))}return $.length*2>=z.length?[ye,_e,Le,Te,$]:null}var k=d(f,b,Math.ceil(f.length/4)),C=d(f,b,Math.ceil(f.length/2)),x;if(!k&&!C)return null;C?k?x=k[4].length>C[4].length?k:C:x=C:x=k;var L,w,O,I;c.length>u.length?(L=x[0],w=x[1],O=x[2],I=x[3]):(O=x[0],I=x[1],L=x[2],w=x[3]);var W=x[4];return[L,w,O,I,W]},r.prototype.diff_cleanupSemantic=function(c){for(var u=!1,f=[],b=0,v=null,d=0,k=0,C=0,x=0,L=0;d<c.length;)c[d][0]==y?(f[b++]=d,k=x,C=L,x=0,L=0,v=c[d][1]):(c[d][0]==m?x+=c[d][1].length:L+=c[d][1].length,v&&v.length<=Math.max(k,C)&&v.length<=Math.max(x,L)&&(c.splice(f[b-1],0,new r.Diff(s,v)),c[f[b-1]+1][0]=m,b--,b--,d=b>0?f[b-1]:-1,k=0,C=0,x=0,L=0,v=null,u=!0)),d++;for(u&&this.diff_cleanupMerge(c),this.diff_cleanupSemanticLossless(c),d=1;d<c.length;){if(c[d-1][0]==s&&c[d][0]==m){var w=c[d-1][1],O=c[d][1],I=this.diff_commonOverlap_(w,O),W=this.diff_commonOverlap_(O,w);I>=W?(I>=w.length/2||I>=O.length/2)&&(c.splice(d,0,new r.Diff(y,O.substring(0,I))),c[d-1][1]=w.substring(0,w.length-I),c[d+1][1]=O.substring(I),d++):(W>=w.length/2||W>=O.length/2)&&(c.splice(d,0,new r.Diff(y,w.substring(0,W))),c[d-1][0]=m,c[d-1][1]=O.substring(0,O.length-W),c[d+1][0]=s,c[d+1][1]=w.substring(W),d++),d++}d++}},r.prototype.diff_cleanupSemanticLossless=function(c){function u(W,z){if(!W||!z)return 6;var ie=W.charAt(W.length-1),ae=z.charAt(0),oe=ie.match(r.nonAlphaNumericRegex_),pe=ae.match(r.nonAlphaNumericRegex_),$=oe&&ie.match(r.whitespaceRegex_),ye=pe&&ae.match(r.whitespaceRegex_),_e=$&&ie.match(r.linebreakRegex_),Le=ye&&ae.match(r.linebreakRegex_),Te=_e&&W.match(r.blanklineEndRegex_),Pe=Le&&z.match(r.blanklineStartRegex_);return Te||Pe?5:_e||Le?4:oe&&!$&&ye?3:$||ye?2:oe||pe?1:0}for(var f=1;f<c.length-1;){if(c[f-1][0]==y&&c[f+1][0]==y){var b=c[f-1][1],v=c[f][1],d=c[f+1][1],k=this.diff_commonSuffix(b,v);if(k){var C=v.substring(v.length-k);b=b.substring(0,b.length-k),v=C+v.substring(0,v.length-k),d=C+d}for(var x=b,L=v,w=d,O=u(b,v)+u(v,d);v.charAt(0)===d.charAt(0);){b+=v.charAt(0),v=v.substring(1)+d.charAt(0),d=d.substring(1);var I=u(b,v)+u(v,d);I>=O&&(O=I,x=b,L=v,w=d)}c[f-1][1]!=x&&(x?c[f-1][1]=x:(c.splice(f-1,1),f--),c[f][1]=L,w?c[f+1][1]=w:(c.splice(f+1,1),f--))}f++}},r.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,r.whitespaceRegex_=/\s/,r.linebreakRegex_=/[\r\n]/,r.blanklineEndRegex_=/\n\r?\n$/,r.blanklineStartRegex_=/^\r?\n\r?\n/,r.prototype.diff_cleanupEfficiency=function(c){for(var u=!1,f=[],b=0,v=null,d=0,k=!1,C=!1,x=!1,L=!1;d<c.length;)c[d][0]==y?(c[d][1].length<this.Diff_EditCost&&(x||L)?(f[b++]=d,k=x,C=L,v=c[d][1]):(b=0,v=null),x=L=!1):(c[d][0]==s?L=!0:x=!0,v&&(k&&C&&x&&L||v.length<this.Diff_EditCost/2&&k+C+x+L==3)&&(c.splice(f[b-1],0,new r.Diff(s,v)),c[f[b-1]+1][0]=m,b--,v=null,k&&C?(x=L=!0,b=0):(b--,d=b>0?f[b-1]:-1,x=L=!1),u=!0)),d++;u&&this.diff_cleanupMerge(c)},r.prototype.diff_cleanupMerge=function(c){c.push(new r.Diff(y,""));for(var u=0,f=0,b=0,v="",d="",k;u<c.length;)switch(c[u][0]){case m:b++,d+=c[u][1],u++;break;case s:f++,v+=c[u][1],u++;break;case y:f+b>1?(f!==0&&b!==0&&(k=this.diff_commonPrefix(d,v),k!==0&&(u-f-b>0&&c[u-f-b-1][0]==y?c[u-f-b-1][1]+=d.substring(0,k):(c.splice(0,0,new r.Diff(y,d.substring(0,k))),u++),d=d.substring(k),v=v.substring(k)),k=this.diff_commonSuffix(d,v),k!==0&&(c[u][1]=d.substring(d.length-k)+c[u][1],d=d.substring(0,d.length-k),v=v.substring(0,v.length-k))),u-=f+b,c.splice(u,f+b),v.length&&(c.splice(u,0,new r.Diff(s,v)),u++),d.length&&(c.splice(u,0,new r.Diff(m,d)),u++),u++):u!==0&&c[u-1][0]==y?(c[u-1][1]+=c[u][1],c.splice(u,1)):u++,b=0,f=0,v="",d="";break}c[c.length-1][1]===""&&c.pop();var C=!1;for(u=1;u<c.length-1;)c[u-1][0]==y&&c[u+1][0]==y&&(c[u][1].substring(c[u][1].length-c[u-1][1].length)==c[u-1][1]?(c[u][1]=c[u-1][1]+c[u][1].substring(0,c[u][1].length-c[u-1][1].length),c[u+1][1]=c[u-1][1]+c[u+1][1],c.splice(u-1,1),C=!0):c[u][1].substring(0,c[u+1][1].length)==c[u+1][1]&&(c[u-1][1]+=c[u+1][1],c[u][1]=c[u][1].substring(c[u+1][1].length)+c[u+1][1],c.splice(u+1,1),C=!0)),u++;C&&this.diff_cleanupMerge(c)},r.prototype.diff_xIndex=function(c,u){var f=0,b=0,v=0,d=0,k;for(k=0;k<c.length&&(c[k][0]!==m&&(f+=c[k][1].length),c[k][0]!==s&&(b+=c[k][1].length),!(f>u));k++)v=f,d=b;return c.length!=k&&c[k][0]===s?d:d+(u-v)},r.prototype.diff_prettyHtml=function(c){for(var u=[],f=/&/g,b=/</g,v=/>/g,d=/\n/g,k=0;k<c.length;k++){var C=c[k][0],x=c[k][1],L=x.replace(f,"&amp;").replace(b,"&lt;").replace(v,"&gt;").replace(d,"&para;<br>");switch(C){case m:u[k]='<ins style="background:#e6ffe6;">'+L+"</ins>";break;case s:u[k]='<del style="background:#ffe6e6;">'+L+"</del>";break;case y:u[k]="<span>"+L+"</span>";break}}return u.join("")},r.prototype.diff_text1=function(c){for(var u=[],f=0;f<c.length;f++)c[f][0]!==m&&(u[f]=c[f][1]);return u.join("")},r.prototype.diff_text2=function(c){for(var u=[],f=0;f<c.length;f++)c[f][0]!==s&&(u[f]=c[f][1]);return u.join("")},r.prototype.diff_levenshtein=function(c){for(var u=0,f=0,b=0,v=0;v<c.length;v++){var d=c[v][0],k=c[v][1];switch(d){case m:f+=k.length;break;case s:b+=k.length;break;case y:u+=Math.max(f,b),f=0,b=0;break}}return u+=Math.max(f,b),u},r.prototype.diff_toDelta=function(c){for(var u=[],f=0;f<c.length;f++)switch(c[f][0]){case m:u[f]="+"+encodeURI(c[f][1]);break;case s:u[f]="-"+c[f][1].length;break;case y:u[f]="="+c[f][1].length;break}return u.join("	").replace(/%20/g," ")},r.prototype.diff_fromDelta=function(c,u){for(var f=[],b=0,v=0,d=u.split(/\t/g),k=0;k<d.length;k++){var C=d[k].substring(1);switch(d[k].charAt(0)){case"+":try{f[b++]=new r.Diff(m,decodeURI(C))}catch{throw new Error("Illegal escape in diff_fromDelta: "+C)}break;case"-":case"=":var x=parseInt(C,10);if(isNaN(x)||x<0)throw new Error("Invalid number in diff_fromDelta: "+C);var L=c.substring(v,v+=x);d[k].charAt(0)=="="?f[b++]=new r.Diff(y,L):f[b++]=new r.Diff(s,L);break;default:if(d[k])throw new Error("Invalid diff operation in diff_fromDelta: "+d[k])}}if(v!=c.length)throw new Error("Delta length ("+v+") does not equal source text length ("+c.length+").");return f},r.prototype.match_main=function(c,u,f){if(c==null||u==null||f==null)throw new Error("Null input. (match_main)");return f=Math.max(0,Math.min(f,c.length)),c==u?0:c.length?c.substring(f,f+u.length)==u?f:this.match_bitap_(c,u,f):-1},r.prototype.match_bitap_=function(c,u,f){if(u.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var b=this.match_alphabet_(u),v=this;function d(ye,_e){var Le=ye/u.length,Te=Math.abs(f-_e);return v.Match_Distance?Le+Te/v.Match_Distance:Te?1:Le}var k=this.Match_Threshold,C=c.indexOf(u,f);C!=-1&&(k=Math.min(d(0,C),k),C=c.lastIndexOf(u,f+u.length),C!=-1&&(k=Math.min(d(0,C),k)));var x=1<<u.length-1;C=-1;for(var L,w,O=u.length+c.length,I,W=0;W<u.length;W++){for(L=0,w=O;L<w;)d(W,f+w)<=k?L=w:O=w,w=Math.floor((O-L)/2+L);O=w;var z=Math.max(1,f-w+1),ie=Math.min(f+w,c.length)+u.length,ae=Array(ie+2);ae[ie+1]=(1<<W)-1;for(var oe=ie;oe>=z;oe--){var pe=b[c.charAt(oe-1)];if(W===0?ae[oe]=(ae[oe+1]<<1|1)&pe:ae[oe]=(ae[oe+1]<<1|1)&pe|((I[oe+1]|I[oe])<<1|1)|I[oe+1],ae[oe]&x){var $=d(W,oe-1);if($<=k)if(k=$,C=oe-1,C>f)z=Math.max(1,2*f-C);else break}}if(d(W+1,f)>k)break;I=ae}return C},r.prototype.match_alphabet_=function(c){for(var u={},f=0;f<c.length;f++)u[c.charAt(f)]=0;for(var f=0;f<c.length;f++)u[c.charAt(f)]|=1<<c.length-f-1;return u},r.prototype.patch_addContext_=function(c,u){if(u.length!=0){if(c.start2===null)throw Error("patch not initialized");for(var f=u.substring(c.start2,c.start2+c.length1),b=0;u.indexOf(f)!=u.lastIndexOf(f)&&f.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)b+=this.Patch_Margin,f=u.substring(c.start2-b,c.start2+c.length1+b);b+=this.Patch_Margin;var v=u.substring(c.start2-b,c.start2);v&&c.diffs.unshift(new r.Diff(y,v));var d=u.substring(c.start2+c.length1,c.start2+c.length1+b);d&&c.diffs.push(new r.Diff(y,d)),c.start1-=v.length,c.start2-=v.length,c.length1+=v.length+d.length,c.length2+=v.length+d.length}},r.prototype.patch_make=function(c,u,f){var b,v;if(typeof c=="string"&&typeof u=="string"&&typeof f>"u")b=c,v=this.diff_main(b,u,!0),v.length>2&&(this.diff_cleanupSemantic(v),this.diff_cleanupEfficiency(v));else if(c&&typeof c=="object"&&typeof u>"u"&&typeof f>"u")v=c,b=this.diff_text1(v);else if(typeof c=="string"&&u&&typeof u=="object"&&typeof f>"u")b=c,v=u;else if(typeof c=="string"&&typeof u=="string"&&f&&typeof f=="object")b=c,v=f;else throw new Error("Unknown call format to patch_make.");if(v.length===0)return[];for(var d=[],k=new r.patch_obj,C=0,x=0,L=0,w=b,O=b,I=0;I<v.length;I++){var W=v[I][0],z=v[I][1];switch(!C&&W!==y&&(k.start1=x,k.start2=L),W){case m:k.diffs[C++]=v[I],k.length2+=z.length,O=O.substring(0,L)+z+O.substring(L);break;case s:k.length1+=z.length,k.diffs[C++]=v[I],O=O.substring(0,L)+O.substring(L+z.length);break;case y:z.length<=2*this.Patch_Margin&&C&&v.length!=I+1?(k.diffs[C++]=v[I],k.length1+=z.length,k.length2+=z.length):z.length>=2*this.Patch_Margin&&C&&(this.patch_addContext_(k,w),d.push(k),k=new r.patch_obj,C=0,w=O,x=L);break}W!==m&&(x+=z.length),W!==s&&(L+=z.length)}return C&&(this.patch_addContext_(k,w),d.push(k)),d},r.prototype.patch_deepCopy=function(c){for(var u=[],f=0;f<c.length;f++){var b=c[f],v=new r.patch_obj;v.diffs=[];for(var d=0;d<b.diffs.length;d++)v.diffs[d]=new r.Diff(b.diffs[d][0],b.diffs[d][1]);v.start1=b.start1,v.start2=b.start2,v.length1=b.length1,v.length2=b.length2,u[f]=v}return u},r.prototype.patch_apply=function(c,u){if(c.length==0)return[u,[]];c=this.patch_deepCopy(c);var f=this.patch_addPadding(c);u=f+u+f,this.patch_splitMax(c);for(var b=0,v=[],d=0;d<c.length;d++){var k=c[d].start2+b,C=this.diff_text1(c[d].diffs),x,L=-1;if(C.length>this.Match_MaxBits?(x=this.match_main(u,C.substring(0,this.Match_MaxBits),k),x!=-1&&(L=this.match_main(u,C.substring(C.length-this.Match_MaxBits),k+C.length-this.Match_MaxBits),(L==-1||x>=L)&&(x=-1))):x=this.match_main(u,C,k),x==-1)v[d]=!1,b-=c[d].length2-c[d].length1;else{v[d]=!0,b=x-k;var w;if(L==-1?w=u.substring(x,x+C.length):w=u.substring(x,L+this.Match_MaxBits),C==w)u=u.substring(0,x)+this.diff_text2(c[d].diffs)+u.substring(x+C.length);else{var O=this.diff_main(C,w,!1);if(C.length>this.Match_MaxBits&&this.diff_levenshtein(O)/C.length>this.Patch_DeleteThreshold)v[d]=!1;else{this.diff_cleanupSemanticLossless(O);for(var I=0,W,z=0;z<c[d].diffs.length;z++){var ie=c[d].diffs[z];ie[0]!==y&&(W=this.diff_xIndex(O,I)),ie[0]===m?u=u.substring(0,x+W)+ie[1]+u.substring(x+W):ie[0]===s&&(u=u.substring(0,x+W)+u.substring(x+this.diff_xIndex(O,I+ie[1].length))),ie[0]!==s&&(I+=ie[1].length)}}}}}return u=u.substring(f.length,u.length-f.length),[u,v]},r.prototype.patch_addPadding=function(c){for(var u=this.Patch_Margin,f="",b=1;b<=u;b++)f+=String.fromCharCode(b);for(var b=0;b<c.length;b++)c[b].start1+=u,c[b].start2+=u;var v=c[0],d=v.diffs;if(d.length==0||d[0][0]!=y)d.unshift(new r.Diff(y,f)),v.start1-=u,v.start2-=u,v.length1+=u,v.length2+=u;else if(u>d[0][1].length){var k=u-d[0][1].length;d[0][1]=f.substring(d[0][1].length)+d[0][1],v.start1-=k,v.start2-=k,v.length1+=k,v.length2+=k}if(v=c[c.length-1],d=v.diffs,d.length==0||d[d.length-1][0]!=y)d.push(new r.Diff(y,f)),v.length1+=u,v.length2+=u;else if(u>d[d.length-1][1].length){var k=u-d[d.length-1][1].length;d[d.length-1][1]+=f.substring(0,k),v.length1+=k,v.length2+=k}return f},r.prototype.patch_splitMax=function(c){for(var u=this.Match_MaxBits,f=0;f<c.length;f++)if(!(c[f].length1<=u)){var b=c[f];c.splice(f--,1);for(var v=b.start1,d=b.start2,k="";b.diffs.length!==0;){var C=new r.patch_obj,x=!0;for(C.start1=v-k.length,C.start2=d-k.length,k!==""&&(C.length1=C.length2=k.length,C.diffs.push(new r.Diff(y,k)));b.diffs.length!==0&&C.length1<u-this.Patch_Margin;){var L=b.diffs[0][0],w=b.diffs[0][1];L===m?(C.length2+=w.length,d+=w.length,C.diffs.push(b.diffs.shift()),x=!1):L===s&&C.diffs.length==1&&C.diffs[0][0]==y&&w.length>2*u?(C.length1+=w.length,v+=w.length,x=!1,C.diffs.push(new r.Diff(L,w)),b.diffs.shift()):(w=w.substring(0,u-C.length1-this.Patch_Margin),C.length1+=w.length,v+=w.length,L===y?(C.length2+=w.length,d+=w.length):x=!1,C.diffs.push(new r.Diff(L,w)),w==b.diffs[0][1]?b.diffs.shift():b.diffs[0][1]=b.diffs[0][1].substring(w.length))}k=this.diff_text2(C.diffs),k=k.substring(k.length-this.Patch_Margin);var O=this.diff_text1(b.diffs).substring(0,this.Patch_Margin);O!==""&&(C.length1+=O.length,C.length2+=O.length,C.diffs.length!==0&&C.diffs[C.diffs.length-1][0]===y?C.diffs[C.diffs.length-1][1]+=O:C.diffs.push(new r.Diff(y,O))),x||c.splice(++f,0,C)}}},r.prototype.patch_toText=function(c){for(var u=[],f=0;f<c.length;f++)u[f]=c[f];return u.join("")},r.prototype.patch_fromText=function(c){var u=[];if(!c)return u;for(var f=c.split(`
`),b=0,v=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;b<f.length;){var d=f[b].match(v);if(!d)throw new Error("Invalid patch string: "+f[b]);var k=new r.patch_obj;for(u.push(k),k.start1=parseInt(d[1],10),d[2]===""?(k.start1--,k.length1=1):d[2]=="0"?k.length1=0:(k.start1--,k.length1=parseInt(d[2],10)),k.start2=parseInt(d[3],10),d[4]===""?(k.start2--,k.length2=1):d[4]=="0"?k.length2=0:(k.start2--,k.length2=parseInt(d[4],10)),b++;b<f.length;){var C=f[b].charAt(0);try{var x=decodeURI(f[b].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+x)}if(C=="-")k.diffs.push(new r.Diff(s,x));else if(C=="+")k.diffs.push(new r.Diff(m,x));else if(C==" ")k.diffs.push(new r.Diff(y,x));else{if(C=="@")break;if(C!=="")throw new Error('Invalid patch mode "'+C+'" in: '+x)}b++}}return u},r.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},r.patch_obj.prototype.toString=function(){var c,u;this.length1===0?c=this.start1+",0":this.length1==1?c=this.start1+1:c=this.start1+1+","+this.length1,this.length2===0?u=this.start2+",0":this.length2==1?u=this.start2+1:u=this.start2+1+","+this.length2;for(var f=["@@ -"+c+" +"+u+` @@
`],b,v=0;v<this.diffs.length;v++){switch(this.diffs[v][0]){case m:b="+";break;case s:b="-";break;case y:b=" ";break}f[v+1]=b+encodeURI(this.diffs[v][1])+`
`}return f.join("").replace(/%20/g," ")},o.exports=r,o.exports.diff_match_patch=r,o.exports.DIFF_DELETE=s,o.exports.DIFF_INSERT=m,o.exports.DIFF_EQUAL=y},872:(o,r,s)=>{s.d(r,{Z:()=>Ge});var m=s(478),y=s(156),c=s(314),u=s(730),f=s(66),b=s(218),v=s(702),d=function(G){G===void 0&&(G=document);var U=function(F){var N=document.createElement("img");N.src=F.getAttribute("data-src"),N.addEventListener("load",function(){!F.getAttribute("style")&&!F.getAttribute("class")&&!F.getAttribute("width")&&!F.getAttribute("height")&&N.naturalHeight>N.naturalWidth&&N.naturalWidth/N.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&N.naturalHeight>window.innerHeight-40&&(F.style.height=window.innerHeight-40+"px"),F.src=N.src}),F.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return G.querySelectorAll("img").forEach(function(F){F.getAttribute("data-src")&&U(F)}),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),G.querySelectorAll("img").forEach(function(F){window.vditorImageIntersectionObserver.observe(F)})):(window.vditorImageIntersectionObserver=new IntersectionObserver(function(F){F.forEach(function(N){(typeof N.isIntersecting>"u"?N.intersectionRatio!==0:N.isIntersecting)&&N.target.getAttribute("data-src")&&U(N.target)})}),G.querySelectorAll("img").forEach(function(F){window.vditorImageIntersectionObserver.observe(F)}))},k=s(466),C=s(554),x=s(40),L=s(563),w=s(749),O=s(818),I=s(408),W=s(54),z=s(227),ie=s(526),ae=s(827),oe=s(640),pe=function(G){document.querySelectorAll(".vditor-anchor").forEach(function(U){G===1&&U.classList.add("vditor-anchor--left"),U.onclick=function(){var F=U.getAttribute("href").substr(1),N=document.getElementById("vditorAnchor-"+F).offsetTop;document.querySelector("html").scrollTop=N}}),window.onhashchange=function(){var U=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));U&&(document.querySelector("html").scrollTop=U.offsetTop)}},$=s(895),ye=s(393),_e=function(G,U){if(U===void 0&&(U="zh_CN"),!(typeof speechSynthesis>"u"||typeof SpeechSynthesisUtterance>"u")){var F='<svg><use xlink:href="#vditor-icon-play"></use></svg>',N='<svg><use xlink:href="#vditor-icon-pause"></use></svg>';document.getElementById("vditorIconScript")||(F='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',N='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>');var K=document.querySelector(".vditor-speech");if(!K){K=document.createElement("div"),K.className="vditor-speech",document.body.insertAdjacentElement("beforeend",K);var ee=function(){var ue=speechSynthesis.getVoices(),he,se;return ue.forEach(function(Me){Me.lang===U.replace("_","-")&&(he=Me),Me.default&&(se=Me)}),he||(he=se),he};speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=ee);var le=ee();K.onclick=function(){if(K.className==="vditor-speech"){var ue=new SpeechSynthesisUtterance(K.getAttribute("data-text"));ue.voice=le,ue.onend=function(){K.className="vditor-speech",speechSynthesis.cancel(),K.innerHTML=F},speechSynthesis.speak(ue),K.className="vditor-speech vditor-speech--current",K.innerHTML=N}else speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),K.innerHTML=N):(speechSynthesis.pause(),K.innerHTML=F));(0,ye.Hc)(window.vditorSpeechRange)},document.body.addEventListener("click",function(){getSelection().toString().trim()===""&&K.style.display==="block"&&(K.className="vditor-speech",speechSynthesis.cancel(),K.style.display="none")})}G.addEventListener("mouseup",function(ue){var he=getSelection().toString().trim();if(speechSynthesis.cancel(),getSelection().toString().trim()===""){K.style.display==="block"&&(K.className="vditor-speech",K.style.display="none");return}window.vditorSpeechRange=getSelection().getRangeAt(0).cloneRange();var se=getSelection().getRangeAt(0).getBoundingClientRect();K.innerHTML=F,K.style.display="block",K.style.top=se.top+se.height+document.querySelector("html").scrollTop-20+"px",K.style.left=ue.clientX+2+"px",K.setAttribute("data-text",he)})}},Le=function(G,U,F,N){function K(ee){return ee instanceof F?ee:new F(function(le){le(ee)})}return new(F||(F=Promise))(function(ee,le){function ue(Me){try{se(N.next(Me))}catch(qe){le(qe)}}function he(Me){try{se(N.throw(Me))}catch(qe){le(qe)}}function se(Me){Me.done?ee(Me.value):K(Me.value).then(ue,he)}se((N=N.apply(G,U||[])).next())})},Te=function(G,U){var F={label:0,sent:function(){if(ee[0]&1)throw ee[1];return ee[1]},trys:[],ops:[]},N,K,ee,le;return le={next:ue(0),throw:ue(1),return:ue(2)},typeof Symbol=="function"&&(le[Symbol.iterator]=function(){return this}),le;function ue(se){return function(Me){return he([se,Me])}}function he(se){if(N)throw new TypeError("Generator is already executing.");for(;F;)try{if(N=1,K&&(ee=se[0]&2?K.return:se[0]?K.throw||((ee=K.return)&&ee.call(K),0):K.next)&&!(ee=ee.call(K,se[1])).done)return ee;switch(K=0,ee&&(se=[se[0]&2,ee.value]),se[0]){case 0:case 1:ee=se;break;case 4:return F.label++,{value:se[1],done:!1};case 5:F.label++,K=se[1],se=[0];continue;case 7:se=F.ops.pop(),F.trys.pop();continue;default:if(ee=F.trys,!(ee=ee.length>0&&ee[ee.length-1])&&(se[0]===6||se[0]===2)){F=0;continue}if(se[0]===3&&(!ee||se[1]>ee[0]&&se[1]<ee[3])){F.label=se[1];break}if(se[0]===6&&F.label<ee[1]){F.label=ee[1],ee=se;break}if(ee&&F.label<ee[2]){F.label=ee[2],F.ops.push(se);break}ee[2]&&F.ops.pop(),F.trys.pop();continue}se=U.call(G,F)}catch(Me){se=[6,Me],K=0}finally{N=ee=0}if(se[0]&5)throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}},Pe=function(G){var U={anchor:0,cdn:W.g.CDN,dist:W.g.DIST,staticPath:W.g.STATIC_PATH,customEmoji:{},emojiPath:(G&&G.emojiPath||W.g.CDN)+"/"+W.g.DIST+"/"+W.g._STATIC_PATH.emoji,hljs:W.g.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:W.g.MARKDOWN_OPTIONS,math:W.g.MATH_OPTIONS,mode:"light",speech:{enable:!1},theme:W.g.THEME_OPTIONS};return(0,oe.T)(U,G)},be=function(G,U){var F=Pe(U);return(0,ie.G)(F.staticPath.lute,"vditorLuteScript").then(function(){var N=(0,$.X)({autoSpace:F.markdown.autoSpace,gfmAutoLink:F.markdown.gfmAutoLink,codeBlockPreview:F.markdown.codeBlockPreview,emojiSite:F.emojiPath,emojis:F.customEmoji,fixTermTypo:F.markdown.fixTermTypo,footnotes:F.markdown.footnotes,headingAnchor:F.anchor!==0,inlineMathDigit:F.math.inlineDigit,lazyLoadImage:F.lazyLoadImage,linkBase:F.markdown.linkBase,linkPrefix:F.markdown.linkPrefix,listStyle:F.markdown.listStyle,mark:F.markdown.mark,mathBlockPreview:F.markdown.mathBlockPreview,paragraphBeginningSpace:F.markdown.paragraphBeginningSpace,sanitize:F.markdown.sanitize,toc:F.markdown.toc});return U!=null&&U.renderers&&N.SetJSRenderers({renderers:{Md2HTML:U.renderers}}),N.SetHeadingID(!0),N.Md2HTML(G)})},P=function(G,U,F){return Le(void 0,void 0,void 0,function(){var N,K,ee,le;return Te(this,function(ue){switch(ue.label){case 0:return N=Pe(F),[4,be(U,N)];case 1:if(K=ue.sent(),N.transform&&(K=N.transform(K)),G.innerHTML=K,G.classList.add("vditor-reset"),N.i18n)return[3,5];if(["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(N.lang))return[3,2];throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return ee="vditorI18nScript",le=ee+N.lang,document.querySelectorAll('head script[id^="'+ee+'"]').forEach(function(he){he.id!==le&&document.head.removeChild(he)}),[4,(0,ie.G)(N.staticPath.i18n+"/"+N.lang+".js",le)];case 3:ue.sent(),ue.label=4;case 4:return[3,6];case 5:window.VditorI18n=N.i18n,ue.label=6;case 6:return N.icon?[4,(0,ie.G)(N.staticPath.icons+"/"+N.icon+".js","vditorIconScript")]:[3,8];case 7:ue.sent(),ue.label=8;case 8:return(0,z.Z)(N.theme.current,N.theme.path),N.anchor===1&&G.classList.add("vditor-reset--anchor"),(0,u.O)(G),(0,v.s)(N.hljs,G,N.staticPath.highlight),(0,k.H)(G,{katex:N.staticPath.katex,mathjax:N.staticPath.mathjax,math:N.math}),(0,x.i)(G,N.staticPath.mermaid,N.mode),(0,L.K)(G,N.staticPath.markmap,N.mode),(0,f.P)(G,N.staticPath.flowchart),(0,b.v)(G,N.staticPath.graphviz),(0,c.p)(G,N.staticPath.echarts,N.mode),(0,w.P)(G,N.staticPath.echarts,N.mode),(0,I.B)(G,N.staticPath.plantuml),(0,m.Q)(G,N.staticPath.abc),(0,C.Y)(G),N.speech.enable&&_e(G),N.anchor!==0&&pe(N.anchor),N.after&&N.after(),N.lazyLoadImage&&d(G),G.addEventListener("click",function(he){var se=(0,ae.lG)(he.target,"SPAN");if(se&&(0,ae.fb)(se,"vditor-toc")){var Me=G.querySelector("#"+se.getAttribute("data-target-id"));Me&&window.scrollTo(window.scrollX,Me.offsetTop);return}}),[2]}})})},Fe=s(863),$e=s(312),pt=function(){function G(){}return G.adapterRender=y,G.previewImage=Fe.E,G.codeRender=u.O,G.graphvizRender=b.v,G.highlightRender=v.s,G.mathRender=k.H,G.mermaidRender=x.i,G.markmapRender=L.K,G.flowchartRender=f.P,G.chartRender=c.p,G.abcRender=m.Q,G.mindmapRender=w.P,G.plantumlRender=I.B,G.outlineRender=O.k,G.mediaRender=C.Y,G.speechRender=_e,G.lazyLoadImageRender=d,G.md2html=be,G.preview=P,G.setCodeTheme=$e.Y,G.setContentTheme=z.Z,G}();const Ge=pt},54:(o,r,s)=>{s.d(r,{H:()=>m,g:()=>y});var m="3.9.6",y=function(){function c(){}return c.ZWSP="​",c.DROP_EDITOR="application/editor",c.MOBILE_WIDTH=520,c.CLASS_MENU_DISABLED="vditor-menu--disabled",c.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],c.CODE_THEME=["abap","algol","algol_nu","arduino","autumn","borland","bw","colorful","dracula","emacs","friendly","fruity","github","igor","lovelace","manni","monokai","monokailight","murphy","native","paraiso-dark","paraiso-light","pastie","perldoc","pygments","rainbow_dash","rrt","solarized-dark","solarized-dark256","solarized-light","swapoff","tango","trac","vim","vs","xcode","ant-design"],c.CODE_LANGUAGES=["mermaid","echarts","mindmap","plantuml","abc","graphviz","flowchart","apache","js","ts","html","markmap","properties","apache","bash","c","csharp","cpp","css","coffeescript","diff","go","xml","http","json","java","javascript","kotlin","less","lua","makefile","markdown","nginx","objectivec","php","php-template","perl","plaintext","python","python-repl","r","ruby","rust","scss","sql","shell","swift","ini","typescript","vbnet","yaml","ada","clojure","dart","erb","fortran","gradle","haskell","julia","julia-repl","lisp","matlab","pgsql","powershell","sql_more","stata","cmake","mathematica","solidity","yul"],c.CDN="https://unpkg.com/vditor@3.9.6",c.DIST="dist",c.BASE_URL=c.CDN+"/"+c.DIST,c._STATIC_PATH={logo:"images/logo.png",method:"method.min.js",style:"index.css",emoji:"images/emoji",i18n:"js/i18n",icons:"js/icons",theme:"css/content-theme",abc:"js/abcjs/abcjs_basic.min.js",echarts:"js/echarts/echarts.min.js",flowchart:"js/flowchart.js/flowchart.min.js",graphviz:"js/graphviz/viz.js",lute:"js/lute/lute.min.js",markmap:"js/markmap/markmap.min.js",mermaid:"js/mermaid/mermaid.min.js",plantuml:"js/plantuml/plantuml-encoder.min.js",highlight:"js/highlight.js",katex:"js/katex",mathjax:"js/mathjax"},c.STATIC_PATH={logo:c.BASE_URL+"/"+c._STATIC_PATH.logo,method:c.BASE_URL+"/"+c._STATIC_PATH.method,style:c.BASE_URL+"/"+c._STATIC_PATH.style,emoji:c.BASE_URL+"/"+c._STATIC_PATH.emoji,i18n:c.BASE_URL+"/"+c._STATIC_PATH.i18n,icons:c.BASE_URL+"/"+c._STATIC_PATH.icons,theme:c.BASE_URL+"/"+c._STATIC_PATH.theme,abc:c.BASE_URL+"/"+c._STATIC_PATH.abc,echarts:c.BASE_URL+"/"+c._STATIC_PATH.echarts,flowchart:c.BASE_URL+"/"+c._STATIC_PATH.flowchart,graphviz:c.BASE_URL+"/"+c._STATIC_PATH.graphviz,lute:c.BASE_URL+"/"+c._STATIC_PATH.lute,markmap:c.BASE_URL+"/"+c._STATIC_PATH.markmap,mermaid:c.BASE_URL+"/"+c._STATIC_PATH.mermaid,plantuml:c.BASE_URL+"/"+c._STATIC_PATH.plantuml,highlight:c.BASE_URL+"/"+c._STATIC_PATH.highlight,katex:c.BASE_URL+"/"+c._STATIC_PATH.katex,mathjax:c.BASE_URL+"/"+c._STATIC_PATH.mathjax},c.MARKDOWN_OPTIONS={autoSpace:!1,gfmAutoLink:!0,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},c.HLJS_OPTIONS={enable:!0,lineNumber:!1,defaultLang:"",style:"github"},c.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},c.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:c.STATIC_PATH.theme},c}()},478:(o,r,s)=>{s.d(r,{Q:()=>u});var m=s(54),y=s(526),c=s(156),u=function(f,b){f===void 0&&(f=document),b===void 0&&(b=m.g.STATIC_PATH.abc);var v=c.abcRenderAdapter.getElements(f);v.length>0&&(0,y.G)(b,"vditorAbcjsScript").then(function(){v.forEach(function(d){d.parentElement.classList.contains("vditor-wysiwyg__pre")||d.parentElement.classList.contains("vditor-ir__marker--pre")||d.getAttribute("data-processed")!=="true"&&(ABCJS.renderAbc(d,c.abcRenderAdapter.getCode(d).trim()),d.style.overflowX="auto",d.setAttribute("data-processed","true"))})})}},156:(o,r,s)=>{s.r(r),s.d(r,{abcRenderAdapter:()=>b,chartRenderAdapter:()=>f,flowchartRenderAdapter:()=>d,graphvizRenderAdapter:()=>v,markmapRenderAdapter:()=>c,mathRenderAdapter:()=>m,mermaidRenderAdapter:()=>y,mindmapRenderAdapter:()=>u,plantumlRenderAdapter:()=>k});var m={getCode:function(C){return C.textContent},getElements:function(C){return C.querySelectorAll(".language-math")}},y={getCode:function(C){return C.textContent},getElements:function(C){return C.querySelectorAll(".language-mermaid")}},c={getCode:function(C){return C.textContent},getElements:function(C){return C.querySelectorAll(".language-markmap")}},u={getCode:function(C){return C.getAttribute("data-code")},getElements:function(C){return C.querySelectorAll(".language-mindmap")}},f={getCode:function(C){return C.innerText},getElements:function(C){return C.querySelectorAll(".language-echarts")}},b={getCode:function(C){return C.textContent},getElements:function(C){return C.querySelectorAll(".language-abc")}},v={getCode:function(C){return C.textContent},getElements:function(C){return C.querySelectorAll(".language-graphviz")}},d={getCode:function(C){return C.textContent},getElements:function(C){return C.querySelectorAll(".language-flowchart")}},k={getCode:function(C){return C.textContent},getElements:function(C){return C.querySelectorAll(".language-plantuml")}}},314:(o,r,s)=>{s.d(r,{p:()=>u});var m=s(54),y=s(526),c=s(156),u=function(f,b,v){f===void 0&&(f=document),b===void 0&&(b=m.g.STATIC_PATH.echarts);var d=c.chartRenderAdapter.getElements(f);d.length>0&&(0,y.G)(b,"vditorEchartsScript").then(function(){d.forEach(function(k){if(!(k.parentElement.classList.contains("vditor-wysiwyg__pre")||k.parentElement.classList.contains("vditor-ir__marker--pre"))){var C=c.chartRenderAdapter.getCode(k).trim();if(C)try{if(k.getAttribute("data-processed")==="true")return;var x=JSON.parse(C);echarts.init(k,v==="dark"?"dark":void 0).setOption(x),k.setAttribute("data-processed","true")}catch(L){k.className="vditor-reset--error",k.innerHTML="echarts render error: <br>"+L}}})})}},730:(o,r,s)=>{s.d(r,{O:()=>c});var m=s(51),y=s(54),c=function(u){u.querySelectorAll("pre > code").forEach(function(f,b){var v,d,k;if(!(f.parentElement.classList.contains("vditor-wysiwyg__pre")||f.parentElement.classList.contains("vditor-ir__marker--pre"))&&!(f.classList.contains("language-mermaid")||f.classList.contains("language-flowchart")||f.classList.contains("language-echarts")||f.classList.contains("language-mindmap")||f.classList.contains("language-plantuml")||f.classList.contains("language-markmap")||f.classList.contains("language-abc")||f.classList.contains("language-graphviz")||f.classList.contains("language-math"))&&!(f.style.maxHeight.indexOf("px")>-1)&&!(u.classList.contains("vditor-preview")&&b>5)){var C=f.innerText;if(f.classList.contains("highlight-chroma")){var x=document.createElement("code");x.innerHTML=f.innerHTML,x.querySelectorAll(".highlight-ln").forEach(function(I){I.remove()}),C=x.innerText}else C.endsWith(`
`)&&(C=C.substr(0,C.length-1));var L='<svg><use xlink:href="#vditor-icon-copy"></use></svg>';document.getElementById("vditorIconScript")||(L='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>');var w=document.createElement("div");w.className="vditor-copy",w.innerHTML='<span aria-label="'+(((v=window.VditorI18n)===null||v===void 0?void 0:v.copy)||"复制")+`"
onmouseover="this.setAttribute('aria-label', '`+(((d=window.VditorI18n)===null||d===void 0?void 0:d.copy)||"复制")+`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`+(((k=window.VditorI18n)===null||k===void 0?void 0:k.copied)||"已复制")+`')">`+L+"</span>";var O=document.createElement("textarea");O.value=(0,m.X)(C),w.insertAdjacentElement("afterbegin",O),f.before(w),f.style.maxHeight=window.outerHeight-40+"px",f.insertAdjacentHTML("afterend",'<span style="position: absolute">'+y.g.ZWSP+"</span>")}})}},66:(o,r,s)=>{s.d(r,{P:()=>u});var m=s(54),y=s(526),c=s(156),u=function(f,b){b===void 0&&(b=m.g.STATIC_PATH.flowchart);var v=c.flowchartRenderAdapter.getElements(f);v.length!==0&&(0,y.G)(b,"vditorFlowchartScript").then(function(){v.forEach(function(d){if(d.getAttribute("data-processed")!=="true"){var k=flowchart.parse(c.flowchartRenderAdapter.getCode(d));d.innerHTML="",k.drawSVG(d),d.setAttribute("data-processed","true")}})})}},218:(o,r,s)=>{s.d(r,{v:()=>u});var m=s(54),y=s(526),c=s(156),u=function(f,b){b===void 0&&(b=m.g.STATIC_PATH.graphviz);var v=c.graphvizRenderAdapter.getElements(f);v.length!==0&&(0,y.G)(b,"vditorGraphVizScript").then(function(){v.forEach(function(d){var k=c.graphvizRenderAdapter.getCode(d);if(!(d.parentElement.classList.contains("vditor-wysiwyg__pre")||d.parentElement.classList.contains("vditor-ir__marker--pre"))&&!(d.getAttribute("data-processed")==="true"||k.trim()==="")){try{var C=new Blob(["importScripts('"+document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js")+"');"],{type:"application/javascript"}),x=window.URL||window.webkitURL,L=x.createObjectURL(C),w=new Worker(L);new Viz({worker:w}).renderSVGElement(k).then(function(O){d.innerHTML=O.outerHTML}).catch(function(O){d.innerHTML="graphviz render error: <br>"+O,d.className="vditor-reset--error"})}catch(O){console.error("graphviz error",O)}d.setAttribute("data-processed","true")}})})}},702:(o,r,s)=>{s.d(r,{s:()=>u});var m=s(54),y=s(526),c=s(578),u=function(f,b,v){b===void 0&&(b=document),v===void 0&&(v=m.g.STATIC_PATH.highlight);var d=f.style;m.g.CODE_THEME.includes(d)||(d="github");var k=document.getElementById("vditorHljsStyle"),C=v+"/styles/"+d+".css";if(k&&k.href!==C&&k.remove(),(0,c.c)(v+"/styles/"+d+".css","vditorHljsStyle"),f.enable!==!1){var x=b.querySelectorAll("pre > code");x.length!==0&&(0,y.G)(v+"/highlight.pack.js","vditorHljsScript").then(function(){(0,y.G)(v+"/solidity.min.js","vditorHljsSolidityScript").then(function(){(0,y.G)(v+"/yul.min.js","vditorHljsYulScript").then(function(){b.querySelectorAll("pre > code").forEach(function(L){if(!(L.parentElement.classList.contains("vditor-ir__marker--pre")||L.parentElement.classList.contains("vditor-wysiwyg__pre"))&&!(L.classList.contains("language-mermaid")||L.classList.contains("language-flowchart")||L.classList.contains("language-echarts")||L.classList.contains("language-mindmap")||L.classList.contains("language-plantuml")||L.classList.contains("language-abc")||L.classList.contains("language-graphviz")||L.classList.contains("language-math"))&&(f.defaultLang!==""&&L.className.indexOf("language-")===-1&&L.classList.add("language-"+f.defaultLang),hljs.highlightElement(L),!!f.lineNumber)){L.classList.add("vditor-linenumber");var w=L.querySelector(".vditor-linenumber__temp");w||(w=document.createElement("div"),w.className="vditor-linenumber__temp",L.insertAdjacentElement("beforeend",w));var O=getComputedStyle(L).whiteSpace,I=!1;(O==="pre-wrap"||O==="pre-line")&&(I=!0);var W="",z=L.textContent.split(/\r\n|\r|\n/g);z.pop(),z.map(function(ie){var ae="";I&&(w.textContent=ie||`
`,ae=' style="height:'+w.getBoundingClientRect().height+'px"'),W+="<span"+ae+"></span>"}),w.style.display="none",W='<span class="vditor-linenumber__rows">'+W+"</span>",L.insertAdjacentHTML("beforeend",W)}})})})})}}},563:(o,r,s)=>{s.d(r,{K:()=>v});var m=s(54),y=s(526),c=s(156),u={},f=function(d,k){var C=d.transform(k),x=Object.keys(C.features).filter(function(W){return!u[W]});x.forEach(function(W){u[W]=!0});var L=d.getAssets(x),w=L.styles,O=L.scripts,I=window.markmap;return w&&I.loadCSS(w),O&&I.loadJS(O),C},b=function(d,k){var C=window.markmap,x=C.Transformer,L=C.Markmap,w=C.deriveOptions;C.globalCSS;var O=new x;d.innerHTML='<svg style="width:100%"></svg>';var I=d.firstChild,W=L.create(I,null),z=f(O,k),ie=z.root,ae=z.frontmatter,oe=ae==null?void 0:ae.markmap,pe=w(oe);W.setData(ie,pe),W.fit()},v=function(d,k,C){k===void 0&&(k=m.g.STATIC_PATH.markmap);var x=c.markmapRenderAdapter.getElements(d);x.length!==0&&(0,y.G)(k,"vditorMermaidScript").then(function(){x.forEach(function(L){var w=c.markmapRenderAdapter.getCode(L);if(!(L.getAttribute("data-processed")==="true"||w.trim()==="")){var O=document.createElement("div");O.className="language-markmap",L.parentNode.appendChild(O),b(O,w),L.parentNode.childNodes[0].nodeName=="CODE"&&L.parentNode.removeChild(L.parentNode.childNodes[0])}})})}},466:(o,r,s)=>{s.d(r,{H:()=>b});var m=s(54),y=s(526),c=s(578),u=s(51),f=s(156),b=function(v,d){var k=f.mathRenderAdapter.getElements(v);if(k.length!==0){var C={katex:m.g.STATIC_PATH.katex,mathjax:m.g.STATIC_PATH.mathjax,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(d&&d.math&&(d.math=Object.assign({},C.math,d.math)),d=Object.assign({},C,d),d.math.engine==="KaTeX")(0,c.c)(d.katex+"/katex.min.css","vditorKatexStyle"),(0,y.G)(d.katex+"/katex.min.js","vditorKatexScript").then(function(){(0,y.G)(d.katex+"/mhchem.min.js","vditorKatexChemScript").then(function(){k.forEach(function(w){if(!(w.parentElement.classList.contains("vditor-wysiwyg__pre")||w.parentElement.classList.contains("vditor-ir__marker--pre"))&&!w.getAttribute("data-math")){var O=(0,u.X)(f.mathRenderAdapter.getCode(w));w.setAttribute("data-math",O);try{w.innerHTML=katex.renderToString(O,{displayMode:w.tagName==="DIV",output:"html"})}catch(I){w.innerHTML=I.message,w.className="language-math vditor-reset--error"}w.addEventListener("copy",function(I){I.stopPropagation(),I.preventDefault();var W=I.currentTarget.closest(".language-math");I.clipboardData.setData("text/html",W.innerHTML),I.clipboardData.setData("text/plain",W.getAttribute("data-math"))})}})})});else if(d.math.engine==="MathJax"){var x=function(w){if(w.length!==0){var O=0,I=w[w.length-1],W=function(){var z=w[O++];z===I?z():z(W)};W()}};window.MathJax||(window.MathJax={loader:{paths:{mathjax:d.mathjax}},startup:{typeset:!1},tex:{macros:d.math.macros}},Object.assign(window.MathJax,d.math.mathJaxOptions)),(0,y.J)(d.mathjax+"/tex-svg-full.js","protyleMathJaxScript");var L=function(w,O){var I=(0,u.X)(w.textContent).trim(),W=window.MathJax.getMetricsFor(w);W.display=w.tagName==="DIV",window.MathJax.tex2svgPromise(I,W).then(function(z){w.innerHTML="",w.setAttribute("data-math",I),w.append(z),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var ie=z.querySelector('[data-mml-node="merror"]');ie&&ie.textContent.trim()!==""&&(w.innerHTML=ie.textContent.trim(),w.className="vditor-reset--error"),O&&O()})};window.MathJax.startup.promise.then(function(){for(var w=[],O=function(W){var z=k[W];!z.parentElement.classList.contains("vditor-wysiwyg__pre")&&!z.parentElement.classList.contains("vditor-ir__marker--pre")&&!z.getAttribute("data-math")&&(0,u.X)(z.textContent).trim()&&w.push(function(ie){W===k.length-1?L(z):L(z,ie)})},I=0;I<k.length;I++)O(I);x(w)})}}}},554:(o,r,s)=>{s.d(r,{Y:()=>u});var m=function(f,b){f.insertAdjacentHTML("afterend",'<video controls="controls" src="'+b+'"></video>'),f.remove()},y=function(f,b){f.insertAdjacentHTML("afterend",'<audio controls="controls" src="'+b+'"></audio>'),f.remove()},c=function(f,b){var v=b.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),d=b.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),k=b.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),C=b.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),x=b.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),L=b.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),w=b.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),O=b.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);v&&v[1].length===11?(f.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'+(v[1]+(v[2]?"?start="+v[2]:""))+'"></iframe>'),f.remove()):d&&d[1]?(f.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'+d[1]+'"></iframe>'),f.remove()):k&&k[1]?(f.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='+k[1]+'"></iframe>'),f.remove()):C&&C[1]?(f.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`+C[1]+'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>'),f.remove()):x&&x[0]?(f.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`+encodeURIComponent(x[0])+'"></iframe>'),f.remove()):L&&L[2]?(f.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`+L[2]+'"></iframe>'),f.remove()):w&&w[1]?(f.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//player.bilibili.com/player.html?bvid=`+w[1]+'"></iframe>'),f.remove()):O&&O[1]&&(f.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'+O[1]+'"></iframe>'),f.remove())},u=function(f){f&&f.querySelectorAll("a").forEach(function(b){var v=b.getAttribute("href");v&&(v.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?m(b,v):v.match(/^.+.(mp3|wav|flac)$/)?y(b,v):c(b,v))})}},40:(o,r,s)=>{s.d(r,{i:()=>u});var m=s(54),y=s(526),c=s(156),u=function(f,b,v){b===void 0&&(b=m.g.STATIC_PATH.mermaid);var d=c.mermaidRenderAdapter.getElements(f);d.length!==0&&(0,y.G)(b,"vditorMermaidScript").then(function(){var k={securityLevel:"loose",altFontFamily:"sans-serif",fontFamily:"sans-serif",startOnLoad:!1,flowchart:{htmlLabels:!0,useMaxWidth:!0},sequence:{useMaxWidth:!0,diagramMarginX:8,diagramMarginY:8,boxMargin:8},gantt:{leftPadding:75,rightPadding:20}};v==="dark"&&(k.theme="dark"),mermaid.initialize(k),d.forEach(function(C){var x=c.mermaidRenderAdapter.getCode(C);C.getAttribute("data-processed")==="true"||x.trim()===""||(mermaid.init(void 0,C),C.setAttribute("data-processed","true"))})})}},749:(o,r,s)=>{s.d(r,{P:()=>u});var m=s(54),y=s(526),c=s(156),u=function(f,b,v){f===void 0&&(f=document),b===void 0&&(b=m.g.STATIC_PATH.echarts);var d=c.mindmapRenderAdapter.getElements(f);d.length>0&&(0,y.G)(b,"vditorEchartsScript").then(function(){d.forEach(function(k){if(!(k.parentElement.classList.contains("vditor-wysiwyg__pre")||k.parentElement.classList.contains("vditor-ir__marker--pre"))){var C=c.mindmapRenderAdapter.getCode(k);if(C)try{if(k.getAttribute("data-processed")==="true")return;echarts.init(k,v==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(C))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(x,L){var w;return!((w=L==null?void 0:L.data)===null||w===void 0)&&w.children?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),k.setAttribute("data-processed","true")}catch(x){k.className="vditor-reset--error",k.innerHTML="mindmap render error: <br>"+x}}})})}},818:(o,r,s)=>{s.d(r,{k:()=>c});var m=s(64),y=s(466),c=function(u,f,b){var v="",d=[];if(Array.from(u.children).forEach(function(L,w){if((0,m.W)(L)){if(b){var O=L.id.lastIndexOf("_");L.id=L.id.substring(0,O===-1?void 0:O)+"_"+w}d.push(L.id),v+=L.outerHTML.replace("<wbr>","")}}),v==="")return f.innerHTML="","";var k=document.createElement("div");if(b)b.lute.SetToC(!0),b.currentMode==="wysiwyg"&&!b.preview.element.contains(u)?k.innerHTML=b.lute.SpinVditorDOM("<p>[ToC]</p>"+v):b.currentMode==="ir"&&!b.preview.element.contains(u)?k.innerHTML=b.lute.SpinVditorIRDOM("<p>[ToC]</p>"+v):k.innerHTML=b.lute.HTML2VditorDOM("<p>[ToC]</p>"+v),b.lute.SetToC(b.options.preview.markdown.toc);else{f.classList.add("vditor-outline");var C=Lute.New();C.SetToC(!0),k.innerHTML=C.HTML2VditorDOM("<p>[ToC]</p>"+v)}var x=k.firstElementChild.querySelectorAll("li > span[data-target-id]");return x.forEach(function(L,w){if(L.nextElementSibling&&L.nextElementSibling.tagName==="UL"){var O="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>";document.getElementById("vditorIconScript")||(O='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>'),L.innerHTML=O+"<span>"+L.innerHTML+"</span>"}else L.innerHTML="<svg></svg><span>"+L.innerHTML+"</span>";L.setAttribute("data-target-id",d[w])}),v=k.firstElementChild.innerHTML,x.length===0?(f.innerHTML="",v):(f.innerHTML=v,b&&(0,y.H)(f,{katex:b.options.staticPath.katex,mathjax:b.options.staticPath.mathjax,math:b.options.preview.math}),f.firstElementChild.addEventListener("click",function(L){for(var w=L.target;w&&!w.isEqualNode(f);){if(w.classList.contains("vditor-outline__action")){w.classList.contains("vditor-outline__action--close")?(w.classList.remove("vditor-outline__action--close"),w.parentElement.nextElementSibling.setAttribute("style","display:block")):(w.classList.add("vditor-outline__action--close"),w.parentElement.nextElementSibling.setAttribute("style","display:none")),L.preventDefault(),L.stopPropagation();break}else if(w.getAttribute("data-target-id")){L.preventDefault(),L.stopPropagation();var O=document.getElementById(w.getAttribute("data-target-id"));if(!O)return;if(b)if(b.options.height==="auto"){var I=O.offsetTop+b.element.offsetTop;b.options.toolbarConfig.pin||(I+=b.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,I)}else b.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,b.element.offsetTop),b.preview.element.contains(u)?u.parentElement.scrollTop=O.offsetTop:u.scrollTop=O.offsetTop;else window.scrollTo(window.scrollX,O.offsetTop);break}w=w.parentElement}}),v)}},408:(o,r,s)=>{s.d(r,{B:()=>u});var m=s(54),y=s(526),c=s(156),u=function(f,b){f===void 0&&(f=document),b===void 0&&(b=m.g.STATIC_PATH.plantuml);var v=c.plantumlRenderAdapter.getElements(f);v.length!==0&&(0,y.G)(b,"vditorPlantumlScript").then(function(){v.forEach(function(d){if(!(d.parentElement.classList.contains("vditor-wysiwyg__pre")||d.parentElement.classList.contains("vditor-ir__marker--pre"))){var k=c.plantumlRenderAdapter.getCode(d).trim();if(k)try{d.innerHTML='<img src="http://www.plantuml.com/plantuml/svg/~1'+plantumlEncoder.encode(k)+'">'}catch(C){d.className="vditor-reset--error",d.innerHTML="plantuml render error: <br>"+C}}})})}},895:(o,r,s)=>{s.d(r,{X:()=>m});var m=function(y){var c=Lute.New();return c.PutEmojis(y.emojis),c.SetEmojiSite(y.emojiSite),c.SetHeadingAnchor(y.headingAnchor),c.SetInlineMathAllowDigitAfterOpenMarker(y.inlineMathDigit),c.SetAutoSpace(y.autoSpace),c.SetToC(y.toc),c.SetFootnotes(y.footnotes),c.SetFixTermTypo(y.fixTermTypo),c.SetVditorCodeBlockPreview(y.codeBlockPreview),c.SetVditorMathBlockPreview(y.mathBlockPreview),c.SetSanitize(y.sanitize),c.SetChineseParagraphBeginningSpace(y.paragraphBeginningSpace),c.SetRenderListStyle(y.listStyle),c.SetLinkBase(y.linkBase),c.SetLinkPrefix(y.linkPrefix),c.SetMark(y.mark),c.SetGFMAutoLink(y.gfmAutoLink),y.lazyLoadImage&&c.SetImageLazyLoading(y.lazyLoadImage),c}},863:(o,r,s)=>{s.d(r,{E:()=>m});var m=function(y,c,u){u===void 0&&(u="classic");var f=y.getBoundingClientRect(),b=36;document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'+(u==="dark"?" vditor--dark":"")+`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `+window.VditorI18n.spin+`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`+window.VditorI18n.close+`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `+y.width+"px;height:"+y.height+"px;transform: translate3d("+f.left+"px, "+(f.top-b)+'px, 0)" src="'+y.getAttribute("src")+`">
    </div>
</div>`),document.body.style.overflow="hidden";var v=document.querySelector(".vditor-img img"),d="translate3d("+Math.max(0,window.innerWidth-y.naturalWidth)/2+"px, "+Math.max(0,window.innerHeight-b-y.naturalHeight)/2+"px, 0)";setTimeout(function(){v.setAttribute("style","transition: transform .3s ease-in-out;transform: "+d),setTimeout(function(){v.parentElement.scrollTo((v.parentElement.scrollWidth-v.parentElement.clientWidth)/2,(v.parentElement.scrollHeight-v.parentElement.clientHeight)/2)},400)});var k=document.querySelector(".vditor-img__btn");k.addEventListener("click",function(){var C=parseInt(k.getAttribute("data-deg"),10)+90;C/90%2===1&&y.naturalWidth>v.parentElement.clientHeight?v.style.transform="translate3d("+Math.max(0,window.innerWidth-y.naturalWidth)/2+"px, "+(y.naturalWidth/2-y.naturalHeight/2)+"px, 0) rotateZ("+C+"deg)":v.style.transform=d+" rotateZ("+C+"deg)",k.setAttribute("data-deg",C.toString()),setTimeout(function(){v.parentElement.scrollTo((v.parentElement.scrollWidth-v.parentElement.clientWidth)/2,(v.parentElement.scrollHeight-v.parentElement.clientHeight)/2)},400)})}},312:(o,r,s)=>{s.d(r,{Y:()=>c});var m=s(54),y=s(578),c=function(u,f){f===void 0&&(f=m.g.STATIC_PATH.highlight),m.g.CODE_THEME.includes(u)||(u="github");var b=document.getElementById("vditorHljsStyle"),v=f+"/styles/"+u+".css";b?b.href!==v&&(b.remove(),(0,y.c)(v,"vditorHljsStyle")):(0,y.c)(v,"vditorHljsStyle")}},227:(o,r,s)=>{s.d(r,{Z:()=>y});var m=s(578),y=function(c,u){if(!(!c||!u)){var f=document.getElementById("vditorContentTheme"),b=u+"/"+c+".css";f?f.getAttribute("href")!==b&&(f.remove(),(0,m.c)(b,"vditorContentTheme")):(0,m.c)(b,"vditorContentTheme")}}},526:(o,r,s)=>{s.d(r,{G:()=>y,J:()=>m});var m=function(c,u){if(document.getElementById(u))return!1;var f=new XMLHttpRequest;f.open("GET",c,!1),f.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),f.send("");var b=document.createElement("script");b.type="text/javascript",b.text=f.responseText,b.id=u,document.head.appendChild(b)},y=function(c,u){return new Promise(function(f,b){if(document.getElementById(u))return f(),!1;var v=document.createElement("script");v.src=c,v.async=!0,document.head.appendChild(v),v.onload=function(){if(document.getElementById(u))return v.remove(),f(),!1;v.id=u,f()}})}},578:(o,r,s)=>{s.d(r,{c:()=>m});var m=function(y,c){if(!document.getElementById(c)){var u=document.createElement("link");u.id=c,u.rel="stylesheet",u.type="text/css",u.href=y,document.getElementsByTagName("head")[0].appendChild(u)}}},51:(o,r,s)=>{s.d(r,{X:()=>m});var m=function(y){return y.replace(/\u00a0/g," ")}},794:(o,r,s)=>{s.d(r,{G6:()=>m,Le:()=>u,i7:()=>v,ns:()=>b,pK:()=>c,vU:()=>y,yl:()=>f});var m=function(){return navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1},y=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},c=function(){try{return typeof localStorage<"u"}catch{return!1}},u=function(){return navigator.userAgent.indexOf("iPhone")>-1?"touchstart":"click"},f=function(d){return navigator.platform.toUpperCase().indexOf("MAC")>=0?!!(d.metaKey&&!d.ctrlKey):!!(!d.metaKey&&d.ctrlKey)},b=function(d){return/Mac/.test(navigator.platform)||navigator.platform==="iPhone"?d.indexOf("⇧")>-1&&y()&&(d=d.replace(";",":").replace("=","+").replace("-","_")):(d.startsWith("⌘")?d=d.replace("⌘","⌘+"):d.startsWith("⌥")&&d.substr(1,1)!=="⌘"?d=d.replace("⌥","⌥+"):d=d.replace("⇧⌘","⌘+⇧+").replace("⌥⌘","⌥+⌘+"),d=d.replace("⌘","Ctrl").replace("⇧","Shift").replace("⌥","Alt"),d.indexOf("Shift")>-1&&(d=d.replace(";",":").replace("=","+").replace("-","_"))),d},v=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}},827:(o,r,s)=>{s.d(r,{DX:()=>k,E2:()=>c,F9:()=>b,JQ:()=>y,O9:()=>u,a1:()=>f,fb:()=>d,lG:()=>v});var m=s(64),y=function(C,x){for(var L=d(C,x),w=!1,O=!1;L&&!L.classList.contains("vditor-reset")&&!O;)w=d(L.parentElement,x),w?L=w:O=!0;return L||!1},c=function(C,x){for(var L=(0,m.S)(C,x),w=!1,O=!1;L&&!L.classList.contains("vditor-reset")&&!O;)w=(0,m.S)(L.parentElement,x),w?L=w:O=!0;return L||!1},u=function(C){var x=c(C,"UL"),L=c(C,"OL"),w=x;return L&&(!x||x&&L.contains(x))&&(w=L),w},f=function(C,x,L){if(!C)return!1;C.nodeType===3&&(C=C.parentElement);for(var w=C,O=!1;w&&!O&&!w.classList.contains("vditor-reset");)w.getAttribute(x)===L?O=!0:w=w.parentElement;return O&&w},b=function(C){if(!C)return!1;C.nodeType===3&&(C=C.parentElement);var x=C,L=!1,w=f(C,"data-block","0");if(w)return w;for(;x&&!L&&!x.classList.contains("vditor-reset");)x.tagName==="H1"||x.tagName==="H2"||x.tagName==="H3"||x.tagName==="H4"||x.tagName==="H5"||x.tagName==="H6"||x.tagName==="P"||x.tagName==="BLOCKQUOTE"||x.tagName==="OL"||x.tagName==="UL"?L=!0:x=x.parentElement;return L&&x},v=function(C,x){if(!C)return!1;C.nodeType===3&&(C=C.parentElement);for(var L=C,w=!1;L&&!w&&!L.classList.contains("vditor-reset");)L.nodeName===x?w=!0:L=L.parentElement;return w&&L},d=function(C,x){if(!C)return!1;C.nodeType===3&&(C=C.parentElement);for(var L=C,w=!1;L&&!w&&!L.classList.contains("vditor-reset");)L.classList.contains(x)?w=!0:L=L.parentElement;return w&&L},k=function(C){for(;C&&C.lastChild;)C=C.lastChild;return C}},64:(o,r,s)=>{s.d(r,{S:()=>m,W:()=>y});var m=function(c,u){if(!c)return!1;c.nodeType===3&&(c=c.parentElement);for(var f=c,b=!1;f&&!b&&!f.classList.contains("vditor-reset");)f.nodeName.indexOf(u)===0?b=!0:f=f.parentElement;return b&&f},y=function(c){var u=m(c,"H");return u&&u.tagName.length===2&&u.tagName!=="HR"?u:!1}},640:(o,r,s)=>{s.d(r,{T:()=>m});var m=function(){for(var y=[],c=0;c<arguments.length;c++)y[c]=arguments[c];for(var u={},f=function(v){for(var d in v)v.hasOwnProperty(d)&&(Object.prototype.toString.call(v[d])==="[object Object]"?u[d]=m(u[d],v[d]):u[d]=v[d])},b=0;b<y.length;b++)f(y[b]);return u}},393:(o,r,s)=>{s.d(r,{$j:()=>k,Gb:()=>b,Hc:()=>v,Ny:()=>f,ib:()=>C,im:()=>d,oC:()=>x,zh:()=>u});var m=s(54),y=s(794),c=s(827),u=function(L){var w,O=L[L.currentMode].element;return getSelection().rangeCount>0&&(w=getSelection().getRangeAt(0),O.isEqualNode(w.startContainer)||O.contains(w.startContainer))?w:L[L.currentMode].range?L[L.currentMode].range:(O.focus(),w=O.ownerDocument.createRange(),w.setStart(O,0),w.collapse(!0),w)},f=function(L){var w=window.getSelection().getRangeAt(0);if(!L.contains(w.startContainer)&&!(0,c.fb)(w.startContainer,"vditor-panel--none"))return{left:0,top:0};var O=L.parentElement.getBoundingClientRect(),I;if(w.getClientRects().length===0)if(w.startContainer.nodeType===3){var W=w.startContainer.parentElement;if(W&&W.getClientRects().length>0)I=W.getClientRects()[0];else return{left:0,top:0}}else{var z=w.startContainer.children;if(z[w.startOffset]&&z[w.startOffset].getClientRects().length>0)I=z[w.startOffset].getClientRects()[0];else if(w.startContainer.childNodes.length>0){var ie=w.cloneRange();w.selectNode(w.startContainer.childNodes[Math.max(0,w.startOffset-1)]),I=w.getClientRects()[0],w.setEnd(ie.endContainer,ie.endOffset),w.setStart(ie.startContainer,ie.startOffset)}else I=w.startContainer.getClientRects()[0];if(!I){for(var ae=w.startContainer.childNodes[w.startOffset];!ae.getClientRects||ae.getClientRects&&ae.getClientRects().length===0;)ae=ae.parentElement;I=ae.getClientRects()[0]}}else I=w.getClientRects()[0];return{left:I.left-O.left,top:I.top-O.top}},b=function(L,w){if(!w){if(getSelection().rangeCount===0)return!1;w=getSelection().getRangeAt(0)}var O=w.commonAncestorContainer;return L.isEqualNode(O)||L.contains(O)},v=function(L){var w=window.getSelection();w.removeAllRanges(),w.addRange(L)},d=function(L,w,O){var I={end:0,start:0};if(!O){if(getSelection().rangeCount===0)return I;O=window.getSelection().getRangeAt(0)}if(b(w,O)){var W=O.cloneRange();L.childNodes[0]&&L.childNodes[0].childNodes[0]?W.setStart(L.childNodes[0].childNodes[0],0):W.selectNodeContents(L),W.setEnd(O.startContainer,O.startOffset),I.start=W.toString().length,I.end=I.start+O.toString().length}return I},k=function(L,w,O){var I=0,W=0,z=O.childNodes[W],ie=!1,ae=!1;L=Math.max(0,L),w=Math.max(0,w);var oe=O.ownerDocument.createRange();for(oe.setStart(z||O,0),oe.collapse(!0);!ae&&z;){var pe=I+z.textContent.length;if(!ie&&L>=I&&L<=pe&&(L===0?oe.setStart(z,0):z.childNodes[0].nodeType===3?oe.setStart(z.childNodes[0],L-I):z.nextSibling?oe.setStartBefore(z.nextSibling):oe.setStartAfter(z),ie=!0,L===w)){ae=!0;break}ie&&w>=I&&w<=pe&&(w===0?oe.setEnd(z,0):z.childNodes[0].nodeType===3?oe.setEnd(z.childNodes[0],w-I):z.nextSibling?oe.setEndBefore(z.nextSibling):oe.setEndAfter(z),ae=!0),I=pe,z=O.childNodes[++W]}return!ae&&O.childNodes[W-1]&&oe.setStartBefore(O.childNodes[W-1]),v(oe),oe},C=function(L,w){var O=L.querySelector("wbr");if(O){if(!O.previousElementSibling)O.previousSibling?w.setStart(O.previousSibling,O.previousSibling.textContent.length):O.nextSibling?O.nextSibling.nodeType===3?w.setStart(O.nextSibling,0):w.setStartBefore(O.nextSibling):w.setStart(O.parentElement,0);else if(O.previousElementSibling.isSameNode(O.previousSibling))if(O.previousElementSibling.lastChild){w.setStartBefore(O),w.collapse(!0),v(w),(0,y.i7)()&&(O.previousElementSibling.tagName==="EM"||O.previousElementSibling.tagName==="STRONG"||O.previousElementSibling.tagName==="S")&&(w.insertNode(document.createTextNode(m.g.ZWSP)),w.collapse(!1)),O.remove();return}else w.setStartAfter(O.previousElementSibling);else w.setStart(O.previousSibling,O.previousSibling.textContent.length);w.collapse(!0),O.remove(),v(w)}},x=function(L,w){var O=document.createElement("div");O.innerHTML=L;var I=O.querySelectorAll("p");I.length===1&&!I[0].previousSibling&&!I[0].nextSibling&&w[w.currentMode].element.children.length>0&&O.firstElementChild.tagName==="P"&&(L=I[0].innerHTML.trim());var W=document.createElement("div");W.innerHTML=L;var z=u(w);if(z.toString()!==""&&(w[w.currentMode].preventInput=!0,document.execCommand("delete",!1,"")),W.firstElementChild&&W.firstElementChild.getAttribute("data-block")==="0"){W.lastElementChild.insertAdjacentHTML("beforeend","<wbr>");var ie=(0,c.F9)(z.startContainer);ie?ie.insertAdjacentHTML("afterend",W.innerHTML):w[w.currentMode].element.insertAdjacentHTML("beforeend",W.innerHTML),C(w[w.currentMode].element,z)}else{var ae=document.createElement("template");ae.innerHTML=L,z.insertNode(ae.content.cloneNode(!0)),z.collapse(!1),v(z)}}}},Zr={};function Ee(o){var r=Zr[o];if(r!==void 0)return r.exports;var s=Zr[o]={exports:{}};return ns[o](s,s.exports,Ee),s.exports}Ee.d=(o,r)=>{for(var s in r)Ee.o(r,s)&&!Ee.o(o,s)&&Object.defineProperty(o,s,{enumerable:!0,get:r[s]})};Ee.o=(o,r)=>Object.prototype.hasOwnProperty.call(o,r);Ee.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var $n={};(()=>{Ee.d($n,{e:()=>Fr,Z:()=>Po});var o=Ee(872),r=Ee(54),s=Ee(51),m=function(e){return e.currentMode==="sv"?(0,s.X)((e.sv.element.textContent+`
`).replace(/\n\n$/,`
`)):e.currentMode==="wysiwyg"?e.lute.VditorDOM2Md(e.wysiwyg.element.innerHTML):e.currentMode==="ir"?e.lute.VditorIRDOM2Md(e.ir.element.innerHTML):""},y=Ee(526),c=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-devtools",this.element.innerHTML='<div class="vditor-reset--error"></div><div style="height: 100%;"></div>'}return e.prototype.renderEchart=function(t){var n=this;t.devtools.element.style.display==="block"&&(0,y.G)(t.options.staticPath.echarts,"vditorEchartsScript").then(function(){n.ASTChart||(n.ASTChart=echarts.init(t.devtools.element.lastElementChild));try{n.element.lastElementChild.style.display="block",n.element.firstElementChild.innerHTML="",n.ASTChart.setOption({series:[{data:JSON.parse(t.lute.RenderEChartsJSON(m(t))),initialTreeDepth:-1,label:{align:"left",backgroundColor:"rgba(68, 77, 86, .68)",borderRadius:3,color:"#d1d5da",fontSize:12,lineHeight:12,offset:[9,12],padding:[2,4,2,4],position:"top",verticalAlign:"middle"},lineStyle:{color:"#4285f4",type:"curve",width:1},orient:"vertical",roam:!0,type:"tree"}],toolbox:{bottom:25,emphasis:{iconStyle:{color:"#4285f4"}},feature:{restore:{show:!0},saveAsImage:{show:!0}},right:15,show:!0}}),n.ASTChart.resize()}catch(a){n.element.lastElementChild.style.display="none",n.element.firstElementChild.innerHTML=a}})},e}(),u=Ee(794),f=function(e,t){t.forEach(function(n){if(e[n]){var a=e[n].children[0];a&&a.classList.contains("vditor-menu--current")&&a.classList.remove("vditor-menu--current")}})},b=function(e,t){t.forEach(function(n){if(e[n]){var a=e[n].children[0];a&&!a.classList.contains("vditor-menu--current")&&a.classList.add("vditor-menu--current")}})},v=function(e,t){t.forEach(function(n){if(e[n]){var a=e[n].children[0];a&&a.classList.contains(r.g.CLASS_MENU_DISABLED)&&a.classList.remove(r.g.CLASS_MENU_DISABLED)}})},d=function(e,t){t.forEach(function(n){if(e[n]){var a=e[n].children[0];a&&!a.classList.contains(r.g.CLASS_MENU_DISABLED)&&a.classList.add(r.g.CLASS_MENU_DISABLED)}})},k=function(e,t){t.forEach(function(n){e[n]&&e[n]&&(e[n].style.display="none")})},C=function(e,t){t.forEach(function(n){e[n]&&e[n]&&(e[n].style.display="block")})},x=function(e,t,n){t.includes("subToolbar")&&(e.toolbar.element.querySelectorAll(".vditor-hint").forEach(function(a){n&&a.isEqualNode(n)||(a.style.display="none")}),e.toolbar.elements.emoji&&(e.toolbar.elements.emoji.lastElementChild.style.display="none")),t.includes("hint")&&(e.hint.element.style.display="none"),e.wysiwyg.popover&&t.includes("popover")&&(e.wysiwyg.popover.style.display="none")},L=function(e,t,n,a){n.addEventListener((0,u.Le)(),function(i){i.preventDefault(),i.stopPropagation(),!n.classList.contains(r.g.CLASS_MENU_DISABLED)&&(e.toolbar.element.querySelectorAll(".vditor-hint--current").forEach(function(l){l.classList.remove("vditor-hint--current")}),t.style.display==="block"?t.style.display="none":(x(e,["subToolbar","hint","popover"],n.parentElement.parentElement),n.classList.contains("vditor-tooltipped")||n.classList.add("vditor-hint--current"),t.style.display="block",e.toolbar.element.getBoundingClientRect().right-n.getBoundingClientRect().right<250?t.classList.add("vditor-panel--left"):t.classList.remove("vditor-panel--left")))})},w=Ee(827),O=Ee(64),I=function(e,t,n,a){a&&console.log(e+" - "+n+": "+t)},W=Ee(478),z=Ee(314),ie=Ee(730),ae=Ee(66),oe=Ee(218),pe=Ee(702),$=Ee(466),ye=Ee(40),_e=Ee(563),Le=Ee(749),Te=Ee(408),Pe=function(e,t,n){n===void 0&&(n="sv");var a=document.createElement("div");a.innerHTML=e;var i=!1;a.childElementCount===1&&a.lastElementChild.style.fontFamily.indexOf("monospace")>-1&&(i=!0);var l=a.querySelectorAll("pre");if(a.childElementCount===1&&l.length===1&&l[0].className!=="vditor-wysiwyg"&&l[0].className!=="vditor-sv"&&(i=!0),e.indexOf(`
<p class="p1">`)===0&&(i=!0),a.childElementCount===1&&a.firstElementChild.tagName==="TABLE"&&a.querySelector(".line-number")&&a.querySelector(".line-content")&&(i=!0),i){var g=t||e;return/\n/.test(g)||l.length===1?n==="wysiwyg"?'<div class="vditor-wysiwyg__block" data-block="0" data-type="code-block"><pre><code>'+g.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"<wbr></code></pre></div>":"\n```\n"+g.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"\n```":n==="wysiwyg"?"<code>"+g.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"</code><wbr>":"`"+g+"`"}return!1},be=function(e,t){if(e){if(e.parentElement.getAttribute("data-type")==="html-block"){e.setAttribute("data-render","1");return}var n=e.firstElementChild.className.replace("language-","");n==="abc"?(0,W.Q)(e,t.options.staticPath.abc):n==="mermaid"?(0,ye.i)(e,t.options.staticPath.mermaid,t.options.theme):n==="markmap"?(0,_e.K)(e,t.options.staticPath.markmap,t.options.theme):n==="flowchart"?(0,ae.P)(e,t.options.staticPath.flowchart):n==="echarts"?(0,z.p)(e,t.options.staticPath.echarts,t.options.theme):n==="mindmap"?(0,Le.P)(e,t.options.staticPath.echarts,t.options.theme):n==="plantuml"?(0,Te.B)(e,t.options.staticPath.plantuml):n==="graphviz"?(0,oe.v)(e,t.options.staticPath.graphviz):n==="math"?(0,$.H)(e,{katex:t.options.staticPath.katex,mathjax:t.options.staticPath.mathjax,math:t.options.preview.math}):((0,pe.s)(Object.assign({},t.options.preview.hljs),e,t.options.staticPath.highlight),(0,ie.O)(e)),e.setAttribute("data-render","1")}},P=Ee(393),Fe=function(e){if(e.currentMode!=="sv"){var t=e[e.currentMode].element,n=e.outline.render(e);n===""&&(n="[ToC]"),t.querySelectorAll('[data-type="toc-block"]').forEach(function(a){a.innerHTML=n,(0,$.H)(a,{katex:e.options.staticPath.katex,mathjax:e.options.staticPath.mathjax,math:e.options.preview.math})})}},$e=function(e,t){var n=(0,w.lG)(e.target,"SPAN");if(n&&(0,w.fb)(n,"vditor-toc")){var a=t[t.currentMode].element.querySelector("#"+n.getAttribute("data-target-id"));if(a)if(t.options.height==="auto"){var i=a.offsetTop+t.element.offsetTop;t.options.toolbarConfig.pin||(i+=t.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,i)}else t.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,t.element.offsetTop),t[t.currentMode].element.scrollTop=a.offsetTop;return}},pt=function(e,t,n,a){if(e.previousElementSibling&&e.previousElementSibling.classList.contains("vditor-toc")){if(n.key==="Backspace"&&(0,P.im)(e,t[t.currentMode].element,a).start===0)return e.previousElementSibling.remove(),me(t),!0;if(Tt(t,n,a,e,e.previousElementSibling))return!0}if(e.nextElementSibling&&e.nextElementSibling.classList.contains("vditor-toc")){if(n.key==="Delete"&&(0,P.im)(e,t[t.currentMode].element,a).start>=e.textContent.trimRight().length)return e.nextElementSibling.remove(),me(t),!0;if(It(t,n,a,e,e.nextElementSibling))return!0}if(n.key==="Backspace"||n.key==="Delete"){var i=(0,w.fb)(a.startContainer,"vditor-toc");if(i)return i.remove(),me(t),!0}},Ge=function(e,t,n,a){n===void 0&&(n=!1);var i=(0,w.F9)(t.startContainer);if(i&&!n&&i.getAttribute("data-type")!=="code-block"){if(_n(i.innerHTML)&&i.previousElementSibling||Mn(i.innerHTML))return;for(var l=(0,P.im)(i,e.ir.element,t).start,g=!0,E=l-1;E>i.textContent.substr(0,l).lastIndexOf(`
`);E--)if(i.textContent.charAt(E)!==" "&&i.textContent.charAt(E)!=="	"){g=!1;break}l===0&&(g=!1);for(var A=!0,E=l-1;E<i.textContent.length;E++)if(i.textContent.charAt(E)!==" "&&i.textContent.charAt(E)!==`
`){A=!1;break}if(g){typeof e.options.input=="function"&&e.options.input(m(e));return}if(A){var S=(0,w.fb)(t.startContainer,"vditor-ir__marker");if(!S){var M=t.startContainer.previousSibling;M&&M.nodeType!==3&&M.classList.contains("vditor-ir__node--expand")&&M.classList.remove("vditor-ir__node--expand"),typeof e.options.input=="function"&&e.options.input(m(e));return}}}if(e.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(de){de.classList.remove("vditor-ir__node--expand")}),i||(i=e.ir.element),!i.querySelector("wbr")){var R=(0,w.fb)(t.startContainer,"vditor-ir__preview");R?R.previousElementSibling.insertAdjacentHTML("beforeend","<wbr>"):t.insertNode(document.createElement("wbr"))}i.querySelectorAll("[style]").forEach(function(de){de.removeAttribute("style")}),i.getAttribute("data-type")==="link-ref-defs-block"&&(i=e.ir.element);var Z=i.isEqualNode(e.ir.element),J=(0,w.a1)(i,"data-type","footnotes-block"),V="";if(Z)V=i.innerHTML;else{var re=(0,O.S)(t.startContainer,"BLOCKQUOTE"),Y=(0,w.O9)(t.startContainer);if(Y&&(i=Y),re&&(!Y||Y&&!re.contains(Y))&&(i=re),J&&(i=J),V=i.outerHTML,i.tagName==="UL"||i.tagName==="OL"){var X=i.previousElementSibling,ce=i.nextElementSibling;X&&(X.tagName==="UL"||X.tagName==="OL")&&(V=X.outerHTML+V,X.remove()),ce&&(ce.tagName==="UL"||ce.tagName==="OL")&&(V=V+ce.outerHTML,ce.remove()),V=V.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}else i.previousElementSibling&&i.previousElementSibling.textContent.replace(r.g.ZWSP,"")!==""&&a&&a.inputType==="insertParagraph"&&(V=i.previousElementSibling.outerHTML+V,i.previousElementSibling.remove());i.innerText.startsWith("```")||(e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(de){de&&!i.isEqualNode(de)&&(V+=de.outerHTML,de.remove())}),e.ir.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(de){de&&!i.isEqualNode(de)&&(V+=de.outerHTML,de.remove())}))}if(I("SpinVditorIRDOM",V,"argument",e.options.debugger),V=e.lute.SpinVditorIRDOM(V),I("SpinVditorIRDOM",V,"result",e.options.debugger),Z)i.innerHTML=V;else if(i.outerHTML=V,J){var te=(0,w.a1)(e.ir.element.querySelector("wbr"),"data-type","footnotes-def");if(te){var Q=te.textContent,ve=Q.substring(1,Q.indexOf("]:")),xe=e.ir.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+ve+'"]');xe&&xe.setAttribute("aria-label",Q.substr(ve.length+3).trim().substr(0,24))}}var De,We=e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']");We.forEach(function(de,Be){Be===0?De=de:(De.insertAdjacentHTML("beforeend",de.innerHTML),de.remove())}),We.length>0&&e.ir.element.insertAdjacentElement("beforeend",We[0]);var Ue,Ve=e.ir.element.querySelectorAll("[data-type='footnotes-block']");Ve.forEach(function(de,Be){Be===0?Ue=de:(Ue.insertAdjacentHTML("beforeend",de.innerHTML),de.remove())}),Ve.length>0&&e.ir.element.insertAdjacentElement("beforeend",Ve[0]),(0,P.ib)(e.ir.element,t),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(de){be(de,e)}),Fe(e),st(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},G=function(e,t){if(e==="")return!1;if(e.indexOf("⇧")===-1&&e.indexOf("⌘")===-1&&e.indexOf("⌥")===-1)return!(0,u.yl)(t)&&!t.altKey&&!t.shiftKey&&t.code===e;if(e==="⇧Tab")return!!(!(0,u.yl)(t)&&!t.altKey&&t.shiftKey&&t.code==="Tab");var n=e.split("");if(e.startsWith("⌥")){var a=n.length===3?n[2]:n[1];return!!((n.length===3?(0,u.yl)(t):!(0,u.yl)(t))&&t.altKey&&!t.shiftKey&&t.code===(/^[0-9]$/.test(a)?"Digit":"Key")+a)}e==="⌘Enter"&&(n=["⌘","Enter"]);var i=n.length>2&&n[0]==="⇧",l=i?n[2]:n[1];return i&&((0,u.vU)()||!/Mac/.test(navigator.platform))&&(l==="-"?l="_":l==="="&&(l="+")),!!((0,u.yl)(t)&&t.key.toLowerCase()===l.toLowerCase()&&!t.altKey&&(!i&&!t.shiftKey||i&&t.shiftKey))},U=function(e){var t=e.startContainer;if(t.nodeType===3&&t.nodeValue.length!==e.startOffset)return!1;for(var n=t.nextSibling;n&&n.textContent==="";)n=n.nextSibling;if(n){if(n&&n.nodeType!==3&&n.classList.contains("vditor-ir__node")&&!n.getAttribute("data-block"))return n}else{var a=(0,w.fb)(t,"vditor-ir__marker");if(a&&!a.nextSibling){var i=t.parentElement.parentElement.nextSibling;if(i&&i.nodeType!==3&&i.classList.contains("vditor-ir__node"))return i}return!1}return!1},F=function(e){var t=e.startContainer,n=t.previousSibling;return t.nodeType===3&&e.startOffset===0&&n&&n.nodeType!==3&&n.classList.contains("vditor-ir__node")&&!n.getAttribute("data-block")?n:!1},N=function(e,t){t.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(g){g.classList.remove("vditor-ir__node--expand")});var n=(0,w.JQ)(e.startContainer,"vditor-ir__node"),a=!e.collapsed&&(0,w.JQ)(e.endContainer,"vditor-ir__node");if(!(!e.collapsed&&(!n||n!==a))){n&&(n.classList.add("vditor-ir__node--expand"),n.classList.remove("vditor-ir__node--hidden"),(0,P.Hc)(e));var i=U(e);if(i){i.classList.add("vditor-ir__node--expand"),i.classList.remove("vditor-ir__node--hidden");return}var l=F(e);if(l){l.classList.add("vditor-ir__node--expand"),l.classList.remove("vditor-ir__node--hidden");return}}},K=function(e,t){if(e.ir.composingLock=t.isComposing,t.isComposing)return!1;t.key.indexOf("Arrow")===-1&&t.key!=="Meta"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Shift"&&t.key!=="CapsLock"&&t.key!=="Escape"&&!/^F\d{1,2}$/.test(t.key)&&e.undo.recordFirstPosition(e,t);var n=(0,P.zh)(e),a=n.startContainer;if(!gr(t,e,a)||(yr(n,e,t),Dr(n),t.key!=="Enter"&&t.key!=="Tab"&&t.key!=="Backspace"&&t.key.indexOf("Arrow")===-1&&!(0,u.yl)(t)&&t.key!=="Escape"&&t.key!=="Delete"))return!1;var i=(0,w.a1)(a,"data-newline","1");if(!(0,u.yl)(t)&&!t.altKey&&!t.shiftKey&&t.key==="Enter"&&i&&n.startOffset<i.textContent.length){var l=i.previousElementSibling;l&&(n.insertNode(document.createTextNode(l.textContent)),n.collapse(!1));var g=i.nextSibling;g&&(n.insertNode(document.createTextNode(g.textContent)),n.collapse(!0))}var E=(0,w.lG)(a,"P");if(Sr(t,e,E,n)||Er(n,e,E,t)||_r(e,n,t,E))return!0;var A=(0,w.fb)(a,"vditor-ir__marker--pre");if(A&&A.tagName==="PRE"){var S=A.firstChild;if(Lr(e,t,A,n)||(S.getAttribute("data-type")==="math-block"||S.getAttribute("data-type")==="html-block")&&Tt(e,t,n,S,A.parentElement)||It(e,t,n,S,A.parentElement))return!0}var M=(0,w.a1)(a,"data-type","code-block-info");if(M){if(t.key==="Enter"||t.key==="Tab")return n.selectNodeContents(M.nextElementSibling.firstChild),n.collapse(!0),t.preventDefault(),x(e,["hint"]),!0;if(t.key==="Backspace"){var R=(0,P.im)(M,e.ir.element).start;R===1&&n.setStart(a,0),R===2&&(e.hint.recentLanguage="")}if(Tt(e,t,n,M,M.parentElement))return x(e,["hint"]),!0}var Z=(0,w.lG)(a,"TD")||(0,w.lG)(a,"TH");if(t.key.indexOf("Arrow")>-1&&Z){var J=ya(Z);if(J&&Tt(e,t,n,Z,J))return!0;var V=ba(Z);if(V&&It(e,t,n,Z,V))return!0}if(xr(e,t,n)||Mr(e,n,t)||On(e,n,t))return!0;var re=(0,O.W)(a);if(re){if(G("⌘=",t)){var Y=re.querySelector(".vditor-ir__marker--heading");return Y&&Y.textContent.trim().length>1&&jt(e,Y.textContent.substr(1)),t.preventDefault(),!0}if(G("⌘-",t)){var Y=re.querySelector(".vditor-ir__marker--heading");return Y&&Y.textContent.trim().length<6&&jt(e,Y.textContent.trim()+"# "),t.preventDefault(),!0}}var X=(0,w.F9)(a);if(t.key==="Backspace"&&!(0,u.yl)(t)&&!t.shiftKey&&!t.altKey&&n.toString()===""){if(Or(e,n,t,E))return!0;if(X&&X.previousElementSibling&&X.tagName!=="UL"&&X.tagName!=="OL"&&(X.previousElementSibling.getAttribute("data-type")==="code-block"||X.previousElementSibling.getAttribute("data-type")==="math-block")){var ce=(0,P.im)(X,e.ir.element,n).start;if(ce===0||ce===1&&X.innerText.startsWith(r.g.ZWSP))return n.selectNodeContents(X.previousElementSibling.querySelector(".vditor-ir__marker--pre code")),n.collapse(!1),N(n,e),X.textContent.trim().replace(r.g.ZWSP,"")===""&&(X.remove(),st(e)),t.preventDefault(),!0}if(re){var te=re.firstElementChild.textContent.length;(0,P.im)(re,e.ir.element).start===te&&(n.setStart(re.firstElementChild.firstChild,te-1),n.collapse(!0),(0,P.Hc)(n))}}return(t.key==="ArrowUp"||t.key==="ArrowDown")&&X&&(X.querySelectorAll(".vditor-ir__node").forEach(function(Q){Q.contains(a)||Q.classList.add("vditor-ir__node--hidden")}),Pr(t,X,n))?!0:(br(n,t.key),X&&pt(X,e,t,n)?(t.preventDefault(),!0):!1)},ee=Ee(863),le=function(e,t){var n,a=getSelection().getRangeAt(0).cloneRange(),i=a.startContainer;a.startContainer.nodeType!==3&&a.startContainer.tagName==="DIV"&&(i=a.startContainer.childNodes[a.startOffset-1]);var l=(0,w.a1)(i,"data-block","0");if(l&&t&&(t.inputType==="deleteContentBackward"||t.data===" ")){for(var g=(0,P.im)(l,e.sv.element,a).start,E=!0,A=g-1;A>l.textContent.substr(0,g).lastIndexOf(`
`);A--)if(l.textContent.charAt(A)!==" "&&l.textContent.charAt(A)!=="	"){E=!1;break}if(g===0&&(E=!1),E){Ie(e);return}if(t.inputType==="deleteContentBackward"){var S=(0,w.a1)(i,"data-type","code-block-open-marker")||(0,w.a1)(i,"data-type","code-block-close-marker");if(S){if(S.getAttribute("data-type")==="code-block-close-marker"){var M=Zt(i,"code-block-open-marker");if(M){M.textContent=S.textContent,Ie(e);return}}if(S.getAttribute("data-type")==="code-block-open-marker"){var M=Zt(i,"code-block-close-marker",!1);if(M){M.textContent=S.textContent,Ie(e);return}}}var R=(0,w.a1)(i,"data-type","math-block-open-marker");if(R){var Z=R.nextElementSibling.nextElementSibling;Z&&Z.getAttribute("data-type")==="math-block-close-marker"&&(Z.remove(),Ie(e));return}l.querySelectorAll('[data-type="code-block-open-marker"]').forEach(function(Q){Q.textContent.length===1&&Q.remove()}),l.querySelectorAll('[data-type="code-block-close-marker"]').forEach(function(Q){Q.textContent.length===1&&Q.remove()});var J=(0,w.a1)(i,"data-type","heading-marker");if(J&&J.textContent.indexOf("#")===-1){Ie(e);return}}if((t.data===" "||t.inputType==="deleteContentBackward")&&((0,w.a1)(i,"data-type","padding")||(0,w.a1)(i,"data-type","li-marker")||(0,w.a1)(i,"data-type","task-marker")||(0,w.a1)(i,"data-type","blockquote-marker"))){Ie(e);return}}if(l&&l.textContent.trimRight()==="$$"){Ie(e);return}l||(l=e.sv.element),((n=l.firstElementChild)===null||n===void 0?void 0:n.getAttribute("data-type"))==="link-ref-defs-block"&&(l=e.sv.element),(0,w.a1)(i,"data-type","footnotes-link")&&(l=e.sv.element),l.textContent.indexOf(Lute.Caret)===-1&&a.insertNode(document.createTextNode(Lute.Caret)),l.querySelectorAll("[style]").forEach(function(Q){Q.removeAttribute("style")}),l.querySelectorAll("font").forEach(function(Q){Q.outerHTML=Q.innerHTML});var V=l.textContent,re=l.isEqualNode(e.sv.element);re?V=l.textContent:(l.previousElementSibling&&(V=l.previousElementSibling.textContent+V,l.previousElementSibling.remove()),l.previousElementSibling&&V.indexOf(`---
`)===0&&(V=l.previousElementSibling.textContent+V,l.previousElementSibling.remove()),l.innerText.startsWith("```")||(e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(Q,ve){ve===0&&Q&&!l.isEqualNode(Q.parentElement)&&(V+=`
`+Q.parentElement.textContent,Q.parentElement.remove())}),e.sv.element.querySelectorAll("[data-type='footnotes-link']").forEach(function(Q,ve){ve===0&&Q&&!l.isEqualNode(Q.parentElement)&&(V+=`
`+Q.parentElement.textContent,Q.parentElement.remove())}))),V=pr(V,e),re?l.innerHTML=V:l.outerHTML=V;var Y,X=e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']");X.forEach(function(Q,ve){ve===0?Y=Q.parentElement:(Y.lastElementChild.remove(),Y.insertAdjacentHTML("beforeend",""+Q.parentElement.innerHTML),Q.parentElement.remove())}),X.length>0&&e.sv.element.insertAdjacentElement("beforeend",Y);var ce,te=e.sv.element.querySelectorAll("[data-type='footnotes-link']");te.forEach(function(Q,ve){ve===0?ce=Q.parentElement:(ce.lastElementChild.remove(),ce.insertAdjacentHTML("beforeend",""+Q.parentElement.innerHTML),Q.parentElement.remove())}),te.length>0&&e.sv.element.insertAdjacentElement("beforeend",ce),(0,P.ib)(e.sv.element,a),He(e),Ie(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},ue=function(e,t){var n,a,i,l,g;if(e.sv.composingLock=t.isComposing,t.isComposing||(t.key.indexOf("Arrow")===-1&&t.key!=="Meta"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Shift"&&t.key!=="CapsLock"&&t.key!=="Escape"&&!/^F\d{1,2}$/.test(t.key)&&e.undo.recordFirstPosition(e,t),t.key!=="Enter"&&t.key!=="Tab"&&t.key!=="Backspace"&&t.key.indexOf("Arrow")===-1&&!(0,u.yl)(t)&&t.key!=="Escape"))return!1;var E=(0,P.zh)(e),A=E.startContainer;E.startContainer.nodeType!==3&&E.startContainer.tagName==="DIV"&&(A=E.startContainer.childNodes[E.startOffset-1]);var S=(0,w.a1)(A,"data-type","text"),M=(0,w.a1)(A,"data-type","blockquote-marker");if(!M&&E.startOffset===0&&S&&S.previousElementSibling&&S.previousElementSibling.getAttribute("data-type")==="blockquote-marker"&&(M=S.previousElementSibling),M&&t.key==="Enter"&&!(0,u.yl)(t)&&!t.altKey&&M.nextElementSibling.textContent.trim()===""&&(0,P.im)(M,e.sv.element,E).start===M.textContent.length)return((n=M.previousElementSibling)===null||n===void 0?void 0:n.getAttribute("data-type"))==="padding"&&M.previousElementSibling.setAttribute("data-action","enter-remove"),M.remove(),Ie(e),t.preventDefault(),!0;var R=(0,w.a1)(A,"data-type","li-marker"),Z=(0,w.a1)(A,"data-type","task-marker"),J=R;if(J||Z&&Z.nextElementSibling.getAttribute("data-type")!=="task-marker"&&(J=Z),!J&&E.startOffset===0&&S&&S.previousElementSibling&&(S.previousElementSibling.getAttribute("data-type")==="li-marker"||S.previousElementSibling.getAttribute("data-type")==="task-marker")&&(J=S.previousElementSibling),J){var V=(0,P.im)(J,e.sv.element,E).start,re=J.getAttribute("data-type")==="task-marker",Y=J;if(re&&(Y=J.previousElementSibling.previousElementSibling.previousElementSibling),V===J.textContent.length){if(t.key==="Enter"&&!(0,u.yl)(t)&&!t.altKey&&!t.shiftKey&&J.nextElementSibling.textContent.trim()==="")return((a=Y.previousElementSibling)===null||a===void 0?void 0:a.getAttribute("data-type"))==="padding"?(Y.previousElementSibling.remove(),le(e)):(re&&(Y.remove(),J.previousElementSibling.previousElementSibling.remove(),J.previousElementSibling.remove()),J.nextElementSibling.remove(),J.remove(),Ie(e)),t.preventDefault(),!0;if(t.key==="Tab")return Y.insertAdjacentHTML("beforebegin",'<span data-type="padding">'+Y.textContent.replace(/\S/g," ")+"</span>"),/^\d/.test(Y.textContent)&&(Y.textContent=Y.textContent.replace(/^\d{1,}/,"1"),E.selectNodeContents(J.firstChild),E.collapse(!1)),le(e),t.preventDefault(),!0}}if(On(e,E,t))return!0;var X=(0,w.a1)(A,"data-block","0"),ce=(0,O.S)(A,"SPAN");if(t.key==="Enter"&&!(0,u.yl)(t)&&!t.altKey&&!t.shiftKey&&X){var te=!1,Q=X.textContent.match(/^\n+/);(0,P.im)(X,e.sv.element).start<=(Q?Q[0].length:0)&&(te=!0);var ve=`
`;if(ce){if(((i=ce.previousElementSibling)===null||i===void 0?void 0:i.getAttribute("data-action"))==="enter-remove")return ce.previousElementSibling.remove(),Ie(e),t.preventDefault(),!0;ve+=sa(ce)}return E.insertNode(document.createTextNode(ve)),E.collapse(!1),X&&X.textContent.trim()!==""&&!te?le(e):Ie(e),t.preventDefault(),!0}if(t.key==="Backspace"&&!(0,u.yl)(t)&&!t.altKey&&!t.shiftKey){if(ce&&((l=ce.previousElementSibling)===null||l===void 0?void 0:l.getAttribute("data-type"))==="newline"&&(0,P.im)(ce,e.sv.element,E).start===1&&ce.getAttribute("data-type").indexOf("code-block-")===-1)return E.setStart(ce,0),E.extractContents(),ce.textContent.trim()!==""?le(e):Ie(e),t.preventDefault(),!0;if(X&&(0,P.im)(X,e.sv.element,E).start===0&&X.previousElementSibling){E.extractContents();var xe=X.previousElementSibling.lastElementChild;return xe.getAttribute("data-type")==="newline"&&(xe.remove(),xe=X.previousElementSibling.lastElementChild),xe.getAttribute("data-type")!=="newline"&&(xe.insertAdjacentHTML("afterend",X.innerHTML),X.remove()),X.textContent.trim()!==""&&!(!((g=X.previousElementSibling)===null||g===void 0)&&g.querySelector('[data-type="code-block-open-marker"]'))?le(e):(xe.getAttribute("data-type")!=="newline"&&(E.selectNodeContents(xe.lastChild),E.collapse(!1)),Ie(e)),t.preventDefault(),!0}}return!1},he=Ee(227),se=function(e){switch(e.options.theme){case"dark":e.element.classList.toggle("vditor--dark",!0);break;case"classic":default:e.element.classList.toggle("vditor--dark",!1);break}},Me=function(e){e.element.innerHTML="",e.element.classList.add("vditor"),e.options.rtl&&e.element.setAttribute("dir","rtl"),se(e),(0,he.Z)(e.options.preview.theme.current,e.options.preview.theme.path),typeof e.options.height=="number"?e.element.style.height=e.options.height+"px":e.element.style.height=e.options.height,typeof e.options.minHeight=="number"&&(e.element.style.minHeight=e.options.minHeight+"px"),typeof e.options.width=="number"?e.element.style.width=e.options.width+"px":e.element.style.width=e.options.width,e.element.appendChild(e.toolbar.element);var t=document.createElement("div");if(t.className="vditor-content",e.options.outline.position==="left"&&t.appendChild(e.outline.element),t.appendChild(e.wysiwyg.element.parentElement),t.appendChild(e.sv.element),t.appendChild(e.ir.element.parentElement),t.appendChild(e.preview.element),e.toolbar.elements.devtools&&t.appendChild(e.devtools.element),e.options.outline.position==="right"&&(e.outline.element.classList.add("vditor-outline--right"),t.appendChild(e.outline.element)),e.upload&&t.appendChild(e.upload.element),e.options.resize.enable&&t.appendChild(e.resize.element),t.appendChild(e.hint.element),t.appendChild(e.tip.element),e.element.appendChild(t),t.addEventListener("click",function(){x(e,["subToolbar"])}),e.toolbar.elements.export&&e.element.insertAdjacentHTML("beforeend",'<iframe id="vditorExportIframe" style="width: 100%;height: 0;border: 0"></iframe>'),vt(e,e.options.mode,yn(e)),document.execCommand("DefaultParagraphSeparator",!1,"p"),navigator.userAgent.indexOf("iPhone")>-1&&typeof window.visualViewport<"u"){var n=!1,a=function(i){n||(n=!0,requestAnimationFrame(function(){n=!1;var l=e.toolbar.element;l.style.transform="none",l.getBoundingClientRect().top<0&&(l.style.transform="translate(0, "+-l.getBoundingClientRect().top+"px)")}))};window.visualViewport.addEventListener("scroll",a),window.visualViewport.addEventListener("resize",a)}},qe=function(e){var t=window.innerWidth<=r.g.MOBILE_WIDTH?10:35;if(e.wysiwyg.element.parentElement.style.display!=="none"){var n=(e.wysiwyg.element.parentElement.clientWidth-e.options.preview.maxWidth)/2;e.wysiwyg.element.style.padding="10px "+Math.max(t,n)+"px"}if(e.ir.element.parentElement.style.display!=="none"){var n=(e.ir.element.parentElement.clientWidth-e.options.preview.maxWidth)/2;e.ir.element.style.padding="10px "+Math.max(t,n)+"px"}e.preview.element.style.display!=="block"?e.toolbar.element.style.paddingLeft=Math.max(5,parseInt(e[e.currentMode].element.style.paddingLeft||"0",10)+(e.options.outline.position==="left"?e.outline.element.offsetWidth:0))+"px":e.toolbar.element.style.paddingLeft=5+(e.options.outline.position==="left"?e.outline.element.offsetWidth:0)+"px"},yt=function(e){if(e.options.typewriterMode){var t=window.innerHeight;typeof e.options.height=="number"?(t=e.options.height,typeof e.options.minHeight=="number"&&(t=Math.max(t,e.options.minHeight)),t=Math.min(window.innerHeight,t)):t=e.element.clientHeight,e.element.classList.contains("vditor--fullscreen")&&(t=window.innerHeight),e[e.currentMode].element.style.setProperty("--editor-bottom",(t-e.toolbar.element.offsetHeight)/2+"px")}},ot;function dt(){window.removeEventListener("resize",ot)}var yn=function(e){yt(e),dt(),window.addEventListener("resize",ot=function(){qe(e),yt(e)});var t=(0,u.pK)()&&localStorage.getItem(e.options.cache.id);return(!e.options.cache.enable||!t)&&(e.options.value?t=e.options.value:e.originalInnerHTML?t=e.lute.HTML2Md(e.originalInnerHTML):e.options.cache.enable||(t="")),t||""},bt=function(e){clearTimeout(e[e.currentMode].hlToolbarTimeoutId),e[e.currentMode].hlToolbarTimeoutId=window.setTimeout(function(){if(e[e.currentMode].element.getAttribute("contenteditable")!=="false"&&(0,P.Gb)(e[e.currentMode].element)){f(e.toolbar.elements,r.g.EDIT_TOOLBARS),v(e.toolbar.elements,r.g.EDIT_TOOLBARS);var t=(0,P.zh)(e),n=t.startContainer;t.startContainer.nodeType===3&&(n=t.startContainer.parentElement),n.classList.contains("vditor-reset")&&(n=n.childNodes[t.startOffset]);var a=e.currentMode==="sv"?(0,w.a1)(n,"data-type","heading"):(0,O.W)(n);a&&b(e.toolbar.elements,["headings"]);var i=e.currentMode==="sv"?(0,w.a1)(n,"data-type","blockquote"):(0,w.lG)(n,"BLOCKQUOTE");i&&b(e.toolbar.elements,["quote"]);var l=(0,w.a1)(n,"data-type","strong");l&&b(e.toolbar.elements,["bold"]);var g=(0,w.a1)(n,"data-type","em");g&&b(e.toolbar.elements,["italic"]);var E=(0,w.a1)(n,"data-type","s");E&&b(e.toolbar.elements,["strike"]);var A=(0,w.a1)(n,"data-type","a");A&&b(e.toolbar.elements,["link"]);var S=(0,w.lG)(n,"LI");S?(S.classList.contains("vditor-task")?b(e.toolbar.elements,["check"]):S.parentElement.tagName==="OL"?b(e.toolbar.elements,["ordered-list"]):S.parentElement.tagName==="UL"&&b(e.toolbar.elements,["list"]),v(e.toolbar.elements,["outdent","indent"])):d(e.toolbar.elements,["outdent","indent"]);var M=(0,w.a1)(n,"data-type","code-block");M&&(d(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),b(e.toolbar.elements,["code"]));var R=(0,w.a1)(n,"data-type","code");R&&(d(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),b(e.toolbar.elements,["inline-code"]));var Z=(0,w.a1)(n,"data-type","table");Z&&d(e.toolbar.elements,["headings","list","ordered-list","check","line","quote","code","table"])}},200)},ke=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),clearTimeout(e.wysiwyg.afterRenderTimeoutId),e.wysiwyg.afterRenderTimeoutId=window.setTimeout(function(){if(!e.wysiwyg.composingLock){var n=m(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,u.pK)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},bn=function(e){for(var t=e.previousSibling;t;){if(t.nodeType!==3&&t.tagName==="A"&&!t.previousSibling&&t.innerHTML.replace(r.g.ZWSP,"")===""&&t.nextSibling)return t;t=t.previousSibling}return!1},wn=function(e){for(var t=e.startContainer.nextSibling;t&&t.textContent==="";)t=t.nextSibling;return!!(t&&t.nodeType!==3&&(t.tagName==="CODE"||t.getAttribute("data-type")==="math-inline"||t.getAttribute("data-type")==="html-entity"||t.getAttribute("data-type")==="html-inline"))},Rt=function(e){for(var t="",n=e.nextSibling;n;)n.nodeType===3?t+=n.textContent:t+=n.outerHTML,n=n.nextSibling;return t},wt=function(e){for(var t="",n=e.previousSibling;n;)n.nodeType===3?t=n.textContent+t:t=n.outerHTML+t,n=n.previousSibling;return t},Je=function(e){for(var t=e;t&&!t.nextSibling;)t=t.parentElement;return t.nextSibling},Ht=function(e){var t=wt(e.startContainer),n=Rt(e.startContainer),a=e.startContainer.textContent,i=e.startOffset,l="",g="";return(a.substr(0,i)!==""&&a.substr(0,i)!==r.g.ZWSP||t)&&(l=""+t+a.substr(0,i)),(a.substr(i)!==""&&a.substr(i)!==r.g.ZWSP||n)&&(g=""+a.substr(i)+n),{afterHTML:g,beforeHTML:l}},Jt=function(e,t){Array.from(e.wysiwyg.element.childNodes).find(function(n){if(n.nodeType===3){var a=document.createElement("p");a.setAttribute("data-block","0"),a.textContent=n.textContent;var i=t.startContainer.nodeType===3?t.startOffset:n.textContent.length;return n.parentNode.insertBefore(a,n),n.remove(),t.setStart(a.firstChild,Math.min(a.firstChild.textContent.length,i)),t.collapse(!0),(0,P.Hc)(t),!0}else if(!n.getAttribute("data-block"))return n.tagName==="P"?n.remove():(n.tagName==="DIV"?(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.innerHTML+"</p>"):n.tagName==="BR"?n.outerHTML='<p data-block="0">'+n.outerHTML+"<wbr></p>":(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.outerHTML+"</p>"),(0,P.ib)(e.wysiwyg.element,t),t=getSelection().getRangeAt(0)),!0})},ze=function(e,t){var n=(0,P.zh)(e),a=(0,w.F9)(n.startContainer);a||(a=n.startContainer.childNodes[n.startOffset]),!a&&e.wysiwyg.element.children.length===0&&(a=e.wysiwyg.element),a&&!a.classList.contains("vditor-wysiwyg__block")&&(n.insertNode(document.createElement("wbr")),a.innerHTML.trim()==="<wbr>"&&(a.innerHTML="<wbr><br>"),a.tagName==="BLOCKQUOTE"||a.classList.contains("vditor-reset")?a.innerHTML="<"+t+' data-block="0">'+a.innerHTML.trim()+"</"+t+">":a.outerHTML="<"+t+' data-block="0">'+a.innerHTML.trim()+"</"+t+">",(0,P.ib)(e.wysiwyg.element,n),Fe(e))},Bt=function(e){var t=getSelection().getRangeAt(0),n=(0,w.F9)(t.startContainer);n||(n=t.startContainer.childNodes[t.startOffset]),n&&(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.innerHTML+"</p>",(0,P.ib)(e.wysiwyg.element,t)),e.wysiwyg.popover.style.display="none"},T=function(e,t,n){n===void 0&&(n=!0);var a=e.previousElementSibling,i=a.ownerDocument.createRange();a.tagName==="CODE"?(a.style.display="inline-block",n?i.setStart(a.firstChild,1):i.selectNodeContents(a)):(a.style.display="block",a.firstChild.firstChild||a.firstChild.appendChild(document.createTextNode("")),i.selectNodeContents(a.firstChild)),n?i.collapse(!0):i.collapse(!1),(0,P.Hc)(i),!e.firstElementChild.classList.contains("language-mindmap")&&He(t)},p=function(e,t){if(e.wysiwyg.composingLock=t.isComposing,t.isComposing)return!1;t.key.indexOf("Arrow")===-1&&t.key!=="Meta"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Shift"&&t.key!=="CapsLock"&&t.key!=="Escape"&&!/^F\d{1,2}$/.test(t.key)&&e.undo.recordFirstPosition(e,t);var n=(0,P.zh)(e),a=n.startContainer;if(!gr(t,e,a)||(yr(n,e,t),Dr(n),t.key!=="Enter"&&t.key!=="Tab"&&t.key!=="Backspace"&&t.key.indexOf("Arrow")===-1&&!(0,u.yl)(t)&&t.key!=="Escape"&&t.key!=="Delete"))return!1;var i=(0,w.F9)(a),l=(0,w.lG)(a,"P");if(Sr(t,e,l,n)||Er(n,e,l,t)||xr(e,t,n))return!0;var g=(0,w.fb)(a,"vditor-wysiwyg__block");if(g){if(t.key==="Escape"&&g.children.length===2)return e.wysiwyg.popover.style.display="none",g.firstElementChild.style.display="none",e.wysiwyg.element.blur(),t.preventDefault(),!0;if(!(0,u.yl)(t)&&!t.shiftKey&&t.altKey&&t.key==="Enter"&&g.getAttribute("data-type")==="code-block"){var E=e.wysiwyg.popover.querySelector(".vditor-input");return E.focus(),E.select(),t.preventDefault(),!0}if(g.getAttribute("data-block")==="0"&&(Lr(e,t,g.firstElementChild,n)||It(e,t,n,g.firstElementChild,g)||g.getAttribute("data-type")!=="yaml-front-matter"&&Tt(e,t,n,g.firstElementChild,g)))return!0}if(_r(e,n,t,l))return!0;var A=(0,w.E2)(a,"BLOCKQUOTE");if(A&&!t.shiftKey&&t.altKey&&t.key==="Enter"){(0,u.yl)(t)?n.setStartBefore(A):n.setStartAfter(A),(0,P.Hc)(n);var S=document.createElement("p");return S.setAttribute("data-block","0"),S.innerHTML=`
`,n.insertNode(S),n.collapse(!0),(0,P.Hc)(n),ke(e),He(e),t.preventDefault(),!0}var M=(0,O.W)(a);if(M){if(M.tagName==="H6"&&a.textContent.length===n.startOffset&&!(0,u.yl)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Enter"){var R=document.createElement("p");return R.textContent=`
`,R.setAttribute("data-block","0"),a.parentElement.insertAdjacentElement("afterend",R),n.setStart(R,0),(0,P.Hc)(n),ke(e),He(e),t.preventDefault(),!0}if(G("⌘=",t)){var Z=parseInt(M.tagName.substr(1),10)-1;return Z>0&&(ze(e,"h"+Z),ke(e)),t.preventDefault(),!0}if(G("⌘-",t)){var Z=parseInt(M.tagName.substr(1),10)+1;return Z<7&&(ze(e,"h"+Z),ke(e)),t.preventDefault(),!0}t.key==="Backspace"&&!(0,u.yl)(t)&&!t.shiftKey&&!t.altKey&&M.textContent.length===1&&Bt(e)}if(Mr(e,n,t))return!0;if(t.altKey&&t.key==="Enter"&&!(0,u.yl)(t)&&!t.shiftKey){var J=(0,w.lG)(a,"A"),V=(0,w.a1)(a,"data-type","link-ref"),re=(0,w.a1)(a,"data-type","footnotes-ref");if(J||V||re||M&&M.tagName.length===2){var Y=e.wysiwyg.popover.querySelector("input");Y.focus(),Y.select()}}if(h(e,t))return!0;if(G("⇧⌘U",t)){var X=e.wysiwyg.popover.querySelector('[data-type="up"]');if(X)return X.click(),t.preventDefault(),!0}if(G("⇧⌘D",t)){var X=e.wysiwyg.popover.querySelector('[data-type="down"]');if(X)return X.click(),t.preventDefault(),!0}if(On(e,n,t))return!0;if(!(0,u.yl)(t)&&t.shiftKey&&!t.altKey&&t.key==="Enter"&&a.parentElement.tagName!=="LI"&&a.parentElement.tagName!=="P")return["STRONG","STRIKE","S","I","EM","B"].includes(a.parentElement.tagName)?n.insertNode(document.createTextNode(`
`+r.g.ZWSP)):n.insertNode(document.createTextNode(`
`)),n.collapse(!1),(0,P.Hc)(n),ke(e),He(e),t.preventDefault(),!0;if(t.key==="Backspace"&&!(0,u.yl)(t)&&!t.shiftKey&&!t.altKey&&n.toString()===""){if(Or(e,n,t,l))return!0;if(i){if(i.previousElementSibling&&i.previousElementSibling.classList.contains("vditor-wysiwyg__block")&&i.previousElementSibling.getAttribute("data-block")==="0"&&i.tagName!=="UL"&&i.tagName!=="OL"){var ce=(0,P.im)(i,e.wysiwyg.element,n).start;if(ce===0&&n.startOffset===0||ce===1&&i.innerText.startsWith(r.g.ZWSP))return T(i.previousElementSibling.lastElementChild,e,!1),i.innerHTML.trim().replace(r.g.ZWSP,"")===""&&(i.remove(),ke(e)),t.preventDefault(),!0}var te=n.startOffset;if(n.toString()===""&&a.nodeType===3&&a.textContent.charAt(te-2)===`
`&&a.textContent.charAt(te-1)!==r.g.ZWSP&&["STRONG","STRIKE","S","I","EM","B"].includes(a.parentElement.tagName))return a.textContent=a.textContent.substring(0,te-1)+r.g.ZWSP,n.setStart(a,te),n.collapse(!0),ke(e),t.preventDefault(),!0;a.textContent===r.g.ZWSP&&n.startOffset===1&&!a.previousSibling&&wn(n)&&(a.textContent=""),i.querySelectorAll("span.vditor-wysiwyg__block[data-type='math-inline']").forEach(function(ve){ve.firstElementChild.style.display="inline",ve.lastElementChild.style.display="none"}),i.querySelectorAll("span.vditor-wysiwyg__block[data-type='html-entity']").forEach(function(ve){ve.firstElementChild.style.display="inline",ve.lastElementChild.style.display="none"})}}if((0,u.vU)()&&n.startOffset===1&&a.textContent.indexOf(r.g.ZWSP)>-1&&a.previousSibling&&a.previousSibling.nodeType!==3&&a.previousSibling.tagName==="CODE"&&(t.key==="Backspace"||t.key==="ArrowLeft"))return n.selectNodeContents(a.previousSibling),n.collapse(!1),t.preventDefault(),!0;if(Pr(t,i,n))return t.preventDefault(),!0;if(br(n,t.key),t.key==="ArrowDown"){var Q=a.nextSibling;Q&&Q.nodeType!==3&&Q.getAttribute("data-type")==="math-inline"&&n.setStartAfter(Q)}return i&&pt(i,e,t,n)?(t.preventDefault(),!0):!1},h=function(e,t){if(G("⇧⌘X",t)){var n=e.wysiwyg.popover.querySelector('[data-type="remove"]');return n&&n.click(),t.preventDefault(),!0}},_=function(e){clearTimeout(e.wysiwyg.hlToolbarTimeoutId),e.wysiwyg.hlToolbarTimeoutId=window.setTimeout(function(){if(e.wysiwyg.element.getAttribute("contenteditable")!=="false"&&(0,P.Gb)(e.wysiwyg.element)){f(e.toolbar.elements,r.g.EDIT_TOOLBARS),v(e.toolbar.elements,r.g.EDIT_TOOLBARS);var t=getSelection().getRangeAt(0),n=t.startContainer;t.startContainer.nodeType===3?n=t.startContainer.parentElement:n=n.childNodes[t.startOffset>=n.childNodes.length?n.childNodes.length-1:t.startOffset];var a=(0,w.a1)(n,"data-type","footnotes-block");if(a){e.wysiwyg.popover.innerHTML="",we(a,e),D(e,a);return}var i=(0,w.lG)(n,"LI");i?(i.classList.contains("vditor-task")?b(e.toolbar.elements,["check"]):i.parentElement.tagName==="OL"?b(e.toolbar.elements,["ordered-list"]):i.parentElement.tagName==="UL"&&b(e.toolbar.elements,["list"]),v(e.toolbar.elements,["outdent","indent"])):d(e.toolbar.elements,["outdent","indent"]),(0,w.lG)(n,"BLOCKQUOTE")&&b(e.toolbar.elements,["quote"]),((0,w.lG)(n,"B")||(0,w.lG)(n,"STRONG"))&&b(e.toolbar.elements,["bold"]),((0,w.lG)(n,"I")||(0,w.lG)(n,"EM"))&&b(e.toolbar.elements,["italic"]),((0,w.lG)(n,"STRIKE")||(0,w.lG)(n,"S"))&&b(e.toolbar.elements,["strike"]),e.wysiwyg.element.querySelectorAll(".vditor-comment--focus").forEach(function(ne){ne.classList.remove("vditor-comment--focus")});var l=(0,w.fb)(n,"vditor-comment");if(l){var g=l.getAttribute("data-cmtids").split(" ");if(g.length>1&&l.nextSibling.isSameNode(l.nextElementSibling)){var E=l.nextElementSibling.getAttribute("data-cmtids").split(" ");g.find(function(ne){if(E.includes(ne))return g=[ne],!0})}e.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(ne){ne.getAttribute("data-cmtids").indexOf(g[0])>-1&&ne.classList.add("vditor-comment--focus")})}var A=(0,w.lG)(n,"A");A&&b(e.toolbar.elements,["link"]);var S=(0,w.lG)(n,"TABLE"),M=(0,O.W)(n);(0,w.lG)(n,"CODE")?(0,w.lG)(n,"PRE")?(d(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),b(e.toolbar.elements,["code"])):(d(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),b(e.toolbar.elements,["inline-code"])):M?(d(e.toolbar.elements,["bold"]),b(e.toolbar.elements,["headings"])):S&&d(e.toolbar.elements,["table"]);var R=(0,w.fb)(n,"vditor-toc");if(R){e.wysiwyg.popover.innerHTML="",we(R,e),D(e,R);return}var Z=(0,O.S)(n,"BLOCKQUOTE");if(Z&&(e.wysiwyg.popover.innerHTML="",j(t,Z,e),fe(t,Z,e),we(Z,e),D(e,Z)),i&&(e.wysiwyg.popover.innerHTML="",j(t,i,e),fe(t,i,e),we(i,e),D(e,i)),S){e.options.lang,e.options,e.wysiwyg.popover.innerHTML="";var J=function(){var ne=S.rows.length,ge=S.rows[0].cells.length,Et=parseInt(Be.value,10)||ne,ct=parseInt(Ke.value,10)||ge;if(!(Et===ne&&ge===ct)){if(ge!==ct)for(var Vr=ct-ge,Ct=0;Ct<S.rows.length;Ct++)if(Vr>0)for(var zr=0;zr<Vr;zr++)Ct===0?S.rows[Ct].lastElementChild.insertAdjacentHTML("afterend","<th> </th>"):S.rows[Ct].lastElementChild.insertAdjacentHTML("afterend","<td> </td>");else for(var Rn=ge-1;Rn>=ct;Rn--)S.rows[Ct].cells[Rn].remove();if(ne!==Et){var Kr=Et-ne;if(Kr>0){for(var Hn="<tr>",xt=0;xt<ct;xt++)Hn+="<td> </td>";for(var Gr=0;Gr<Kr;Gr++)S.querySelector("tbody")?S.querySelector("tbody").insertAdjacentHTML("beforeend",Hn):S.querySelector("thead").insertAdjacentHTML("afterend",Hn+"</tr>")}else for(var xt=ne-1;xt>=Et;xt--)S.rows[xt].remove(),S.rows.length===1&&S.querySelector("tbody").remove()}}},V=function(ne){$t(S,ne),ne==="right"?(ce.classList.remove("vditor-icon--current"),te.classList.remove("vditor-icon--current"),Q.classList.add("vditor-icon--current")):ne==="center"?(ce.classList.remove("vditor-icon--current"),Q.classList.remove("vditor-icon--current"),te.classList.add("vditor-icon--current")):(te.classList.remove("vditor-icon--current"),Q.classList.remove("vditor-icon--current"),ce.classList.add("vditor-icon--current")),(0,P.Hc)(t),ke(e)},re=(0,w.lG)(n,"TD"),Y=(0,w.lG)(n,"TH"),X="left";re?X=re.getAttribute("align")||"left":Y&&(X=Y.getAttribute("align")||"center");var ce=document.createElement("button");ce.setAttribute("type","button"),ce.setAttribute("aria-label",window.VditorI18n.alignLeft+"<"+(0,u.ns)("⇧⌘L")+">"),ce.setAttribute("data-type","left"),ce.innerHTML='<svg><use xlink:href="#vditor-icon-align-left"></use></svg>',ce.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(X==="left"?" vditor-icon--current":""),ce.onclick=function(){V("left")};var te=document.createElement("button");te.setAttribute("type","button"),te.setAttribute("aria-label",window.VditorI18n.alignCenter+"<"+(0,u.ns)("⇧⌘C")+">"),te.setAttribute("data-type","center"),te.innerHTML='<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',te.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(X==="center"?" vditor-icon--current":""),te.onclick=function(){V("center")};var Q=document.createElement("button");Q.setAttribute("type","button"),Q.setAttribute("aria-label",window.VditorI18n.alignRight+"<"+(0,u.ns)("⇧⌘R")+">"),Q.setAttribute("data-type","right"),Q.innerHTML='<svg><use xlink:href="#vditor-icon-align-right"></use></svg>',Q.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(X==="right"?" vditor-icon--current":""),Q.onclick=function(){V("right")};var ve=document.createElement("button");ve.setAttribute("type","button"),ve.setAttribute("aria-label",window.VditorI18n.insertRowBelow+"<"+(0,u.ns)("⌘=")+">"),ve.setAttribute("data-type","insertRow"),ve.innerHTML='<svg><use xlink:href="#vditor-icon-insert-row"></use></svg>',ve.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",ve.onclick=function(){var ne=getSelection().getRangeAt(0).startContainer,ge=(0,w.lG)(ne,"TD")||(0,w.lG)(ne,"TH");ge&&Tr(e,t,ge)};var xe=document.createElement("button");xe.setAttribute("type","button"),xe.setAttribute("aria-label",window.VditorI18n.insertRowAbove+"<"+(0,u.ns)("⇧⌘F")+">"),xe.setAttribute("data-type","insertRow"),xe.innerHTML='<svg><use xlink:href="#vditor-icon-insert-rowb"></use></svg>',xe.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",xe.onclick=function(){var ne=getSelection().getRangeAt(0).startContainer,ge=(0,w.lG)(ne,"TD")||(0,w.lG)(ne,"TH");ge&&kr(e,t,ge)};var De=document.createElement("button");De.setAttribute("type","button"),De.setAttribute("aria-label",window.VditorI18n.insertColumnRight+"<"+(0,u.ns)("⇧⌘=")+">"),De.setAttribute("data-type","insertColumn"),De.innerHTML='<svg><use xlink:href="#vditor-icon-insert-column"></use></svg>',De.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",De.onclick=function(){var ne=getSelection().getRangeAt(0).startContainer,ge=(0,w.lG)(ne,"TD")||(0,w.lG)(ne,"TH");ge&&en(e,S,ge)};var We=document.createElement("button");We.setAttribute("type","button"),We.setAttribute("aria-label",window.VditorI18n.insertColumnLeft+"<"+(0,u.ns)("⇧⌘G")+">"),We.setAttribute("data-type","insertColumn"),We.innerHTML='<svg><use xlink:href="#vditor-icon-insert-columnb"></use></svg>',We.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",We.onclick=function(){var ne=getSelection().getRangeAt(0).startContainer,ge=(0,w.lG)(ne,"TD")||(0,w.lG)(ne,"TH");ge&&en(e,S,ge,"beforebegin")};var Ue=document.createElement("button");Ue.setAttribute("type","button"),Ue.setAttribute("aria-label",window.VditorI18n["delete-row"]+"<"+(0,u.ns)("⌘-")+">"),Ue.setAttribute("data-type","deleteRow"),Ue.innerHTML='<svg><use xlink:href="#vditor-icon-delete-row"></use></svg>',Ue.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Ue.onclick=function(){var ne=getSelection().getRangeAt(0).startContainer,ge=(0,w.lG)(ne,"TD")||(0,w.lG)(ne,"TH");ge&&Ar(e,t,ge)};var Ve=document.createElement("button");Ve.setAttribute("type","button"),Ve.setAttribute("aria-label",window.VditorI18n["delete-column"]+"<"+(0,u.ns)("⇧⌘-")+">"),Ve.setAttribute("data-type","deleteColumn"),Ve.innerHTML='<svg><use xlink:href="#vditor-icon-delete-column"></use></svg>',Ve.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Ve.onclick=function(){var ne=getSelection().getRangeAt(0).startContainer,ge=(0,w.lG)(ne,"TD")||(0,w.lG)(ne,"TH");ge&&Cr(e,t,S,ge)};var de=document.createElement("span");de.setAttribute("aria-label",window.VditorI18n.row),de.className="vditor-tooltipped vditor-tooltipped__n";var Be=document.createElement("input");de.appendChild(Be),Be.type="number",Be.min="1",Be.className="vditor-input",Be.style.width="42px",Be.style.textAlign="center",Be.setAttribute("placeholder",window.VditorI18n.row),Be.value=S.rows.length.toString(),Be.oninput=function(){J()},Be.onkeydown=function(ne){if(!ne.isComposing){if(ne.key==="Tab"){Ke.focus(),Ke.select(),ne.preventDefault();return}h(e,ne)||et(ne,t)}};var rn=document.createElement("span");rn.setAttribute("aria-label",window.VditorI18n.column),rn.className="vditor-tooltipped vditor-tooltipped__n";var Ke=document.createElement("input");rn.appendChild(Ke),Ke.type="number",Ke.min="1",Ke.className="vditor-input",Ke.style.width="42px",Ke.style.textAlign="center",Ke.setAttribute("placeholder",window.VditorI18n.column),Ke.value=S.rows[0].cells.length.toString(),Ke.oninput=function(){J()},Ke.onkeydown=function(ne){if(!ne.isComposing){if(ne.key==="Tab"){Be.focus(),Be.select(),ne.preventDefault();return}h(e,ne)||et(ne,t)}},j(t,S,e),fe(t,S,e),we(S,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",ce),e.wysiwyg.popover.insertAdjacentElement("beforeend",te),e.wysiwyg.popover.insertAdjacentElement("beforeend",Q),e.wysiwyg.popover.insertAdjacentElement("beforeend",xe),e.wysiwyg.popover.insertAdjacentElement("beforeend",ve),e.wysiwyg.popover.insertAdjacentElement("beforeend",We),e.wysiwyg.popover.insertAdjacentElement("beforeend",De),e.wysiwyg.popover.insertAdjacentElement("beforeend",Ue),e.wysiwyg.popover.insertAdjacentElement("beforeend",Ve),e.wysiwyg.popover.insertAdjacentElement("beforeend",de),e.wysiwyg.popover.insertAdjacentHTML("beforeend"," x "),e.wysiwyg.popover.insertAdjacentElement("beforeend",rn),D(e,S)}var Pn=(0,w.a1)(n,"data-type","link-ref");Pn&&H(e,Pn,t);var kt=(0,w.a1)(n,"data-type","footnotes-ref");if(kt){e.options.lang,e.options,e.wysiwyg.popover.innerHTML="";var de=document.createElement("span");de.setAttribute("aria-label",window.VditorI18n.footnoteRef+"<"+(0,u.ns)("⌥Enter")+">"),de.className="vditor-tooltipped vditor-tooltipped__n";var lt=document.createElement("input");de.appendChild(lt),lt.className="vditor-input",lt.setAttribute("placeholder",window.VditorI18n.footnoteRef+"<"+(0,u.ns)("⌥Enter")+">"),lt.style.width="120px",lt.value=kt.getAttribute("data-footnotes-label"),lt.oninput=function(){lt.value.trim()!==""&&kt.setAttribute("data-footnotes-label",lt.value)},lt.onkeydown=function(ge){ge.isComposing||h(e,ge)||et(ge,t)},we(kt,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",de),D(e,kt)}var je=(0,w.fb)(n,"vditor-wysiwyg__block"),qr=je?je.getAttribute("data-type").indexOf("block")>-1:!1;if(e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(ne){if(!je||je&&qr&&!je.contains(ne)){var ge=ne.previousElementSibling;ge.style.display="none"}}),je&&qr){if(e.wysiwyg.popover.innerHTML="",j(t,je,e),fe(t,je,e),we(je,e),je.getAttribute("data-type")==="code-block"){var an=document.createElement("span");an.setAttribute("aria-label",window.VditorI18n.language+"<"+(0,u.ns)("⌥Enter")+">"),an.className="vditor-tooltipped vditor-tooltipped__n";var Qe=document.createElement("input");an.appendChild(Qe);var Ut=je.firstElementChild.firstElementChild;Qe.className="vditor-input",Qe.setAttribute("placeholder",window.VditorI18n.language+"<"+(0,u.ns)("⌥Enter")+">"),Qe.value=Ut.className.indexOf("language-")>-1?Ut.className.split("-")[1].split(" ")[0]:"",Qe.oninput=function(ne){Qe.value.trim()!==""?Ut.className="language-"+Qe.value:(Ut.className="",e.hint.recentLanguage=""),je.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(je.lastElementChild.innerHTML=je.firstElementChild.innerHTML,be(je.lastElementChild,e)),ke(e),ne.detail===1&&(t.setStart(Ut.firstChild,0),t.collapse(!0),(0,P.Hc)(t))},Qe.onkeydown=function(ne){if(!ne.isComposing&&!h(e,ne)){if(ne.key==="Escape"&&e.hint.element.style.display==="block"){e.hint.element.style.display="none",ne.preventDefault();return}e.hint.select(ne,e),et(ne,t)}},Qe.onkeyup=function(ne){if(!(ne.isComposing||ne.key==="Enter"||ne.key==="ArrowUp"||ne.key==="Escape"||ne.key==="ArrowDown")){var ge=[],Et=Qe.value.substring(0,Qe.selectionStart);(e.options.preview.hljs.langs||r.g.CODE_LANGUAGES).forEach(function(ct){ct.indexOf(Et.toLowerCase())>-1&&ge.push({html:ct,value:ct})}),e.hint.genHTML(ge,Et,e),ne.preventDefault()}},e.wysiwyg.popover.insertAdjacentElement("beforeend",an)}D(e,je)}else je=void 0;if(M){e.wysiwyg.popover.innerHTML="";var de=document.createElement("span");de.setAttribute("aria-label","ID<"+(0,u.ns)("⌥Enter")+">"),de.className="vditor-tooltipped vditor-tooltipped__n";var ht=document.createElement("input");de.appendChild(ht),ht.className="vditor-input",ht.setAttribute("placeholder","ID<"+(0,u.ns)("⌥Enter")+">"),ht.style.width="120px",ht.value=M.getAttribute("data-id")||"",ht.oninput=function(){M.setAttribute("data-id",ht.value)},ht.onkeydown=function(ge){ge.isComposing||h(e,ge)||et(ge,t)},j(t,M,e),fe(t,M,e),we(M,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",de),D(e,M)}if(A&&Oe(e,A,t),!Z&&!i&&!S&&!je&&!A&&!Pn&&!kt&&!M&&!R){var At=(0,w.a1)(n,"data-block","0");At&&At.parentElement.isEqualNode(e.wysiwyg.element)?(e.wysiwyg.popover.innerHTML="",j(t,At,e),fe(t,At,e),we(At,e),D(e,At)):e.wysiwyg.popover.style.display="none"}e.wysiwyg.element.querySelectorAll('span[data-type="backslash"] > span').forEach(function(ne){ne.style.display="none"});var Wr=(0,w.a1)(t.startContainer,"data-type","backslash");Wr&&(Wr.querySelector("span").style.display="inline")}},200)},D=function(e,t){var n=t,a=(0,w.lG)(t,"TABLE");a&&(n=a),e.wysiwyg.popover.style.left="0",e.wysiwyg.popover.style.display="block",e.wysiwyg.popover.style.top=Math.max(-8,n.offsetTop-21-e.wysiwyg.element.scrollTop)+"px",e.wysiwyg.popover.style.left=Math.min(n.offsetLeft,e.wysiwyg.element.clientWidth-e.wysiwyg.popover.clientWidth)+"px",e.wysiwyg.popover.setAttribute("data-top",(n.offsetTop-21).toString())},H=function(e,t,n){n===void 0&&(n=getSelection().getRangeAt(0)),e.wysiwyg.popover.innerHTML="";var a=function(){l.value.trim()!==""&&(t.tagName==="IMG"?t.setAttribute("alt",l.value):t.textContent=l.value),E.value.trim()!==""&&t.setAttribute("data-link-label",E.value)},i=document.createElement("span");i.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),i.className="vditor-tooltipped vditor-tooltipped__n";var l=document.createElement("input");i.appendChild(l),l.className="vditor-input",l.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),l.style.width="120px",l.value=t.getAttribute("alt")||t.textContent,l.oninput=function(){a()},l.onkeydown=function(A){h(e,A)||et(A,n)||Ae(e,t,A,E)};var g=document.createElement("span");g.setAttribute("aria-label",window.VditorI18n.linkRef),g.className="vditor-tooltipped vditor-tooltipped__n";var E=document.createElement("input");g.appendChild(E),E.className="vditor-input",E.setAttribute("placeholder",window.VditorI18n.linkRef),E.value=t.getAttribute("data-link-label"),E.oninput=function(){a()},E.onkeydown=function(A){h(e,A)||et(A,n)||Ae(e,t,A,l)},we(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",i),e.wysiwyg.popover.insertAdjacentElement("beforeend",g),D(e,t)},j=function(e,t,n){var a=t.previousElementSibling;if(!(!a||!t.parentElement.isEqualNode(n.wysiwyg.element)&&t.tagName!=="LI")){var i=document.createElement("button");i.setAttribute("type","button"),i.setAttribute("data-type","up"),i.setAttribute("aria-label",window.VditorI18n.up+"<"+(0,u.ns)("⇧⌘U")+">"),i.innerHTML='<svg><use xlink:href="#vditor-icon-up"></use></svg>',i.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",i.onclick=function(){e.insertNode(document.createElement("wbr")),a.insertAdjacentElement("beforebegin",t),(0,P.ib)(n.wysiwyg.element,e),ke(n),_(n),He(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",i)}},fe=function(e,t,n){var a=t.nextElementSibling;if(!(!a||!t.parentElement.isEqualNode(n.wysiwyg.element)&&t.tagName!=="LI")){var i=document.createElement("button");i.setAttribute("type","button"),i.setAttribute("data-type","down"),i.setAttribute("aria-label",window.VditorI18n.down+"<"+(0,u.ns)("⇧⌘D")+">"),i.innerHTML='<svg><use xlink:href="#vditor-icon-down"></use></svg>',i.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",i.onclick=function(){e.insertNode(document.createElement("wbr")),a.insertAdjacentElement("afterend",t),(0,P.ib)(n.wysiwyg.element,e),ke(n),_(n),He(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",i)}},we=function(e,t){var n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("data-type","remove"),n.setAttribute("aria-label",window.VditorI18n.remove+"<"+(0,u.ns)("⇧⌘X")+">"),n.innerHTML='<svg><use xlink:href="#vditor-icon-trashcan"></use></svg>',n.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",n.onclick=function(){var a=(0,P.zh)(t);a.setStartAfter(e),(0,P.Hc)(a),e.remove(),ke(t),_(t),["H1","H2","H3","H4","H5","H6"].includes(e.tagName)&&Fe(t)},t.wysiwyg.popover.insertAdjacentElement("beforeend",n)},Ae=function(e,t,n,a){if(!n.isComposing){if(n.key==="Tab"){a.focus(),a.select(),n.preventDefault();return}if(!(0,u.yl)(n)&&!n.shiftKey&&n.altKey&&n.key==="Enter"){var i=(0,P.zh)(e);t.insertAdjacentHTML("afterend",r.g.ZWSP),i.setStartAfter(t.nextSibling),i.collapse(!0),(0,P.Hc)(i),n.preventDefault()}}},Oe=function(e,t,n){e.wysiwyg.popover.innerHTML="";var a=function(){l.value.trim()!==""&&(t.innerHTML=l.value),t.setAttribute("href",E.value),t.setAttribute("title",S.value),ke(e)};t.querySelectorAll("[data-marker]").forEach(function(M){M.removeAttribute("data-marker")});var i=document.createElement("span");i.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),i.className="vditor-tooltipped vditor-tooltipped__n";var l=document.createElement("input");i.appendChild(l),l.className="vditor-input",l.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),l.style.width="120px",l.value=t.innerHTML||"",l.oninput=function(){a()},l.onkeydown=function(M){h(e,M)||et(M,n)||Ae(e,t,M,E)};var g=document.createElement("span");g.setAttribute("aria-label",window.VditorI18n.link),g.className="vditor-tooltipped vditor-tooltipped__n";var E=document.createElement("input");g.appendChild(E),E.className="vditor-input",E.setAttribute("placeholder",window.VditorI18n.link),E.value=t.getAttribute("href")||"",E.oninput=function(){a()},E.onkeydown=function(M){h(e,M)||et(M,n)||Ae(e,t,M,S)};var A=document.createElement("span");A.setAttribute("aria-label",window.VditorI18n.tooltipText),A.className="vditor-tooltipped vditor-tooltipped__n";var S=document.createElement("input");A.appendChild(S),S.className="vditor-input",S.setAttribute("placeholder",window.VditorI18n.tooltipText),S.style.width="60px",S.value=t.getAttribute("title")||"",S.oninput=function(){a()},S.onkeydown=function(M){h(e,M)||et(M,n)||Ae(e,t,M,l)},we(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",i),e.wysiwyg.popover.insertAdjacentElement("beforeend",g),e.wysiwyg.popover.insertAdjacentElement("beforeend",A),D(e,t)},Ce=function(e,t){var n=e.target;t.wysiwyg.popover.innerHTML="";var a=function(){n.setAttribute("src",l.value),n.setAttribute("alt",E.value),n.setAttribute("title",S.value)},i=document.createElement("span");i.setAttribute("aria-label",window.VditorI18n.imageURL),i.className="vditor-tooltipped vditor-tooltipped__n";var l=document.createElement("input");i.appendChild(l),l.className="vditor-input",l.setAttribute("placeholder",window.VditorI18n.imageURL),l.value=n.getAttribute("src")||"",l.oninput=function(){a()},l.onkeydown=function(M){h(t,M)};var g=document.createElement("span");g.setAttribute("aria-label",window.VditorI18n.alternateText),g.className="vditor-tooltipped vditor-tooltipped__n";var E=document.createElement("input");g.appendChild(E),E.className="vditor-input",E.setAttribute("placeholder",window.VditorI18n.alternateText),E.style.width="52px",E.value=n.getAttribute("alt")||"",E.oninput=function(){a()},E.onkeydown=function(M){h(t,M)};var A=document.createElement("span");A.setAttribute("aria-label",window.VditorI18n.title),A.className="vditor-tooltipped vditor-tooltipped__n";var S=document.createElement("input");A.appendChild(S),S.className="vditor-input",S.setAttribute("placeholder",window.VditorI18n.title),S.value=n.getAttribute("title")||"",S.oninput=function(){a()},S.onkeydown=function(M){h(t,M)},we(n,t),t.wysiwyg.popover.insertAdjacentElement("beforeend",i),t.wysiwyg.popover.insertAdjacentElement("beforeend",g),t.wysiwyg.popover.insertAdjacentElement("beforeend",A),D(t,n)},et=function(e,t){if(!(0,u.yl)(e)&&!e.shiftKey&&e.key==="Enter"||e.key==="Escape")return t&&(0,P.Hc)(t),e.preventDefault(),e.stopPropagation(),!0},St=function(e){e.currentMode==="wysiwyg"?_(e):e.currentMode==="ir"&&bt(e)},cr=function(e,t,n){n===void 0&&(n={enableAddUndoStack:!0,enableHint:!1,enableInput:!0});var a=e.wysiwyg.element;a.innerHTML=e.lute.Md2VditorDOM(t),a.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(i){be(i,e),i.previousElementSibling.setAttribute("style","display:none")}),ke(e,n)},ra=function(e,t,n){for(var a=e.startContainer.parentElement,i=!1,l="",g="",E=Ht(e),A=E.beforeHTML,S=E.afterHTML;a&&!i;){var M=a.tagName;if(M==="STRIKE"&&(M="S"),M==="I"&&(M="EM"),M==="B"&&(M="STRONG"),M==="S"||M==="STRONG"||M==="EM"){var R="",Z="",J="";a.parentElement.getAttribute("data-block")!=="0"&&(Z=wt(a),J=Rt(a)),(A||Z)&&(R=Z+"<"+M+">"+A+"</"+M+">",A=R),(n==="bold"&&M==="STRONG"||n==="italic"&&M==="EM"||n==="strikeThrough"&&M==="S")&&(R+=""+l+r.g.ZWSP+"<wbr>"+g,i=!0),(S||J)&&(S="<"+M+">"+S+"</"+M+">"+J,R+=S),a.parentElement.getAttribute("data-block")!=="0"?(a=a.parentElement,a.innerHTML=R):(a.outerHTML=R,a=a.parentElement),l="<"+M+">"+l,g="</"+M+">"+g}else i=!0}(0,P.ib)(t.wysiwyg.element,e)},ia=function(e,t,n){if(!(e.wysiwyg.composingLock&&n instanceof CustomEvent)){var a=!0,i=!0;e.wysiwyg.element.querySelector("wbr")&&e.wysiwyg.element.querySelector("wbr").remove();var l=(0,P.zh)(e),g=t.getAttribute("data-type");if(t.classList.contains("vditor-menu--current"))if(g==="strike"&&(g="strikeThrough"),g==="quote"){var E=(0,w.lG)(l.startContainer,"BLOCKQUOTE");E||(E=l.startContainer.childNodes[l.startOffset]),E&&(a=!1,t.classList.remove("vditor-menu--current"),l.insertNode(document.createElement("wbr")),E.outerHTML=E.innerHTML.trim()===""?'<p data-block="0">'+E.innerHTML+"</p>":E.innerHTML,(0,P.ib)(e.wysiwyg.element,l))}else if(g==="inline-code"){var A=(0,w.lG)(l.startContainer,"CODE");A||(A=l.startContainer.childNodes[l.startOffset]),A&&(A.outerHTML=A.innerHTML.replace(r.g.ZWSP,"")+"<wbr>",(0,P.ib)(e.wysiwyg.element,l))}else g==="link"?(l.collapsed&&l.selectNode(l.startContainer.parentElement),document.execCommand("unlink",!1,"")):g==="check"||g==="list"||g==="ordered-list"?(Qt(e,l,g),(0,P.ib)(e.wysiwyg.element,l),a=!1,t.classList.remove("vditor-menu--current")):(a=!1,t.classList.remove("vditor-menu--current"),l.toString()===""?ra(l,e,g):document.execCommand(g,!1,""));else{e.wysiwyg.element.childNodes.length===0&&(e.wysiwyg.element.innerHTML='<p data-block="0"><wbr></p>',(0,P.ib)(e.wysiwyg.element,l));var S=(0,w.F9)(l.startContainer);if(g==="quote"){if(S||(S=l.startContainer.childNodes[l.startOffset]),S){a=!1,t.classList.add("vditor-menu--current"),l.insertNode(document.createElement("wbr"));var M=(0,w.lG)(l.startContainer,"LI");M&&S.contains(M)?M.innerHTML='<blockquote data-block="0">'+M.innerHTML+"</blockquote>":S.outerHTML='<blockquote data-block="0">'+S.outerHTML+"</blockquote>",(0,P.ib)(e.wysiwyg.element,l)}}else if(g==="check"||g==="list"||g==="ordered-list")Qt(e,l,g,!1),(0,P.ib)(e.wysiwyg.element,l),a=!1,f(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current");else if(g==="inline-code"){if(l.toString()===""){var R=document.createElement("code");R.textContent=r.g.ZWSP,l.insertNode(R),l.setStart(R.firstChild,1),l.collapse(!0),(0,P.Hc)(l)}else if(l.startContainer.nodeType===3){var R=document.createElement("code");l.surroundContents(R),l.insertNode(R),(0,P.Hc)(l)}t.classList.add("vditor-menu--current")}else if(g==="code"){var R=document.createElement("div");R.className="vditor-wysiwyg__block",R.setAttribute("data-type","code-block"),R.setAttribute("data-block","0"),R.setAttribute("data-marker","```"),l.toString()===""?R.innerHTML=`<pre><code><wbr>
</code></pre>`:(R.innerHTML="<pre><code>"+l.toString()+"<wbr></code></pre>",l.deleteContents()),l.insertNode(R),S&&(S.outerHTML=e.lute.SpinVditorDOM(S.outerHTML)),(0,P.ib)(e.wysiwyg.element,l),e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(ve){be(ve,e)}),t.classList.add("vditor-menu--disabled")}else if(g==="link"){if(l.toString()===""){var Z=document.createElement("a");Z.innerText=r.g.ZWSP,l.insertNode(Z),l.setStart(Z.firstChild,1),l.collapse(!0),Oe(e,Z,l);var J=e.wysiwyg.popover.querySelector("input");J.value="",J.focus(),i=!1}else{var R=document.createElement("a");R.setAttribute("href",""),R.innerHTML=l.toString(),l.surroundContents(R),l.insertNode(R),(0,P.Hc)(l),Oe(e,R,l);var V=e.wysiwyg.popover.querySelectorAll("input");V[0].value=R.innerText,V[1].focus()}a=!1,t.classList.add("vditor-menu--current")}else if(g==="table"){var re='<table data-block="0"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>';if(l.toString().trim()==="")S&&S.innerHTML.trim().replace(r.g.ZWSP,"")===""?S.outerHTML=re:document.execCommand("insertHTML",!1,re),l.selectNode(e.wysiwyg.element.querySelector("wbr").previousSibling),e.wysiwyg.element.querySelector("wbr").remove(),(0,P.Hc)(l);else{re='<table data-block="0"><thead><tr>';var Y=l.toString().split(`
`),X=Y[0].split(",").length>Y[0].split("	").length?",":"	";Y.forEach(function(Q,ve){ve===0?(Q.split(X).forEach(function(xe,De){De===0?re+="<th>"+xe+"<wbr></th>":re+="<th>"+xe+"</th>"}),re+="</tr></thead>"):(ve===1?re+="<tbody><tr>":re+="<tr>",Q.split(X).forEach(function(xe){re+="<td>"+xe+"</td>"}),re+="</tr>")}),re+="</tbody></table>",document.execCommand("insertHTML",!1,re),(0,P.ib)(e.wysiwyg.element,l)}a=!1,t.classList.add("vditor-menu--disabled")}else if(g==="line"){if(S){var ce=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;S.innerHTML.trim()===""?S.outerHTML=ce:S.insertAdjacentHTML("afterend",ce),(0,P.ib)(e.wysiwyg.element,l)}}else if(a=!1,t.classList.add("vditor-menu--current"),g==="strike"&&(g="strikeThrough"),l.toString()===""&&(g==="bold"||g==="italic"||g==="strikeThrough")){var te="strong";g==="italic"?te="em":g==="strikeThrough"&&(te="s");var R=document.createElement(te);R.textContent=r.g.ZWSP,l.insertNode(R),R.previousSibling&&R.previousSibling.textContent===r.g.ZWSP&&(R.previousSibling.textContent=""),l.setStart(R.firstChild,1),l.collapse(!0),(0,P.Hc)(l)}else document.execCommand(g,!1,"")}a&&_(e),i&&ke(e)}},Re=function(){function e(t,n){var a,i=this;this.element=document.createElement("div"),n.className&&(a=this.element.classList).add.apply(a,n.className.split(" "));var l=n.hotkey?" <"+(0,u.ns)(n.hotkey)+">":"";n.level===2&&(l=n.hotkey?" &lt;"+(0,u.ns)(n.hotkey)+"&gt;":"");var g=n.tip?n.tip+l:""+window.VditorI18n[n.name]+l,E=n.name==="upload"?"div":"button";if(n.level===2)this.element.innerHTML="<"+E+' data-type="'+n.name+'">'+g+"</"+E+">";else{this.element.classList.add("vditor-toolbar__item");var A=document.createElement(E);A.setAttribute("data-type",n.name),A.className="vditor-tooltipped vditor-tooltipped__"+n.tipPosition,A.setAttribute("aria-label",g),A.innerHTML=n.icon,this.element.appendChild(A)}n.prefix&&this.element.children[0].addEventListener((0,u.Le)(),function(S){S.preventDefault(),!i.element.firstElementChild.classList.contains(r.g.CLASS_MENU_DISABLED)&&(t.currentMode==="wysiwyg"?ia(t,i.element.children[0],S):t.currentMode==="ir"?wa(t,i.element.children[0],n.prefix||"",n.suffix||""):la(t,i.element.children[0],n.prefix||"",n.suffix||""))})}return e}(),aa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),vt=function(e,t,n){var a;if(typeof n!="string"?(x(e,["subToolbar","hint"]),n.preventDefault(),a=m(e)):a=n,!(e.currentMode===t&&typeof n!="string")){if(e.devtools&&e.devtools.renderEchart(e),e.options.preview.mode==="both"&&t==="sv"?e.preview.element.style.display="block":e.preview.element.style.display="none",v(e.toolbar.elements,r.g.EDIT_TOOLBARS),f(e.toolbar.elements,r.g.EDIT_TOOLBARS),d(e.toolbar.elements,["outdent","indent"]),t==="ir")k(e.toolbar.elements,["both"]),C(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="block",e.lute.SetVditorIR(!0),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!1),e.currentMode="ir",e.ir.element.innerHTML=e.lute.Md2VditorIRDOM(a),st(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),qe(e),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(l){be(l,e)}),e.ir.element.querySelectorAll(".vditor-toc").forEach(function(l){(0,$.H)(l,{katex:e.options.staticPath.katex,mathjax:e.options.staticPath.mathjax,math:e.options.preview.math})});else if(t==="wysiwyg")k(e.toolbar.elements,["both"]),C(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="block",e.ir.element.parentElement.style.display="none",e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!0),e.lute.SetVditorSV(!1),e.currentMode="wysiwyg",qe(e),cr(e,a,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),e.wysiwyg.element.querySelectorAll(".vditor-toc").forEach(function(l){(0,$.H)(l,{katex:e.options.staticPath.katex,mathjax:e.options.staticPath.mathjax,math:e.options.preview.math})}),e.wysiwyg.popover.style.display="none";else if(t==="sv"){C(e.toolbar.elements,["both"]),k(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="none",(e.options.preview.mode==="both"||e.options.preview.mode==="editor")&&(e.sv.element.style.display="block"),e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!0),e.currentMode="sv";var i=pr(a,e);i==="<div data-block='0'></div>"&&(i=""),e.sv.element.innerHTML=i,Ie(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),qe(e)}e.undo.resetIcon(e),typeof n!="string"&&(e[e.currentMode].element.focus(),St(e)),Fe(e),yt(e),e.toolbar.elements["edit-mode"]&&(e.toolbar.elements["edit-mode"].querySelectorAll("button").forEach(function(l){l.classList.remove("vditor-menu--current")}),e.toolbar.elements["edit-mode"].querySelector('button[data-mode="'+e.currentMode+'"]').classList.add("vditor-menu--current")),e.outline.toggle(e,e.currentMode!=="sv"&&e.options.outline.enable,typeof n!="string")}},oa=function(e){aa(t,e);function t(n,a){var i=e.call(this,n,a)||this,l=document.createElement("div");return l.className="vditor-hint"+(a.level===2?"":" vditor-panel--arrow"),l.innerHTML='<button data-mode="wysiwyg">'+window.VditorI18n.wysiwyg+" &lt;"+(0,u.ns)("⌥⌘7")+`></button>
<button data-mode="ir">`+window.VditorI18n.instantRendering+" &lt;"+(0,u.ns)("⌥⌘8")+`></button>
<button data-mode="sv">`+window.VditorI18n.splitView+" &lt;"+(0,u.ns)("⌥⌘9")+"></button>",i.element.appendChild(l),i._bindEvent(n,l,a),i}return t.prototype._bindEvent=function(n,a,i){var l=this.element.children[0];L(n,a,l,i.level),a.children.item(0).addEventListener((0,u.Le)(),function(g){vt(n,"wysiwyg",g),g.preventDefault(),g.stopPropagation()}),a.children.item(1).addEventListener((0,u.Le)(),function(g){vt(n,"ir",g),g.preventDefault(),g.stopPropagation()}),a.children.item(2).addEventListener((0,u.Le)(),function(g){vt(n,"sv",g),g.preventDefault(),g.stopPropagation()})},t}(Re),Nt=function(e,t){return(0,P.Gb)(e,t)?getSelection().toString():""},vn=function(e,t){t.addEventListener("focus",function(){e.options.focus&&e.options.focus(m(e)),x(e,["subToolbar","hint"])})},ur=function(e,t){t.addEventListener("dblclick",function(n){n.target.tagName==="IMG"&&(e.options.image.preview?e.options.image.preview(n.target):e.options.image.isPreview&&(0,ee.E)(n.target,e.options.lang,e.options.theme))})},En=function(e,t){t.addEventListener("blur",function(n){if(e.currentMode==="ir"){var a=e.ir.element.querySelector(".vditor-ir__node--expand");a&&a.classList.remove("vditor-ir__node--expand")}else e.currentMode==="wysiwyg"&&!e.wysiwyg.selectPopover.contains(n.relatedTarget)&&e.wysiwyg.hideComment();e[e.currentMode].range=(0,P.zh)(e),e.options.blur&&e.options.blur(m(e))})},Sn=function(e,t){t.addEventListener("dragstart",function(n){n.dataTransfer.setData(r.g.DROP_EDITOR,r.g.DROP_EDITOR)}),t.addEventListener("drop",function(n){n.dataTransfer.getData(r.g.DROP_EDITOR)?me(e):(n.dataTransfer.types.includes("Files")||n.dataTransfer.types.includes("text/html"))&&tn(e,n,{pasteCode:function(a){document.execCommand("insertHTML",!1,a)}})})},Tn=function(e,t,n){t.addEventListener("copy",function(a){return n(a,e)})},kn=function(e,t,n){t.addEventListener("cut",function(a){n(a,e),e.options.comment.enable&&e.currentMode==="wysiwyg"&&e.wysiwyg.getComments(e),document.execCommand("delete")})},He=function(e){if(e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)),!!e.options.typewriterMode){var t=e[e.currentMode].element,n=(0,P.Ny)(t).top;e.options.height==="auto"&&!e.element.classList.contains("vditor--fullscreen")&&window.scrollTo(window.scrollX,n+e.element.offsetTop+e.toolbar.element.offsetHeight-window.innerHeight/2+10),(e.options.height!=="auto"||e.element.classList.contains("vditor--fullscreen"))&&(t.scrollTop=n+t.scrollTop-t.clientHeight/2+10)}},An=function(e,t){t.addEventListener("keydown",function(n){if(!n.isComposing&&e.options.keydown&&e.options.keydown(n),!((e.options.hint.extend.length>1||e.toolbar.elements.emoji)&&e.hint.select(n,e))){if(e.options.comment.enable&&e.currentMode==="wysiwyg"&&(n.key==="Backspace"||G("⌘X",n))&&e.wysiwyg.getComments(e),e.currentMode==="sv"){if(ue(e,n))return}else if(e.currentMode==="wysiwyg"){if(p(e,n))return}else if(e.currentMode==="ir"&&K(e,n))return;if(e.options.ctrlEnter&&G("⌘Enter",n)){e.options.ctrlEnter(m(e)),n.preventDefault();return}if(G("⌘Z",n)&&!e.toolbar.elements.undo){e.undo.undo(e),n.preventDefault();return}if(G("⌘Y",n)&&!e.toolbar.elements.redo){e.undo.redo(e),n.preventDefault();return}if(n.key==="Escape"){e.hint.element.style.display==="block"?e.hint.element.style.display="none":e.options.esc&&!n.isComposing&&e.options.esc(m(e)),n.preventDefault();return}if((0,u.yl)(n)&&n.altKey&&!n.shiftKey&&/^Digit[1-6]$/.test(n.code)){if(e.currentMode==="wysiwyg"){var a=n.code.replace("Digit","H");(0,w.lG)(getSelection().getRangeAt(0).startContainer,a)?Bt(e):ze(e,a),ke(e)}else e.currentMode==="sv"?dr(e,"#".repeat(parseInt(n.code.replace("Digit",""),10))+" "):e.currentMode==="ir"&&jt(e,"#".repeat(parseInt(n.code.replace("Digit",""),10))+" ");return n.preventDefault(),!0}if((0,u.yl)(n)&&n.altKey&&!n.shiftKey&&/^Digit[7-9]$/.test(n.code))return n.code==="Digit7"?vt(e,"wysiwyg",n):n.code==="Digit8"?vt(e,"ir",n):n.code==="Digit9"&&vt(e,"sv",n),!0;e.options.toolbar.find(function(i){if(!i.hotkey||i.toolbar){if(i.toolbar){var l=i.toolbar.find(function(g){if(!g.hotkey)return!1;if(G(g.hotkey,n))return e.toolbar.elements[g.name].children[0].dispatchEvent(new CustomEvent((0,u.Le)())),n.preventDefault(),!0});return!!l}return!1}if(G(i.hotkey,n))return e.toolbar.elements[i.name].children[0].dispatchEvent(new CustomEvent((0,u.Le)())),n.preventDefault(),!0})}})},Cn=function(e,t){t.addEventListener("selectstart",function(n){t.onmouseup=function(){setTimeout(function(){var a=Nt(e[e.currentMode].element);a.trim()?(e.currentMode==="wysiwyg"&&e.options.comment.enable&&(!(0,w.a1)(n.target,"data-type","footnotes-block")&&!(0,w.a1)(n.target,"data-type","link-ref-defs-block")?e.wysiwyg.showComment():e.wysiwyg.hideComment()),e.options.select&&e.options.select(a)):e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.wysiwyg.hideComment()})}})},fr=function(e,t){var n=(0,P.zh)(e);n.extractContents(),n.insertNode(document.createTextNode(Lute.Caret)),n.insertNode(document.createTextNode(t));var a=(0,w.a1)(n.startContainer,"data-block","0");a||(a=e.sv.element);var i=e.lute.SpinVditorSVDOM(a.textContent);i.indexOf('data-type="footnotes-link"')>-1||i.indexOf('data-type="link-ref-defs-block"')>-1?i="<div data-block='0'>"+i+"</div>":i="<div data-block='0'>"+i.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",a.isEqualNode(e.sv.element)?a.innerHTML=i:a.outerHTML=i,(0,P.ib)(e.sv.element,n),He(e)},Zt=function(e,t,n){n===void 0&&(n=!0);var a=e;for(a.nodeType===3&&(a=a.parentElement);a;){if(a.getAttribute("data-type")===t)return a;n?a=a.previousElementSibling:a=a.nextElementSibling}return!1},pr=function(e,t){I("SpinVditorSVDOM",e,"argument",t.options.debugger);var n=t.lute.SpinVditorSVDOM(e);return n.indexOf('data-type="footnotes-link"')>-1||n.indexOf('data-type="link-ref-defs-block"')>-1?e="<div data-block='0'>"+n+"</div>":e="<div data-block='0'>"+n.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",I("SpinVditorSVDOM",e,"result",t.options.debugger),e},sa=function(e){var t=e.getAttribute("data-type"),n=e.previousElementSibling,a=t&&t!=="text"&&t!=="table"&&t!=="heading-marker"&&t!=="newline"&&t!=="yaml-front-matter-open-marker"&&t!=="yaml-front-matter-close-marker"&&t!=="code-block-info"&&t!=="code-block-close-marker"&&t!=="code-block-open-marker"?e.textContent:"",i=!1;for(t==="newline"&&(i=!0);n&&!i;){var l=n.getAttribute("data-type");if(l==="li-marker"||l==="blockquote-marker"||l==="task-marker"||l==="padding"){var g=n.textContent;if(l==="li-marker"&&(t==="code-block-open-marker"||t==="code-block-info"))a=g.replace(/\S/g," ")+a;else if(t==="code-block-close-marker"&&n.nextElementSibling.isSameNode(e)){var E=Zt(e,"code-block-open-marker");E&&E.previousElementSibling&&(n=E.previousElementSibling,a=g+a)}else a=g+a}else l==="newline"&&(i=!0);n=n.previousElementSibling}return a},Ie=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),e.preview.render(e);var n=m(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,u.pK)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),clearTimeout(e.sv.processTimeoutId),e.sv.processTimeoutId=window.setTimeout(function(){t.enableAddUndoStack&&!e.sv.composingLock&&e.undo.addToUndoStack(e)},e.options.undoDelay)},dr=function(e,t){var n=(0,P.zh)(e),a=(0,O.S)(n.startContainer,"SPAN");a&&a.textContent.trim()!==""&&(t=`
`+t),n.collapse(!0),document.execCommand("insertHTML",!1,t)},la=function(e,t,n,a){var i=(0,P.zh)(e),l=t.getAttribute("data-type");e.sv.element.childNodes.length===0&&(e.sv.element.innerHTML=`<span data-type="p" data-block="0"><span data-type="text"><wbr></span></span><span data-type="newline"><br><span style="display: none">
</span></span>`,(0,P.ib)(e.sv.element,i));var g=(0,w.F9)(i.startContainer),E=(0,O.S)(i.startContainer,"SPAN");if(g){if(l==="link"){var A=void 0;i.toString()===""?A=""+n+Lute.Caret+a:A=""+n+i.toString()+a.replace(")",Lute.Caret+")"),document.execCommand("insertHTML",!1,A);return}else if(l==="italic"||l==="bold"||l==="strike"||l==="inline-code"||l==="code"||l==="table"||l==="line"){var A=void 0;i.toString()===""?A=""+n+Lute.Caret+(l==="code"?"":a):A=""+n+i.toString()+Lute.Caret+(l==="code"?"":a),l==="table"||l==="code"&&E&&E.textContent!==""?A=`

`+A:l==="line"&&(A=`

`+n+`
`+Lute.Caret),document.execCommand("insertHTML",!1,A);return}else if((l==="check"||l==="list"||l==="ordered-list"||l==="quote")&&E){var S="* ";l==="check"?S="* [ ] ":l==="ordered-list"?S="1. ":l==="quote"&&(S="> ");var M=Zt(E,"newline");M?M.insertAdjacentText("afterend",S):g.insertAdjacentText("afterbegin",S),le(e);return}(0,P.ib)(e.sv.element,i),Ie(e)}},hr=function(e){switch(e.currentMode){case"ir":return e.ir.element;case"wysiwyg":return e.wysiwyg.element;case"sv":return e.sv.element}},mr=function(e,t){e.options.upload.setHeaders&&(e.options.upload.headers=e.options.upload.setHeaders()),e.options.upload.headers&&Object.keys(e.options.upload.headers).forEach(function(n){t.setRequestHeader(n,e.options.upload.headers[n])})},ca=function(e,t,n,a){function i(l){return l instanceof n?l:new n(function(g){g(l)})}return new(n||(n=Promise))(function(l,g){function E(M){try{S(a.next(M))}catch(R){g(R)}}function A(M){try{S(a.throw(M))}catch(R){g(R)}}function S(M){M.done?l(M.value):i(M.value).then(E,A)}S((a=a.apply(e,t||[])).next())})},ua=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,i,l,g;return g={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function E(S){return function(M){return A([S,M])}}function A(S){if(a)throw new TypeError("Generator is already executing.");for(;n;)try{if(a=1,i&&(l=S[0]&2?i.return:S[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,S[1])).done)return l;switch(i=0,l&&(S=[S[0]&2,l.value]),S[0]){case 0:case 1:l=S;break;case 4:return n.label++,{value:S[1],done:!1};case 5:n.label++,i=S[1],S=[0];continue;case 7:S=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(S[0]===6||S[0]===2)){n=0;continue}if(S[0]===3&&(!l||S[1]>l[0]&&S[1]<l[3])){n.label=S[1];break}if(S[0]===6&&n.label<l[1]){n.label=l[1],l=S;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(S);break}l[2]&&n.ops.pop(),n.trys.pop();continue}S=t.call(e,n)}catch(M){S=[6,M],i=0}finally{a=l=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},fa=function(){function e(){this.isUploading=!1,this.element=document.createElement("div"),this.element.className="vditor-upload"}return e}(),pa=function(e,t){e.tip.hide();var n=[],a="",i="";e.options.lang,e.options;for(var l=function(A,S){var M=t[S],R=!0;M.name||(a+="<li>"+window.VditorI18n.nameEmpty+"</li>",R=!1),M.size>e.options.upload.max&&(a+="<li>"+M.name+" "+window.VditorI18n.over+" "+e.options.upload.max/1024/1024+"M</li>",R=!1);var Z=M.name.lastIndexOf("."),J=M.name.substr(Z),V=e.options.upload.filename(M.name.substr(0,Z))+J;if(e.options.upload.accept){var re=e.options.upload.accept.split(",").some(function(Y){var X=Y.trim();if(X.indexOf(".")===0){if(J.toLowerCase()===X.toLowerCase())return!0}else if(M.type.split("/")[0]===X.split("/")[0])return!0;return!1});re||(a+="<li>"+M.name+" "+window.VditorI18n.fileTypeError+"</li>",R=!1)}R&&(n.push(M),i+="<li>"+V+" "+window.VditorI18n.uploading+"</li>")},g=t.length,E=0;E<g;E++)l(g,E);return e.tip.show("<ul>"+a+i+"</ul>"),n},da=function(e,t){var n=hr(t);n.focus();var a=JSON.parse(e),i="";a.code===1&&(i=""+a.msg),a.data.errFiles&&a.data.errFiles.length>0&&(i="<ul><li>"+i+"</li>",a.data.errFiles.forEach(function(g){var E=g.lastIndexOf("."),A=t.options.upload.filename(g.substr(0,E))+g.substr(E);i+="<li>"+A+" "+window.VditorI18n.uploadError+"</li>"}),i+="</ul>"),i?t.tip.show(i):t.tip.hide();var l="";Object.keys(a.data.succMap).forEach(function(g){var E=a.data.succMap[g],A=g.lastIndexOf("."),S=g.substr(A),M=t.options.upload.filename(g.substr(0,A))+S;S=S.toLowerCase(),S.indexOf(".wav")===0||S.indexOf(".mp3")===0||S.indexOf(".ogg")===0?t.currentMode==="wysiwyg"?l+=`<div class="vditor-wysiwyg__block" data-type="html-block"
 data-block="0"><pre><code>&lt;audio controls="controls" src="`+E+'"&gt;&lt;/audio&gt;</code></pre><pre class="vditor-wysiwyg__preview" data-render="1"><audio controls="controls" src="'+E+`"></audio></pre></div>
`:t.currentMode==="ir"?l+='<audio controls="controls" src="'+E+`"></audio>
`:l+="["+M+"]("+E+`)
`:S.indexOf(".apng")===0||S.indexOf(".bmp")===0||S.indexOf(".gif")===0||S.indexOf(".ico")===0||S.indexOf(".cur")===0||S.indexOf(".jpg")===0||S.indexOf(".jpeg")===0||S.indexOf(".jfif")===0||S.indexOf(".pjp")===0||S.indexOf(".pjpeg")===0||S.indexOf(".png")===0||S.indexOf(".svg")===0||S.indexOf(".webp")===0?t.currentMode==="wysiwyg"?l+='<img alt="'+M+'" src="'+E+`">
`:l+="!["+M+"]("+E+`)
`:t.currentMode==="wysiwyg"?l+='<a href="'+E+'">'+M+`</a>
`:l+="["+M+"]("+E+`)
`}),(0,P.Hc)(t.upload.range),document.execCommand("insertHTML",!1,l),t.upload.range=getSelection().getRangeAt(0).cloneRange()},xn=function(e,t,n){return ca(void 0,void 0,void 0,function(){var a,i,V,l,g,g,E,A,S,M,R,Z,J,V,re,Y;return ua(this,function(X){switch(X.label){case 0:for(a=[],i=e.options.upload.multiple===!0?t.length:1,V=0;V<i;V++)l=t[V],l instanceof DataTransferItem&&(l=l.getAsFile()),a.push(l);return e.options.upload.handler?[4,e.options.upload.handler(a)]:[3,2];case 1:return g=X.sent(),n&&(n.value=""),typeof g=="string"?(e.tip.show(g),[2]):[2];case 2:return!e.options.upload.url||!e.upload?(n&&(n.value=""),e.tip.show("please config: options.upload.url"),[2]):e.options.upload.file?[4,e.options.upload.file(a)]:[3,4];case 3:a=X.sent(),X.label=4;case 4:if(e.options.upload.validate&&(g=e.options.upload.validate(a),typeof g=="string"))return e.tip.show(g),[2];if(E=hr(e),e.upload.range=(0,P.zh)(e),A=pa(e,a),A.length===0)return n&&(n.value=""),[2];for(S=new FormData,M=e.options.upload.extraData,R=0,Z=Object.keys(M);R<Z.length;R++)J=Z[R],S.append(J,M[J]);for(V=0,re=A.length;V<re;V++)S.append(e.options.upload.fieldName,A[V]);return Y=new XMLHttpRequest,Y.open("POST",e.options.upload.url),e.options.upload.token&&Y.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(Y.withCredentials=!0),mr(e,Y),e.upload.isUploading=!0,E.setAttribute("contenteditable","false"),Y.onreadystatechange=function(){if(Y.readyState===XMLHttpRequest.DONE){if(e.upload.isUploading=!1,E.setAttribute("contenteditable","true"),Y.status>=200&&Y.status<300)if(e.options.upload.success)e.options.upload.success(E,Y.responseText);else{var ce=Y.responseText;e.options.upload.format&&(ce=e.options.upload.format(t,Y.responseText)),da(ce,e)}else e.options.upload.error?e.options.upload.error(Y.responseText):e.tip.show(Y.responseText);n&&(n.value=""),e.upload.element.style.display="none"}},Y.upload.onprogress=function(ce){if(ce.lengthComputable){var te=ce.loaded/ce.total*100;e.upload.element.style.display="block";var Q=e.upload.element;Q.style.width=te+"%"}},Y.send(S),[2]}})})},Xt=function(e,t,n){var a,i=(0,w.F9)(t.startContainer);if(i||(i=e.wysiwyg.element),n&&n.inputType!=="formatItalic"&&n.inputType!=="deleteByDrag"&&n.inputType!=="insertFromDrop"&&n.inputType!=="formatBold"&&n.inputType!=="formatRemove"&&n.inputType!=="formatStrikeThrough"&&n.inputType!=="insertUnorderedList"&&n.inputType!=="insertOrderedList"&&n.inputType!=="formatOutdent"&&n.inputType!=="formatIndent"&&n.inputType!==""||!n){var l=bn(t.startContainer);l&&l.remove(),e.wysiwyg.element.querySelectorAll("wbr").forEach(function(te){te.remove()}),t.insertNode(document.createElement("wbr")),i.querySelectorAll("[style]").forEach(function(te){te.removeAttribute("style")}),i.querySelectorAll(".vditor-comment").forEach(function(te){te.textContent.trim()===""&&(te.classList.remove("vditor-comment","vditor-comment--focus"),te.removeAttribute("data-cmtids"))}),(a=i.previousElementSibling)===null||a===void 0||a.querySelectorAll(".vditor-comment").forEach(function(te){te.textContent.trim()===""&&(te.classList.remove("vditor-comment","vditor-comment--focus"),te.removeAttribute("data-cmtids"))});var g="";i.getAttribute("data-type")==="link-ref-defs-block"&&(i=e.wysiwyg.element);var E=i.isEqualNode(e.wysiwyg.element),A=(0,w.a1)(i,"data-type","footnotes-block");if(E)g=i.innerHTML;else{var S=(0,w.O9)(t.startContainer);if(S&&!A){var M=(0,O.S)(t.startContainer,"BLOCKQUOTE");M?i=(0,w.F9)(t.startContainer)||i:i=S}if(A&&(i=A),g=i.outerHTML,i.tagName==="UL"||i.tagName==="OL"){var R=i.previousElementSibling,Z=i.nextElementSibling;R&&(R.tagName==="UL"||R.tagName==="OL")&&(g=R.outerHTML+g,R.remove()),Z&&(Z.tagName==="UL"||Z.tagName==="OL")&&(g=g+Z.outerHTML,Z.remove()),g=g.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}i.innerText.startsWith("```")||(e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(te){te&&!i.isEqualNode(te)&&(g+=te.outerHTML,te.remove())}),e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(te){te&&!i.isEqualNode(te)&&(g+=te.outerHTML,te.remove())}))}if(g=g.replace(/<\/(strong|b)><strong data-marker="\W{2}">/g,"").replace(/<\/(em|i)><em data-marker="\W{1}">/g,"").replace(/<\/(s|strike)><s data-marker="~{1,2}">/g,""),g==='<p data-block="0">```<wbr></p>'&&e.hint.recentLanguage&&(g='<p data-block="0">```<wbr></p>'.replace("```","```"+e.hint.recentLanguage)),I("SpinVditorDOM",g,"argument",e.options.debugger),g=e.lute.SpinVditorDOM(g),I("SpinVditorDOM",g,"result",e.options.debugger),E)i.innerHTML=g;else if(i.outerHTML=g,A){var J=(0,w.E2)(e.wysiwyg.element.querySelector("wbr"),"LI");if(J){var V=e.wysiwyg.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+J.getAttribute("data-marker")+'"]');V&&V.setAttribute("aria-label",J.textContent.trim().substr(0,24))}}var re,Y=e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']");Y.forEach(function(te,Q){Q===0?re=te:(re.insertAdjacentHTML("beforeend",te.innerHTML),te.remove())}),Y.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",Y[0]);var X,ce=e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']");ce.forEach(function(te,Q){Q===0?X=te:(X.insertAdjacentHTML("beforeend",te.innerHTML),te.remove())}),ce.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",ce[0]),(0,P.ib)(e.wysiwyg.element,t),e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(te){be(te,e)}),n&&(n.inputType==="deleteContentBackward"||n.inputType==="deleteContentForward")&&e.options.comment.enable&&(e.wysiwyg.triggerRemoveComment(e),e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)))}Fe(e),ke(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},ha=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},ma=function(e,t,n,a){function i(l){return l instanceof n?l:new n(function(g){g(l)})}return new(n||(n=Promise))(function(l,g){function E(M){try{S(a.next(M))}catch(R){g(R)}}function A(M){try{S(a.throw(M))}catch(R){g(R)}}function S(M){M.done?l(M.value):i(M.value).then(E,A)}S((a=a.apply(e,t||[])).next())})},ga=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,i,l,g;return g={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function E(S){return function(M){return A([S,M])}}function A(S){if(a)throw new TypeError("Generator is already executing.");for(;n;)try{if(a=1,i&&(l=S[0]&2?i.return:S[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,S[1])).done)return l;switch(i=0,l&&(S=[S[0]&2,l.value]),S[0]){case 0:case 1:l=S;break;case 4:return n.label++,{value:S[1],done:!1};case 5:n.label++,i=S[1],S=[0];continue;case 7:S=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(S[0]===6||S[0]===2)){n=0;continue}if(S[0]===3&&(!l||S[1]>l[0]&&S[1]<l[3])){n.label=S[1];break}if(S[0]===6&&n.label<l[1]){n.label=l[1],l=S;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(S);break}l[2]&&n.ops.pop(),n.trys.pop();continue}S=t.call(e,n)}catch(M){S=[6,M],i=0}finally{a=l=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},gr=function(e,t,n){if(e.keyCode===229&&e.code===""&&e.key==="Unidentified"&&t.currentMode!=="sv"){var a=(0,w.F9)(n);if(a&&a.textContent.trim()==="")return t[t.currentMode].composingLock=!0,!1}return!0},yr=function(e,t,n){if(!(n.key==="Enter"||n.key==="Tab"||n.key==="Backspace"||n.key.indexOf("Arrow")>-1||(0,u.yl)(n)||n.key==="Escape"||n.shiftKey||n.altKey)){var a=(0,w.lG)(e.startContainer,"P")||(0,w.lG)(e.startContainer,"LI");if(a&&(0,P.im)(a,t[t.currentMode].element,e).start===0){a.nodeValue&&(a.nodeValue=a.nodeValue.replace(/\u2006/g,""));var i=document.createTextNode(r.g.ZWSP);e.insertNode(i),e.setStartAfter(i)}}},br=function(e,t){if(t==="ArrowDown"||t==="ArrowUp"){var n=(0,w.a1)(e.startContainer,"data-type","math-inline")||(0,w.a1)(e.startContainer,"data-type","html-entity")||(0,w.a1)(e.startContainer,"data-type","html-inline");n&&(t==="ArrowDown"&&e.setStartAfter(n.parentElement),t==="ArrowUp"&&e.setStartBefore(n.parentElement))}},Yt=function(e,t){var n=(0,P.zh)(e),a=(0,w.F9)(n.startContainer);a&&(a.insertAdjacentHTML(t,'<p data-block="0">'+r.g.ZWSP+`<wbr>
</p>`),(0,P.ib)(e[e.currentMode].element,n),St(e),me(e))},ya=function(e){var t=(0,w.lG)(e,"TABLE");return t&&t.rows[0].cells[0].isSameNode(e)?t:!1},ba=function(e){var t=(0,w.lG)(e,"TABLE");return t&&t.lastElementChild.lastElementChild.lastElementChild.isSameNode(e)?t:!1},wr=function(e,t,n){n===void 0&&(n=!0);var a=e.previousElementSibling;return a||(e.parentElement.previousElementSibling?a=e.parentElement.previousElementSibling.lastElementChild:e.parentElement.parentElement.tagName==="TBODY"&&e.parentElement.parentElement.previousElementSibling?a=e.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild:a=null),a&&(t.selectNodeContents(a),n||t.collapse(!1),(0,P.Hc)(t)),a},It=function(e,t,n,a,i){var l=(0,P.im)(a,e[e.currentMode].element,n);if(t.key==="ArrowDown"&&a.textContent.trimRight().substr(l.start).indexOf(`
`)===-1||t.key==="ArrowRight"&&l.start>=a.textContent.trimRight().length){var g=i.nextElementSibling;return!g||g&&(g.tagName==="TABLE"||g.getAttribute("data-type"))?(i.insertAdjacentHTML("afterend",'<p data-block="0">'+r.g.ZWSP+"<wbr></p>"),(0,P.ib)(e[e.currentMode].element,n)):(n.selectNodeContents(g),n.collapse(!0),(0,P.Hc)(n)),t.preventDefault(),!0}return!1},Tt=function(e,t,n,a,i){var l=(0,P.im)(a,e[e.currentMode].element,n);if(t.key==="ArrowUp"&&a.textContent.substr(0,l.start).indexOf(`
`)===-1||(t.key==="ArrowLeft"||t.key==="Backspace"&&n.toString()==="")&&l.start===0){var g=i.previousElementSibling;return!g||g&&(g.tagName==="TABLE"||g.getAttribute("data-type"))?(i.insertAdjacentHTML("beforebegin",'<p data-block="0">'+r.g.ZWSP+"<wbr></p>"),(0,P.ib)(e[e.currentMode].element,n)):(n.selectNodeContents(g),n.collapse(!1),(0,P.Hc)(n)),t.preventDefault(),!0}return!1},Qt=function(e,t,n,a){a===void 0&&(a=!0);var i=(0,w.lG)(t.startContainer,"LI");if(e[e.currentMode].element.querySelectorAll("wbr").forEach(function(M){M.remove()}),t.insertNode(document.createElement("wbr")),a&&i){for(var l="",g=0;g<i.parentElement.childElementCount;g++){var E=i.parentElement.children[g].querySelector("input");E&&E.remove(),l+='<p data-block="0">'+i.parentElement.children[g].innerHTML.trimLeft()+"</p>"}i.parentElement.insertAdjacentHTML("beforebegin",l),i.parentElement.remove()}else if(i)if(n==="check")i.parentElement.querySelectorAll("li").forEach(function(M){M.insertAdjacentHTML("afterbegin",'<input type="checkbox" />'+(M.textContent.indexOf(" ")===0?"":" ")),M.classList.add("vditor-task")});else{i.querySelector("input")&&i.parentElement.querySelectorAll("li").forEach(function(M){M.querySelector("input").remove(),M.classList.remove("vditor-task")});var S=void 0;n==="list"?(S=document.createElement("ul"),S.setAttribute("data-marker","*")):(S=document.createElement("ol"),S.setAttribute("data-marker","1.")),S.setAttribute("data-block","0"),S.setAttribute("data-tight",i.parentElement.getAttribute("data-tight")),S.innerHTML=i.parentElement.innerHTML,i.parentElement.parentNode.replaceChild(S,i.parentElement)}else{var A=(0,w.a1)(t.startContainer,"data-block","0");A||(e[e.currentMode].element.querySelector("wbr").remove(),A=e[e.currentMode].element.querySelector("p"),A.innerHTML="<wbr>"),n==="check"?(A.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li class="vditor-task"><input type="checkbox" /> '+A.innerHTML+"</li></ul>"),A.remove()):n==="list"?(A.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li>'+A.innerHTML+"</li></ul>"),A.remove()):n==="ordered-list"&&(A.insertAdjacentHTML("beforebegin",'<ol data-block="0"><li>'+A.innerHTML+"</li></ol>"),A.remove())}},vr=function(e,t,n){var a=t.previousElementSibling;if(t&&a){var i=[t];Array.from(n.cloneContents().children).forEach(function(A,S){A.nodeType!==3&&t&&A.textContent.trim()!==""&&t.getAttribute("data-node-id")===A.getAttribute("data-node-id")&&(S!==0&&i.push(t),t=t.nextElementSibling)}),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(A){A.remove()}),n.insertNode(document.createElement("wbr"));var l=a.parentElement,g="";i.forEach(function(A){var S=A.getAttribute("data-marker");S.length!==1&&(S="1"+S.slice(-1)),g+='<li data-node-id="'+A.getAttribute("data-node-id")+'" data-marker="'+S+'">'+A.innerHTML+"</li>",A.remove()}),a.insertAdjacentHTML("beforeend","<"+l.tagName+' data-block="0">'+g+"</"+l.tagName+">"),e.currentMode==="wysiwyg"?l.outerHTML=e.lute.SpinVditorDOM(l.outerHTML):l.outerHTML=e.lute.SpinVditorIRDOM(l.outerHTML),(0,P.ib)(e[e.currentMode].element,n);var E=(0,w.O9)(n.startContainer);E&&E.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach(function(A){be(A,e),e.currentMode==="wysiwyg"&&A.previousElementSibling.setAttribute("style","display:none")}),me(e),St(e)}else e[e.currentMode].element.focus()},Ln=function(e,t,n,a){var i=(0,w.lG)(t.parentElement,"LI");if(i){e[e.currentMode].element.querySelectorAll("wbr").forEach(function(R){R.remove()}),n.insertNode(document.createElement("wbr"));var l=t.parentElement,g=l.cloneNode(),E=[t];Array.from(n.cloneContents().children).forEach(function(R,Z){R.nodeType!==3&&t&&R.textContent.trim()!==""&&t.getAttribute("data-node-id")===R.getAttribute("data-node-id")&&(Z!==0&&E.push(t),t=t.nextElementSibling)});var A=!1,S="";l.querySelectorAll("li").forEach(function(R){A&&(S+=R.outerHTML,!R.nextElementSibling&&!R.previousElementSibling?R.parentElement.remove():R.remove()),R.isSameNode(E[E.length-1])&&(A=!0)}),E.reverse().forEach(function(R){i.insertAdjacentElement("afterend",R)}),S&&(g.innerHTML=S,E[0].insertAdjacentElement("beforeend",g)),e.currentMode==="wysiwyg"?a.outerHTML=e.lute.SpinVditorDOM(a.outerHTML):a.outerHTML=e.lute.SpinVditorIRDOM(a.outerHTML),(0,P.ib)(e[e.currentMode].element,n);var M=(0,w.O9)(n.startContainer);M&&M.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach(function(R){be(R,e),e.currentMode==="wysiwyg"&&R.previousElementSibling.setAttribute("style","display:none")}),me(e),St(e)}else e[e.currentMode].element.focus()},$t=function(e,t){for(var n=getSelection().getRangeAt(0).startContainer.parentElement,a=e.rows[0].cells.length,i=e.rows.length,l=0,g=0;g<i;g++)for(var E=0;E<a;E++)if(e.rows[g].cells[E].isSameNode(n)){l=E;break}for(var A=0;A<i;A++)e.rows[A].cells[l].setAttribute("align",t)},_n=function(e){var t=e.trimRight().split(`
`).pop();return t===""?!1:(t.replace(/ |-/g,"")===""||t.replace(/ |_/g,"")===""||t.replace(/ |\*/g,"")==="")&&t.replace(/ /g,"").length>2?!(t.indexOf("-")>-1&&t.trimLeft().indexOf(" ")===-1&&e.trimRight().split(`
`).length>1||t.indexOf("    ")===0||t.indexOf("	")===0):!1},Mn=function(e){var t=e.trimRight().split(`
`);return e=t.pop(),e.indexOf("    ")===0||e.indexOf("	")===0||(e=e.trimLeft(),e===""||t.length===0)?!1:e.replace(/-/g,"")===""||e.replace(/=/g,"")===""},me=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),e.currentMode==="wysiwyg"?ke(e,t):e.currentMode==="ir"?st(e,t):e.currentMode==="sv"&&Ie(e,t)},Er=function(e,t,n,a){var i,l=e.startContainer,g=(0,w.lG)(l,"LI");if(g){if(!(0,u.yl)(a)&&!a.altKey&&a.key==="Enter"&&!a.shiftKey&&n&&g.contains(n)&&n.nextElementSibling)return g&&!g.textContent.endsWith(`
`)&&g.insertAdjacentText("beforeend",`
`),e.insertNode(document.createTextNode(`

`)),e.collapse(!1),me(t),a.preventDefault(),!0;if(!(0,u.yl)(a)&&!a.shiftKey&&!a.altKey&&a.key==="Backspace"&&!g.previousElementSibling&&e.toString()===""&&(0,P.im)(g,t[t.currentMode].element,e).start===0)return g.nextElementSibling?(g.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+g.innerHTML+"</p>"),g.remove()):g.parentElement.outerHTML='<p data-block="0"><wbr>'+g.innerHTML+"</p>",(0,P.ib)(t[t.currentMode].element,e),me(t),a.preventDefault(),!0;if(!(0,u.yl)(a)&&!a.shiftKey&&!a.altKey&&a.key==="Backspace"&&g.textContent.trim().replace(r.g.ZWSP,"")===""&&e.toString()===""&&((i=g.previousElementSibling)===null||i===void 0?void 0:i.tagName)==="LI")return g.previousElementSibling.insertAdjacentText("beforeend",`

`),e.selectNodeContents(g.previousElementSibling),e.collapse(!1),g.remove(),(0,P.ib)(t[t.currentMode].element,e),me(t),a.preventDefault(),!0;if(!(0,u.yl)(a)&&!a.altKey&&a.key==="Tab"){var E=!1;if((e.startOffset===0&&(l.nodeType===3&&!l.previousSibling||l.nodeType!==3&&l.nodeName==="LI")||g.classList.contains("vditor-task")&&e.startOffset===1&&l.previousSibling.nodeType!==3&&l.previousSibling.tagName==="INPUT")&&(E=!0),E||e.toString()!=="")return a.shiftKey?Ln(t,g,e,g.parentElement):vr(t,g,e),a.preventDefault(),!0}}return!1},On=function(e,t,n){if(e.options.tab&&n.key==="Tab")return n.shiftKey||(t.toString()===""?(t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1)):(t.extractContents(),t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1))),(0,P.Hc)(t),me(e),n.preventDefault(),!0},Sr=function(e,t,n,a){if(n){if(!(0,u.yl)(e)&&!e.altKey&&e.key==="Enter"){var i=String.raw(Rr||(Rr=ha(["",""],["",""])),n.textContent).replace(/\\\|/g,"").trim(),l=i.split("|");if(i.startsWith("|")&&i.endsWith("|")&&l.length>3){var g=l.map(function(){return"---"}).join("|");return g=n.textContent+`
`+g.substring(3,g.length-3)+`
|<wbr>`,n.outerHTML=t.lute.SpinVditorDOM(g),(0,P.ib)(t[t.currentMode].element,a),me(t),He(t),e.preventDefault(),!0}if(_n(n.innerHTML)&&n.previousElementSibling){var E="",A=n.innerHTML.trimRight().split(`
`);return A.length>1&&(A.pop(),E='<p data-block="0">'+A.join(`
`)+"</p>"),n.insertAdjacentHTML("afterend",E+`<hr data-block="0"><p data-block="0"><wbr>
</p>`),n.remove(),(0,P.ib)(t[t.currentMode].element,a),me(t),He(t),e.preventDefault(),!0}if(Mn(n.innerHTML))return t.currentMode==="wysiwyg"?n.outerHTML=t.lute.SpinVditorDOM(n.innerHTML+`<p data-block="0"><wbr>
</p>`):n.outerHTML=t.lute.SpinVditorIRDOM(n.innerHTML+`<p data-block="0"><wbr>
</p>`),(0,P.ib)(t[t.currentMode].element,a),me(t),He(t),e.preventDefault(),!0}if(a.collapsed&&n.previousElementSibling&&e.key==="Backspace"&&!(0,u.yl)(e)&&!e.altKey&&!e.shiftKey&&n.textContent.trimRight().split(`
`).length>1&&(0,P.im)(n,t[t.currentMode].element,a).start===0){var S=(0,w.DX)(n.previousElementSibling);return S.textContent.endsWith(`
`)||(S.textContent=S.textContent+`
`),S.parentElement.insertAdjacentHTML("beforeend","<wbr>"+n.innerHTML),n.remove(),(0,P.ib)(t[t.currentMode].element,a),!1}return!1}},Tr=function(e,t,n){for(var a="",i=0;i<n.parentElement.childElementCount;i++)a+='<td align="'+n.parentElement.children[i].getAttribute("align")+'"> </td>';n.tagName==="TH"?n.parentElement.parentElement.insertAdjacentHTML("afterend","<tbody><tr>"+a+"</tr></tbody>"):n.parentElement.insertAdjacentHTML("afterend","<tr>"+a+"</tr>"),me(e)},kr=function(e,t,n){for(var a="",i=0;i<n.parentElement.childElementCount;i++)n.tagName==="TH"?a+='<th align="'+n.parentElement.children[i].getAttribute("align")+'"> </th>':a+='<td align="'+n.parentElement.children[i].getAttribute("align")+'"> </td>';if(n.tagName==="TH"){n.parentElement.parentElement.insertAdjacentHTML("beforebegin","<thead><tr>"+a+"</tr></thead>"),t.insertNode(document.createElement("wbr"));var l=n.parentElement.innerHTML.replace(/<th>/g,"<td>").replace(/<\/th>/g,"</td>");n.parentElement.parentElement.nextElementSibling.insertAdjacentHTML("afterbegin",l),n.parentElement.parentElement.remove(),(0,P.ib)(e.ir.element,t)}else n.parentElement.insertAdjacentHTML("beforebegin","<tr>"+a+"</tr>");me(e)},en=function(e,t,n,a){a===void 0&&(a="afterend");for(var i=0,l=n.previousElementSibling;l;)i++,l=l.previousElementSibling;for(var g=0;g<t.rows.length;g++)g===0?t.rows[g].cells[i].insertAdjacentHTML(a,"<th> </th>"):t.rows[g].cells[i].insertAdjacentHTML(a,"<td> </td>");me(e)},Ar=function(e,t,n){if(n.tagName==="TD"){var a=n.parentElement.parentElement;n.parentElement.previousElementSibling?t.selectNodeContents(n.parentElement.previousElementSibling.lastElementChild):t.selectNodeContents(a.previousElementSibling.lastElementChild.lastElementChild),a.childElementCount===1?a.remove():n.parentElement.remove(),t.collapse(!1),(0,P.Hc)(t),me(e)}},Cr=function(e,t,n,a){for(var i=0,l=a.previousElementSibling;l;)i++,l=l.previousElementSibling;(a.previousElementSibling||a.nextElementSibling)&&(t.selectNodeContents(a.previousElementSibling||a.nextElementSibling),t.collapse(!0));for(var g=0;g<n.rows.length;g++){var E=n.rows[g].cells;if(E.length===1){n.remove(),St(e);break}E[i].remove()}(0,P.Hc)(t),me(e)},xr=function(e,t,n){var a=n.startContainer,i=(0,w.lG)(a,"TD")||(0,w.lG)(a,"TH");if(i){if(!(0,u.yl)(t)&&!t.altKey&&t.key==="Enter"){(!i.lastElementChild||i.lastElementChild&&(!i.lastElementChild.isSameNode(i.lastChild)||i.lastElementChild.tagName!=="BR"))&&i.insertAdjacentHTML("beforeend","<br>");var l=document.createElement("br");return n.insertNode(l),n.setStartAfter(l),me(e),He(e),t.preventDefault(),!0}if(t.key==="Tab"){if(t.shiftKey)return wr(i,n),t.preventDefault(),!0;var g=i.nextElementSibling;return g||(i.parentElement.nextElementSibling?g=i.parentElement.nextElementSibling.firstElementChild:i.parentElement.parentElement.tagName==="THEAD"&&i.parentElement.parentElement.nextElementSibling?g=i.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild:g=null),g&&(n.selectNodeContents(g),(0,P.Hc)(n)),t.preventDefault(),!0}var E=i.parentElement.parentElement.parentElement;if(t.key==="ArrowUp"){if(t.preventDefault(),i.tagName==="TH")return E.previousElementSibling?(n.selectNodeContents(E.previousElementSibling),n.collapse(!1),(0,P.Hc)(n)):Yt(e,"beforebegin"),!0;for(var A=0,S=i.parentElement;A<S.cells.length&&!S.cells[A].isSameNode(i);A++);var M=S.previousElementSibling;return M||(M=S.parentElement.previousElementSibling.firstChild),n.selectNodeContents(M.cells[A]),n.collapse(!1),(0,P.Hc)(n),!0}if(t.key==="ArrowDown"){t.preventDefault();var S=i.parentElement;if(!S.nextElementSibling&&i.tagName==="TD")return E.nextElementSibling?(n.selectNodeContents(E.nextElementSibling),n.collapse(!0),(0,P.Hc)(n)):Yt(e,"afterend"),!0;for(var A=0;A<S.cells.length&&!S.cells[A].isSameNode(i);A++);var g=S.nextElementSibling;return g||(g=S.parentElement.nextElementSibling.firstChild),n.selectNodeContents(g.cells[A]),n.collapse(!0),(0,P.Hc)(n),!0}if(e.currentMode==="wysiwyg"&&!(0,u.yl)(t)&&t.key==="Enter"&&!t.shiftKey&&t.altKey){var R=e.wysiwyg.popover.querySelector(".vditor-input");return R.focus(),R.select(),t.preventDefault(),!0}if(!(0,u.yl)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Backspace"&&n.startOffset===0&&n.toString()===""){var Z=wr(i,n,!1);return!Z&&E&&(E.textContent.trim()===""?(E.outerHTML=`<p data-block="0"><wbr>
</p>`,(0,P.ib)(e[e.currentMode].element,n)):(n.setStartBefore(E),n.collapse(!0)),me(e)),t.preventDefault(),!0}if(G("⇧⌘F",t))return kr(e,n,i),t.preventDefault(),!0;if(G("⌘=",t))return Tr(e,n,i),t.preventDefault(),!0;if(G("⇧⌘G",t))return en(e,E,i,"beforebegin"),t.preventDefault(),!0;if(G("⇧⌘=",t))return en(e,E,i),t.preventDefault(),!0;if(G("⌘-",t))return Ar(e,n,i),t.preventDefault(),!0;if(G("⇧⌘-",t))return Cr(e,n,E,i),t.preventDefault(),!0;if(G("⇧⌘L",t)){if(e.currentMode==="ir")return $t(E,"left"),me(e),t.preventDefault(),!0;var J=e.wysiwyg.popover.querySelector('[data-type="left"]');if(J)return J.click(),t.preventDefault(),!0}if(G("⇧⌘C",t)){if(e.currentMode==="ir")return $t(E,"center"),me(e),t.preventDefault(),!0;var J=e.wysiwyg.popover.querySelector('[data-type="center"]');if(J)return J.click(),t.preventDefault(),!0}if(G("⇧⌘R",t)){if(e.currentMode==="ir")return $t(E,"right"),me(e),t.preventDefault(),!0;var J=e.wysiwyg.popover.querySelector('[data-type="right"]');if(J)return J.click(),t.preventDefault(),!0}}return!1},Lr=function(e,t,n,a){if(n.tagName==="PRE"&&G("⌘A",t))return a.selectNodeContents(n.firstElementChild),t.preventDefault(),!0;if(e.options.tab&&t.key==="Tab"&&!t.shiftKey&&a.toString()==="")return a.insertNode(document.createTextNode(e.options.tab)),a.collapse(!1),me(e),t.preventDefault(),!0;if(t.key==="Backspace"&&!(0,u.yl)(t)&&!t.shiftKey&&!t.altKey){var i=(0,P.im)(n,e[e.currentMode].element,a);if((i.start===0||i.start===1&&n.innerText===`
`)&&a.toString()==="")return n.parentElement.outerHTML='<p data-block="0"><wbr>'+n.firstElementChild.innerHTML+"</p>",(0,P.ib)(e[e.currentMode].element,a),me(e),t.preventDefault(),!0}return!(0,u.yl)(t)&&!t.altKey&&t.key==="Enter"?(n.firstElementChild.textContent.endsWith(`
`)||n.firstElementChild.insertAdjacentText("beforeend",`
`),a.extractContents(),a.insertNode(document.createTextNode(`
`)),a.collapse(!1),(0,P.Hc)(a),(0,u.vU)()||(e.currentMode==="wysiwyg"?Xt(e,a):Ge(e,a)),He(e),t.preventDefault(),!0):!1},_r=function(e,t,n,a){var i=t.startContainer,l=(0,w.lG)(i,"BLOCKQUOTE");if(l&&t.toString()===""){if(n.key==="Backspace"&&!(0,u.yl)(n)&&!n.shiftKey&&!n.altKey&&(0,P.im)(l,e[e.currentMode].element,t).start===0)return t.insertNode(document.createElement("wbr")),l.outerHTML=l.innerHTML,(0,P.ib)(e[e.currentMode].element,t),me(e),n.preventDefault(),!0;if(a&&n.key==="Enter"&&!(0,u.yl)(n)&&!n.shiftKey&&!n.altKey&&a.parentElement.tagName==="BLOCKQUOTE"){var g=!1;if(a.innerHTML.replace(r.g.ZWSP,"")===`
`||a.innerHTML.replace(r.g.ZWSP,"")===""?(g=!0,a.remove()):a.innerHTML.endsWith(`

`)&&(0,P.im)(a,e[e.currentMode].element,t).start===a.textContent.length-1&&(a.innerHTML=a.innerHTML.substr(0,a.innerHTML.length-2),g=!0),g)return l.insertAdjacentHTML("afterend",'<p data-block="0">'+r.g.ZWSP+`<wbr>
</p>`),(0,P.ib)(e[e.currentMode].element,t),me(e),n.preventDefault(),!0}var E=(0,w.F9)(i);if(e.currentMode==="wysiwyg"&&E&&G("⇧⌘;",n))return t.insertNode(document.createElement("wbr")),E.outerHTML='<blockquote data-block="0">'+E.outerHTML+"</blockquote>",(0,P.ib)(e.wysiwyg.element,t),ke(e),n.preventDefault(),!0;if(It(e,n,t,l,l)||Tt(e,n,t,l,l))return!0}return!1},Mr=function(e,t,n){var a=t.startContainer,i=(0,w.fb)(a,"vditor-task");if(i){if(G("⇧⌘J",n)){var l=i.firstElementChild;return l.checked?l.removeAttribute("checked"):l.setAttribute("checked","checked"),me(e),n.preventDefault(),!0}if(n.key==="Backspace"&&!(0,u.yl)(n)&&!n.shiftKey&&!n.altKey&&t.toString()===""&&t.startOffset===1&&(a.nodeType===3&&a.previousSibling&&a.previousSibling.tagName==="INPUT"||a.nodeType!==3)){var g=i.previousElementSibling;if(i.querySelector("input").remove(),g){var E=(0,w.DX)(g);E.parentElement.insertAdjacentHTML("beforeend","<wbr>"+i.innerHTML.trim()),i.remove()}else i.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+(i.innerHTML.trim()||`
`)+"</p>"),i.nextElementSibling?i.remove():i.parentElement.remove();return(0,P.ib)(e[e.currentMode].element,t),me(e),n.preventDefault(),!0}if(n.key==="Enter"&&!(0,u.yl)(n)&&!n.shiftKey&&!n.altKey){if(i.textContent.trim()==="")if((0,w.fb)(i.parentElement,"vditor-task")){var A=(0,w.O9)(a);A&&Ln(e,i,t,A)}else if(i.nextElementSibling){var S="",M="",R=!1;Array.from(i.parentElement.children).forEach(function(re){i.isSameNode(re)?R=!0:R?S+=re.outerHTML:M+=re.outerHTML});var Z=i.parentElement.tagName,J=i.parentElement.tagName==="OL"?"":' data-marker="'+i.parentElement.getAttribute("data-marker")+'"',V="";M&&(V=i.parentElement.tagName==="UL"?"":' start="1"',M="<"+Z+' data-tight="true"'+J+' data-block="0">'+M+"</"+Z+">"),i.parentElement.outerHTML=M+`<p data-block="0"><wbr>
</p><`+Z+`
 data-tight="true"`+J+' data-block="0"'+V+">"+S+"</"+Z+">"}else i.parentElement.insertAdjacentHTML("afterend",`<p data-block="0"><wbr>
</p>`),i.parentElement.querySelectorAll("li").length===1?i.parentElement.remove():i.remove();else a.nodeType!==3&&t.startOffset===0&&a.firstChild.tagName==="INPUT"?t.setStart(a.childNodes[1],1):(t.setEndAfter(i.lastChild),i.insertAdjacentHTML("afterend",'<li class="vditor-task" data-marker="'+i.getAttribute("data-marker")+'"><input type="checkbox"> <wbr></li>'),document.querySelector("wbr").after(t.extractContents()));return(0,P.ib)(e[e.currentMode].element,t),me(e),He(e),n.preventDefault(),!0}}return!1},Or=function(e,t,n,a){if(t.startContainer.nodeType!==3){var i=t.startContainer.children[t.startOffset];if(i&&i.tagName==="HR")return t.selectNodeContents(i.previousElementSibling),t.collapse(!1),n.preventDefault(),!0}if(a){var l=a.previousElementSibling;if(l&&(0,P.im)(a,e[e.currentMode].element,t).start===0&&((0,u.vU)()&&l.tagName==="HR"||l.tagName==="TABLE")){if(l.tagName==="TABLE"){var g=l.lastElementChild.lastElementChild.lastElementChild;g.innerHTML=g.innerHTML.trimLeft()+"<wbr>"+a.textContent.trim(),a.remove()}else l.remove();return(0,P.ib)(e[e.currentMode].element,t),me(e),n.preventDefault(),!0}}return!1},Dr=function(e){(0,u.vU)()&&e.startContainer.nodeType!==3&&e.startContainer.tagName==="HR"&&e.setStartBefore(e.startContainer)},Pr=function(e,t,n){var a,i;if(!(0,u.vU)())return!1;if(e.key==="ArrowUp"&&t&&((a=t.previousElementSibling)===null||a===void 0?void 0:a.tagName)==="TABLE"){var l=t.previousElementSibling;return n.selectNodeContents(l.rows[l.rows.length-1].lastElementChild),n.collapse(!1),e.preventDefault(),!0}return e.key==="ArrowDown"&&t&&((i=t.nextElementSibling)===null||i===void 0?void 0:i.tagName)==="TABLE"?(n.selectNodeContents(t.nextElementSibling.rows[0].cells[0]),n.collapse(!0),e.preventDefault(),!0):!1},tn=function(e,t,n){return ma(void 0,void 0,void 0,function(){var a,i,l,g,E,A,S,M,R,Z,J,V,re,X,Y,X,ce;return ga(this,function(te){switch(te.label){case 0:return e[e.currentMode].element.getAttribute("contenteditable")!=="true"?[2]:(t.stopPropagation(),t.preventDefault(),"clipboardData"in t?(a=t.clipboardData.getData("text/html"),i=t.clipboardData.getData("text/plain"),l=t.clipboardData.files):(a=t.dataTransfer.getData("text/html"),i=t.dataTransfer.getData("text/plain"),t.dataTransfer.types.includes("Files")&&(l=t.dataTransfer.items)),g={},E=function(Q,ve){if(!ve)return["",Lute.WalkContinue];var xe=Q.TokensStr();if(Q.__internal_object__.Parent.Type===34&&xe&&xe.indexOf("file://")===-1&&e.options.upload.linkToImgUrl){var De=new XMLHttpRequest;De.open("POST",e.options.upload.linkToImgUrl),e.options.upload.token&&De.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(De.withCredentials=!0),mr(e,De),De.setRequestHeader("Content-Type","application/json; charset=utf-8"),De.onreadystatechange=function(){if(De.readyState===XMLHttpRequest.DONE){if(De.status===200){var We=De.responseText;e.options.upload.linkToImgFormat&&(We=e.options.upload.linkToImgFormat(De.responseText));var Ue=JSON.parse(We);if(Ue.code!==0){e.tip.show(Ue.msg);return}var Ve=Ue.data.originalURL;if(e.currentMode==="sv")e.sv.element.querySelectorAll(".vditor-sv__marker--link").forEach(function(Be){Be.textContent===Ve&&(Be.textContent=Ue.data.url)});else{var de=e[e.currentMode].element.querySelector('img[src="'+Ve+'"]');de.src=Ue.data.url,e.currentMode==="ir"&&(de.previousElementSibling.previousElementSibling.innerHTML=Ue.data.url)}me(e)}else e.tip.show(De.responseText);e.options.upload.linkToImgCallback&&e.options.upload.linkToImgCallback(De.responseText)}},De.send(JSON.stringify({url:xe}))}return e.currentMode==="ir"?['<span class="vditor-ir__marker vditor-ir__marker--link">'+Lute.EscapeHTMLStr(xe)+"</span>",Lute.WalkContinue]:e.currentMode==="wysiwyg"?["",Lute.WalkContinue]:['<span class="vditor-sv__marker--link">'+Lute.EscapeHTMLStr(xe)+"</span>",Lute.WalkContinue]},(a.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<a href="'+i+'">'+i+"</a>"||a.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<!--StartFragment--><a href="'+i+'">'+i+"</a><!--EndFragment-->")&&(a=""),A=new DOMParser().parseFromString(a,"text/html"),A.body&&(a=A.body.innerHTML),a=Lute.Sanitize(a),e.wysiwyg.getComments(e),S=e[e.currentMode].element.scrollHeight,M=Pe(a,i,e.currentMode),R=e.currentMode==="sv"?(0,w.a1)(t.target,"data-type","code-block"):(0,w.lG)(t.target,"CODE"),R?(e.currentMode==="sv"?document.execCommand("insertHTML",!1,i.replace(/&/g,"&amp;").replace(/</g,"&lt;")):(Z=(0,P.im)(t.target,e[e.currentMode].element),R.parentElement.tagName!=="PRE"&&(i+=r.g.ZWSP),R.textContent=R.textContent.substring(0,Z.start)+i+R.textContent.substring(Z.end),(0,P.$j)(Z.start+i.length,Z.start+i.length,R.parentElement),!((ce=R.parentElement)===null||ce===void 0)&&ce.nextElementSibling.classList.contains("vditor-"+e.currentMode+"__preview")&&(R.parentElement.nextElementSibling.innerHTML=R.outerHTML,be(R.parentElement.nextElementSibling,e))),[3,8]):[3,1]);case 1:return M?(n.pasteCode(M),[3,8]):[3,2];case 2:return a.trim()===""?[3,3]:(J=document.createElement("div"),J.innerHTML=a,J.querySelectorAll("[style]").forEach(function(Q){Q.removeAttribute("style")}),J.querySelectorAll(".vditor-copy").forEach(function(Q){Q.remove()}),e.currentMode==="ir"?(g.HTML2VditorIRDOM={renderLinkDest:E},e.lute.SetJSRenderers({renderers:g}),(0,P.oC)(e.lute.HTML2VditorIRDOM(J.innerHTML),e)):e.currentMode==="wysiwyg"?(g.HTML2VditorDOM={renderLinkDest:E},e.lute.SetJSRenderers({renderers:g}),(0,P.oC)(e.lute.HTML2VditorDOM(J.innerHTML),e)):(g.Md2VditorSVDOM={renderLinkDest:E},e.lute.SetJSRenderers({renderers:g}),fr(e,e.lute.HTML2Md(J.innerHTML).trimRight())),e.outline.render(e),[3,8]);case 3:return l.length>0?e.options.upload.url||e.options.upload.handler?[4,xn(e,l)]:[3,5]:[3,7];case 4:return te.sent(),[3,6];case 5:V=new FileReader,"clipboardData"in t?(l=t.clipboardData.files,re=l[0]):t.dataTransfer.types.includes("Files")&&(l=t.dataTransfer.items,re=l[0].getAsFile()),re&&re.type.startsWith("image")&&(V.readAsDataURL(re),V.onload=function(){var Q="";e.currentMode==="wysiwyg"?Q+='<img alt="'+re.name+'" src="'+V.result.toString()+`">
`:Q+="!["+re.name+"]("+V.result.toString()+`)
`,document.execCommand("insertHTML",!1,Q)}),te.label=6;case 6:return[3,8];case 7:i.trim()!==""&&l.length===0&&(X=(0,P.zh)(e),X.toString()!==""&&e.lute.IsValidLinkDest(i)&&(i="["+X.toString()+"]("+i+")"),e.currentMode==="ir"?(g.Md2VditorIRDOM={renderLinkDest:E},e.lute.SetJSRenderers({renderers:g}),(0,P.oC)(e.lute.Md2VditorIRDOM(i),e)):e.currentMode==="wysiwyg"?(g.Md2VditorDOM={renderLinkDest:E},e.lute.SetJSRenderers({renderers:g}),(0,P.oC)(e.lute.Md2VditorDOM(i),e)):(g.Md2VditorSVDOM={renderLinkDest:E},e.lute.SetJSRenderers({renderers:g}),fr(e,i)),e.outline.render(e)),te.label=8;case 8:return e.currentMode!=="sv"&&(Y=(0,w.F9)((0,P.zh)(e).startContainer),Y&&(X=(0,P.zh)(e),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(Q){Q.remove()}),X.insertNode(document.createElement("wbr")),e.currentMode==="wysiwyg"?Y.outerHTML=e.lute.SpinVditorDOM(Y.outerHTML):Y.outerHTML=e.lute.SpinVditorIRDOM(Y.outerHTML),(0,P.ib)(e[e.currentMode].element,X)),e[e.currentMode].element.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach(function(Q){be(Q,e)})),e.wysiwyg.triggerRemoveComment(e),me(e),e[e.currentMode].element.scrollHeight-S>Math.min(e[e.currentMode].element.clientHeight,window.innerHeight)/2&&He(e),[2]}})})},Rr,Hr=function(e){e.hint.render(e);var t=(0,P.zh)(e).startContainer,n=(0,w.a1)(t,"data-type","code-block-info");if(n)if(n.textContent.replace(r.g.ZWSP,"")===""&&e.hint.recentLanguage){n.textContent=r.g.ZWSP+e.hint.recentLanguage;var a=(0,P.zh)(e);a.selectNodeContents(n)}else{var i=[],l=n.textContent.substring(0,(0,P.im)(n,e.ir.element).start).replace(r.g.ZWSP,"");(e.options.preview.hljs.langs||r.g.CODE_LANGUAGES).forEach(function(g){g.indexOf(l.toLowerCase())>-1&&i.push({html:g,value:g})}),e.hint.genHTML(i,l,e)}},st=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&Hr(e),clearTimeout(e.ir.processTimeoutId),e.ir.processTimeoutId=window.setTimeout(function(){if(!e.ir.composingLock){var n=m(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,u.pK)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},jt=function(e,t){var n=(0,P.zh)(e),a=(0,w.F9)(n.startContainer)||n.startContainer;if(a){var i=a.querySelector(".vditor-ir__marker--heading");i?i.innerHTML=t:(a.insertAdjacentText("afterbegin",t),n.selectNodeContents(a),n.collapse(!1)),Ge(e,n.cloneRange()),bt(e)}},nn=function(e,t,n){var a=(0,w.a1)(e.startContainer,"data-type",n);if(a){a.firstElementChild.remove(),a.lastElementChild.remove(),e.insertNode(document.createElement("wbr"));var i=document.createElement("div");i.innerHTML=t.lute.SpinVditorIRDOM(a.outerHTML),a.outerHTML=i.firstElementChild.innerHTML.trim()}},wa=function(e,t,n,a){var i=(0,P.zh)(e),l=t.getAttribute("data-type"),g=i.startContainer;g.nodeType===3&&(g=g.parentElement);var E=!0;if(t.classList.contains("vditor-menu--current"))if(l==="quote"){var A=(0,w.lG)(g,"BLOCKQUOTE");A&&(i.insertNode(document.createElement("wbr")),A.outerHTML=A.innerHTML.trim()===""?'<p data-block="0">'+A.innerHTML+"</p>":A.innerHTML)}else if(l==="link"){var S=(0,w.a1)(i.startContainer,"data-type","a");if(S){var M=(0,w.fb)(i.startContainer,"vditor-ir__link");M?(i.insertNode(document.createElement("wbr")),S.outerHTML=M.innerHTML):S.outerHTML=S.querySelector(".vditor-ir__link").innerHTML+"<wbr>"}}else l==="italic"?nn(i,e,"em"):l==="bold"?nn(i,e,"strong"):l==="strike"?nn(i,e,"s"):l==="inline-code"?nn(i,e,"code"):(l==="check"||l==="list"||l==="ordered-list")&&(Qt(e,i,l),E=!1,t.classList.remove("vditor-menu--current"));else{e.ir.element.childNodes.length===0&&(e.ir.element.innerHTML='<p data-block="0"><wbr></p>',(0,P.ib)(e.ir.element,i));var R=(0,w.F9)(i.startContainer);if(l==="line"){if(R){var Z=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;R.innerHTML.trim()===""?R.outerHTML=Z:R.insertAdjacentHTML("afterend",Z)}}else if(l==="quote")R&&(i.insertNode(document.createElement("wbr")),R.outerHTML='<blockquote data-block="0">'+R.outerHTML+"</blockquote>",E=!1,t.classList.add("vditor-menu--current"));else if(l==="link"){var J=void 0;i.toString()===""?J=n+"<wbr>"+a:J=""+n+i.toString()+a.replace(")","<wbr>)"),document.execCommand("insertHTML",!1,J),E=!1,t.classList.add("vditor-menu--current")}else if(l==="italic"||l==="bold"||l==="strike"||l==="inline-code"||l==="code"||l==="table"){var J=void 0;i.toString()===""?J=n+"<wbr>"+a:(l==="code"?J=n+`
`+i.toString()+"<wbr>"+a:l==="table"?J=""+n+i.toString()+"<wbr>"+a:J=""+n+i.toString()+a+"<wbr>",i.deleteContents()),(l==="table"||l==="code")&&(J=`
`+J+`

`);var V=document.createElement("span");V.innerHTML=J,i.insertNode(V),Ge(e,i),l==="table"&&(i.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement),(0,P.Hc)(i))}else(l==="check"||l==="list"||l==="ordered-list")&&(Qt(e,i,l,!1),E=!1,f(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current"))}(0,P.ib)(e.ir.element,i),st(e),E&&bt(e)},va=function(e,t,n,a){function i(l){return l instanceof n?l:new n(function(g){g(l)})}return new(n||(n=Promise))(function(l,g){function E(M){try{S(a.next(M))}catch(R){g(R)}}function A(M){try{S(a.throw(M))}catch(R){g(R)}}function S(M){M.done?l(M.value):i(M.value).then(E,A)}S((a=a.apply(e,t||[])).next())})},Ea=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,i,l,g;return g={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function E(S){return function(M){return A([S,M])}}function A(S){if(a)throw new TypeError("Generator is already executing.");for(;n;)try{if(a=1,i&&(l=S[0]&2?i.return:S[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,S[1])).done)return l;switch(i=0,l&&(S=[S[0]&2,l.value]),S[0]){case 0:case 1:l=S;break;case 4:return n.label++,{value:S[1],done:!1};case 5:n.label++,i=S[1],S=[0];continue;case 7:S=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(S[0]===6||S[0]===2)){n=0;continue}if(S[0]===3&&(!l||S[1]>l[0]&&S[1]<l[3])){n.label=S[1];break}if(S[0]===6&&n.label<l[1]){n.label=l[1],l=S;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(S);break}l[2]&&n.ops.pop(),n.trys.pop();continue}S=t.call(e,n)}catch(M){S=[6,M],i=0}finally{a=l=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},Sa=function(){function e(t){var n=this;this.splitChar="",this.lastIndex=-1,this.fillEmoji=function(a,i){n.element.style.display="none";var l=decodeURIComponent(a.getAttribute("data-value")),g=window.getSelection().getRangeAt(0);if(i.currentMode==="ir"){var E=(0,w.a1)(g.startContainer,"data-type","code-block-info");if(E){E.textContent=r.g.ZWSP+l.trimRight(),g.selectNodeContents(E),g.collapse(!1),st(i),E.parentElement.querySelectorAll("code").forEach(function(R){R.className="language-"+l.trimRight()}),be(E.parentElement.querySelector(".vditor-ir__preview"),i),n.recentLanguage=l.trimRight();return}}if(i.currentMode==="wysiwyg"&&g.startContainer.nodeType!==3){var A=g.startContainer,S=void 0;if(A.classList.contains("vditor-input")?S=A:S=A.firstElementChild,S&&S.classList.contains("vditor-input")){S.value=l.trimRight(),g.selectNodeContents(S),g.collapse(!1),S.dispatchEvent(new CustomEvent("input",{detail:1})),n.recentLanguage=l.trimRight();return}}if(g.setStart(g.startContainer,n.lastIndex),g.deleteContents(),i.options.hint.parse?i.currentMode==="sv"?(0,P.oC)(i.lute.SpinVditorSVDOM(l),i):i.currentMode==="wysiwyg"?(0,P.oC)(i.lute.SpinVditorDOM(l),i):(0,P.oC)(i.lute.SpinVditorIRDOM(l),i):(0,P.oC)(l,i),n.splitChar===":"&&l.indexOf(":")>-1&&i.currentMode!=="sv"&&g.insertNode(document.createTextNode(" ")),g.collapse(!1),(0,P.Hc)(g),i.currentMode==="wysiwyg"){var M=(0,w.fb)(g.startContainer,"vditor-wysiwyg__block");M&&M.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(M.lastElementChild.innerHTML=M.firstElementChild.innerHTML,be(M.lastElementChild,i))}else if(i.currentMode==="ir"){var M=(0,w.fb)(g.startContainer,"vditor-ir__marker--pre");M&&M.nextElementSibling.classList.contains("vditor-ir__preview")&&(M.nextElementSibling.innerHTML=M.innerHTML,be(M.nextElementSibling,i))}me(i)},this.timeId=-1,this.element=document.createElement("div"),this.element.className="vditor-hint",this.recentLanguage="",t.push({key:":"})}return e.prototype.render=function(t){var n=this;if(window.getSelection().focusNode){var a,i=getSelection().getRangeAt(0);a=i.startContainer.textContent.substring(0,i.startOffset)||"";var l=this.getKey(a,t.options.hint.extend);if(typeof l>"u")this.element.style.display="none",clearTimeout(this.timeId);else if(this.splitChar===":"){var g=l===""?t.options.hint.emoji:t.lute.GetEmojis(),E=[];Object.keys(g).forEach(function(A){A.indexOf(l.toLowerCase())===0&&(g[A].indexOf(".")>-1?E.push({html:'<img src="'+g[A]+'" title=":'+A+':"/> :'+A+":",value:":"+A+":"}):E.push({html:'<span class="vditor-hint__emoji">'+g[A]+"</span>"+A,value:g[A]}))}),this.genHTML(E,l,t)}else t.options.hint.extend.forEach(function(A){A.key===n.splitChar&&(clearTimeout(n.timeId),n.timeId=window.setTimeout(function(){return va(n,void 0,void 0,function(){var S;return Ea(this,function(M){switch(M.label){case 0:return S=this.genHTML,[4,A.hint(l)];case 1:return S.apply(this,[M.sent(),l,t]),[2]}})})},t.options.hint.delay))})}},e.prototype.genHTML=function(t,n,a){var i=this;if(t.length===0){this.element.style.display="none";return}var l=a[a.currentMode].element,g=(0,P.Ny)(l),E=g.left+(a.options.outline.position==="left"?a.outline.element.offsetWidth:0),A=g.top,S="";t.forEach(function(R,Z){if(!(Z>7)){var J=R.html;if(n!==""){var V=J.lastIndexOf(">")+1,re=J.substr(V),Y=re.toLowerCase().indexOf(n.toLowerCase());Y>-1&&(re=re.substring(0,Y)+"<b>"+re.substring(Y,Y+n.length)+"</b>"+re.substring(Y+n.length),J=J.substr(0,V)+re)}S+='<button type="button" data-value="'+encodeURIComponent(R.value)+` "
`+(Z===0?"class='vditor-hint--current'":"")+"> "+J+"</button>"}}),this.element.innerHTML=S;var M=parseInt(document.defaultView.getComputedStyle(l,null).getPropertyValue("line-height"),10);this.element.style.top=A+(M||22)+"px",this.element.style.left=E+"px",this.element.style.display="block",this.element.style.right="auto",this.element.querySelectorAll("button").forEach(function(R){R.addEventListener("click",function(Z){i.fillEmoji(R,a),Z.preventDefault()})}),this.element.getBoundingClientRect().bottom>window.innerHeight&&(this.element.style.top=A-this.element.offsetHeight+"px"),this.element.getBoundingClientRect().right>window.innerWidth&&(this.element.style.left="auto",this.element.style.right="0")},e.prototype.select=function(t,n){if(this.element.querySelectorAll("button").length===0||this.element.style.display==="none")return!1;var a=this.element.querySelector(".vditor-hint--current");if(t.key==="ArrowDown")return t.preventDefault(),t.stopPropagation(),a.removeAttribute("class"),a.nextElementSibling?a.nextElementSibling.className="vditor-hint--current":this.element.children[0].className="vditor-hint--current",!0;if(t.key==="ArrowUp"){if(t.preventDefault(),t.stopPropagation(),a.removeAttribute("class"),a.previousElementSibling)a.previousElementSibling.className="vditor-hint--current";else{var i=this.element.children.length;this.element.children[i-1].className="vditor-hint--current"}return!0}else if(!(0,u.yl)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Enter"&&!t.isComposing)return t.preventDefault(),t.stopPropagation(),this.fillEmoji(a,n),!0;return!1},e.prototype.getKey=function(t,n){var a=this;this.lastIndex=-1,this.splitChar="",n.forEach(function(S){var M=t.lastIndexOf(S.key);a.lastIndex<M&&(a.splitChar=S.key,a.lastIndex=M)});var i;if(this.lastIndex===-1)return i;var l=t.split(this.splitChar),g=l[l.length-1],E=32;if(l.length>1&&g.trim()===g)if(l.length===2&&l[0]===""&&l[1].length<E)i=l[1];else{var A=l[l.length-2].slice(-1);(0,s.X)(A)===" "&&g.length<E&&(i=g)}return i},e}(),Ta=function(){function e(t){this.composingLock=!1;var n=document.createElement("div");n.className="vditor-ir",n.innerHTML='<pre class="vditor-reset" placeholder="'+t.options.placeholder+`"
 contenteditable="true" spellcheck="false"></pre>`,this.element=n.firstElementChild,this.bindEvent(t),vn(t,this.element),ur(t,this.element),En(t,this.element),An(t,this.element),Cn(t,this.element),Sn(t,this.element),Tn(t,this.element,this.copy),kn(t,this.element,this.copy)}return e.prototype.copy=function(t,n){var a=getSelection().getRangeAt(0);if(a.toString()!==""){t.stopPropagation(),t.preventDefault();var i=document.createElement("div");i.appendChild(a.cloneContents()),t.clipboardData.setData("text/plain",n.lute.VditorIRDOM2Md(i.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("paste",function(a){tn(t,a,{pasteCode:function(i){document.execCommand("insertHTML",!1,i)}})}),this.element.addEventListener("compositionstart",function(a){n.composingLock=!0}),this.element.addEventListener("compositionend",function(a){(0,u.vU)()||Ge(t,getSelection().getRangeAt(0).cloneRange()),n.composingLock=!1}),this.element.addEventListener("input",function(a){if(!(a.inputType==="deleteByDrag"||a.inputType==="insertFromDrop")){if(n.preventInput){n.preventInput=!1,st(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}n.composingLock||a.data==="‘"||a.data==="“"||a.data==="《"||Ge(t,getSelection().getRangeAt(0).cloneRange(),!1,a)}}),this.element.addEventListener("click",function(a){if(a.target.tagName==="INPUT"){a.target.checked?a.target.setAttribute("checked","checked"):a.target.removeAttribute("checked"),n.preventInput=!0,st(t);return}var i=(0,P.zh)(t),l=(0,w.fb)(a.target,"vditor-ir__preview");if(l||(l=(0,w.fb)(i.startContainer,"vditor-ir__preview")),l&&(l.previousElementSibling.firstElementChild?i.selectNodeContents(l.previousElementSibling.firstElementChild):i.selectNodeContents(l.previousElementSibling),i.collapse(!0),(0,P.Hc)(i),He(t)),a.target.tagName==="IMG"){var g=a.target.parentElement.querySelector(".vditor-ir__marker--link");g&&(i.selectNode(g),(0,P.Hc)(i))}var E=(0,w.a1)(a.target,"data-type","a");if(E&&!E.classList.contains("vditor-ir__node--expand")){t.options.link.click?t.options.link.click(E.querySelector(":scope > .vditor-ir__marker--link")):t.options.link.isOpen&&window.open(E.querySelector(":scope > .vditor-ir__marker--link").textContent);return}if(a.target.isEqualNode(n.element)&&n.element.lastElementChild&&i.collapsed){var A=n.element.lastElementChild.getBoundingClientRect();a.y>A.top+A.height&&(n.element.lastElementChild.tagName==="P"&&n.element.lastElementChild.textContent.trim().replace(r.g.ZWSP,"")===""?(i.selectNodeContents(n.element.lastElementChild),i.collapse(!1)):(n.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+r.g.ZWSP+"<wbr></p>"),(0,P.ib)(n.element,i)))}i.toString()===""?N(i,t):setTimeout(function(){N((0,P.zh)(t),t)}),$e(a,t),bt(t)}),this.element.addEventListener("keyup",function(a){if(!(a.isComposing||(0,u.yl)(a))){if(a.key==="Enter"&&He(t),bt(t),(a.key==="Backspace"||a.key==="Delete")&&t.ir.element.innerHTML!==""&&t.ir.element.childNodes.length===1&&t.ir.element.firstElementChild&&t.ir.element.firstElementChild.tagName==="P"&&t.ir.element.firstElementChild.childElementCount===0&&(t.ir.element.textContent===""||t.ir.element.textContent===`
`)){t.ir.element.innerHTML="";return}var i=(0,P.zh)(t);a.key==="Backspace"?((0,u.vU)()&&i.startContainer.textContent===`
`&&i.startOffset===1&&(i.startContainer.textContent="",N(i,t)),n.element.querySelectorAll(".language-math").forEach(function(g){var E=g.querySelector("br");E&&E.remove()})):a.key.indexOf("Arrow")>-1?((a.key==="ArrowLeft"||a.key==="ArrowRight")&&Hr(t),N(i,t)):a.keyCode===229&&a.code===""&&a.key==="Unidentified"&&N(i,t);var l=(0,w.fb)(i.startContainer,"vditor-ir__preview");if(l){if(a.key==="ArrowUp"||a.key==="ArrowLeft")return l.previousElementSibling.firstElementChild?i.selectNodeContents(l.previousElementSibling.firstElementChild):i.selectNodeContents(l.previousElementSibling),i.collapse(!1),a.preventDefault(),!0;if(l.tagName==="SPAN"&&(a.key==="ArrowDown"||a.key==="ArrowRight"))return l.parentElement.getAttribute("data-type")==="html-entity"?(l.parentElement.insertAdjacentText("afterend",r.g.ZWSP),i.setStart(l.parentElement.nextSibling,1)):i.selectNodeContents(l.parentElement.lastElementChild),i.collapse(!1),a.preventDefault(),!0}}})},e}(),Br=function(e){if(e.currentMode==="sv")return e.lute.Md2HTML(m(e));if(e.currentMode==="wysiwyg")return e.lute.VditorDOM2HTML(e.wysiwyg.element.innerHTML);if(e.currentMode==="ir")return e.lute.VditorIRDOM2HTML(e.ir.element.innerHTML)},ka=Ee(895),Nr=Ee(818),Aa=function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-outline",this.element.innerHTML='<div class="vditor-outline__title">'+t+`</div>
<div class="vditor-outline__content"></div>`}return e.prototype.render=function(t){var n="";return t.preview.element.style.display==="block"?n=(0,Nr.k)(t.preview.previewElement,this.element.lastElementChild,t):n=(0,Nr.k)(t[t.currentMode].element,this.element.lastElementChild,t),n},e.prototype.toggle=function(t,n,a){var i;n===void 0&&(n=!0),a===void 0&&(a=!0);var l=(i=t.toolbar.elements.outline)===null||i===void 0?void 0:i.firstElementChild;if(n&&window.innerWidth>=r.g.MOBILE_WIDTH?(this.element.style.display="block",this.render(t),l==null||l.classList.add("vditor-menu--current")):(this.element.style.display="none",l==null||l.classList.remove("vditor-menu--current")),a&&getSelection().rangeCount>0){var g=getSelection().getRangeAt(0);t[t.currentMode].element.contains(g.startContainer)&&(0,P.Hc)(g)}qe(t)},e}(),Ca=Ee(554),xa=function(){function e(t){var n=this;this.element=document.createElement("div"),this.element.className="vditor-preview",this.previewElement=document.createElement("div"),this.previewElement.className="vditor-reset",t.options.classes.preview&&this.previewElement.classList.add(t.options.classes.preview),this.previewElement.style.maxWidth=t.options.preview.maxWidth+"px",this.previewElement.addEventListener("copy",function(E){if(E.target.tagName!=="TEXTAREA"){var A=document.createElement("div");A.className="vditor-reset",A.appendChild(getSelection().getRangeAt(0).cloneContents()),n.copyToX(t,A,"default"),E.preventDefault()}}),this.previewElement.addEventListener("click",function(E){var A=(0,w.lG)(E.target,"SPAN");if(A&&(0,w.fb)(A,"vditor-toc")){var S=n.previewElement.querySelector("#"+A.getAttribute("data-target-id"));S&&(n.element.scrollTop=S.offsetTop);return}if(E.target.tagName==="A"){t.options.link.click?t.options.link.click(E.target):t.options.link.isOpen&&window.open(E.target.getAttribute("href")),E.preventDefault();return}E.target.tagName==="IMG"&&(t.options.image.preview?t.options.image.preview(E.target):t.options.image.isPreview&&(0,ee.E)(E.target,t.options.lang,t.options.theme))}),this.element.appendChild(this.previewElement);var a=t.options.preview.actions;if(a.length!==0){this.actionElement=document.createElement("div"),this.actionElement.className="vditor-preview__action";for(var i=[],l=0;l<a.length;l++){var g=a[l];if(typeof g=="object"){i.push('<button type="button" data-type="'+g.key+'" class="'+g.className+'"'+(g.tooltip?' aria-label="'+g.tooltip+'"':"")+'">'+g.text+"</button>");continue}switch(g){case"desktop":i.push('<button type="button" class="vditor-preview__action--current" data-type="desktop">Desktop</button>');break;case"tablet":i.push('<button type="button" data-type="tablet">Tablet</button>');break;case"mobile":i.push('<button type="button" data-type="mobile">Mobile/Wechat</button>');break;case"mp-wechat":i.push('<button type="button" data-type="mp-wechat" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到公众号"><svg><use xlink:href="#vditor-icon-mp-wechat"></use></svg></button>');break;case"zhihu":i.push('<button type="button" data-type="zhihu" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到知乎"><svg><use xlink:href="#vditor-icon-zhihu"></use></svg></button>');break}}this.actionElement.innerHTML=i.join(""),this.actionElement.addEventListener((0,u.Le)(),function(E){var A=(0,O.S)(E.target,"BUTTON");if(A){var S=A.getAttribute("data-type"),M=a.find(function(R){return(R==null?void 0:R.key)===S});if(M){M.click(S);return}if(S==="mp-wechat"||S==="zhihu"){n.copyToX(t,n.previewElement.cloneNode(!0),S);return}S==="desktop"?n.previewElement.style.width="auto":S==="tablet"?n.previewElement.style.width="780px":n.previewElement.style.width="360px",n.previewElement.scrollWidth>n.previewElement.parentElement.clientWidth&&(n.previewElement.style.width="auto"),n.render(t),n.actionElement.querySelectorAll("button").forEach(function(R){R.classList.remove("vditor-preview__action--current")}),A.classList.add("vditor-preview__action--current")}}),this.element.insertBefore(this.actionElement,this.previewElement)}}return e.prototype.render=function(t,n){var a=this;if(clearTimeout(this.mdTimeoutId),this.element.style.display==="none"){this.element.getAttribute("data-type")==="renderPerformance"&&t.tip.hide();return}if(n){this.previewElement.innerHTML=n;return}if(m(t).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")===""){this.previewElement.innerHTML="";return}var i=new Date().getTime(),l=m(t);this.mdTimeoutId=window.setTimeout(function(){if(t.options.preview.url){var g=new XMLHttpRequest;g.open("POST",t.options.preview.url),g.setRequestHeader("Content-Type","application/json;charset=UTF-8"),g.onreadystatechange=function(){if(g.readyState===XMLHttpRequest.DONE)if(g.status===200){var A=JSON.parse(g.responseText);if(A.code!==0){t.tip.show(A.msg);return}t.options.preview.transform&&(A.data=t.options.preview.transform(A.data)),a.previewElement.innerHTML=A.data,a.afterRender(t,i)}else{var S=t.lute.Md2HTML(l);t.options.preview.transform&&(S=t.options.preview.transform(S)),a.previewElement.innerHTML=S,a.afterRender(t,i)}},g.send(JSON.stringify({markdownText:l}))}else{var E=t.lute.Md2HTML(l);t.options.preview.transform&&(E=t.options.preview.transform(E)),a.previewElement.innerHTML=E,a.afterRender(t,i)}},t.options.preview.delay)},e.prototype.afterRender=function(t,n){t.options.preview.parse&&t.options.preview.parse(this.element);var a=new Date().getTime()-n;new Date().getTime()-n>2600?(t.tip.show(window.VditorI18n.performanceTip.replace("${x}",a.toString())),t.preview.element.setAttribute("data-type","renderPerformance")):t.preview.element.getAttribute("data-type")==="renderPerformance"&&(t.tip.hide(),t.preview.element.removeAttribute("data-type"));var i=t.preview.element.querySelector(".vditor-comment--focus");i&&i.classList.remove("vditor-comment--focus"),(0,ie.O)(t.preview.previewElement),(0,pe.s)(t.options.preview.hljs,t.preview.previewElement,t.options.staticPath.highlight),(0,ye.i)(t.preview.previewElement,t.options.staticPath.mermaid,t.options.theme),(0,_e.K)(t.preview.previewElement,t.options.staticPath.markmap,t.options.theme),(0,ae.P)(t.preview.previewElement,t.options.staticPath.flowchart),(0,oe.v)(t.preview.previewElement,t.options.staticPath.graphviz),(0,z.p)(t.preview.previewElement,t.options.staticPath.echarts,t.options.theme),(0,Le.P)(t.preview.previewElement,t.options.staticPath.echarts,t.options.theme),(0,Te.B)(t.preview.previewElement,t.options.staticPath.plantuml),(0,W.Q)(t.preview.previewElement,t.options.staticPath.abc),(0,Ca.Y)(t.preview.previewElement);var l=t.preview.element,g=t.outline.render(t);g===""&&(g="[ToC]"),l.querySelectorAll('[data-type="toc-block"]').forEach(function(E){E.innerHTML=g,(0,$.H)(E,{katex:t.options.staticPath.katex,mathjax:t.options.staticPath.mathjax,math:t.options.preview.math})}),(0,$.H)(t.preview.previewElement,{katex:t.options.staticPath.katex,mathjax:t.options.staticPath.mathjax,math:t.options.preview.math})},e.prototype.copyToX=function(t,n,a){a===void 0&&(a="mp-wechat"),a!=="zhihu"?n.querySelectorAll(".katex-html .base").forEach(function(l){l.style.display="initial"}):n.querySelectorAll(".language-math").forEach(function(l){l.outerHTML='<img class="Formula-image" data-eeimg="true" src="//www.zhihu.com/equation?tex=" alt="'+l.getAttribute("data-math")+'\\" style="display: block; margin: 0 auto; max-width: 100%;">'}),n.style.backgroundColor="#fff",n.querySelectorAll("code").forEach(function(l){l.style.backgroundImage="none"}),this.element.append(n);var i=n.ownerDocument.createRange();i.selectNode(n),(0,P.Hc)(i),document.execCommand("copy"),n.remove(),t.tip.show(["zhihu","mp-wechat"].includes(a)?"已复制，可到"+(a==="zhihu"?"知乎":"微信公众号平台")+"进行粘贴":"已复制到剪切板")},e}(),La=function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-resize vditor-resize--"+t.options.resize.position,this.element.innerHTML='<div><svg><use xlink:href="#vditor-icon-resize"></use></svg></div>',this.bindEvent(t)}return e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("mousedown",function(a){var i=document,l=a.clientY,g=t.element.offsetHeight,E=63+t.element.querySelector(".vditor-toolbar").clientHeight;i.ondragstart=function(){return!1},window.captureEvents&&window.captureEvents(),n.element.classList.add("vditor-resize--selected"),i.onmousemove=function(A){t.options.resize.position==="top"?t.element.style.height=Math.max(E,g+(l-A.clientY))+"px":t.element.style.height=Math.max(E,g+(A.clientY-l))+"px",t.options.typewriterMode&&(t.sv.element.style.paddingBottom=t.sv.element.parentElement.offsetHeight/2+"px")},i.onmouseup=function(){t.options.resize.after&&t.options.resize.after(t.element.offsetHeight-g),window.captureEvents&&window.captureEvents(),i.onmousemove=null,i.onmouseup=null,i.ondragstart=null,i.onselectstart=null,i.onselect=null,n.element.classList.remove("vditor-resize--selected")}})},e}(),_a=function(){function e(t){this.composingLock=!1,this.element=document.createElement("pre"),this.element.className="vditor-sv vditor-reset",this.element.setAttribute("placeholder",t.options.placeholder),this.element.setAttribute("contenteditable","true"),this.element.setAttribute("spellcheck","false"),this.bindEvent(t),vn(t,this.element),En(t,this.element),An(t,this.element),Cn(t,this.element),Sn(t,this.element),Tn(t,this.element,this.copy),kn(t,this.element,this.copy)}return e.prototype.copy=function(t,n){t.stopPropagation(),t.preventDefault(),t.clipboardData.setData("text/plain",Nt(n[n.currentMode].element))},e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("paste",function(a){tn(t,a,{pasteCode:function(i){document.execCommand("insertHTML",!1,i)}})}),this.element.addEventListener("scroll",function(){if(t.preview.element.style.display==="block"){var a=n.element.scrollTop,i=n.element.clientHeight,l=n.element.scrollHeight-parseFloat(n.element.style.paddingBottom||"0"),g=t.preview.element;a/i>.5?g.scrollTop=(a+i)*g.scrollHeight/l-i:g.scrollTop=a*g.scrollHeight/l}}),this.element.addEventListener("compositionstart",function(a){n.composingLock=!0}),this.element.addEventListener("compositionend",function(a){(0,u.vU)()||le(t,a),n.composingLock=!1}),this.element.addEventListener("input",function(a){if(!(a.inputType==="deleteByDrag"||a.inputType==="insertFromDrop")&&!(n.composingLock||a.data==="‘"||a.data==="“"||a.data==="《")){if(n.preventInput){n.preventInput=!1,Ie(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}le(t,a)}}),this.element.addEventListener("keyup",function(a){if(!(a.isComposing||(0,u.yl)(a))){if((a.key==="Backspace"||a.key==="Delete")&&t.sv.element.innerHTML!==""&&t.sv.element.childNodes.length===1&&t.sv.element.firstElementChild&&t.sv.element.firstElementChild.tagName==="DIV"&&t.sv.element.firstElementChild.childElementCount===2&&(t.sv.element.firstElementChild.textContent===""||t.sv.element.textContent===`
`)){t.sv.element.innerHTML="";return}a.key==="Enter"&&He(t)}})},e}(),Ma=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-tip"}return e.prototype.show=function(t,n){var a=this;n===void 0&&(n=6e3),this.element.className="vditor-tip vditor-tip--show",n===0?(this.element.innerHTML='<div class="vditor-tip__content">'+t+`
<div class="vditor-tip__close">X</div></div>`,this.element.querySelector(".vditor-tip__close").addEventListener("click",function(){a.hide()})):(this.element.innerHTML='<div class="vditor-tip__content">'+t+"</div>",setTimeout(function(){a.hide()},n)),this.element.removeAttribute("style"),setTimeout(function(){var i=a.element.getBoundingClientRect();i.top<46&&(a.element.style.position="fixed",a.element.style.top="46px")},150)},e.prototype.hide=function(){this.element.className="vditor-messageElementtip",this.element.innerHTML=""},e}(),Dn=function(e,t){if(t.options.preview.mode!==e){switch(t.options.preview.mode=e,e){case"both":t.sv.element.style.display="block",t.preview.element.style.display="block",t.preview.render(t),b(t.toolbar.elements,["both"]);break;case"editor":t.sv.element.style.display="block",t.preview.element.style.display="none",f(t.toolbar.elements,["both"]);break}t.devtools&&t.devtools.renderEchart(t)}},Oa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Da=function(e){Oa(t,e);function t(n,a){var i=e.call(this,n,a)||this;return n.options.preview.mode==="both"&&i.element.children[0].classList.add("vditor-menu--current"),i.element.children[0].addEventListener((0,u.Le)(),function(l){var g=i.element.firstElementChild;g.classList.contains(r.g.CLASS_MENU_DISABLED)||(l.preventDefault(),n.currentMode==="sv"&&(n.options.preview.mode==="both"?Dn("editor",n):Dn("both",n)))}),i}return t}(Re),Pa=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__br"}return e}(),Ir=Ee(312),Ra=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ha=function(e){Ra(t,e);function t(n,a){var i=e.call(this,n,a)||this,l=i.element.children[0],g=document.createElement("div");g.className="vditor-hint"+(a.level===2?"":" vditor-panel--arrow");var E="";return r.g.CODE_THEME.forEach(function(A){E+="<button>"+A+"</button>"}),g.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+E+"</div>",g.addEventListener((0,u.Le)(),function(A){A.target.tagName==="BUTTON"&&(x(n,["subToolbar"]),n.options.preview.hljs.style=A.target.textContent,(0,Ir.Y)(A.target.textContent,n.options.staticPath.highlight),A.preventDefault(),A.stopPropagation())}),i.element.appendChild(g),L(n,g,l,a.level),i}return t}(Re),Ba=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Na=function(e){Ba(t,e);function t(n,a){var i=e.call(this,n,a)||this,l=i.element.children[0],g=document.createElement("div");g.className="vditor-hint"+(a.level===2?"":" vditor-panel--arrow");var E="";return Object.keys(n.options.preview.theme.list).forEach(function(A){E+='<button data-type="'+A+'">'+n.options.preview.theme.list[A]+"</button>"}),g.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+E+"</div>",g.addEventListener((0,u.Le)(),function(A){A.target.tagName==="BUTTON"&&(x(n,["subToolbar"]),n.options.preview.theme.current=A.target.getAttribute("data-type"),(0,he.Z)(n.options.preview.theme.current,n.options.preview.theme.path),A.preventDefault(),A.stopPropagation())}),i.element.appendChild(g),L(n,g,l,a.level),i}return t}(Re),Ia=function(){function e(t){this.element=document.createElement("span"),this.element.className="vditor-counter vditor-tooltipped vditor-tooltipped__nw",this.render(t,"")}return e.prototype.render=function(t,n){var a=n.endsWith(`
`)?n.length-1:n.length;if(t.options.counter.type==="text"&&t[t.currentMode]){var i=t[t.currentMode].element.cloneNode(!0);i.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(l){l.remove()}),a=i.textContent.length}typeof t.options.counter.max=="number"?(a>t.options.counter.max?this.element.className="vditor-counter vditor-counter--error":this.element.className="vditor-counter",this.element.innerHTML=a+"/"+t.options.counter.max):this.element.innerHTML=""+a,this.element.setAttribute("aria-label",t.options.counter.type),t.options.counter.after&&t.options.counter.after(a,{enable:t.options.counter.enable,max:t.options.counter.max,type:t.options.counter.type})},e}(),ja=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ua=function(e){ja(t,e);function t(n,a){var i=e.call(this,n,a)||this;return i.element.children[0].innerHTML=a.icon,i.element.children[0].addEventListener((0,u.Le)(),function(l){l.preventDefault(),!l.currentTarget.classList.contains(r.g.CLASS_MENU_DISABLED)&&a.click(l,n)}),i}return t}(Re),Fa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),qa=function(e){Fa(t,e);function t(n,a){var i=e.call(this,n,a)||this;return i.element.firstElementChild.addEventListener((0,u.Le)(),function(l){var g=i.element.firstElementChild;g.classList.contains(r.g.CLASS_MENU_DISABLED)||(l.preventDefault(),g.classList.contains("vditor-menu--current")?(g.classList.remove("vditor-menu--current"),n.devtools.element.style.display="none",qe(n)):(g.classList.add("vditor-menu--current"),n.devtools.element.style.display="block",qe(n),n.devtools.renderEchart(n)))}),i}return t}(Re),Wa=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__divider"}return e}(),Va=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),za=function(e){Va(t,e);function t(n,a){var i=e.call(this,n,a)||this,l=document.createElement("div");l.className="vditor-panel vditor-panel--arrow";var g="";return Object.keys(n.options.hint.emoji).forEach(function(E){var A=n.options.hint.emoji[E];A.indexOf(".")>-1?g+='<button data-value=":'+E+': " data-key=":'+E+`:"><img
data-value=":`+E+': " data-key=":'+E+':" class="vditor-emojis__icon" src="'+A+'"/></button>':g+='<button data-value="'+A+` "
 data-key="`+E+'"><span class="vditor-emojis__icon">'+A+"</span></button>"}),l.innerHTML='<div class="vditor-emojis" style="max-height: '+(n.options.height==="auto"?"auto":n.options.height-80)+'px">'+g+`</div><div class="vditor-emojis__tail">
    <span class="vditor-emojis__tip"></span><span>`+(n.options.hint.emojiTail||"")+`</span>
</div>`,i.element.appendChild(l),L(n,l,i.element.firstElementChild,a.level),i.bindEvent(n),i}return t.prototype.bindEvent=function(n){var a=this;this.element.lastElementChild.addEventListener((0,u.Le)(),function(i){var l=(0,O.S)(i.target,"BUTTON");if(l){i.preventDefault();var g=l.getAttribute("data-value"),E=(0,P.zh)(n),A=g;if(n.currentMode==="wysiwyg"?A=n.lute.SpinVditorDOM(g):n.currentMode==="ir"&&(A=n.lute.SpinVditorIRDOM(g)),g.indexOf(":")>-1&&n.currentMode!=="sv"){var S=document.createElement("div");S.innerHTML=A,A=S.firstElementChild.firstElementChild.outerHTML+" ",(0,P.oC)(A,n)}else E.extractContents(),E.insertNode(document.createTextNode(g));E.collapse(!1),(0,P.Hc)(E),a.element.lastElementChild.style.display="none",me(n)}}),this.element.lastElementChild.addEventListener("mouseover",function(i){var l=(0,O.S)(i.target,"BUTTON");l&&(a.element.querySelector(".vditor-emojis__tip").innerHTML=l.getAttribute("data-key"))})},t}(Re),jr=function(e,t,n){var a=document.createElement("a");"download"in a?(a.download=n,a.style.display="none",a.href=URL.createObjectURL(new Blob([t])),document.body.appendChild(a),a.click(),a.remove()):e.tip.show(window.VditorI18n.downloadTip,0)},Ka=function(e){var t=m(e);jr(e,t,t.substr(0,10)+".md")},Ga=function(e){e.tip.show(window.VditorI18n.generate,3800);var t=document.querySelector("#vditorExportIframe");t.contentDocument.open(),t.contentDocument.write('<link rel="stylesheet" href="'+e.options.staticPath.style+`"/>
<script src="`+e.options.staticPath.method+`"><\/script>
<div id="preview" style="width: 800px"></div>
<script>
window.addEventListener("message", (e) => {
  if(!e.data) {
    return;
  }
  Vditor.preview(document.getElementById('preview'), e.data, {
    staticPath: `+JSON.stringify(e.options.staticPath)+`,
    markdown: {
      theme: "`+e.options.preview.theme+`"
    },
    hljs: {
      style: "`+e.options.preview.hljs.style+`"
    }
  });
  setTimeout(() => {
        window.print();
    }, 3600);
}, false);
<\/script>`),t.contentDocument.close(),setTimeout(function(){t.contentWindow.postMessage(m(e),"*")},200)},Ja=function(e){var t=Br(e),n='<html><head><link rel="stylesheet" type="text/css" href="'+e.options.staticPath.style+`"/>
<script src="`+e.options.staticPath.i18n+"/"+e.options.lang+`.js"><\/script>
<script src="`+e.options.staticPath.method+`"><\/script></head>
<body><div class="vditor-reset" id="preview">`+t+`</div>
<script>
    const previewElement = document.getElementById('preview')
    Vditor.setContentTheme('`+e.options.preview.theme.current+"', '"+e.options.preview.theme.path+`');
    Vditor.codeRender(previewElement);
    Vditor.highlightRender(`+JSON.stringify(e.options.preview.hljs)+", previewElement, '"+e.options.staticPath.highlight+`');
    Vditor.mathRender(previewElement, {
        katex: '`+e.options.staticPath.katex+`',
        mathjax: '`+e.options.staticPath.mathjax+`',
        math: `+JSON.stringify(e.options.preview.math)+`,
    });
    Vditor.mermaidRender(previewElement, '`+e.options.staticPath.mermaid+"', '"+e.options.theme+`');
    Vditor.markmapRender(previewElement, '`+e.options.staticPath.markmap+"', '"+e.options.theme+`');
    Vditor.flowchartRender(previewElement, '`+e.options.staticPath.flowchart+`');
    Vditor.graphvizRender(previewElement, '`+e.options.staticPath.graphviz+`');
    Vditor.chartRender(previewElement, '`+e.options.staticPath.echarts+"', '"+e.options.theme+`');
    Vditor.mindmapRender(previewElement, '`+e.options.staticPath.echarts+"', '"+e.options.theme+`');
    Vditor.abcRender(previewElement, '`+e.options.staticPath.abc+`');
    Vditor.mediaRender(previewElement);
    Vditor.speechRender(previewElement);
<\/script>
<script src="`+e.options.staticPath.icons+"/"+e.options.icon+'.js"><\/script></body></html>';jr(e,n,t.substr(0,10)+".html")},Za=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Xa=function(e){Za(t,e);function t(n,a){var i=e.call(this,n,a)||this,l=i.element.children[0],g=document.createElement("div");return g.className="vditor-hint"+(a.level===2?"":" vditor-panel--arrow"),g.innerHTML=`<button data-type="markdown">Markdown</button>
<button data-type="pdf">PDF</button>
<button data-type="html">HTML</button>`,g.addEventListener((0,u.Le)(),function(E){var A=E.target;if(A.tagName==="BUTTON"){switch(A.getAttribute("data-type")){case"markdown":Ka(n);break;case"pdf":Ga(n);break;case"html":Ja(n);break}x(n,["subToolbar"]),E.preventDefault(),E.stopPropagation()}}),i.element.appendChild(g),L(n,g,l,a.level),i}return t}(Re),Ya=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Qa=function(e){Ya(t,e);function t(n,a){var i=e.call(this,n,a)||this;return i._bindEvent(n,a),i}return t.prototype._bindEvent=function(n,a){this.element.children[0].addEventListener((0,u.Le)(),function(i){i.preventDefault(),n.element.className.includes("vditor--fullscreen")?(a.level||(this.innerHTML=a.icon),n.element.style.zIndex="",document.body.style.overflow="",n.element.classList.remove("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(l){var g=n.toolbar.elements[l].firstChild;g&&(g.className=g.className.replace("__s","__n"),n.options.toolbar.forEach(function(E){typeof E!="string"&&E.tipPosition&&E.name===g.dataset.type&&(g.className="vditor-tooltipped vditor-tooltipped__"+E.tipPosition)}))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__s","__n"))):(a.level||(this.innerHTML='<svg><use xlink:href="#vditor-icon-contract"></use></svg>'),n.element.style.zIndex=n.options.fullscreen.index.toString(),document.body.style.overflow="hidden",n.element.classList.add("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(l){var g=n.toolbar.elements[l].firstChild;g&&(g.className=g.className.replace("__n","__s"))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__n","__s"))),n.devtools&&n.devtools.renderEchart(n),a.click&&a.click(i,n),qe(n),yt(n)})},t}(Re),$a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),eo=function(e){$a(t,e);function t(n,a){var i=e.call(this,n,a)||this,l=document.createElement("div");return l.className="vditor-hint vditor-panel--arrow",l.innerHTML='<button data-tag="h1" data-value="# ">'+window.VditorI18n.heading1+" "+(0,u.ns)("&lt;⌥⌘1>")+`</button>
<button data-tag="h2" data-value="## ">`+window.VditorI18n.heading2+" &lt;"+(0,u.ns)("⌥⌘2")+`></button>
<button data-tag="h3" data-value="### ">`+window.VditorI18n.heading3+" &lt;"+(0,u.ns)("⌥⌘3")+`></button>
<button data-tag="h4" data-value="#### ">`+window.VditorI18n.heading4+" &lt;"+(0,u.ns)("⌥⌘4")+`></button>
<button data-tag="h5" data-value="##### ">`+window.VditorI18n.heading5+" &lt;"+(0,u.ns)("⌥⌘5")+`></button>
<button data-tag="h6" data-value="###### ">`+window.VditorI18n.heading6+" &lt;"+(0,u.ns)("⌥⌘6")+"></button>",i.element.appendChild(l),i._bindEvent(n,l),i}return t.prototype._bindEvent=function(n,a){var i=this.element.children[0];i.addEventListener((0,u.Le)(),function(g){g.preventDefault(),clearTimeout(n.wysiwyg.afterRenderTimeoutId),clearTimeout(n.ir.processTimeoutId),clearTimeout(n.sv.processTimeoutId),!i.classList.contains(r.g.CLASS_MENU_DISABLED)&&(i.blur(),i.classList.contains("vditor-menu--current")?(n.currentMode==="wysiwyg"?(Bt(n),ke(n)):n.currentMode==="ir"&&jt(n,""),i.classList.remove("vditor-menu--current")):(x(n,["subToolbar"]),a.style.display="block"))});for(var l=0;l<6;l++)a.children.item(l).addEventListener((0,u.Le)(),function(g){g.preventDefault(),n.currentMode==="wysiwyg"?(ze(n,g.target.getAttribute("data-tag")),ke(n),i.classList.add("vditor-menu--current")):n.currentMode==="ir"?(jt(n,g.target.getAttribute("data-value")),i.classList.add("vditor-menu--current")):dr(n,g.target.getAttribute("data-value")),a.style.display="none"})},t}(Re),to=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),no=function(e){to(t,e);function t(n,a){var i=e.call(this,n,a)||this;return i.element.children[0].addEventListener((0,u.Le)(),function(l){l.preventDefault(),n.tip.show(`<div style="margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;">
<div style="margin-top: 14px;flex: 1">
    <div>Markdown 使用指南</div>
    <ul style="list-style: none">
        <li><a href="https://ld246.com/article/1583308420519" target="_blank">语法速查手册</a></li>
        <li><a href="https://ld246.com/article/1583129520165" target="_blank">基础语法</a></li>
        <li><a href="https://ld246.com/article/1583305480675" target="_blank">扩展语法</a></li>
        <li><a href="https://ld246.com/article/1582778815353" target="_blank">键盘快捷键</a></li>
    </ul>
</div>
<div style="margin-top: 14px;flex: 1">
    <div>Vditor 支持</div>
    <ul style="list-style: none">
        <li><a href="https://github.com/Vanessa219/vditor/issues" target="_blank">Issues</a></li>
        <li><a href="https://ld246.com/tag/vditor" target="_blank">官方讨论区</a></li>
        <li><a href="https://ld246.com/article/1549638745630" target="_blank">开发手册</a></li>
        <li><a href="https://ld246.com/guide/markdown" target="_blank">演示地址</a></li>
    </ul>
</div></div>`,0)}),i}return t}(Re),ro=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),io=function(e){ro(t,e);function t(n,a){var i=e.call(this,n,a)||this;return i.element.children[0].addEventListener((0,u.Le)(),function(l){if(l.preventDefault(),!(i.element.firstElementChild.classList.contains(r.g.CLASS_MENU_DISABLED)||n.currentMode==="sv")){var g=(0,P.zh)(n),E=(0,w.lG)(g.startContainer,"LI");E&&vr(n,E,g)}}),i}return t}(Re),ao=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),oo=function(e){ao(t,e);function t(n,a){var i=e.call(this,n,a)||this;return i.element.children[0].addEventListener((0,u.Le)(),function(l){l.preventDefault(),n.tip.show(`<div style="max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;">
<p style="text-align: center;margin: 14px 0">
    <em>下一代的 Markdown 编辑器，为未来而构建</em>
</p>
<div style="display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center">
    <img src="`+n.options.staticPath.logo+`" style="margin: 0 auto;height: 68px"/>
    <div>&nbsp;&nbsp;</div>
    <div style="flex: 1;min-width: 250px">
        Vditor 是一款浏览器端的 Markdown 编辑器，支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。
        它使用 TypeScript 实现，支持原生 JavaScript 以及 Vue、React、Angular 和 Svelte 等框架。
    </div>
</div>
<div style="display: flex;flex-wrap: wrap;">
    <ul style="list-style: none;flex: 1;min-width:148px">
        <li>
        项目地址：<a href="https://b3log.org/vditor" target="_blank">b3log.org/vditor</a>
        </li>
        <li>
        开源协议：MIT
        </li>
    </ul>
    <ul style="list-style: none;margin-right: 18px">
        <li>
        组件版本：Vditor v`+r.H+" / Lute v"+Lute.Version+`
        </li>
        <li>
        赞助捐赠：<a href="https://ld246.com/sponsor" target="_blank">https://ld246.com/sponsor</a>
        </li>
    </ul>
</div>
</div>`,0)}),i}return t}(Re),so=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),lo=function(e){so(t,e);function t(n,a){var i=e.call(this,n,a)||this;return i.element.children[0].addEventListener((0,u.Le)(),function(l){l.preventDefault(),!(i.element.firstElementChild.classList.contains(r.g.CLASS_MENU_DISABLED)||n.currentMode==="sv")&&Yt(n,"afterend")}),i}return t}(Re),co=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),uo=function(e){co(t,e);function t(n,a){var i=e.call(this,n,a)||this;return i.element.children[0].addEventListener((0,u.Le)(),function(l){l.preventDefault(),!(i.element.firstElementChild.classList.contains(r.g.CLASS_MENU_DISABLED)||n.currentMode==="sv")&&Yt(n,"beforebegin")}),i}return t}(Re),fo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),po=function(e){fo(t,e);function t(n,a){var i=e.call(this,n,a)||this;return i.element.children[0].addEventListener((0,u.Le)(),function(l){if(l.preventDefault(),!(i.element.firstElementChild.classList.contains(r.g.CLASS_MENU_DISABLED)||n.currentMode==="sv")){var g=(0,P.zh)(n),E=(0,w.lG)(g.startContainer,"LI");E&&Ln(n,E,g,E.parentElement)}}),i}return t}(Re),ho=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),mo=function(e){ho(t,e);function t(n,a){var i=e.call(this,n,a)||this;return n.options.outline&&i.element.firstElementChild.classList.add("vditor-menu--current"),i.element.children[0].addEventListener((0,u.Le)(),function(l){l.preventDefault();var g=n.toolbar.elements.outline.firstElementChild;g.classList.contains(r.g.CLASS_MENU_DISABLED)||(n.options.outline.enable=!i.element.firstElementChild.classList.contains("vditor-menu--current"),n.outline.toggle(n,n.options.outline.enable))}),i}return t}(Re),go=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),yo=function(e){go(t,e);function t(n,a){var i=e.call(this,n,a)||this;return i._bindEvent(n),i}return t.prototype._bindEvent=function(n){var a=this;this.element.children[0].addEventListener((0,u.Le)(),function(i){i.preventDefault();var l=a.element.firstElementChild;if(!l.classList.contains(r.g.CLASS_MENU_DISABLED)){var g=r.g.EDIT_TOOLBARS.concat(["both","edit-mode","devtools"]);l.classList.contains("vditor-menu--current")?(l.classList.remove("vditor-menu--current"),n.currentMode==="sv"?(n.sv.element.style.display="block",n.options.preview.mode==="both"?n.preview.element.style.display="block":n.preview.element.style.display="none"):(n[n.currentMode].element.parentElement.style.display="block",n.preview.element.style.display="none"),v(n.toolbar.elements,g),n.outline.render(n)):(d(n.toolbar.elements,g),n.preview.element.style.display="block",n.currentMode==="sv"?n.sv.element.style.display="none":n[n.currentMode].element.parentElement.style.display="none",n.preview.render(n),l.classList.add("vditor-menu--current"),x(n,["subToolbar","hint","popover"]),setTimeout(function(){n.outline.render(n)},n.options.preview.delay+10)),qe(n)}})},t}(Re),bo=function(){function e(t){this.SAMPLE_RATE=5e3,this.isRecording=!1,this.readyFlag=!1,this.leftChannel=[],this.rightChannel=[],this.recordingLength=0;var n;if(typeof AudioContext<"u")n=new AudioContext;else if(webkitAudioContext)n=new webkitAudioContext;else return;this.DEFAULT_SAMPLE_RATE=n.sampleRate;var a=n.createGain(),i=n.createMediaStreamSource(t);i.connect(a),this.recorder=n.createScriptProcessor(2048,2,1),this.recorder.onaudioprocess=null,a.connect(this.recorder),this.recorder.connect(n.destination),this.readyFlag=!0}return e.prototype.cloneChannelData=function(t,n){this.leftChannel.push(new Float32Array(t)),this.rightChannel.push(new Float32Array(n)),this.recordingLength+=2048},e.prototype.startRecordingNewWavFile=function(){this.readyFlag&&(this.isRecording=!0,this.leftChannel.length=this.rightChannel.length=0,this.recordingLength=0)},e.prototype.stopRecording=function(){this.isRecording=!1},e.prototype.buildWavFileBlob=function(){for(var t=this.mergeBuffers(this.leftChannel),n=this.mergeBuffers(this.rightChannel),a=new Float32Array(t.length),i=0;i<t.length;++i)a[i]=.5*(t[i]+n[i]);this.DEFAULT_SAMPLE_RATE>this.SAMPLE_RATE&&(a=this.downSampleBuffer(a,this.SAMPLE_RATE));var l=44+a.length*2,g=new ArrayBuffer(l),E=new DataView(g);this.writeUTFBytes(E,0,"RIFF"),E.setUint32(4,l,!0),this.writeUTFBytes(E,8,"WAVE"),this.writeUTFBytes(E,12,"fmt "),E.setUint32(16,16,!0),E.setUint16(20,1,!0),E.setUint16(22,1,!0),E.setUint32(24,this.SAMPLE_RATE,!0),E.setUint32(28,this.SAMPLE_RATE*2,!0),E.setUint16(32,2,!0),E.setUint16(34,16,!0);var A=a.length*2;this.writeUTFBytes(E,36,"data"),E.setUint32(40,A,!0);for(var S=a.length,M=44,R=1,Z=0;Z<S;Z++)E.setInt16(M,a[Z]*(32767*R),!0),M+=2;return new Blob([E],{type:"audio/wav"})},e.prototype.downSampleBuffer=function(t,n){if(n===this.DEFAULT_SAMPLE_RATE||n>this.DEFAULT_SAMPLE_RATE)return t;for(var a=this.DEFAULT_SAMPLE_RATE/n,i=Math.round(t.length/a),l=new Float32Array(i),g=0,E=0;g<l.length;){for(var A=Math.round((g+1)*a),S=0,M=0,R=E;R<A&&R<t.length;R++)S+=t[R],M++;l[g]=S/M,g++,E=A}return l},e.prototype.mergeBuffers=function(t){for(var n=new Float32Array(this.recordingLength),a=0,i=t.length,l=0;l<i;++l){var g=t[l];n.set(g,a),a+=g.length}return n},e.prototype.writeUTFBytes=function(t,n,a){for(var i=a.length,l=0;l<i;l++)t.setUint8(n+l,a.charCodeAt(l))},e}(),wo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),vo=function(e){wo(t,e);function t(n,a){var i=e.call(this,n,a)||this;return i._bindEvent(n),i}return t.prototype._bindEvent=function(n){var a=this,i;this.element.children[0].addEventListener((0,u.Le)(),function(l){if(l.preventDefault(),!a.element.firstElementChild.classList.contains(r.g.CLASS_MENU_DISABLED)){var g=n[n.currentMode].element;if(!i){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(A){i=new bo(A),i.recorder.onaudioprocess=function(S){if(i.isRecording){var M=S.inputBuffer.getChannelData(0),R=S.inputBuffer.getChannelData(1);i.cloneChannelData(M,R)}},i.startRecordingNewWavFile(),n.tip.show(window.VditorI18n.recording),g.setAttribute("contenteditable","false"),a.element.children[0].classList.add("vditor-menu--current")}).catch(function(){n.tip.show(window.VditorI18n["record-tip"])});return}if(i.isRecording){i.stopRecording(),n.tip.hide();var E=new File([i.buildWavFileBlob()],"record"+new Date().getTime()+".wav",{type:"video/webm"});xn(n,[E]),a.element.children[0].classList.remove("vditor-menu--current")}else n.tip.show(window.VditorI18n.recording),g.setAttribute("contenteditable","false"),i.startRecordingNewWavFile(),a.element.children[0].classList.add("vditor-menu--current")}})},t}(Re),Eo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),So=function(e){Eo(t,e);function t(n,a){var i=e.call(this,n,a)||this;return d({redo:i.element},["redo"]),i.element.children[0].addEventListener((0,u.Le)(),function(l){l.preventDefault(),!i.element.firstElementChild.classList.contains(r.g.CLASS_MENU_DISABLED)&&n.undo.redo(n)}),i}return t}(Re),To=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),ko=function(e){To(t,e);function t(n,a){var i=e.call(this,n,a)||this;return d({undo:i.element},["undo"]),i.element.children[0].addEventListener((0,u.Le)(),function(l){l.preventDefault(),!i.element.firstElementChild.classList.contains(r.g.CLASS_MENU_DISABLED)&&n.undo.undo(n)}),i}return t}(Re),Ao=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Co=function(e){Ao(t,e);function t(n,a){var i=e.call(this,n,a)||this,l='<input type="file"';return n.options.upload.multiple&&(l+=' multiple="multiple"'),n.options.upload.accept&&(l+=' accept="'+n.options.upload.accept+'"'),i.element.children[0].innerHTML=""+(a.icon||'<svg><use xlink:href="#vditor-icon-upload"></use></svg>')+l+">",i._bindEvent(n),i}return t.prototype._bindEvent=function(n){var a=this;this.element.children[0].addEventListener((0,u.Le)(),function(i){if(a.element.firstElementChild.classList.contains(r.g.CLASS_MENU_DISABLED)){i.stopPropagation(),i.preventDefault();return}}),this.element.querySelector("input").addEventListener("change",function(i){if(a.element.firstElementChild.classList.contains(r.g.CLASS_MENU_DISABLED)){i.stopPropagation(),i.preventDefault();return}i.target.files.length!==0&&xn(n,i.target.files,i.target)})},t}(Re),xo=function(){function e(t){var n=this,a=t.options;this.elements={},this.element=document.createElement("div"),this.element.className="vditor-toolbar",a.toolbar.forEach(function(i,l){var g=n.genItem(t,i,l);if(n.element.appendChild(g),i.toolbar){var E=document.createElement("div");E.className="vditor-hint vditor-panel--arrow",E.addEventListener((0,u.Le)(),function(A){E.style.display="none"}),i.toolbar.forEach(function(A,S){A.level=2,E.appendChild(n.genItem(t,A,l+S))}),g.appendChild(E),L(t,E,g.children[0])}}),t.options.toolbarConfig.hide&&this.element.classList.add("vditor-toolbar--hide"),t.options.toolbarConfig.pin&&this.element.classList.add("vditor-toolbar--pin"),t.options.counter.enable&&(t.counter=new Ia(t),this.element.appendChild(t.counter.element))}return e.prototype.genItem=function(t,n,a){var i;switch(n.name){case"bold":case"italic":case"more":case"strike":case"line":case"quote":case"list":case"ordered-list":case"check":case"code":case"inline-code":case"link":case"table":i=new Re(t,n);break;case"emoji":i=new za(t,n);break;case"headings":i=new eo(t,n);break;case"|":i=new Wa;break;case"br":i=new Pa;break;case"undo":i=new ko(t,n);break;case"redo":i=new So(t,n);break;case"help":i=new no(t,n);break;case"both":i=new Da(t,n);break;case"preview":i=new yo(t,n);break;case"fullscreen":i=new Qa(t,n);break;case"upload":i=new Co(t,n);break;case"record":i=new vo(t,n);break;case"info":i=new oo(t,n);break;case"edit-mode":i=new oa(t,n);break;case"devtools":i=new qa(t,n);break;case"outdent":i=new po(t,n);break;case"indent":i=new io(t,n);break;case"outline":i=new mo(t,n);break;case"insert-after":i=new lo(t,n);break;case"insert-before":i=new uo(t,n);break;case"code-theme":i=new Ha(t,n);break;case"content-theme":i=new Na(t,n);break;case"export":i=new Xa(t,n);break;default:i=new Ua(t,n);break}if(i){var l=n.name;return(l==="br"||l==="|")&&(l=l+a),this.elements[l]=i.element,i.element}},e}(),Lo=Ee(471),_o=function(){function e(){this.stackSize=50,this.resetStack(),this.dmp=new Lo}return e.prototype.clearStack=function(t){this.resetStack(),this.resetIcon(t)},e.prototype.resetIcon=function(t){t.toolbar&&(this[t.currentMode].undoStack.length>1?v(t.toolbar.elements,["undo"]):d(t.toolbar.elements,["undo"]),this[t.currentMode].redoStack.length!==0?v(t.toolbar.elements,["redo"]):d(t.toolbar.elements,["redo"]))},e.prototype.undo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"&&!(this[t.currentMode].undoStack.length<2)){var n=this[t.currentMode].undoStack.pop();n&&(this[t.currentMode].redoStack.push(n),this.renderDiff(n,t),this[t.currentMode].hasUndo=!0,x(t,["hint"]))}},e.prototype.redo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"){var n=this[t.currentMode].redoStack.pop();n&&(this[t.currentMode].undoStack.push(n),this.renderDiff(n,t,!0))}},e.prototype.recordFirstPosition=function(t,n){if(getSelection().rangeCount!==0&&!(this[t.currentMode].undoStack.length!==1||this[t.currentMode].undoStack[0].length===0||this[t.currentMode].redoStack.length>0)&&!((0,u.vU)()&&n.key==="Backspace")&&!(0,u.G6)()){var a=this.addCaret(t);a.replace("<wbr>","").replace(" vditor-ir__node--expand","")===this[t.currentMode].undoStack[0][0].diffs[0][1].replace("<wbr>","")&&(this[t.currentMode].undoStack[0][0].diffs[0][1]=a,this[t.currentMode].lastText=a)}},e.prototype.addToUndoStack=function(t){var n=this.addCaret(t,!0),a=this.dmp.diff_main(n,this[t.currentMode].lastText,!0),i=this.dmp.patch_make(n,this[t.currentMode].lastText,a);i.length===0&&this[t.currentMode].undoStack.length>0||(this[t.currentMode].lastText=n,this[t.currentMode].undoStack.push(i),this[t.currentMode].undoStack.length>this.stackSize&&this[t.currentMode].undoStack.shift(),this[t.currentMode].hasUndo&&(this[t.currentMode].redoStack=[],this[t.currentMode].hasUndo=!1,d(t.toolbar.elements,["redo"])),this[t.currentMode].undoStack.length>1&&v(t.toolbar.elements,["undo"]))},e.prototype.renderDiff=function(t,n,a){a===void 0&&(a=!1);var i;if(a){var l=this.dmp.patch_deepCopy(t).reverse();l.forEach(function(E){E.diffs.forEach(function(A){A[0]=-A[0]})}),i=this.dmp.patch_apply(l,this[n.currentMode].lastText)[0]}else i=this.dmp.patch_apply(t,this[n.currentMode].lastText)[0];if(this[n.currentMode].lastText=i,n[n.currentMode].element.innerHTML=i,n.currentMode!=="sv"&&n[n.currentMode].element.querySelectorAll(".vditor-"+n.currentMode+"__preview[data-render='2']").forEach(function(E){be(E,n)}),n[n.currentMode].element.querySelector("wbr"))(0,P.ib)(n[n.currentMode].element,n[n.currentMode].element.ownerDocument.createRange()),He(n);else{var g=getSelection().getRangeAt(0);g.setEndBefore(n[n.currentMode].element),g.collapse(!1)}Fe(n),me(n,{enableAddUndoStack:!1,enableHint:!1,enableInput:!0}),St(n),n[n.currentMode].element.querySelectorAll(".vditor-"+n.currentMode+"__preview[data-render='2']").forEach(function(E){be(E,n)}),this[n.currentMode].undoStack.length>1?v(n.toolbar.elements,["undo"]):d(n.toolbar.elements,["undo"]),this[n.currentMode].redoStack.length!==0?v(n.toolbar.elements,["redo"]):d(n.toolbar.elements,["redo"])},e.prototype.resetStack=function(){this.ir={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.sv={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.wysiwyg={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]}},e.prototype.addCaret=function(t,n){n===void 0&&(n=!1);var a;if(getSelection().rangeCount!==0&&!t[t.currentMode].element.querySelector("wbr")){var i=getSelection().getRangeAt(0);if(t[t.currentMode].element.contains(i.startContainer)){a=i.cloneRange();var l=document.createElement("span");l.className="vditor-wbr",i.insertNode(l)}}var g=t.ir.element.cloneNode(!0);g.querySelectorAll(".vditor-"+t.currentMode+"__preview[data-render='1']").forEach(function(A){A.firstElementChild&&(A.firstElementChild.classList.contains("language-echarts")||A.firstElementChild.classList.contains("language-plantuml")||A.firstElementChild.classList.contains("language-mindmap")?(A.firstElementChild.removeAttribute("_echarts_instance_"),A.firstElementChild.removeAttribute("data-processed"),A.firstElementChild.innerHTML=A.previousElementSibling.firstElementChild.innerHTML,A.setAttribute("data-render","2")):A.firstElementChild.classList.contains("language-math")&&(A.setAttribute("data-render","2"),A.firstElementChild.textContent=A.firstElementChild.getAttribute("data-math"),A.firstElementChild.removeAttribute("data-math")))});var E=t[t.currentMode].element.innerHTML;return t[t.currentMode].element.querySelectorAll(".vditor-wbr").forEach(function(A){A.remove()}),n&&a&&(0,P.Hc)(a),E.replace('<span class="vditor-wbr"></span>',"<wbr>")},e}(),Ur=Ee(640),Mo=function(){function e(t){this.defaultOptions={rtl:!1,after:void 0,cache:{enable:!0},cdn:r.g.CDN,dist:r.g.DIST,classes:{preview:""},comment:{enable:!1},counter:{enable:!1,type:"markdown"},debugger:!1,fullscreen:{index:90},height:"auto",hint:{delay:200,emoji:{"+1":"👍","-1":"👎",confused:"😕",eyes:"👀️",heart:"❤️",rocket:"🚀️",smile:"😄",tada:"🎉️"},emojiPath:r.g.CDN+"/"+r.g.DIST+"/images/emoji",extend:[],parse:!0},icon:"ant",lang:"zh_CN",mode:"ir",outline:{enable:!1,position:"left"},placeholder:"",preview:{actions:["desktop","tablet","mobile","mp-wechat","zhihu"],delay:1e3,hljs:r.g.HLJS_OPTIONS,markdown:r.g.MARKDOWN_OPTIONS,math:r.g.MATH_OPTIONS,maxWidth:800,mode:"both",theme:r.g.THEME_OPTIONS},link:{isOpen:!0},image:{isPreview:!0},resize:{enable:!1,position:"bottom"},theme:"classic",toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","record","table","|","undo","redo","|","fullscreen","edit-mode",{name:"more",toolbar:["both","code-theme","content-theme","export","outline","preview","devtools","info","help"]}],toolbarConfig:{hide:!1,pin:!1},typewriterMode:!1,undoDelay:800,upload:{extraData:{},fieldName:"file[]",filename:function(n){return n.replace(/\W/g,"")},linkToImgUrl:"",max:10*1024*1024,multiple:!0,url:"",withCredentials:!1},value:"",width:"auto"},this.options=t}return e.prototype.merge=function(){var t,n,a;this.options&&(this.options.toolbar?this.options.toolbar=this.mergeToolbar(this.options.toolbar):this.options.toolbar=this.mergeToolbar(this.defaultOptions.toolbar),!((n=(t=this.options.preview)===null||t===void 0?void 0:t.theme)===null||n===void 0)&&n.list&&(this.defaultOptions.preview.theme.list=this.options.preview.theme.list),!((a=this.options.hint)===null||a===void 0)&&a.emoji&&(this.defaultOptions.hint.emoji=this.options.hint.emoji),this.options.comment&&(this.defaultOptions.comment=this.options.comment));var i=(0,Ur.T)(this.defaultOptions,this.options);if(i.cache.enable&&!i.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");return i.baseURL=i._baseURL||i.cdn+"/"+i.dist,i.staticPath=(0,Ur.T)({logo:i.baseURL+"/"+r.g._STATIC_PATH.logo,method:i.baseURL+"/"+r.g._STATIC_PATH.method,style:i.baseURL+"/"+r.g._STATIC_PATH.style,emoji:i.baseURL+"/"+r.g._STATIC_PATH.emoji,i18n:i.baseURL+"/"+r.g._STATIC_PATH.i18n,icons:i.baseURL+"/"+r.g._STATIC_PATH.icons,theme:i.baseURL+"/"+r.g._STATIC_PATH.theme,abc:i.baseURL+"/"+r.g._STATIC_PATH.abc,echarts:i.baseURL+"/"+r.g._STATIC_PATH.echarts,flowchart:i.baseURL+"/"+r.g._STATIC_PATH.flowchart,graphviz:i.baseURL+"/"+r.g._STATIC_PATH.graphviz,lute:i.baseURL+"/"+r.g._STATIC_PATH.lute,markmap:i.baseURL+"/"+r.g._STATIC_PATH.markmap,mermaid:i.baseURL+"/"+r.g._STATIC_PATH.mermaid,plantuml:i.baseURL+"/"+r.g._STATIC_PATH.plantuml,highlight:i.baseURL+"/"+r.g._STATIC_PATH.highlight,katex:i.baseURL+"/"+r.g._STATIC_PATH.katex,mathjax:i.baseURL+"/"+r.g._STATIC_PATH.mathjax},i._staticPath),i},e.prototype.mergeToolbar=function(t){var n=this,a=[{icon:'<svg><use xlink:href="#vditor-icon-export"></use></svg>',name:"export",tipPosition:"ne"},{hotkey:"⌘E",icon:'<svg><use xlink:href="#vditor-icon-emoji"></use></svg>',name:"emoji",tipPosition:"ne"},{hotkey:"⌘H",icon:'<svg><use xlink:href="#vditor-icon-headings"></use></svg>',name:"headings",tipPosition:"ne"},{hotkey:"⌘B",icon:'<svg><use xlink:href="#vditor-icon-bold"></use></svg>',name:"bold",prefix:"**",suffix:"**",tipPosition:"ne"},{hotkey:"⌘I",icon:'<svg><use xlink:href="#vditor-icon-italic"></use></svg>',name:"italic",prefix:"*",suffix:"*",tipPosition:"ne"},{hotkey:"⌘D",icon:'<svg><use xlink:href="#vditor-icon-strike"></use></svg>',name:"strike",prefix:"~~",suffix:"~~",tipPosition:"ne"},{hotkey:"⌘K",icon:'<svg><use xlink:href="#vditor-icon-link"></use></svg>',name:"link",prefix:"[",suffix:"](https://)",tipPosition:"n"},{name:"|"},{hotkey:"⌘L",icon:'<svg><use xlink:href="#vditor-icon-list"></use></svg>',name:"list",prefix:"* ",tipPosition:"n"},{hotkey:"⌘O",icon:'<svg><use xlink:href="#vditor-icon-ordered-list"></use></svg>',name:"ordered-list",prefix:"1. ",tipPosition:"n"},{hotkey:"⌘J",icon:'<svg><use xlink:href="#vditor-icon-check"></use></svg>',name:"check",prefix:"* [ ] ",tipPosition:"n"},{hotkey:"⇧⌘I",icon:'<svg><use xlink:href="#vditor-icon-outdent"></use></svg>',name:"outdent",tipPosition:"n"},{hotkey:"⇧⌘O",icon:'<svg><use xlink:href="#vditor-icon-indent"></use></svg>',name:"indent",tipPosition:"n"},{name:"|"},{hotkey:"⌘;",icon:'<svg><use xlink:href="#vditor-icon-quote"></use></svg>',name:"quote",prefix:"> ",tipPosition:"n"},{hotkey:"⇧⌘H",icon:'<svg><use xlink:href="#vditor-icon-line"></use></svg>',name:"line",prefix:"---",tipPosition:"n"},{hotkey:"⌘U",icon:'<svg><use xlink:href="#vditor-icon-code"></use></svg>',name:"code",prefix:"```",suffix:"\n```",tipPosition:"n"},{hotkey:"⌘G",icon:'<svg><use xlink:href="#vditor-icon-inline-code"></use></svg>',name:"inline-code",prefix:"`",suffix:"`",tipPosition:"n"},{hotkey:"⇧⌘B",icon:'<svg><use xlink:href="#vditor-icon-before"></use></svg>',name:"insert-before",tipPosition:"n"},{hotkey:"⇧⌘E",icon:'<svg><use xlink:href="#vditor-icon-after"></use></svg>',name:"insert-after",tipPosition:"n"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-upload"></use></svg>',name:"upload",tipPosition:"n"},{icon:'<svg><use xlink:href="#vditor-icon-record"></use></svg>',name:"record",tipPosition:"n"},{hotkey:"⌘M",icon:'<svg><use xlink:href="#vditor-icon-table"></use></svg>',name:"table",prefix:"| col1",suffix:` | col2 | col3 |
| --- | --- | --- |
|  |  |  |
|  |  |  |`,tipPosition:"n"},{name:"|"},{hotkey:"⌘Z",icon:'<svg><use xlink:href="#vditor-icon-undo"></use></svg>',name:"undo",tipPosition:"nw"},{hotkey:"⌘Y",icon:'<svg><use xlink:href="#vditor-icon-redo"></use></svg>',name:"redo",tipPosition:"nw"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-more"></use></svg>',name:"more",tipPosition:"e"},{hotkey:"⌘'",icon:'<svg><use xlink:href="#vditor-icon-fullscreen"></use></svg>',name:"fullscreen",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-edit"></use></svg>',name:"edit-mode",tipPosition:"nw"},{hotkey:"⌘P",icon:'<svg><use xlink:href="#vditor-icon-both"></use></svg>',name:"both",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-preview"></use></svg>',name:"preview",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',name:"outline",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',name:"content-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-code-theme"></use></svg>',name:"code-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-bug"></use></svg>',name:"devtools",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-info"></use></svg>',name:"info",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-help"></use></svg>',name:"help",tipPosition:"nw"},{name:"br"}],i=[];return t.forEach(function(l){var g=l;a.forEach(function(E){typeof l=="string"&&E.name===l&&(g=E),typeof l=="object"&&E.name===l.name&&(g=Object.assign({},E,l))}),l.toolbar&&(g.toolbar=n.mergeToolbar(l.toolbar)),i.push(g)}),i},e}(),Oo=function(){function e(t){var n=this;this.composingLock=!1,this.commentIds=[];var a=document.createElement("div");a.className="vditor-wysiwyg",a.innerHTML='<pre class="vditor-reset" placeholder="'+t.options.placeholder+`"
 contenteditable="true" spellcheck="false"></pre>
<div class="vditor-panel vditor-panel--none"></div>
<div class="vditor-panel vditor-panel--none">
    <button type="button" aria-label="`+window.VditorI18n.comment+`" class="vditor-icon vditor-tooltipped vditor-tooltipped__n">
        <svg><use xlink:href="#vditor-icon-comment"></use></svg>
    </button>
</div>`,this.element=a.firstElementChild,this.popover=a.firstElementChild.nextElementSibling,this.selectPopover=a.lastElementChild,this.bindEvent(t),vn(t,this.element),ur(t,this.element),En(t,this.element),An(t,this.element),Cn(t,this.element),Sn(t,this.element),Tn(t,this.element,this.copy),kn(t,this.element,this.copy),t.options.comment.enable&&(this.selectPopover.querySelector("button").onclick=function(){var i=Lute.NewNodeID(),l=getSelection().getRangeAt(0),g=l.cloneRange(),E=l.extractContents(),A,S,M=!1,R=!1;E.childNodes.forEach(function(V,re){var Y=!1;if(V.nodeType===3?Y=!0:V.classList.contains("vditor-comment")?V.classList.contains("vditor-comment")&&V.setAttribute("data-cmtids",V.getAttribute("data-cmtids")+" "+i):Y=!0,Y)if(V.nodeType!==3&&V.getAttribute("data-block")==="0"&&re===0&&g.startOffset>0)V.innerHTML='<span class="vditor-comment" data-cmtids="'+i+'">'+V.innerHTML+"</span>",A=V;else if(V.nodeType!==3&&V.getAttribute("data-block")==="0"&&re===E.childNodes.length-1&&g.endOffset<g.endContainer.textContent.length)V.innerHTML='<span class="vditor-comment" data-cmtids="'+i+'">'+V.innerHTML+"</span>",S=V;else if(V.nodeType!==3&&V.getAttribute("data-block")==="0")re===0?M=!0:re===E.childNodes.length-1&&(R=!0),V.innerHTML='<span class="vditor-comment" data-cmtids="'+i+'">'+V.innerHTML+"</span>";else{var X=document.createElement("span");X.classList.add("vditor-comment"),X.setAttribute("data-cmtids",i),V.parentNode.insertBefore(X,V),X.appendChild(V)}});var Z=(0,w.F9)(g.startContainer);Z&&(A?(Z.insertAdjacentHTML("beforeend",A.innerHTML),A.remove()):Z.textContent.trim().replace(r.g.ZWSP,"")===""&&M&&Z.remove());var J=(0,w.F9)(g.endContainer);J&&(S?(J.insertAdjacentHTML("afterbegin",S.innerHTML),S.remove()):J.textContent.trim().replace(r.g.ZWSP,"")===""&&R&&J.remove()),l.insertNode(E),t.options.comment.add(i,l.toString(),n.getComments(t,!0)),ke(t,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),n.hideComment()})}return e.prototype.getComments=function(t,n){var a=this;if(n===void 0&&(n=!1),t.currentMode==="wysiwyg"&&t.options.comment.enable){this.commentIds=[],this.element.querySelectorAll(".vditor-comment").forEach(function(l){a.commentIds=a.commentIds.concat(l.getAttribute("data-cmtids").split(" "))}),this.commentIds=Array.from(new Set(this.commentIds));var i=[];if(n)return this.commentIds.forEach(function(l){i.push({id:l,top:a.element.querySelector('.vditor-comment[data-cmtids="'+l+'"]').offsetTop})}),i}else return[]},e.prototype.triggerRemoveComment=function(t){var n=function(l,g){var E=new Set(g);return l.filter(function(A){return!E.has(A)})};if(t.currentMode==="wysiwyg"&&t.options.comment.enable&&t.wysiwyg.commentIds.length>0){var a=JSON.parse(JSON.stringify(this.commentIds));this.getComments(t);var i=n(a,this.commentIds);i.length>0&&t.options.comment.remove(i)}},e.prototype.showComment=function(){var t=(0,P.Ny)(this.element);this.selectPopover.setAttribute("style","left:"+t.left+"px;display:block;top:"+Math.max(-8,t.top-21)+"px")},e.prototype.hideComment=function(){this.selectPopover.setAttribute("style","display:none")},e.prototype.unbindListener=function(){window.removeEventListener("scroll",this.scrollListener)},e.prototype.copy=function(t,n){var a=getSelection().getRangeAt(0);if(a.toString()!==""){t.stopPropagation(),t.preventDefault();var i=(0,w.lG)(a.startContainer,"CODE"),l=(0,w.lG)(a.endContainer,"CODE");if(i&&l&&l.isSameNode(i)){var g="";i.parentElement.tagName==="PRE"?g=a.toString():g="`"+a.toString()+"`",t.clipboardData.setData("text/plain",g),t.clipboardData.setData("text/html","");return}var E=(0,w.lG)(a.startContainer,"A"),A=(0,w.lG)(a.endContainer,"A");if(E&&A&&A.isSameNode(E)){var S=E.getAttribute("title")||"";S&&(S=' "'+S+'"'),t.clipboardData.setData("text/plain","["+a.toString()+"]("+E.getAttribute("href")+S+")"),t.clipboardData.setData("text/html","");return}var M=document.createElement("div");M.appendChild(a.cloneContents()),t.clipboardData.setData("text/plain",n.lute.VditorDOM2Md(M.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var n=this;this.unbindListener(),window.addEventListener("scroll",this.scrollListener=function(){if(x(t,["hint"]),!(n.popover.style.display!=="block"||n.selectPopover.style.display!=="block")){var a=parseInt(n.popover.getAttribute("data-top"),10);if(t.options.height!=="auto"){if(t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0){var i=Math.max(window.scrollY-t.element.offsetTop-8,Math.min(a-t.wysiwyg.element.scrollTop,n.element.clientHeight-21))+"px";n.popover.style.display==="block"&&(n.popover.style.top=i),n.selectPopover.style.display==="block"&&(n.selectPopover.style.top=i)}return}else if(!t.options.toolbarConfig.pin)return;var l=Math.max(a,window.scrollY-t.element.offsetTop-8)+"px";n.popover.style.display==="block"&&(n.popover.style.top=l),n.selectPopover.style.display==="block"&&(n.selectPopover.style.top=l)}}),this.element.addEventListener("scroll",function(){if(x(t,["hint"]),t.options.comment&&t.options.comment.enable&&t.options.comment.scroll&&t.options.comment.scroll(t.wysiwyg.element.scrollTop),n.popover.style.display==="block"){var a=parseInt(n.popover.getAttribute("data-top"),10)-t.wysiwyg.element.scrollTop,i=-8;t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0&&(i=window.scrollY-t.element.offsetTop+i);var l=Math.max(i,Math.min(a,n.element.clientHeight-21))+"px";n.popover.style.top=l,n.selectPopover.style.top=l}}),this.element.addEventListener("paste",function(a){tn(t,a,{pasteCode:function(i){var l=(0,P.zh)(t),g=document.createElement("template");g.innerHTML=i,l.insertNode(g.content.cloneNode(!0));var E=(0,w.a1)(l.startContainer,"data-block","0");E?E.outerHTML=t.lute.SpinVditorDOM(E.outerHTML):t.wysiwyg.element.innerHTML=t.lute.SpinVditorDOM(t.wysiwyg.element.innerHTML),(0,P.ib)(t.wysiwyg.element,l)}})}),this.element.addEventListener("compositionstart",function(){n.composingLock=!0}),this.element.addEventListener("compositionend",function(a){var i=(0,O.W)(getSelection().getRangeAt(0).startContainer);if(i&&i.textContent===""){Fe(t);return}(0,u.vU)()||Xt(t,getSelection().getRangeAt(0).cloneRange(),a),n.composingLock=!1}),this.element.addEventListener("input",function(a){if(!(a.inputType==="deleteByDrag"||a.inputType==="insertFromDrop")){if(n.preventInput){n.preventInput=!1,ke(t);return}if(n.composingLock||a.data==="‘"||a.data==="“"||a.data==="《"){ke(t);return}var i=getSelection().getRangeAt(0),l=(0,w.F9)(i.startContainer);if(l||(Jt(t,i),l=(0,w.F9)(i.startContainer)),!!l){for(var g=(0,P.im)(l,t.wysiwyg.element,i).start,E=!0,A=g-1;A>l.textContent.substr(0,g).lastIndexOf(`
`);A--)if(l.textContent.charAt(A)!==" "&&l.textContent.charAt(A)!=="	"){E=!1;break}g===0&&(E=!1);for(var S=!0,A=g-1;A<l.textContent.length;A++)if(l.textContent.charAt(A)!==" "&&l.textContent.charAt(A)!==`
`){S=!1;break}var M=(0,O.W)(getSelection().getRangeAt(0).startContainer);if(M&&M.textContent===""&&(Fe(t),M.remove()),E&&l.getAttribute("data-type")!=="code-block"||S||Mn(l.innerHTML)||_n(l.innerHTML)&&l.previousElementSibling){typeof t.options.input=="function"&&t.options.input(m(t));return}Xt(t,i,a)}}}),this.element.addEventListener("click",function(a){if(a.target.tagName==="INPUT"){var i=a.target;i.checked?i.setAttribute("checked","checked"):i.removeAttribute("checked"),n.preventInput=!0,ke(t);return}if(a.target.tagName==="IMG"&&!a.target.parentElement.classList.contains("vditor-wysiwyg__preview")){a.target.getAttribute("data-type")==="link-ref"?H(t,a.target):Ce(a,t);return}if(a.target.tagName==="A"){t.options.link.click?t.options.link.click(a.target):t.options.link.isOpen&&window.open(a.target.getAttribute("href")),a.preventDefault();return}var l=(0,P.zh)(t);if(a.target.isEqualNode(n.element)&&n.element.lastElementChild&&l.collapsed){var g=n.element.lastElementChild.getBoundingClientRect();a.y>g.top+g.height&&(n.element.lastElementChild.tagName==="P"&&n.element.lastElementChild.textContent.trim().replace(r.g.ZWSP,"")===""?(l.selectNodeContents(n.element.lastElementChild),l.collapse(!1)):(n.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+r.g.ZWSP+"<wbr></p>"),(0,P.ib)(n.element,l)))}_(t);var E=(0,w.fb)(a.target,"vditor-wysiwyg__preview");E||(E=(0,w.fb)((0,P.zh)(t).startContainer,"vditor-wysiwyg__preview")),E&&T(E,t),$e(a,t)}),this.element.addEventListener("keyup",function(a){if(!(a.isComposing||(0,u.yl)(a))){a.key==="Enter"&&He(t),(a.key==="Backspace"||a.key==="Delete")&&t.wysiwyg.element.innerHTML!==""&&t.wysiwyg.element.childNodes.length===1&&t.wysiwyg.element.firstElementChild&&t.wysiwyg.element.firstElementChild.tagName==="P"&&t.wysiwyg.element.firstElementChild.childElementCount===0&&(t.wysiwyg.element.textContent===""||t.wysiwyg.element.textContent===`
`)&&(t.wysiwyg.element.innerHTML="");var i=(0,P.zh)(t);if(a.key==="Backspace"&&(0,u.vU)()&&i.startContainer.textContent===`
`&&i.startOffset===1&&(i.startContainer.textContent=""),Jt(t,i),_(t),!(a.key!=="ArrowDown"&&a.key!=="ArrowRight"&&a.key!=="Backspace"&&a.key!=="ArrowLeft"&&a.key!=="ArrowUp")){(a.key==="ArrowLeft"||a.key==="ArrowRight")&&t.hint.render(t);var l=(0,w.fb)(i.startContainer,"vditor-wysiwyg__preview");if(!l&&i.startContainer.nodeType!==3&&i.startOffset>0){var g=i.startContainer;g.classList.contains("vditor-wysiwyg__block")&&(l=g.lastElementChild)}if(l){var E=l.previousElementSibling;if(E.style.display==="none"){a.key==="ArrowDown"||a.key==="ArrowRight"?T(l,t):T(l,t,!1);return}var A=l.previousElementSibling;if(A.tagName==="PRE"&&(A=A.firstElementChild),a.key==="ArrowDown"||a.key==="ArrowRight"){var g=l.parentElement,S=Je(g);if(S&&S.nodeType!==3){var M=S.querySelector(".vditor-wysiwyg__preview");if(M){T(M,t);return}}if(S.nodeType===3){for(;S.textContent.length===0&&S.nextSibling;)S=S.nextSibling;i.setStart(S,1)}else i.setStart(S.firstChild,0)}else i.selectNodeContents(A),i.collapse(!1)}}}})},e}(),Do=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Fr=function(e){Do(t,e);function t(n,a){var i=e.call(this)||this;i.version=r.H,typeof n=="string"&&(a?a.cache?a.cache.id||(a.cache.id="vditor"+n):a.cache={id:"vditor"+n}:a={cache:{id:"vditor"+n}},n=document.getElementById(n));var l=new Mo(a),g=l.merge();if(g.i18n)window.VditorI18n=g.i18n,i.init(n,g);else if(["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(g.lang)){var E="vditorI18nScript",A=E+g.lang;document.querySelectorAll('head script[id^="'+E+'"]').forEach(function(S){S.id!==A&&document.head.removeChild(S)}),(0,y.G)(g.staticPath.i18n+"/"+g.lang+".js",A).then(function(){i.init(n,g)})}else throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");return i}return t.prototype.setTheme=function(n,a,i,l){this.vditor.options.theme=n,se(this.vditor),a&&(this.vditor.options.preview.theme.current=a,(0,he.Z)(a,l||this.vditor.options.preview.theme.path)),i&&(this.vditor.options.preview.hljs.style=i,(0,Ir.Y)(i,this.vditor.options.staticPath.highlight))},t.prototype.getValue=function(){return m(this.vditor)},t.prototype.getCurrentMode=function(){return this.vditor.currentMode},t.prototype.focus=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.focus():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.focus():this.vditor.currentMode==="ir"&&this.vditor.ir.element.focus()},t.prototype.blur=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.blur():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.blur():this.vditor.currentMode==="ir"&&this.vditor.ir.element.blur()},t.prototype.disabled=function(){x(this.vditor,["subToolbar","hint","popover"]),d(this.vditor.toolbar.elements,r.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","false")},t.prototype.enable=function(){v(this.vditor.toolbar.elements,r.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor.undo.resetIcon(this.vditor),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","true")},t.prototype.getSelection=function(){if(this.vditor.currentMode==="wysiwyg")return Nt(this.vditor.wysiwyg.element);if(this.vditor.currentMode==="sv")return Nt(this.vditor.sv.element);if(this.vditor.currentMode==="ir")return Nt(this.vditor.ir.element)},t.prototype.renderPreview=function(n){this.vditor.preview.render(this.vditor,n)},t.prototype.getCursorPosition=function(){return(0,P.Ny)(this.vditor[this.vditor.currentMode].element)},t.prototype.isUploading=function(){return this.vditor.upload.isUploading},t.prototype.clearCache=function(){localStorage.removeItem(this.vditor.options.cache.id)},t.prototype.disabledCache=function(){this.vditor.options.cache.enable=!1},t.prototype.enableCache=function(){if(!this.vditor.options.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");this.vditor.options.cache.enable=!0},t.prototype.html2md=function(n){return this.vditor.lute.HTML2Md(n)},t.prototype.exportJSON=function(n){return this.vditor.lute.RenderJSON(n)},t.prototype.getHTML=function(){return Br(this.vditor)},t.prototype.tip=function(n,a){this.vditor.tip.show(n,a)},t.prototype.setPreviewMode=function(n){Dn(n,this.vditor)},t.prototype.deleteValue=function(){window.getSelection().isCollapsed||document.execCommand("delete",!1)},t.prototype.updateValue=function(n){document.execCommand("insertHTML",!1,n)},t.prototype.insertValue=function(n,a){a===void 0&&(a=!0);var i=(0,P.zh)(this.vditor);i.collapse(!0);var l=document.createElement("template");l.innerHTML=n,i.insertNode(l.content.cloneNode(!0)),i.collapse(!1),this.vditor.currentMode==="sv"?(this.vditor.sv.preventInput=!0,a&&le(this.vditor)):this.vditor.currentMode==="wysiwyg"?(this.vditor.wysiwyg.preventInput=!0,a&&Xt(this.vditor,getSelection().getRangeAt(0))):this.vditor.currentMode==="ir"&&(this.vditor.ir.preventInput=!0,a&&Ge(this.vditor,getSelection().getRangeAt(0),!0))},t.prototype.setValue=function(n,a){var i=this;a===void 0&&(a=!1),this.vditor.currentMode==="sv"?(this.vditor.sv.element.innerHTML="<div data-block='0'>"+this.vditor.lute.SpinVditorSVDOM(n)+"</div>",Ie(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})):this.vditor.currentMode==="wysiwyg"?cr(this.vditor,n,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}):(this.vditor.ir.element.innerHTML=this.vditor.lute.Md2VditorIRDOM(n),this.vditor.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(l){be(l,i.vditor)}),st(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})),this.vditor.outline.render(this.vditor),n||(x(this.vditor,["emoji","headings","submenu","hint"]),this.vditor.wysiwyg.popover&&(this.vditor.wysiwyg.popover.style.display="none"),this.clearCache()),a&&this.clearStack()},t.prototype.clearStack=function(){this.vditor.undo.clearStack(this.vditor),this.vditor.undo.addToUndoStack(this.vditor)},t.prototype.destroy=function(){this.vditor.element.innerHTML=this.vditor.originalInnerHTML,this.vditor.element.classList.remove("vditor"),this.vditor.element.removeAttribute("style");var n=document.getElementById("vditorIconScript");n&&n.remove(),this.clearCache(),dt(),this.vditor.wysiwyg.unbindListener()},t.prototype.getCommentIds=function(){return this.vditor.currentMode!=="wysiwyg"?[]:this.vditor.wysiwyg.getComments(this.vditor,!0)},t.prototype.hlCommentIds=function(n){if(this.vditor.currentMode==="wysiwyg"){var a=function(i){i.classList.remove("vditor-comment--hover"),n.forEach(function(l){i.getAttribute("data-cmtids").indexOf(l)>-1&&i.classList.add("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(i){a(i)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(i){a(i)})}},t.prototype.unHlCommentIds=function(n){if(this.vditor.currentMode==="wysiwyg"){var a=function(i){n.forEach(function(l){i.getAttribute("data-cmtids").indexOf(l)>-1&&i.classList.remove("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(i){a(i)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(i){a(i)})}},t.prototype.removeCommentIds=function(n){var a=this;if(this.vditor.currentMode==="wysiwyg"){var i=function(l,g){var E=l.getAttribute("data-cmtids").split(" ");E.find(function(A,S){if(A===g)return E.splice(S,1),!0}),E.length===0?(l.outerHTML=l.innerHTML,(0,P.zh)(a.vditor).collapse(!0)):l.setAttribute("data-cmtids",E.join(" "))};n.forEach(function(l){a.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(g){i(g,l)}),a.vditor.preview.element.style.display!=="none"&&a.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(g){i(g,l)})}),ke(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})}},t.prototype.init=function(n,a){var i=this;this.vditor={currentMode:a.mode,element:n,hint:new Sa(a.hint.extend),lute:void 0,options:a,originalInnerHTML:n.innerHTML,outline:new Aa(window.VditorI18n.outline),tip:new Ma},this.vditor.sv=new _a(this.vditor),this.vditor.undo=new _o,this.vditor.wysiwyg=new Oo(this.vditor),this.vditor.ir=new Ta(this.vditor),this.vditor.toolbar=new xo(this.vditor),a.resize.enable&&(this.vditor.resize=new La(this.vditor)),this.vditor.toolbar.elements.devtools&&(this.vditor.devtools=new c),(a.upload.url||a.upload.handler)&&(this.vditor.upload=new fa),(0,y.G)(a._lutePath||a.staticPath.lute,"vditorLuteScript").then(function(){i.vditor.lute=(0,ka.X)({autoSpace:i.vditor.options.preview.markdown.autoSpace,gfmAutoLink:i.vditor.options.preview.markdown.gfmAutoLink,codeBlockPreview:i.vditor.options.preview.markdown.codeBlockPreview,emojiSite:i.vditor.options.hint.emojiPath,emojis:i.vditor.options.hint.emoji,fixTermTypo:i.vditor.options.preview.markdown.fixTermTypo,footnotes:i.vditor.options.preview.markdown.footnotes,headingAnchor:!1,inlineMathDigit:i.vditor.options.preview.math.inlineDigit,linkBase:i.vditor.options.preview.markdown.linkBase,linkPrefix:i.vditor.options.preview.markdown.linkPrefix,listStyle:i.vditor.options.preview.markdown.listStyle,mark:i.vditor.options.preview.markdown.mark,mathBlockPreview:i.vditor.options.preview.markdown.mathBlockPreview,paragraphBeginningSpace:i.vditor.options.preview.markdown.paragraphBeginningSpace,sanitize:i.vditor.options.preview.markdown.sanitize,toc:i.vditor.options.preview.markdown.toc}),i.vditor.preview=new xa(i.vditor),Me(i.vditor),a.after&&a.after(),a.icon&&(0,y.J)(a.staticPath.icons+"/"+a.icon+".js","vditorIconScript")})},t}(o.Z);const Po=Fr})();$n.e;var rs=$n.Z;const is=`<svg
    class="icon-save"
    viewBox="0 0 1073 1024"
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
>
    <path d="M190.526479 1023.999744h691.891719a190.782735 190.782735 0 0 0 191.038991-190.526479V190.526479A190.782735 190.782735 0 0 0 882.802582 0h-691.891719A190.782735 190.782735 0 0 0 0 190.526479v642.946786a190.782735 190.782735 0 0 0 190.526479 190.526479z m0-939.563329h25.625619v259.203139a145.809773 145.809773 0 0 0 146.06603 145.681645h350.942855A145.809773 145.809773 0 0 0 858.458244 343.639554V84.436415h24.344338a106.218192 106.218192 0 0 1 106.218192 106.090064v642.946786a106.34632 106.34632 0 0 1-106.218192 106.090063h-691.891719a106.218192 106.218192 0 0 1-106.090063-106.090063V190.526479a106.090064 106.090064 0 0 1 105.705679-106.090064z m110.446419 6.406405h474.073955v252.796734a61.373358 61.373358 0 0 1-61.24523 61.24523H362.218128a61.24523 61.24523 0 0 1-61.24523-61.24523z"/>
    <path d="M693.81364 397.197098a42.154144 42.154144 0 0 0 42.282272-42.154144v-153.753715a42.282272 42.282272 0 0 0-84.436415 0v153.753715A42.154144 42.154144 0 0 0 693.81364 397.197098z"/>
</svg>
`;const as={ez:"application/andrew-inset",aw:"application/applixware",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomdeleted:"application/atomdeleted+xml",atomsvc:"application/atomsvc+xml",dwd:"application/atsc-dwd+xml",held:"application/atsc-held+xml",rsat:"application/atsc-rsat+xml",bdoc:"application/bdoc",xcs:"application/calendar+xml",ccxml:"application/ccxml+xml",cdfx:"application/cdfx+xml",cdmia:"application/cdmi-capability",cdmic:"application/cdmi-container",cdmid:"application/cdmi-domain",cdmio:"application/cdmi-object",cdmiq:"application/cdmi-queue",cu:"application/cu-seeme",mpd:"application/dash+xml",davmount:"application/davmount+xml",dbk:"application/docbook+xml",dssc:"application/dssc+der",xdssc:"application/dssc+xml",es:"application/ecmascript",ecma:"application/ecmascript",emma:"application/emma+xml",emotionml:"application/emotionml+xml",epub:"application/epub+zip",exi:"application/exi",fdt:"application/fdt+xml",pfr:"application/font-tdpfr",geojson:"application/geo+json",gml:"application/gml+xml",gpx:"application/gpx+xml",gxf:"application/gxf",gz:"application/gzip",hjson:"application/hjson",stk:"application/hyperstudio",ink:"application/inkml+xml",inkml:"application/inkml+xml",ipfix:"application/ipfix",its:"application/its+xml",jar:"application/java-archive",war:"application/java-archive",ear:"application/java-archive",ser:"application/java-serialized-object",class:"application/java-vm",js:"application/javascript",mjs:"application/javascript",json:"application/json",map:"application/json",json5:"application/json5",jsonml:"application/jsonml+json",jsonld:"application/ld+json",lgr:"application/lgr+xml",lostxml:"application/lost+xml",hqx:"application/mac-binhex40",cpt:"application/mac-compactpro",mads:"application/mads+xml",webmanifest:"application/manifest+json",mrc:"application/marc",mrcx:"application/marcxml+xml",ma:"application/mathematica",nb:"application/mathematica",mb:"application/mathematica",mathml:"application/mathml+xml",mbox:"application/mbox",mscml:"application/mediaservercontrol+xml",metalink:"application/metalink+xml",meta4:"application/metalink4+xml",mets:"application/mets+xml",maei:"application/mmt-aei+xml",musd:"application/mmt-usd+xml",mods:"application/mods+xml",m21:"application/mp21",mp21:"application/mp21",mp4s:"application/mp4",m4p:"application/mp4",doc:"application/msword",dot:"application/msword",mxf:"application/mxf",nq:"application/n-quads",nt:"application/n-triples",cjs:"application/node",bin:"application/octet-stream",dms:"application/octet-stream",lrf:"application/octet-stream",mar:"application/octet-stream",so:"application/octet-stream",dist:"application/octet-stream",distz:"application/octet-stream",pkg:"application/octet-stream",bpk:"application/octet-stream",dump:"application/octet-stream",elc:"application/octet-stream",deploy:"application/octet-stream",exe:"application/octet-stream",dll:"application/octet-stream",deb:"application/octet-stream",dmg:"application/octet-stream",iso:"application/octet-stream",img:"application/octet-stream",msi:"application/octet-stream",msp:"application/octet-stream",msm:"application/octet-stream",buffer:"application/octet-stream",oda:"application/oda",opf:"application/oebps-package+xml",ogx:"application/ogg",omdoc:"application/omdoc+xml",onetoc:"application/onenote",onetoc2:"application/onenote",onetmp:"application/onenote",onepkg:"application/onenote",oxps:"application/oxps",relo:"application/p2p-overlay+xml",xer:"application/patch-ops-error+xml",pdf:"application/pdf",pgp:"application/pgp-encrypted",asc:"application/pgp-signature",sig:"application/pgp-signature",prf:"application/pics-rules",p10:"application/pkcs10",p7m:"application/pkcs7-mime",p7c:"application/pkcs7-mime",p7s:"application/pkcs7-signature",p8:"application/pkcs8",ac:"application/pkix-attr-cert",cer:"application/pkix-cert",crl:"application/pkix-crl",pkipath:"application/pkix-pkipath",pki:"application/pkixcmp",pls:"application/pls+xml",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",provx:"application/provenance+xml",cww:"application/prs.cww",pskcxml:"application/pskc+xml",raml:"application/raml+yaml",rdf:"application/rdf+xml",owl:"application/rdf+xml",rif:"application/reginfo+xml",rnc:"application/relax-ng-compact-syntax",rl:"application/resource-lists+xml",rld:"application/resource-lists-diff+xml",rs:"application/rls-services+xml",rapd:"application/route-apd+xml",sls:"application/route-s-tsid+xml",rusd:"application/route-usd+xml",gbr:"application/rpki-ghostbusters",mft:"application/rpki-manifest",roa:"application/rpki-roa",rsd:"application/rsd+xml",rss:"application/rss+xml",rtf:"application/rtf",sbml:"application/sbml+xml",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",spq:"application/scvp-vp-request",spp:"application/scvp-vp-response",sdp:"application/sdp",senmlx:"application/senml+xml",sensmlx:"application/sensml+xml",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",shf:"application/shf+xml",siv:"application/sieve",sieve:"application/sieve",smi:"application/smil+xml",smil:"application/smil+xml",rq:"application/sparql-query",srx:"application/sparql-results+xml",gram:"application/srgs",grxml:"application/srgs+xml",sru:"application/sru+xml",ssdl:"application/ssdl+xml",ssml:"application/ssml+xml",swidtag:"application/swid+xml",tei:"application/tei+xml",teicorpus:"application/tei+xml",tfi:"application/thraud+xml",tsd:"application/timestamped-data",toml:"application/toml",trig:"application/trig",ttml:"application/ttml+xml",ubj:"application/ubjson",rsheet:"application/urc-ressheet+xml",td:"application/urc-targetdesc+xml",vxml:"application/voicexml+xml",wasm:"application/wasm",wgt:"application/widget",hlp:"application/winhlp",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml",xaml:"application/xaml+xml",xav:"application/xcap-att+xml",xca:"application/xcap-caps+xml",xdf:"application/xcap-diff+xml",xel:"application/xcap-el+xml",xns:"application/xcap-ns+xml",xenc:"application/xenc+xml",xhtml:"application/xhtml+xml",xht:"application/xhtml+xml",xlf:"application/xliff+xml",xml:"application/xml",xsl:"application/xml",xsd:"application/xml",rng:"application/xml",dtd:"application/xml-dtd",xop:"application/xop+xml",xpl:"application/xproc+xml",xslt:"application/xml",xspf:"application/xspf+xml",mxml:"application/xv+xml",xhvml:"application/xv+xml",xvml:"application/xv+xml",xvm:"application/xv+xml",yang:"application/yang",yin:"application/yin+xml",zip:"application/zip","3gpp":"video/3gpp",adp:"audio/adpcm",amr:"audio/amr",au:"audio/basic",snd:"audio/basic",mid:"audio/midi",midi:"audio/midi",kar:"audio/midi",rmi:"audio/midi",mxmf:"audio/mobile-xmf",mp3:"audio/mpeg",m4a:"audio/mp4",mp4a:"audio/mp4",mpga:"audio/mpeg",mp2:"audio/mpeg",mp2a:"audio/mpeg",m2a:"audio/mpeg",m3a:"audio/mpeg",oga:"audio/ogg",ogg:"audio/ogg",spx:"audio/ogg",opus:"audio/ogg",s3m:"audio/s3m",sil:"audio/silk",wav:"audio/wav",weba:"audio/webm",xm:"audio/xm",ttc:"font/collection",otf:"font/otf",ttf:"font/ttf",woff:"font/woff",woff2:"font/woff2",exr:"image/aces",apng:"image/apng",avif:"image/avif",bmp:"image/bmp",cgm:"image/cgm",drle:"image/dicom-rle",emf:"image/emf",fits:"image/fits",g3:"image/g3fax",gif:"image/gif",heic:"image/heic",heics:"image/heic-sequence",heif:"image/heif",heifs:"image/heif-sequence",hej2:"image/hej2k",hsj2:"image/hsj2",ief:"image/ief",jls:"image/jls",jp2:"image/jp2",jpg2:"image/jp2",jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",jph:"image/jph",jhc:"image/jphc",jpm:"image/jpm",jpx:"image/jpx",jpf:"image/jpx",jxr:"image/jxr",jxra:"image/jxra",jxrs:"image/jxrs",jxs:"image/jxs",jxsc:"image/jxsc",jxsi:"image/jxsi",jxss:"image/jxss",ktx:"image/ktx",ktx2:"image/ktx2",png:"image/png",btif:"image/prs.btif",pti:"image/prs.pti",sgi:"image/sgi",svg:"image/svg+xml",svgz:"image/svg+xml",t38:"image/t38",tif:"image/tiff",tiff:"image/tiff",tfx:"image/tiff-fx",webp:"image/webp",wmf:"image/wmf","disposition-notification":"message/disposition-notification",u8msg:"message/global",u8dsn:"message/global-delivery-status",u8mdn:"message/global-disposition-notification",u8hdr:"message/global-headers",eml:"message/rfc822",mime:"message/rfc822","3mf":"model/3mf",gltf:"model/gltf+json",glb:"model/gltf-binary",igs:"model/iges",iges:"model/iges",msh:"model/mesh",mesh:"model/mesh",silo:"model/mesh",mtl:"model/mtl",obj:"model/obj",stpz:"model/step+zip",stpxz:"model/step-xml+zip",stl:"model/stl",wrl:"model/vrml",vrml:"model/vrml",x3db:"model/x3d+fastinfoset",x3dbz:"model/x3d+binary",x3dv:"model/x3d-vrml",x3dvz:"model/x3d+vrml",x3d:"model/x3d+xml",x3dz:"model/x3d+xml",appcache:"text/cache-manifest",manifest:"text/cache-manifest",ics:"text/calendar",ifb:"text/calendar",coffee:"text/coffeescript",litcoffee:"text/coffeescript",css:"text/css",csv:"text/csv",html:"text/html",htm:"text/html",shtml:"text/html",jade:"text/jade",jsx:"text/jsx",less:"text/less",markdown:"text/markdown",md:"text/markdown",mml:"text/mathml",mdx:"text/mdx",n3:"text/n3",txt:"text/plain",text:"text/plain",conf:"text/plain",def:"text/plain",list:"text/plain",log:"text/plain",in:"text/plain",ini:"text/plain",dsc:"text/prs.lines.tag",rtx:"text/richtext",sgml:"text/sgml",sgm:"text/sgml",shex:"text/shex",slim:"text/slim",slm:"text/slim",spdx:"text/spdx",stylus:"text/stylus",styl:"text/stylus",tsv:"text/tab-separated-values",t:"text/troff",tr:"text/troff",roff:"text/troff",man:"text/troff",me:"text/troff",ms:"text/troff",ttl:"text/turtle",uri:"text/uri-list",uris:"text/uri-list",urls:"text/uri-list",vcard:"text/vcard",vtt:"text/vtt",yaml:"text/yaml",yml:"text/yaml","3gp":"video/3gpp","3g2":"video/3gpp2",h261:"video/h261",h263:"video/h263",h264:"video/h264",m4s:"video/iso.segment",jpgv:"video/jpeg",jpgm:"image/jpm",mj2:"video/mj2",mjp2:"video/mj2",ts:"video/mp2t",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg",ogv:"video/ogg",qt:"video/quicktime",mov:"video/quicktime",webm:"video/webm"};function os(o){let r=(""+o).trim().toLowerCase(),s=r.lastIndexOf(".");return as[~s?r.substring(++s):r]}function tt(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function Xr(o,r){for(var s="",m=0,y=-1,c=0,u,f=0;f<=o.length;++f){if(f<o.length)u=o.charCodeAt(f);else{if(u===47)break;u=47}if(u===47){if(!(y===f-1||c===1))if(y!==f-1&&c===2){if(s.length<2||m!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var b=s.lastIndexOf("/");if(b!==s.length-1){b===-1?(s="",m=0):(s=s.slice(0,b),m=s.length-1-s.lastIndexOf("/")),y=f,c=0;continue}}else if(s.length===2||s.length===1){s="",m=0,y=f,c=0;continue}}r&&(s.length>0?s+="/..":s="..",m=2)}else s.length>0?s+="/"+o.slice(y+1,f):s=o.slice(y+1,f),m=f-y-1;y=f,c=0}else u===46&&c!==-1?++c:c=-1}return s}function ss(o,r){var s=r.dir||r.root,m=r.base||(r.name||"")+(r.ext||"");return s?s===r.root?s+m:s+o+m:m}var Ot={resolve:function(){for(var r="",s=!1,m,y=arguments.length-1;y>=-1&&!s;y--){var c;y>=0?c=arguments[y]:(m===void 0&&(m=process.cwd()),c=m),tt(c),c.length!==0&&(r=c+"/"+r,s=c.charCodeAt(0)===47)}return r=Xr(r,!s),s?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(r){if(tt(r),r.length===0)return".";var s=r.charCodeAt(0)===47,m=r.charCodeAt(r.length-1)===47;return r=Xr(r,!s),r.length===0&&!s&&(r="."),r.length>0&&m&&(r+="/"),s?"/"+r:r},isAbsolute:function(r){return tt(r),r.length>0&&r.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var r,s=0;s<arguments.length;++s){var m=arguments[s];tt(m),m.length>0&&(r===void 0?r=m:r+="/"+m)}return r===void 0?".":Ot.normalize(r)},relative:function(r,s){if(tt(r),tt(s),r===s||(r=Ot.resolve(r),s=Ot.resolve(s),r===s))return"";for(var m=1;m<r.length&&r.charCodeAt(m)===47;++m);for(var y=r.length,c=y-m,u=1;u<s.length&&s.charCodeAt(u)===47;++u);for(var f=s.length,b=f-u,v=c<b?c:b,d=-1,k=0;k<=v;++k){if(k===v){if(b>v){if(s.charCodeAt(u+k)===47)return s.slice(u+k+1);if(k===0)return s.slice(u+k)}else c>v&&(r.charCodeAt(m+k)===47?d=k:k===0&&(d=0));break}var C=r.charCodeAt(m+k),x=s.charCodeAt(u+k);if(C!==x)break;C===47&&(d=k)}var L="";for(k=m+d+1;k<=y;++k)(k===y||r.charCodeAt(k)===47)&&(L.length===0?L+="..":L+="/..");return L.length>0?L+s.slice(u+d):(u+=d,s.charCodeAt(u)===47&&++u,s.slice(u))},_makeLong:function(r){return r},dirname:function(r){if(tt(r),r.length===0)return".";for(var s=r.charCodeAt(0),m=s===47,y=-1,c=!0,u=r.length-1;u>=1;--u)if(s=r.charCodeAt(u),s===47){if(!c){y=u;break}}else c=!1;return y===-1?m?"/":".":m&&y===1?"//":r.slice(0,y)},basename:function(r,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');tt(r);var m=0,y=-1,c=!0,u;if(s!==void 0&&s.length>0&&s.length<=r.length){if(s.length===r.length&&s===r)return"";var f=s.length-1,b=-1;for(u=r.length-1;u>=0;--u){var v=r.charCodeAt(u);if(v===47){if(!c){m=u+1;break}}else b===-1&&(c=!1,b=u+1),f>=0&&(v===s.charCodeAt(f)?--f===-1&&(y=u):(f=-1,y=b))}return m===y?y=b:y===-1&&(y=r.length),r.slice(m,y)}else{for(u=r.length-1;u>=0;--u)if(r.charCodeAt(u)===47){if(!c){m=u+1;break}}else y===-1&&(c=!1,y=u+1);return y===-1?"":r.slice(m,y)}},extname:function(r){tt(r);for(var s=-1,m=0,y=-1,c=!0,u=0,f=r.length-1;f>=0;--f){var b=r.charCodeAt(f);if(b===47){if(!c){m=f+1;break}continue}y===-1&&(c=!1,y=f+1),b===46?s===-1?s=f:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||y===-1||u===0||u===1&&s===y-1&&s===m+1?"":r.slice(s,y)},format:function(r){if(r===null||typeof r!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof r);return ss("/",r)},parse:function(r){tt(r);var s={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return s;var m=r.charCodeAt(0),y=m===47,c;y?(s.root="/",c=1):c=0;for(var u=-1,f=0,b=-1,v=!0,d=r.length-1,k=0;d>=c;--d){if(m=r.charCodeAt(d),m===47){if(!v){f=d+1;break}continue}b===-1&&(v=!1,b=d+1),m===46?u===-1?u=d:k!==1&&(k=1):u!==-1&&(k=-1)}return u===-1||b===-1||k===0||k===1&&u===b-1&&u===f+1?b!==-1&&(f===0&&y?s.base=s.name=r.slice(1,b):s.base=s.name=r.slice(f,b)):(f===0&&y?(s.name=r.slice(1,u),s.base=r.slice(1,b)):(s.name=r.slice(f,u),s.base=r.slice(f,b)),s.ext=r.slice(u,b)),f>0?s.dir=r.slice(0,f-1):y&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};Ot.posix=Ot;var ls=Ot;const Ei=vi(ls);function Ft(...o){return Ei.join(...o)}function cs(o){return Ei.parse(o)}const{replace:us}="",fs=/[&<>'"]/g,ps={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},ds=o=>ps[o],hs=o=>us.call(o,fs,ds);function ms(o){return o.replaceAll(/([\<\>\{\}\[\]\(\)\`\~\#\$\^\*\_\=\|\:\-\\])/g,"\\$1")}var Si={exports:{}};(function(o){(function(r,s){o.exports?o.exports=s():r.validDataUrl=s()})(Ro,function(){function r(s){return r.regex.test((s||"").trim())}return r.regex=/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i,r})})(Si);var gs=Si.exports;const Yr=gs;var ys=o=>{if(!Yr(o))return!1;const r=o.trim().match(Yr.regex),s={};if(r[1]){s.mediaType=r[1].toLowerCase();const m=r[1].split(";").map(y=>y.toLowerCase());s.contentType=m[0],m.slice(1).forEach(y=>{const c=y.split("=");s[c[0]]=c[1]})}return s.base64=!!r[r.length-2],s.data=r[r.length-1]||"",s.toBuffer=()=>{const m=s.base64?"base64":"utf8";return Buffer.from(s.base64?s.data:decodeURIComponent(s.data),m)},s};const bs=vi(ys);var Ti={},fn={};fn.byteLength=Es;fn.toByteArray=Ts;fn.fromByteArray=Cs;var rt=[],Xe=[],ws=typeof Uint8Array<"u"?Uint8Array:Array,Nn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Lt=0,vs=Nn.length;Lt<vs;++Lt)rt[Lt]=Nn[Lt],Xe[Nn.charCodeAt(Lt)]=Lt;Xe["-".charCodeAt(0)]=62;Xe["_".charCodeAt(0)]=63;function ki(o){var r=o.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=o.indexOf("=");s===-1&&(s=r);var m=s===r?0:4-s%4;return[s,m]}function Es(o){var r=ki(o),s=r[0],m=r[1];return(s+m)*3/4-m}function Ss(o,r,s){return(r+s)*3/4-s}function Ts(o){var r,s=ki(o),m=s[0],y=s[1],c=new ws(Ss(o,m,y)),u=0,f=y>0?m-4:m,b;for(b=0;b<f;b+=4)r=Xe[o.charCodeAt(b)]<<18|Xe[o.charCodeAt(b+1)]<<12|Xe[o.charCodeAt(b+2)]<<6|Xe[o.charCodeAt(b+3)],c[u++]=r>>16&255,c[u++]=r>>8&255,c[u++]=r&255;return y===2&&(r=Xe[o.charCodeAt(b)]<<2|Xe[o.charCodeAt(b+1)]>>4,c[u++]=r&255),y===1&&(r=Xe[o.charCodeAt(b)]<<10|Xe[o.charCodeAt(b+1)]<<4|Xe[o.charCodeAt(b+2)]>>2,c[u++]=r>>8&255,c[u++]=r&255),c}function ks(o){return rt[o>>18&63]+rt[o>>12&63]+rt[o>>6&63]+rt[o&63]}function As(o,r,s){for(var m,y=[],c=r;c<s;c+=3)m=(o[c]<<16&16711680)+(o[c+1]<<8&65280)+(o[c+2]&255),y.push(ks(m));return y.join("")}function Cs(o){for(var r,s=o.length,m=s%3,y=[],c=16383,u=0,f=s-m;u<f;u+=c)y.push(As(o,u,u+c>f?f:u+c));return m===1?(r=o[s-1],y.push(rt[r>>2]+rt[r<<4&63]+"==")):m===2&&(r=(o[s-2]<<8)+o[s-1],y.push(rt[r>>10]+rt[r>>4&63]+rt[r<<2&63]+"=")),y.join("")}var er={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */er.read=function(o,r,s,m,y){var c,u,f=y*8-m-1,b=(1<<f)-1,v=b>>1,d=-7,k=s?y-1:0,C=s?-1:1,x=o[r+k];for(k+=C,c=x&(1<<-d)-1,x>>=-d,d+=f;d>0;c=c*256+o[r+k],k+=C,d-=8);for(u=c&(1<<-d)-1,c>>=-d,d+=m;d>0;u=u*256+o[r+k],k+=C,d-=8);if(c===0)c=1-v;else{if(c===b)return u?NaN:(x?-1:1)*(1/0);u=u+Math.pow(2,m),c=c-v}return(x?-1:1)*u*Math.pow(2,c-m)};er.write=function(o,r,s,m,y,c){var u,f,b,v=c*8-y-1,d=(1<<v)-1,k=d>>1,C=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=m?0:c-1,L=m?1:-1,w=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,u=d):(u=Math.floor(Math.log(r)/Math.LN2),r*(b=Math.pow(2,-u))<1&&(u--,b*=2),u+k>=1?r+=C/b:r+=C*Math.pow(2,1-k),r*b>=2&&(u++,b/=2),u+k>=d?(f=0,u=d):u+k>=1?(f=(r*b-1)*Math.pow(2,y),u=u+k):(f=r*Math.pow(2,k-1)*Math.pow(2,y),u=0));y>=8;o[s+x]=f&255,x+=L,f/=256,y-=8);for(u=u<<y|f,v+=y;v>0;o[s+x]=u&255,x+=L,u/=256,v-=8);o[s+x-L]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(o){const r=fn,s=er,m=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;o.Buffer=f,o.SlowBuffer=W,o.INSPECT_MAX_BYTES=50;const y=2147483647;o.kMaxLength=y,f.TYPED_ARRAY_SUPPORT=c(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const T=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(T,p),T.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function u(T){if(T>y)throw new RangeError('The value "'+T+'" is invalid for option "size"');const p=new Uint8Array(T);return Object.setPrototypeOf(p,f.prototype),p}function f(T,p,h){if(typeof T=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return k(T)}return b(T,p,h)}f.poolSize=8192;function b(T,p,h){if(typeof T=="string")return C(T,p);if(ArrayBuffer.isView(T))return L(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(Je(T,ArrayBuffer)||T&&Je(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Je(T,SharedArrayBuffer)||T&&Je(T.buffer,SharedArrayBuffer)))return w(T,p,h);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const _=T.valueOf&&T.valueOf();if(_!=null&&_!==T)return f.from(_,p,h);const D=O(T);if(D)return D;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return f.from(T[Symbol.toPrimitive]("string"),p,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}f.from=function(T,p,h){return b(T,p,h)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array);function v(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function d(T,p,h){return v(T),T<=0?u(T):p!==void 0?typeof h=="string"?u(T).fill(p,h):u(T).fill(p):u(T)}f.alloc=function(T,p,h){return d(T,p,h)};function k(T){return v(T),u(T<0?0:I(T)|0)}f.allocUnsafe=function(T){return k(T)},f.allocUnsafeSlow=function(T){return k(T)};function C(T,p){if((typeof p!="string"||p==="")&&(p="utf8"),!f.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const h=z(T,p)|0;let _=u(h);const D=_.write(T,p);return D!==h&&(_=_.slice(0,D)),_}function x(T){const p=T.length<0?0:I(T.length)|0,h=u(p);for(let _=0;_<p;_+=1)h[_]=T[_]&255;return h}function L(T){if(Je(T,Uint8Array)){const p=new Uint8Array(T);return w(p.buffer,p.byteOffset,p.byteLength)}return x(T)}function w(T,p,h){if(p<0||T.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<p+(h||0))throw new RangeError('"length" is outside of buffer bounds');let _;return p===void 0&&h===void 0?_=new Uint8Array(T):h===void 0?_=new Uint8Array(T,p):_=new Uint8Array(T,p,h),Object.setPrototypeOf(_,f.prototype),_}function O(T){if(f.isBuffer(T)){const p=I(T.length)|0,h=u(p);return h.length===0||T.copy(h,0,0,p),h}if(T.length!==void 0)return typeof T.length!="number"||Ht(T.length)?u(0):x(T);if(T.type==="Buffer"&&Array.isArray(T.data))return x(T.data)}function I(T){if(T>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return T|0}function W(T){return+T!=T&&(T=0),f.alloc(+T)}f.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==f.prototype},f.compare=function(p,h){if(Je(p,Uint8Array)&&(p=f.from(p,p.offset,p.byteLength)),Je(h,Uint8Array)&&(h=f.from(h,h.offset,h.byteLength)),!f.isBuffer(p)||!f.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===h)return 0;let _=p.length,D=h.length;for(let H=0,j=Math.min(_,D);H<j;++H)if(p[H]!==h[H]){_=p[H],D=h[H];break}return _<D?-1:D<_?1:0},f.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(p,h){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return f.alloc(0);let _;if(h===void 0)for(h=0,_=0;_<p.length;++_)h+=p[_].length;const D=f.allocUnsafe(h);let H=0;for(_=0;_<p.length;++_){let j=p[_];if(Je(j,Uint8Array))H+j.length>D.length?(f.isBuffer(j)||(j=f.from(j)),j.copy(D,H)):Uint8Array.prototype.set.call(D,j,H);else if(f.isBuffer(j))j.copy(D,H);else throw new TypeError('"list" argument must be an Array of Buffers');H+=j.length}return D};function z(T,p){if(f.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||Je(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const h=T.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&h===0)return 0;let D=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return ke(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return Rt(T).length;default:if(D)return _?-1:ke(T).length;p=(""+p).toLowerCase(),D=!0}}f.byteLength=z;function ie(T,p,h){let _=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,p>>>=0,h<=p))return"";for(T||(T="utf8");;)switch(T){case"hex":return Ge(this,p,h);case"utf8":case"utf-8":return be(this,p,h);case"ascii":return $e(this,p,h);case"latin1":case"binary":return pt(this,p,h);case"base64":return Pe(this,p,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,p,h);default:if(_)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),_=!0}}f.prototype._isBuffer=!0;function ae(T,p,h){const _=T[p];T[p]=T[h],T[h]=_}f.prototype.swap16=function(){const p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<p;h+=2)ae(this,h,h+1);return this},f.prototype.swap32=function(){const p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<p;h+=4)ae(this,h,h+3),ae(this,h+1,h+2);return this},f.prototype.swap64=function(){const p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<p;h+=8)ae(this,h,h+7),ae(this,h+1,h+6),ae(this,h+2,h+5),ae(this,h+3,h+4);return this},f.prototype.toString=function(){const p=this.length;return p===0?"":arguments.length===0?be(this,0,p):ie.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(p){if(!f.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:f.compare(this,p)===0},f.prototype.inspect=function(){let p="";const h=o.INSPECT_MAX_BYTES;return p=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(p+=" ... "),"<Buffer "+p+">"},m&&(f.prototype[m]=f.prototype.inspect),f.prototype.compare=function(p,h,_,D,H){if(Je(p,Uint8Array)&&(p=f.from(p,p.offset,p.byteLength)),!f.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(h===void 0&&(h=0),_===void 0&&(_=p?p.length:0),D===void 0&&(D=0),H===void 0&&(H=this.length),h<0||_>p.length||D<0||H>this.length)throw new RangeError("out of range index");if(D>=H&&h>=_)return 0;if(D>=H)return-1;if(h>=_)return 1;if(h>>>=0,_>>>=0,D>>>=0,H>>>=0,this===p)return 0;let j=H-D,fe=_-h;const we=Math.min(j,fe),Ae=this.slice(D,H),Oe=p.slice(h,_);for(let Ce=0;Ce<we;++Ce)if(Ae[Ce]!==Oe[Ce]){j=Ae[Ce],fe=Oe[Ce];break}return j<fe?-1:fe<j?1:0};function oe(T,p,h,_,D){if(T.length===0)return-1;if(typeof h=="string"?(_=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,Ht(h)&&(h=D?0:T.length-1),h<0&&(h=T.length+h),h>=T.length){if(D)return-1;h=T.length-1}else if(h<0)if(D)h=0;else return-1;if(typeof p=="string"&&(p=f.from(p,_)),f.isBuffer(p))return p.length===0?-1:pe(T,p,h,_,D);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?D?Uint8Array.prototype.indexOf.call(T,p,h):Uint8Array.prototype.lastIndexOf.call(T,p,h):pe(T,[p],h,_,D);throw new TypeError("val must be string, number or Buffer")}function pe(T,p,h,_,D){let H=1,j=T.length,fe=p.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(T.length<2||p.length<2)return-1;H=2,j/=2,fe/=2,h/=2}function we(Oe,Ce){return H===1?Oe[Ce]:Oe.readUInt16BE(Ce*H)}let Ae;if(D){let Oe=-1;for(Ae=h;Ae<j;Ae++)if(we(T,Ae)===we(p,Oe===-1?0:Ae-Oe)){if(Oe===-1&&(Oe=Ae),Ae-Oe+1===fe)return Oe*H}else Oe!==-1&&(Ae-=Ae-Oe),Oe=-1}else for(h+fe>j&&(h=j-fe),Ae=h;Ae>=0;Ae--){let Oe=!0;for(let Ce=0;Ce<fe;Ce++)if(we(T,Ae+Ce)!==we(p,Ce)){Oe=!1;break}if(Oe)return Ae}return-1}f.prototype.includes=function(p,h,_){return this.indexOf(p,h,_)!==-1},f.prototype.indexOf=function(p,h,_){return oe(this,p,h,_,!0)},f.prototype.lastIndexOf=function(p,h,_){return oe(this,p,h,_,!1)};function $(T,p,h,_){h=Number(h)||0;const D=T.length-h;_?(_=Number(_),_>D&&(_=D)):_=D;const H=p.length;_>H/2&&(_=H/2);let j;for(j=0;j<_;++j){const fe=parseInt(p.substr(j*2,2),16);if(Ht(fe))return j;T[h+j]=fe}return j}function ye(T,p,h,_){return wt(ke(p,T.length-h),T,h,_)}function _e(T,p,h,_){return wt(bn(p),T,h,_)}function Le(T,p,h,_){return wt(Rt(p),T,h,_)}function Te(T,p,h,_){return wt(wn(p,T.length-h),T,h,_)}f.prototype.write=function(p,h,_,D){if(h===void 0)D="utf8",_=this.length,h=0;else if(_===void 0&&typeof h=="string")D=h,_=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(_)?(_=_>>>0,D===void 0&&(D="utf8")):(D=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const H=this.length-h;if((_===void 0||_>H)&&(_=H),p.length>0&&(_<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");D||(D="utf8");let j=!1;for(;;)switch(D){case"hex":return $(this,p,h,_);case"utf8":case"utf-8":return ye(this,p,h,_);case"ascii":case"latin1":case"binary":return _e(this,p,h,_);case"base64":return Le(this,p,h,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,p,h,_);default:if(j)throw new TypeError("Unknown encoding: "+D);D=(""+D).toLowerCase(),j=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Pe(T,p,h){return p===0&&h===T.length?r.fromByteArray(T):r.fromByteArray(T.slice(p,h))}function be(T,p,h){h=Math.min(T.length,h);const _=[];let D=p;for(;D<h;){const H=T[D];let j=null,fe=H>239?4:H>223?3:H>191?2:1;if(D+fe<=h){let we,Ae,Oe,Ce;switch(fe){case 1:H<128&&(j=H);break;case 2:we=T[D+1],(we&192)===128&&(Ce=(H&31)<<6|we&63,Ce>127&&(j=Ce));break;case 3:we=T[D+1],Ae=T[D+2],(we&192)===128&&(Ae&192)===128&&(Ce=(H&15)<<12|(we&63)<<6|Ae&63,Ce>2047&&(Ce<55296||Ce>57343)&&(j=Ce));break;case 4:we=T[D+1],Ae=T[D+2],Oe=T[D+3],(we&192)===128&&(Ae&192)===128&&(Oe&192)===128&&(Ce=(H&15)<<18|(we&63)<<12|(Ae&63)<<6|Oe&63,Ce>65535&&Ce<1114112&&(j=Ce))}}j===null?(j=65533,fe=1):j>65535&&(j-=65536,_.push(j>>>10&1023|55296),j=56320|j&1023),_.push(j),D+=fe}return Fe(_)}const P=4096;function Fe(T){const p=T.length;if(p<=P)return String.fromCharCode.apply(String,T);let h="",_=0;for(;_<p;)h+=String.fromCharCode.apply(String,T.slice(_,_+=P));return h}function $e(T,p,h){let _="";h=Math.min(T.length,h);for(let D=p;D<h;++D)_+=String.fromCharCode(T[D]&127);return _}function pt(T,p,h){let _="";h=Math.min(T.length,h);for(let D=p;D<h;++D)_+=String.fromCharCode(T[D]);return _}function Ge(T,p,h){const _=T.length;(!p||p<0)&&(p=0),(!h||h<0||h>_)&&(h=_);let D="";for(let H=p;H<h;++H)D+=Jt[T[H]];return D}function G(T,p,h){const _=T.slice(p,h);let D="";for(let H=0;H<_.length-1;H+=2)D+=String.fromCharCode(_[H]+_[H+1]*256);return D}f.prototype.slice=function(p,h){const _=this.length;p=~~p,h=h===void 0?_:~~h,p<0?(p+=_,p<0&&(p=0)):p>_&&(p=_),h<0?(h+=_,h<0&&(h=0)):h>_&&(h=_),h<p&&(h=p);const D=this.subarray(p,h);return Object.setPrototypeOf(D,f.prototype),D};function U(T,p,h){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+p>h)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(p,h,_){p=p>>>0,h=h>>>0,_||U(p,h,this.length);let D=this[p],H=1,j=0;for(;++j<h&&(H*=256);)D+=this[p+j]*H;return D},f.prototype.readUintBE=f.prototype.readUIntBE=function(p,h,_){p=p>>>0,h=h>>>0,_||U(p,h,this.length);let D=this[p+--h],H=1;for(;h>0&&(H*=256);)D+=this[p+--h]*H;return D},f.prototype.readUint8=f.prototype.readUInt8=function(p,h){return p=p>>>0,h||U(p,1,this.length),this[p]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(p,h){return p=p>>>0,h||U(p,2,this.length),this[p]|this[p+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(p,h){return p=p>>>0,h||U(p,2,this.length),this[p]<<8|this[p+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(p,h){return p=p>>>0,h||U(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(p,h){return p=p>>>0,h||U(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},f.prototype.readBigUInt64LE=ze(function(p){p=p>>>0,ot(p,"offset");const h=this[p],_=this[p+7];(h===void 0||_===void 0)&&dt(p,this.length-8);const D=h+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,H=this[++p]+this[++p]*2**8+this[++p]*2**16+_*2**24;return BigInt(D)+(BigInt(H)<<BigInt(32))}),f.prototype.readBigUInt64BE=ze(function(p){p=p>>>0,ot(p,"offset");const h=this[p],_=this[p+7];(h===void 0||_===void 0)&&dt(p,this.length-8);const D=h*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],H=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+_;return(BigInt(D)<<BigInt(32))+BigInt(H)}),f.prototype.readIntLE=function(p,h,_){p=p>>>0,h=h>>>0,_||U(p,h,this.length);let D=this[p],H=1,j=0;for(;++j<h&&(H*=256);)D+=this[p+j]*H;return H*=128,D>=H&&(D-=Math.pow(2,8*h)),D},f.prototype.readIntBE=function(p,h,_){p=p>>>0,h=h>>>0,_||U(p,h,this.length);let D=h,H=1,j=this[p+--D];for(;D>0&&(H*=256);)j+=this[p+--D]*H;return H*=128,j>=H&&(j-=Math.pow(2,8*h)),j},f.prototype.readInt8=function(p,h){return p=p>>>0,h||U(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},f.prototype.readInt16LE=function(p,h){p=p>>>0,h||U(p,2,this.length);const _=this[p]|this[p+1]<<8;return _&32768?_|4294901760:_},f.prototype.readInt16BE=function(p,h){p=p>>>0,h||U(p,2,this.length);const _=this[p+1]|this[p]<<8;return _&32768?_|4294901760:_},f.prototype.readInt32LE=function(p,h){return p=p>>>0,h||U(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},f.prototype.readInt32BE=function(p,h){return p=p>>>0,h||U(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},f.prototype.readBigInt64LE=ze(function(p){p=p>>>0,ot(p,"offset");const h=this[p],_=this[p+7];(h===void 0||_===void 0)&&dt(p,this.length-8);const D=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(_<<24);return(BigInt(D)<<BigInt(32))+BigInt(h+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),f.prototype.readBigInt64BE=ze(function(p){p=p>>>0,ot(p,"offset");const h=this[p],_=this[p+7];(h===void 0||_===void 0)&&dt(p,this.length-8);const D=(h<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(D)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+_)}),f.prototype.readFloatLE=function(p,h){return p=p>>>0,h||U(p,4,this.length),s.read(this,p,!0,23,4)},f.prototype.readFloatBE=function(p,h){return p=p>>>0,h||U(p,4,this.length),s.read(this,p,!1,23,4)},f.prototype.readDoubleLE=function(p,h){return p=p>>>0,h||U(p,8,this.length),s.read(this,p,!0,52,8)},f.prototype.readDoubleBE=function(p,h){return p=p>>>0,h||U(p,8,this.length),s.read(this,p,!1,52,8)};function F(T,p,h,_,D,H){if(!f.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>D||p<H)throw new RangeError('"value" argument is out of bounds');if(h+_>T.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(p,h,_,D){if(p=+p,h=h>>>0,_=_>>>0,!D){const fe=Math.pow(2,8*_)-1;F(this,p,h,_,fe,0)}let H=1,j=0;for(this[h]=p&255;++j<_&&(H*=256);)this[h+j]=p/H&255;return h+_},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(p,h,_,D){if(p=+p,h=h>>>0,_=_>>>0,!D){const fe=Math.pow(2,8*_)-1;F(this,p,h,_,fe,0)}let H=_-1,j=1;for(this[h+H]=p&255;--H>=0&&(j*=256);)this[h+H]=p/j&255;return h+_},f.prototype.writeUint8=f.prototype.writeUInt8=function(p,h,_){return p=+p,h=h>>>0,_||F(this,p,h,1,255,0),this[h]=p&255,h+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(p,h,_){return p=+p,h=h>>>0,_||F(this,p,h,2,65535,0),this[h]=p&255,this[h+1]=p>>>8,h+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(p,h,_){return p=+p,h=h>>>0,_||F(this,p,h,2,65535,0),this[h]=p>>>8,this[h+1]=p&255,h+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(p,h,_){return p=+p,h=h>>>0,_||F(this,p,h,4,4294967295,0),this[h+3]=p>>>24,this[h+2]=p>>>16,this[h+1]=p>>>8,this[h]=p&255,h+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(p,h,_){return p=+p,h=h>>>0,_||F(this,p,h,4,4294967295,0),this[h]=p>>>24,this[h+1]=p>>>16,this[h+2]=p>>>8,this[h+3]=p&255,h+4};function N(T,p,h,_,D){yt(p,_,D,T,h,7);let H=Number(p&BigInt(4294967295));T[h++]=H,H=H>>8,T[h++]=H,H=H>>8,T[h++]=H,H=H>>8,T[h++]=H;let j=Number(p>>BigInt(32)&BigInt(4294967295));return T[h++]=j,j=j>>8,T[h++]=j,j=j>>8,T[h++]=j,j=j>>8,T[h++]=j,h}function K(T,p,h,_,D){yt(p,_,D,T,h,7);let H=Number(p&BigInt(4294967295));T[h+7]=H,H=H>>8,T[h+6]=H,H=H>>8,T[h+5]=H,H=H>>8,T[h+4]=H;let j=Number(p>>BigInt(32)&BigInt(4294967295));return T[h+3]=j,j=j>>8,T[h+2]=j,j=j>>8,T[h+1]=j,j=j>>8,T[h]=j,h+8}f.prototype.writeBigUInt64LE=ze(function(p,h=0){return N(this,p,h,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=ze(function(p,h=0){return K(this,p,h,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(p,h,_,D){if(p=+p,h=h>>>0,!D){const we=Math.pow(2,8*_-1);F(this,p,h,_,we-1,-we)}let H=0,j=1,fe=0;for(this[h]=p&255;++H<_&&(j*=256);)p<0&&fe===0&&this[h+H-1]!==0&&(fe=1),this[h+H]=(p/j>>0)-fe&255;return h+_},f.prototype.writeIntBE=function(p,h,_,D){if(p=+p,h=h>>>0,!D){const we=Math.pow(2,8*_-1);F(this,p,h,_,we-1,-we)}let H=_-1,j=1,fe=0;for(this[h+H]=p&255;--H>=0&&(j*=256);)p<0&&fe===0&&this[h+H+1]!==0&&(fe=1),this[h+H]=(p/j>>0)-fe&255;return h+_},f.prototype.writeInt8=function(p,h,_){return p=+p,h=h>>>0,_||F(this,p,h,1,127,-128),p<0&&(p=255+p+1),this[h]=p&255,h+1},f.prototype.writeInt16LE=function(p,h,_){return p=+p,h=h>>>0,_||F(this,p,h,2,32767,-32768),this[h]=p&255,this[h+1]=p>>>8,h+2},f.prototype.writeInt16BE=function(p,h,_){return p=+p,h=h>>>0,_||F(this,p,h,2,32767,-32768),this[h]=p>>>8,this[h+1]=p&255,h+2},f.prototype.writeInt32LE=function(p,h,_){return p=+p,h=h>>>0,_||F(this,p,h,4,2147483647,-2147483648),this[h]=p&255,this[h+1]=p>>>8,this[h+2]=p>>>16,this[h+3]=p>>>24,h+4},f.prototype.writeInt32BE=function(p,h,_){return p=+p,h=h>>>0,_||F(this,p,h,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[h]=p>>>24,this[h+1]=p>>>16,this[h+2]=p>>>8,this[h+3]=p&255,h+4},f.prototype.writeBigInt64LE=ze(function(p,h=0){return N(this,p,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=ze(function(p,h=0){return K(this,p,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ee(T,p,h,_,D,H){if(h+_>T.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function le(T,p,h,_,D){return p=+p,h=h>>>0,D||ee(T,p,h,4),s.write(T,p,h,_,23,4),h+4}f.prototype.writeFloatLE=function(p,h,_){return le(this,p,h,!0,_)},f.prototype.writeFloatBE=function(p,h,_){return le(this,p,h,!1,_)};function ue(T,p,h,_,D){return p=+p,h=h>>>0,D||ee(T,p,h,8),s.write(T,p,h,_,52,8),h+8}f.prototype.writeDoubleLE=function(p,h,_){return ue(this,p,h,!0,_)},f.prototype.writeDoubleBE=function(p,h,_){return ue(this,p,h,!1,_)},f.prototype.copy=function(p,h,_,D){if(!f.isBuffer(p))throw new TypeError("argument should be a Buffer");if(_||(_=0),!D&&D!==0&&(D=this.length),h>=p.length&&(h=p.length),h||(h=0),D>0&&D<_&&(D=_),D===_||p.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("sourceEnd out of bounds");D>this.length&&(D=this.length),p.length-h<D-_&&(D=p.length-h+_);const H=D-_;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,_,D):Uint8Array.prototype.set.call(p,this.subarray(_,D),h),H},f.prototype.fill=function(p,h,_,D){if(typeof p=="string"){if(typeof h=="string"?(D=h,h=0,_=this.length):typeof _=="string"&&(D=_,_=this.length),D!==void 0&&typeof D!="string")throw new TypeError("encoding must be a string");if(typeof D=="string"&&!f.isEncoding(D))throw new TypeError("Unknown encoding: "+D);if(p.length===1){const j=p.charCodeAt(0);(D==="utf8"&&j<128||D==="latin1")&&(p=j)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(h<0||this.length<h||this.length<_)throw new RangeError("Out of range index");if(_<=h)return this;h=h>>>0,_=_===void 0?this.length:_>>>0,p||(p=0);let H;if(typeof p=="number")for(H=h;H<_;++H)this[H]=p;else{const j=f.isBuffer(p)?p:f.from(p,D),fe=j.length;if(fe===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(H=0;H<_-h;++H)this[H+h]=j[H%fe]}return this};const he={};function se(T,p,h){he[T]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(D){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:D,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}se("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(T,p){return`The "${T}" argument must be of type number. Received type ${typeof p}`},TypeError),se("ERR_OUT_OF_RANGE",function(T,p,h){let _=`The value of "${T}" is out of range.`,D=h;return Number.isInteger(h)&&Math.abs(h)>2**32?D=Me(String(h)):typeof h=="bigint"&&(D=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(D=Me(D)),D+="n"),_+=` It must be ${p}. Received ${D}`,_},RangeError);function Me(T){let p="",h=T.length;const _=T[0]==="-"?1:0;for(;h>=_+4;h-=3)p=`_${T.slice(h-3,h)}${p}`;return`${T.slice(0,h)}${p}`}function qe(T,p,h){ot(p,"offset"),(T[p]===void 0||T[p+h]===void 0)&&dt(p,T.length-(h+1))}function yt(T,p,h,_,D,H){if(T>h||T<p){const j=typeof p=="bigint"?"n":"";let fe;throw H>3?p===0||p===BigInt(0)?fe=`>= 0${j} and < 2${j} ** ${(H+1)*8}${j}`:fe=`>= -(2${j} ** ${(H+1)*8-1}${j}) and < 2 ** ${(H+1)*8-1}${j}`:fe=`>= ${p}${j} and <= ${h}${j}`,new he.ERR_OUT_OF_RANGE("value",fe,T)}qe(_,D,H)}function ot(T,p){if(typeof T!="number")throw new he.ERR_INVALID_ARG_TYPE(p,"number",T)}function dt(T,p,h){throw Math.floor(T)!==T?(ot(T,h),new he.ERR_OUT_OF_RANGE(h||"offset","an integer",T)):p<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE(h||"offset",`>= ${h?1:0} and <= ${p}`,T)}const yn=/[^+/0-9A-Za-z-_]/g;function bt(T){if(T=T.split("=")[0],T=T.trim().replace(yn,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function ke(T,p){p=p||1/0;let h;const _=T.length;let D=null;const H=[];for(let j=0;j<_;++j){if(h=T.charCodeAt(j),h>55295&&h<57344){if(!D){if(h>56319){(p-=3)>-1&&H.push(239,191,189);continue}else if(j+1===_){(p-=3)>-1&&H.push(239,191,189);continue}D=h;continue}if(h<56320){(p-=3)>-1&&H.push(239,191,189),D=h;continue}h=(D-55296<<10|h-56320)+65536}else D&&(p-=3)>-1&&H.push(239,191,189);if(D=null,h<128){if((p-=1)<0)break;H.push(h)}else if(h<2048){if((p-=2)<0)break;H.push(h>>6|192,h&63|128)}else if(h<65536){if((p-=3)<0)break;H.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((p-=4)<0)break;H.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return H}function bn(T){const p=[];for(let h=0;h<T.length;++h)p.push(T.charCodeAt(h)&255);return p}function wn(T,p){let h,_,D;const H=[];for(let j=0;j<T.length&&!((p-=2)<0);++j)h=T.charCodeAt(j),_=h>>8,D=h%256,H.push(D),H.push(_);return H}function Rt(T){return r.toByteArray(bt(T))}function wt(T,p,h,_){let D;for(D=0;D<_&&!(D+h>=p.length||D>=T.length);++D)p[D+h]=T[D];return D}function Je(T,p){return T instanceof p||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===p.name}function Ht(T){return T!==T}const Jt=function(){const T="0123456789abcdef",p=new Array(256);for(let h=0;h<16;++h){const _=h*16;for(let D=0;D<16;++D)p[_+D]=T[h]+T[D]}return p}();function ze(T){return typeof BigInt>"u"?Bt:T}function Bt(){throw new Error("BigInt not supported")}})(Ti);globalThis.Buffer=Ti.Buffer;function xs(o){const r=bs(o);if(r)return new Blob([r.toBuffer()],{type:r.contentType})}function Ls(o,r){return`data:${r};base64,${o}`}function _s(o,r){const s=Ls(o,r);return xs(s)}function Qr(o,r=!0){switch(o.startsWith("/")&&(o=o.substring(1)),!0){case o.startsWith("stage/"):return!r;case o.startsWith("appearance/"):case o.startsWith("export/"):case o.startsWith("history/"):case o.startsWith("assets/"):case o.startsWith("emojies/"):case o.startsWith("plugins/"):case o.startsWith("public/"):case o.startsWith("snippets/"):case o.startsWith("templates/"):case o.startsWith("widgets/"):return!0;default:return!1}}function Ms(o){switch(o.startsWith("/")&&(o=o.substring(1)),!0){case o.startsWith("assets/"):case o.startsWith("emojies/"):case o.startsWith("plugins/"):case o.startsWith("public/"):case o.startsWith("snippets/"):case o.startsWith("templates/"):case o.startsWith("widgets/"):return`data/${o}`;case o.startsWith("appearance/"):return`conf/${o}`;case o.startsWith("export/"):return`temp/${o}`;case o.startsWith("history/"):return o;default:throw new Error(`'${o}' is not a valid file pathname`)}}function Os(o=globalThis.document.baseURI){return new URL(o).pathname}Os();const $r=new Set(["abap","algol_nu","algol","ant-design","arduino","autumn","borland","bw","colorful","dracula","emacs","friendly","fruity","github","igor","lovelace","manni","monokai","monokailight","murphy","native","paraiso-dark","paraiso-light","pastie","perldoc","pygments","rainbow_dash","rrt","solarized-dark","solarized-dark256","solarized-light","swapoff","tango","trac","vim","vs","xcode"]);var Wt=(o=>(o[o.assets=0]="assets",o[o.relative=1]="relative",o[o.absolute=2]="absolute",o))(Wt||{});function Ds(){return/[<>:"/\\|?*\u0000-\u001F]/g}function Ps(){return/^(con|prn|aux|nul|com\d|lpt\d)$/i}function Rs(o){return!(!o||o.length>255||Ds().test(o)||Ps().test(o)||o==="."||o==="..")}function Hs(o){switch(!0){case!Rs(o):case o===".".repeat(o.length):return!1;default:return!0}}const Ze={path:"/",get vditorID(){return`vditor-${Date.now()}`},assetsDirPath:"/assets/vditor/",assetsUploadMode:Wt.assets,options:{},value:"",get theme(){return Ho()},codeBlockThemeLight:"xcode",codeBlockThemeDark:"dracula",updatable:!0,changable:!1,debug:!1};function Bs(o){let r;return{c(){r=jo("div"),Bn(r,"id",o[0]),Bn(r,"class","vditor")},m(s,m){Uo(s,r,m),o[18](r)},p(s,m){m[0]&1&&Bn(r,"id",s[0])},i:Jr,o:Jr,d(s){s&&Fo(r),o[18](null)}}}function Ns(o,r,s){let m,{plugin:y}=r,{src2url:c}=r,{baseURL:u}=r,{rootURL:f}=r,{path:b=Ze.path}=r,{vditorID:v=Ze.vditorID}=r,{assetsDirPath:d=Ze.assetsDirPath}=r,{assetsUploadMode:k=Ze.assetsUploadMode}=r,{options:C=Ze.options}=r,{value:x=Ze.value}=r,{theme:L=Ze.theme}=r,{codeBlockThemeLight:w=Ze.codeBlockThemeLight}=r,{codeBlockThemeDark:O=Ze.codeBlockThemeDark}=r,{updatable:I=Ze.updatable}=r,{changable:W=Ze.changable}=r,{debug:z=Ze.debug}=r,ie,ae,oe,pe,$;const ye=qo();function _e(U,F=!1,N=w,K=O){var ee,le;ae=U?"classic":"dark",oe=U?oe==="dark"?"light":((le=(ee=$==null?void 0:$.vditor.options.preview)==null?void 0:ee.theme)==null?void 0:le.current)??"light":"dark",F?(pe=U?$r.has(N)?N:"xcode":$r.has(K)?K:"dracula",$==null||$.setTheme(ae,oe,pe)):$==null||$.setTheme(ae,oe)}function Le(U){$==null||$.setValue(U)}function Te(U){U?$==null||$.enable():$==null||$.disabled()}function Pe(U){U?$==null||$.enableCache():$==null||$.disabledCache()}function be(U){if(U.length<=0)return;const F=[];for(const[N,K]of U){const ee=os(N),le=ms(N),ue=hs(K),he=encodeURI(K);if(ee)switch(!0){case ee.startsWith("image/"):F.push(`![${le}](${he})`);continue;case ee.startsWith("audio/"):F.push(`<audio controls="controls" src="${ue}"/>`);continue;case ee.startsWith("video/"):F.push(`<video controls="controls" src="${ue}"/>`);continue}F.push(`[${le}](${he})`)}$&&F.length>0&&$.insertValue(F.join(`
`))}async function P(U,F){const N=F?Ft(m.dir,d):d,K=[],ee=U.filter(ue=>Hs(ue.name)).map(ue=>({file:ue,name:ue.name,path:F?`./${Ft(d,ue.name)}`:`/${Ft(es(d,"/"),ue.name)}`,fullpath:Ft(N,ue.name)}));return(await Promise.allSettled(ee.map(ue=>y.client.putFile({path:ue.fullpath,file:ue.file})))).forEach((ue,he)=>{if(ue.status==="fulfilled"){const se=ee[he];K.push([se.name,se.path])}}),be(K),null}function Fe(U,F=(N=>(N=$==null?void 0:$.vditor)==null?void 0:N.options)()){if(F!=null&&F.upload)switch(U){case Wt.assets:F.upload.handler=void 0;break;case Wt.relative:F.upload.handler=K=>P(K,!0);break;case Wt.absolute:F.upload.handler=K=>P(K,!1);break}}function $e(U){switch(!0){case U.startsWith("./"):case U.startsWith("../"):return Ft(m.dir,U);case U.startsWith("//"):return"";case U.startsWith("/"):return U;case Qr(U):return Ms(U);default:return""}}async function pt(U){const F=U.target;if(F instanceof HTMLElement&&["img","video","audio","source","track"].includes(F.localName)){const N=F,K=N.getAttribute("src")||N.getAttribute("srcset");if(!K)return;const ee=c.get(K);let le=K;if(ee)le=ee;else{let ue=0;switch(!0){case K.startsWith("//"):le=`https:${K}`;case K.startsWith("http://"):case K.startsWith("https://"):ue=2;break;case K.startsWith("./"):case K.startsWith("../"):case K.startsWith("/"):le=$e(K),ue=1;break;case Qr(K):le=`${f}/${K}`;break;default:return}switch(ue){case 1:try{const he=await y.client.getFile({path:le},"blob"),se=URL.createObjectURL(he);c.set(K,se),le=se;break}catch{return}case 2:try{const he=await y.client.forwardProxy({url:le,headers:[],responseEncoding:"base64"}),se=_s(he.data.body,he.data.contentType),Me=URL.createObjectURL(se);c.set(K,Me),le=Me;break}catch{return}}}K!==le&&(N.src?N.src=le:N.srcset=le)}}function Ge(U,F){if(U)try{$==null||$.destroy()}catch{}finally{Fe(k,F),s(17,$=new rs(U,F))}}Wo(()=>{var F;const U=zo({_lutePath:void 0,_staticPath:{i18n:`${u}/js/i18n`,icons:`${u}/js/icons`,mathjax:`${u}/js/jsthjax`,highlight:`${u}/js/highlight.js`,method:`${u}/js/method.min.js`,style:`${u}/css/index.css`,logo:`${u}/images/logo.png`,emoji:`${f}/emojies`},value:x,debugger:z,height:"100%",lang:Ko("zh-Hans"),toolbar:[{name:"save",icon:is,hotkey:"⌘S",tip:(F=y.i18n)==null?void 0:F.editor.action.save.label,tipPosition:"se",click(N,K){I&&ye("save",{markdown:$==null?void 0:$.getValue()})}},"|",{name:"undo",tipPosition:"se"},{name:"redo",tipPosition:"se"},"|",{name:"insert-before",tipPosition:"se"},{name:"insert-after",tipPosition:"se"},{name:"outdent",tipPosition:"se"},{name:"indent",tipPosition:"se"},"|",{name:"headings",tipPosition:"s"},"|",{name:"bold",tipPosition:"s"},{name:"italic",tipPosition:"s"},{name:"strike",tipPosition:"s"},{name:"inline-code",tipPosition:"s"},{name:"link",tipPosition:"s"},{name:"emoji",tipPosition:"s"},"|",{name:"list",tipPosition:"s"},{name:"ordered-list",tipPosition:"s"},{name:"check",tipPosition:"s"},"|",{name:"quote",tipPosition:"s"},{name:"line",tipPosition:"s"},{name:"code",tipPosition:"s"},"|",{name:"upload",tipPosition:"s"},{name:"record",tipPosition:"s"},"|",{name:"edit-mode",tipPosition:"sw"},{name:"both",tipPosition:"sw"},{name:"fullscreen",tipPosition:"sw"},{name:"outline",tipPosition:"sw"},"|",{name:"style",icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',tip:"🎨",tipPosition:"w",click(){},toolbar:[{name:"theme",icon:"🔆 | 🌙",click(N,K){switch(K.options.theme){case"dark":{_e(!0);break}case"classic":default:{_e(!1);break}}}},"content-theme","code-theme"]},{name:"more",tipPosition:"e",toolbar:["preview","export","devtools","info","help"]}],counter:{enable:!0,type:"text",after(N,K){}},cache:{id:b,enable:W,after(N){W&&ye("changed",{markdown:N})}},mode:"ir",preview:{hljs:{lineNumber:!0,style:pe},math:{inlineDigit:!1},markdown:{autoSpace:!0,toc:!0},theme:{current:oe,path:`${u}/css/themes`},parse(N){},transform(N){return N}},link:{click(N){switch(!0){case N instanceof HTMLAnchorElement:{const K=N;ye("open-link",{path:{current:b,target:$e(K.href)},href:K.href,title:K.title,anchor:K.textContent,target:K.target});break}case(N instanceof HTMLSpanElement&&N.classList.contains("vditor-ir__marker--link")):{const K=N;let ee=K,le=K;for(;ee&&!ee.classList.contains("vditor-ir__link");)ee=ee.previousElementSibling;for(;le&&!le.classList.contains("vditor-ir__marker--title");)le=le.nextElementSibling;ye("open-link",{path:{current:b,target:$e(K.textContent)},href:K.textContent,title:le==null?void 0:le.textContent,anchor:ee==null?void 0:ee.textContent})}}}},image:{preview(N){}},hint:{emojiPath:"https://unpkg.com/vditor@1.8.3/dist/images/emoji",parse:!1},toolbarConfig:{pin:!0},theme:ae,upload:{url:`${f}/api/asset/upload`,max:1/0,extraData:{assetsDirPath:d},file(N){return N},validate(N){return!0},filename(N){return N},success(N,K){try{const le=JSON.parse(K).data.succMap;be(Object.entries(le))}catch(ee){y.logger.warn(ee)}},error(N){y.logger.warns("upload.error",N)},format(N,K){return K},linkToImgFormat(N){return N},linkToImgCallback(N){}},cdn:f,dist:"stage/protyle",tab:"	",outline:{enable:!0,position:"right"}},C);ie.addEventListener("error",pt,!0),Ge(ie,U)}),Vo(()=>{$&&($.clearCache(),$.clearStack(),$.destroy())});function G(U){Go[U?"unshift":"push"](()=>{ie=U,s(1,ie)})}return o.$$set=U=>{"plugin"in U&&s(2,y=U.plugin),"src2url"in U&&s(3,c=U.src2url),"baseURL"in U&&s(4,u=U.baseURL),"rootURL"in U&&s(5,f=U.rootURL),"path"in U&&s(6,b=U.path),"vditorID"in U&&s(0,v=U.vditorID),"assetsDirPath"in U&&s(7,d=U.assetsDirPath),"assetsUploadMode"in U&&s(8,k=U.assetsUploadMode),"options"in U&&s(9,C=U.options),"value"in U&&s(10,x=U.value),"theme"in U&&s(11,L=U.theme),"codeBlockThemeLight"in U&&s(12,w=U.codeBlockThemeLight),"codeBlockThemeDark"in U&&s(13,O=U.codeBlockThemeDark),"updatable"in U&&s(14,I=U.updatable),"changable"in U&&s(15,W=U.changable),"debug"in U&&s(16,z=U.debug)},o.$$.update=()=>{o.$$.dirty[0]&64&&(m=cs(b)),o.$$.dirty[0]&196608&&(z?globalThis.vditor=$:delete globalThis.vditor),o.$$.dirty[0]&1024&&Le(x),o.$$.dirty[0]&16384&&Te(I),o.$$.dirty[0]&32768&&Pe(W),o.$$.dirty[0]&256&&Fe(k),o.$$.dirty[0]&14336&&_e(L,!0,w,O)},[v,ie,y,c,u,f,b,d,k,C,x,L,w,O,I,W,z,$,G]}class Ai extends Bo{constructor(r){super(),No(this,r,Ns,Bs,Io,{plugin:2,src2url:3,baseURL:4,rootURL:5,path:6,vditorID:0,assetsDirPath:7,assetsUploadMode:8,options:9,value:10,theme:11,codeBlockThemeLight:12,codeBlockThemeDark:13,updatable:14,changable:15,debug:16},null,[-1,-1])}}class Is extends Jo{constructor(r=()=>{}){super(r),this.oninited=r}ready(r={status:!0}){const s={channel:"vditor-ready",data:r};this.port.postMessage(s)}changed(r){const s={channel:"vditor-changed",data:r};this.port.postMessage(s)}save(r){const s={channel:"vditor-save",data:r};this.port.postMessage(s)}openLink(r){const s={channel:"vditor-open-link",data:r};this.port.postMessage(s)}}var js=Object.defineProperty,Us=(o,r,s)=>r in o?js(o,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[r]=s,ut=(o,r,s)=>(Us(o,typeof r!="symbol"?r+"":r,s),s);const Fs=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,qs=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ws=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Vs(o,r){if(o==="__proto__"||o==="constructor"&&r&&typeof r=="object"&&"prototype"in r){zs(o);return}return r}function zs(o){console.warn(`[destr] Dropping "${o}" key to prevent prototype pollution.`)}function Ks(o,r={}){if(typeof o!="string")return o;const s=o.trim();if(o[0]==='"'&&o.at(-1)==='"'&&!o.includes("\\"))return s.slice(1,-1);if(s.length<=9){const m=s.toLowerCase();if(m==="true")return!0;if(m==="false")return!1;if(m==="undefined")return;if(m==="null")return null;if(m==="nan")return Number.NaN;if(m==="infinity")return Number.POSITIVE_INFINITY;if(m==="-infinity")return Number.NEGATIVE_INFINITY}if(!Ws.test(o)){if(r.strict)throw new SyntaxError("[destr] Invalid JSON");return o}try{if(Fs.test(o)||qs.test(o)){if(r.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(o,Vs)}return JSON.parse(o)}catch(m){if(r.strict)throw m;return o}}const Gs=/#/g,Js=/&/g,Zs=/=/g,tr=/\+/g,Xs=/%5e/gi,Ys=/%60/gi,Qs=/%7c/gi,$s=/%20/gi;function el(o){return encodeURI(""+o).replace(Qs,"|")}function Vn(o){return el(typeof o=="string"?o:JSON.stringify(o)).replace(tr,"%2B").replace($s,"+").replace(Gs,"%23").replace(Js,"%26").replace(Ys,"`").replace(Xs,"^")}function In(o){return Vn(o).replace(Zs,"%3D")}function Ci(o=""){try{return decodeURIComponent(""+o)}catch{return""+o}}function tl(o){return Ci(o.replace(tr," "))}function nl(o){return Ci(o.replace(tr," "))}function rl(o=""){const r={};o[0]==="?"&&(o=o.slice(1));for(const s of o.split("&")){const m=s.match(/([^=]+)=?(.*)/)||[];if(m.length<2)continue;const y=tl(m[1]);if(y==="__proto__"||y==="constructor")continue;const c=nl(m[2]||"");r[y]===void 0?r[y]=c:Array.isArray(r[y])?r[y].push(c):r[y]=[r[y],c]}return r}function il(o,r){return(typeof r=="number"||typeof r=="boolean")&&(r=String(r)),r?Array.isArray(r)?r.map(s=>`${In(o)}=${Vn(s)}`).join("&"):`${In(o)}=${Vn(r)}`:In(o)}function al(o){return Object.keys(o).filter(r=>o[r]!==void 0).map(r=>il(r,o[r])).filter(Boolean).join("&")}const ol=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,sl=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,ll=/^([/\\]\s*){2,}[^/\\]/;function xi(o,r={}){return typeof r=="boolean"&&(r={acceptRelative:r}),r.strict?ol.test(o):sl.test(o)||(r.acceptRelative?ll.test(o):!1)}const cl=/\/$|\/\?/;function zn(o="",r=!1){return r?cl.test(o):o.endsWith("/")}function ul(o="",r=!1){if(!r)return(zn(o)?o.slice(0,-1):o)||"/";if(!zn(o,!0))return o||"/";const[s,...m]=o.split("?");return(s.slice(0,-1)||"/")+(m.length>0?`?${m.join("?")}`:"")}function fl(o="",r=!1){if(!r)return o.endsWith("/")?o:o+"/";if(zn(o,!0))return o||"/";const[s,...m]=o.split("?");return s+"/"+(m.length>0?`?${m.join("?")}`:"")}function pl(o,r){if(hl(r)||xi(o))return o;const s=ul(r);return o.startsWith(s)?o:yl(s,o)}function dl(o,r){const s=Li(o),m={...rl(s.search),...r};return s.search=al(m),bl(s)}function hl(o){return!o||o==="/"}function ml(o){return o&&o!=="/"}const gl=/^\.?\//;function yl(o,...r){let s=o||"";for(const m of r.filter(y=>ml(y)))if(s){const y=m.replace(gl,"");s=fl(s)+y}else s=m;return s}function Li(o="",r){const s=o.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/);if(s){const[,k,C=""]=s;return{protocol:k,pathname:C,href:k+C,auth:"",host:"",search:"",hash:""}}if(!xi(o,{acceptRelative:!0}))return r?Li(r+o):ei(o);const[,m="",y,c=""]=o.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,u="",f=""]=c.match(/([^#/?]*)(.*)?/)||[],{pathname:b,search:v,hash:d}=ei(f.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:m,auth:y?y.slice(0,Math.max(0,y.length-1)):"",host:u,pathname:b,search:v,hash:d}}function ei(o=""){const[r="",s="",m=""]=(o.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:r,search:s,hash:m}}function bl(o){const r=o.pathname||"",s=o.search?(o.search.startsWith("?")?"":"?")+o.search:"",m=o.hash||"",y=o.auth?o.auth+"@":"",c=o.host||"";return(o.protocol?o.protocol+"//":"")+y+c+r+s+m}class wl extends Error{constructor(r,s){super(r,s),this.name="FetchError",s!=null&&s.cause&&!this.cause&&(this.cause=s.cause)}}function vl(o){var r,s,m,y,c;const u=((r=o.error)==null?void 0:r.message)||((s=o.error)==null?void 0:s.toString())||"",f=((m=o.request)==null?void 0:m.method)||((y=o.options)==null?void 0:y.method)||"GET",b=((c=o.request)==null?void 0:c.url)||String(o.request)||"/",v=`[${f}] ${JSON.stringify(b)}`,d=o.response?`${o.response.status} ${o.response.statusText}`:"<no response>",k=`${v}: ${d}${u?` ${u}`:""}`,C=new wl(k,o.error?{cause:o.error}:void 0);for(const x of["request","options","response"])Object.defineProperty(C,x,{get(){return o[x]}});for(const[x,L]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(C,x,{get(){return o.response&&o.response[L]}});return C}const El=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function ti(o="GET"){return El.has(o.toUpperCase())}function Sl(o){if(o===void 0)return!1;const r=typeof o;return r==="string"||r==="number"||r==="boolean"||r===null?!0:r!=="object"?!1:Array.isArray(o)?!0:o.buffer?!1:o.constructor&&o.constructor.name==="Object"||typeof o.toJSON=="function"}const Tl=new Set(["image/svg","application/xml","application/xhtml","application/html"]),kl=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Al(o=""){if(!o)return"json";const r=o.split(";").shift()||"";return kl.test(r)?"json":Tl.has(r)||r.startsWith("text/")?"text":"blob"}function Cl(o,r,s=globalThis.Headers){const m={...r,...o};if(r!=null&&r.params&&o!=null&&o.params&&(m.params={...r==null?void 0:r.params,...o==null?void 0:o.params}),r!=null&&r.query&&o!=null&&o.query&&(m.query={...r==null?void 0:r.query,...o==null?void 0:o.query}),r!=null&&r.headers&&o!=null&&o.headers){m.headers=new s((r==null?void 0:r.headers)||{});for(const[y,c]of new s((o==null?void 0:o.headers)||{}))m.headers.set(y,c)}return m}const xl=new Set([408,409,425,429,500,502,503,504]),Ll=new Set([101,204,205,304]);function _i(o={}){const{fetch:r=globalThis.fetch,Headers:s=globalThis.Headers,AbortController:m=globalThis.AbortController}=o;async function y(f){const b=f.error&&f.error.name==="AbortError"&&!f.options.timeout||!1;if(f.options.retry!==!1&&!b){let d;typeof f.options.retry=="number"?d=f.options.retry:d=ti(f.options.method)?0:1;const k=f.response&&f.response.status||500;if(d>0&&(Array.isArray(f.options.retryStatusCodes)?f.options.retryStatusCodes.includes(k):xl.has(k))){const C=f.options.retryDelay||0;return C>0&&await new Promise(x=>setTimeout(x,C)),c(f.request,{...f.options,retry:d-1,timeout:f.options.timeout})}}const v=vl(f);throw Error.captureStackTrace&&Error.captureStackTrace(v,c),v}const c=async function(f,b={}){var v;const d={request:f,options:Cl(b,o.defaults,s),response:void 0,error:void 0};if(d.options.method=(v=d.options.method)==null?void 0:v.toUpperCase(),d.options.onRequest&&await d.options.onRequest(d),typeof d.request=="string"&&(d.options.baseURL&&(d.request=pl(d.request,d.options.baseURL)),(d.options.query||d.options.params)&&(d.request=dl(d.request,{...d.options.params,...d.options.query}))),d.options.body&&ti(d.options.method)&&(Sl(d.options.body)?(d.options.body=typeof d.options.body=="string"?d.options.body:JSON.stringify(d.options.body),d.options.headers=new s(d.options.headers||{}),d.options.headers.has("content-type")||d.options.headers.set("content-type","application/json"),d.options.headers.has("accept")||d.options.headers.set("accept","application/json")):("pipeTo"in d.options.body&&typeof d.options.body.pipeTo=="function"||typeof d.options.body.pipe=="function")&&("duplex"in d.options||(d.options.duplex="half"))),!d.options.signal&&d.options.timeout){const k=new m;setTimeout(()=>k.abort(),d.options.timeout),d.options.signal=k.signal}try{d.response=await r(d.request,d.options)}catch(k){return d.error=k,d.options.onRequestError&&await d.options.onRequestError(d),await y(d)}if(d.response.body&&!Ll.has(d.response.status)&&d.options.method!=="HEAD"){const k=(d.options.parseResponse?"json":d.options.responseType)||Al(d.response.headers.get("content-type")||"");switch(k){case"json":{const C=await d.response.text(),x=d.options.parseResponse||Ks;d.response._data=x(C);break}case"stream":{d.response._data=d.response.body;break}default:d.response._data=await d.response[k]()}}return d.options.onResponse&&await d.options.onResponse(d),!d.options.ignoreResponseError&&d.response.status>=400&&d.response.status<600?(d.options.onResponseError&&await d.options.onResponseError(d),await y(d)):d.response},u=async function(f,b){return(await c(f,b))._data};return u.raw=c,u.native=(...f)=>r(...f),u.create=(f={})=>_i({...o,defaults:{...o.defaults,...f}}),u}const nr=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),_l=nr.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),Ml=nr.Headers,Ol=nr.AbortController,Dl=_i({fetch:_l,Headers:Ml,AbortController:Ol});class Pl extends Error{constructor(r){super(r.statusText),ut(this,"status"),this.response=r,this.status=r.status}}class ni extends Error{constructor(r,s){super(r.msg),ut(this,"code"),this.body=r,this.response=s,this.code=r.code}}function nt(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function ri(o,r){for(var s="",m=0,y=-1,c=0,u,f=0;f<=o.length;++f){if(f<o.length)u=o.charCodeAt(f);else{if(u===47)break;u=47}if(u===47){if(!(y===f-1||c===1))if(y!==f-1&&c===2){if(s.length<2||m!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var b=s.lastIndexOf("/");if(b!==s.length-1){b===-1?(s="",m=0):(s=s.slice(0,b),m=s.length-1-s.lastIndexOf("/")),y=f,c=0;continue}}else if(s.length===2||s.length===1){s="",m=0,y=f,c=0;continue}}r&&(s.length>0?s+="/..":s="..",m=2)}else s.length>0?s+="/"+o.slice(y+1,f):s=o.slice(y+1,f),m=f-y-1;y=f,c=0}else u===46&&c!==-1?++c:c=-1}return s}function Rl(o,r){var s=r.dir||r.root,m=r.base||(r.name||"")+(r.ext||"");return s?s===r.root?s+m:s+o+m:m}var Vt={resolve:function(){for(var o="",r=!1,s,m=arguments.length-1;m>=-1&&!r;m--){var y;m>=0?y=arguments[m]:(s===void 0&&(s=process.cwd()),y=s),nt(y),y.length!==0&&(o=y+"/"+o,r=y.charCodeAt(0)===47)}return o=ri(o,!r),r?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(o){if(nt(o),o.length===0)return".";var r=o.charCodeAt(0)===47,s=o.charCodeAt(o.length-1)===47;return o=ri(o,!r),o.length===0&&!r&&(o="."),o.length>0&&s&&(o+="/"),r?"/"+o:o},isAbsolute:function(o){return nt(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,r=0;r<arguments.length;++r){var s=arguments[r];nt(s),s.length>0&&(o===void 0?o=s:o+="/"+s)}return o===void 0?".":Vt.normalize(o)},relative:function(o,r){if(nt(o),nt(r),o===r||(o=Vt.resolve(o),r=Vt.resolve(r),o===r))return"";for(var s=1;s<o.length&&o.charCodeAt(s)===47;++s);for(var m=o.length,y=m-s,c=1;c<r.length&&r.charCodeAt(c)===47;++c);for(var u=r.length,f=u-c,b=y<f?y:f,v=-1,d=0;d<=b;++d){if(d===b){if(f>b){if(r.charCodeAt(c+d)===47)return r.slice(c+d+1);if(d===0)return r.slice(c+d)}else y>b&&(o.charCodeAt(s+d)===47?v=d:d===0&&(v=0));break}var k=o.charCodeAt(s+d),C=r.charCodeAt(c+d);if(k!==C)break;k===47&&(v=d)}var x="";for(d=s+v+1;d<=m;++d)(d===m||o.charCodeAt(d)===47)&&(x.length===0?x+="..":x+="/..");return x.length>0?x+r.slice(c+v):(c+=v,r.charCodeAt(c)===47&&++c,r.slice(c))},_makeLong:function(o){return o},dirname:function(o){if(nt(o),o.length===0)return".";for(var r=o.charCodeAt(0),s=r===47,m=-1,y=!0,c=o.length-1;c>=1;--c)if(r=o.charCodeAt(c),r===47){if(!y){m=c;break}}else y=!1;return m===-1?s?"/":".":s&&m===1?"//":o.slice(0,m)},basename:function(o,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');nt(o);var s=0,m=-1,y=!0,c;if(r!==void 0&&r.length>0&&r.length<=o.length){if(r.length===o.length&&r===o)return"";var u=r.length-1,f=-1;for(c=o.length-1;c>=0;--c){var b=o.charCodeAt(c);if(b===47){if(!y){s=c+1;break}}else f===-1&&(y=!1,f=c+1),u>=0&&(b===r.charCodeAt(u)?--u===-1&&(m=c):(u=-1,m=f))}return s===m?m=f:m===-1&&(m=o.length),o.slice(s,m)}else{for(c=o.length-1;c>=0;--c)if(o.charCodeAt(c)===47){if(!y){s=c+1;break}}else m===-1&&(y=!1,m=c+1);return m===-1?"":o.slice(s,m)}},extname:function(o){nt(o);for(var r=-1,s=0,m=-1,y=!0,c=0,u=o.length-1;u>=0;--u){var f=o.charCodeAt(u);if(f===47){if(!y){s=u+1;break}continue}m===-1&&(y=!1,m=u+1),f===46?r===-1?r=u:c!==1&&(c=1):r!==-1&&(c=-1)}return r===-1||m===-1||c===0||c===1&&r===m-1&&r===s+1?"":o.slice(r,m)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return Rl("/",o)},parse:function(o){nt(o);var r={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return r;var s=o.charCodeAt(0),m=s===47,y;m?(r.root="/",y=1):y=0;for(var c=-1,u=0,f=-1,b=!0,v=o.length-1,d=0;v>=y;--v){if(s=o.charCodeAt(v),s===47){if(!b){u=v+1;break}continue}f===-1&&(b=!1,f=v+1),s===46?c===-1?c=v:d!==1&&(d=1):c!==-1&&(d=-1)}return c===-1||f===-1||d===0||d===1&&c===f-1&&c===u+1?f!==-1&&(u===0&&m?r.base=r.name=o.slice(1,f):r.base=r.name=o.slice(u,f)):(u===0&&m?(r.name=o.slice(1,c),r.base=o.slice(1,f)):(r.name=o.slice(u,c),r.base=o.slice(u,f)),r.ext=o.slice(c,f)),u>0?r.dir=o.slice(0,u-1):m&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};Vt.posix=Vt;function Mi(o,r){return function(){return o.apply(r,arguments)}}const{toString:Hl}=Object.prototype,{getPrototypeOf:rr}=Object,pn=(o=>r=>{const s=Hl.call(r);return o[s]||(o[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),at=o=>(o=o.toLowerCase(),r=>pn(r)===o),dn=o=>r=>typeof r===o,{isArray:Pt}=Array,zt=dn("undefined");function Bl(o){return o!==null&&!zt(o)&&o.constructor!==null&&!zt(o.constructor)&&Ye(o.constructor.isBuffer)&&o.constructor.isBuffer(o)}const Oi=at("ArrayBuffer");function Nl(o){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(o):r=o&&o.buffer&&Oi(o.buffer),r}const Il=dn("string"),Ye=dn("function"),Di=dn("number"),hn=o=>o!==null&&typeof o=="object",jl=o=>o===!0||o===!1,sn=o=>{if(pn(o)!=="object")return!1;const r=rr(o);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},Ul=at("Date"),Fl=at("File"),ql=at("Blob"),Wl=at("FileList"),Vl=o=>hn(o)&&Ye(o.pipe),zl=o=>{let r;return o&&(typeof FormData=="function"&&o instanceof FormData||Ye(o.append)&&((r=pn(o))==="formdata"||r==="object"&&Ye(o.toString)&&o.toString()==="[object FormData]"))},Kl=at("URLSearchParams"),Gl=o=>o.trim?o.trim():o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Kt(o,r,{allOwnKeys:s=!1}={}){if(o===null||typeof o>"u")return;let m,y;if(typeof o!="object"&&(o=[o]),Pt(o))for(m=0,y=o.length;m<y;m++)r.call(null,o[m],m,o);else{const c=s?Object.getOwnPropertyNames(o):Object.keys(o),u=c.length;let f;for(m=0;m<u;m++)f=c[m],r.call(null,o[f],f,o)}}function Pi(o,r){r=r.toLowerCase();const s=Object.keys(o);let m=s.length,y;for(;m-- >0;)if(y=s[m],r===y.toLowerCase())return y;return null}const Ri=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Hi=o=>!zt(o)&&o!==Ri;function Kn(){const{caseless:o}=Hi(this)&&this||{},r={},s=(m,y)=>{const c=o&&Pi(r,y)||y;sn(r[c])&&sn(m)?r[c]=Kn(r[c],m):sn(m)?r[c]=Kn({},m):Pt(m)?r[c]=m.slice():r[c]=m};for(let m=0,y=arguments.length;m<y;m++)arguments[m]&&Kt(arguments[m],s);return r}const Jl=(o,r,s,{allOwnKeys:m}={})=>(Kt(r,(y,c)=>{s&&Ye(y)?o[c]=Mi(y,s):o[c]=y},{allOwnKeys:m}),o),Zl=o=>(o.charCodeAt(0)===65279&&(o=o.slice(1)),o),Xl=(o,r,s,m)=>{o.prototype=Object.create(r.prototype,m),o.prototype.constructor=o,Object.defineProperty(o,"super",{value:r.prototype}),s&&Object.assign(o.prototype,s)},Yl=(o,r,s,m)=>{let y,c,u;const f={};if(r=r||{},o==null)return r;do{for(y=Object.getOwnPropertyNames(o),c=y.length;c-- >0;)u=y[c],(!m||m(u,o,r))&&!f[u]&&(r[u]=o[u],f[u]=!0);o=s!==!1&&rr(o)}while(o&&(!s||s(o,r))&&o!==Object.prototype);return r},Ql=(o,r,s)=>{o=String(o),(s===void 0||s>o.length)&&(s=o.length),s-=r.length;const m=o.indexOf(r,s);return m!==-1&&m===s},$l=o=>{if(!o)return null;if(Pt(o))return o;let r=o.length;if(!Di(r))return null;const s=new Array(r);for(;r-- >0;)s[r]=o[r];return s},ec=(o=>r=>o&&r instanceof o)(typeof Uint8Array<"u"&&rr(Uint8Array)),tc=(o,r)=>{const s=(o&&o[Symbol.iterator]).call(o);let m;for(;(m=s.next())&&!m.done;){const y=m.value;r.call(o,y[0],y[1])}},nc=(o,r)=>{let s;const m=[];for(;(s=o.exec(r))!==null;)m.push(s);return m},rc=at("HTMLFormElement"),ic=o=>o.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,m){return s.toUpperCase()+m}),ii=(({hasOwnProperty:o})=>(r,s)=>o.call(r,s))(Object.prototype),ac=at("RegExp"),Bi=(o,r)=>{const s=Object.getOwnPropertyDescriptors(o),m={};Kt(s,(y,c)=>{let u;(u=r(y,c,o))!==!1&&(m[c]=u||y)}),Object.defineProperties(o,m)},oc=o=>{Bi(o,(r,s)=>{if(Ye(o)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const m=o[s];if(Ye(m)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},sc=(o,r)=>{const s={},m=y=>{y.forEach(c=>{s[c]=!0})};return Pt(o)?m(o):m(String(o).split(r)),s},lc=()=>{},cc=(o,r)=>(o=+o,Number.isFinite(o)?o:r),jn="abcdefghijklmnopqrstuvwxyz",ai="0123456789",Ni={DIGIT:ai,ALPHA:jn,ALPHA_DIGIT:jn+jn.toUpperCase()+ai},uc=(o=16,r=Ni.ALPHA_DIGIT)=>{let s="";const{length:m}=r;for(;o--;)s+=r[Math.random()*m|0];return s};function fc(o){return!!(o&&Ye(o.append)&&o[Symbol.toStringTag]==="FormData"&&o[Symbol.iterator])}const pc=o=>{const r=new Array(10),s=(m,y)=>{if(hn(m)){if(r.indexOf(m)>=0)return;if(!("toJSON"in m)){r[y]=m;const c=Pt(m)?[]:{};return Kt(m,(u,f)=>{const b=s(u,y+1);!zt(b)&&(c[f]=b)}),r[y]=void 0,c}}return m};return s(o,0)},dc=at("AsyncFunction"),hc=o=>o&&(hn(o)||Ye(o))&&Ye(o.then)&&Ye(o.catch),q={isArray:Pt,isArrayBuffer:Oi,isBuffer:Bl,isFormData:zl,isArrayBufferView:Nl,isString:Il,isNumber:Di,isBoolean:jl,isObject:hn,isPlainObject:sn,isUndefined:zt,isDate:Ul,isFile:Fl,isBlob:ql,isRegExp:ac,isFunction:Ye,isStream:Vl,isURLSearchParams:Kl,isTypedArray:ec,isFileList:Wl,forEach:Kt,merge:Kn,extend:Jl,trim:Gl,stripBOM:Zl,inherits:Xl,toFlatObject:Yl,kindOf:pn,kindOfTest:at,endsWith:Ql,toArray:$l,forEachEntry:tc,matchAll:nc,isHTMLForm:rc,hasOwnProperty:ii,hasOwnProp:ii,reduceDescriptors:Bi,freezeMethods:oc,toObjectSet:sc,toCamelCase:ic,noop:lc,toFiniteNumber:cc,findKey:Pi,global:Ri,isContextDefined:Hi,ALPHABET:Ni,generateString:uc,isSpecCompliantForm:fc,toJSONObject:pc,isAsyncFn:dc,isThenable:hc};function Se(o,r,s,m,y){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=o,this.name="AxiosError",r&&(this.code=r),s&&(this.config=s),m&&(this.request=m),y&&(this.response=y)}q.inherits(Se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ii=Se.prototype,ji={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(o=>{ji[o]={value:o}});Object.defineProperties(Se,ji);Object.defineProperty(Ii,"isAxiosError",{value:!0});Se.from=(o,r,s,m,y,c)=>{const u=Object.create(Ii);return q.toFlatObject(o,u,function(f){return f!==Error.prototype},f=>f!=="isAxiosError"),Se.call(u,o.message,r,s,m,y),u.cause=o,u.name=o.name,c&&Object.assign(u,c),u};const mc=null;function Gn(o){return q.isPlainObject(o)||q.isArray(o)}function Ui(o){return q.endsWith(o,"[]")?o.slice(0,-2):o}function oi(o,r,s){return o?o.concat(r).map(function(m,y){return m=Ui(m),!s&&y?"["+m+"]":m}).join(s?".":""):r}function gc(o){return q.isArray(o)&&!o.some(Gn)}const yc=q.toFlatObject(q,{},null,function(o){return/^is[A-Z]/.test(o)});function mn(o,r,s){if(!q.isObject(o))throw new TypeError("target must be an object");r=r||new FormData,s=q.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,L){return!q.isUndefined(L[x])});const m=s.metaTokens,y=s.visitor||v,c=s.dots,u=s.indexes,f=(s.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(r);if(!q.isFunction(y))throw new TypeError("visitor must be a function");function b(x){if(x===null)return"";if(q.isDate(x))return x.toISOString();if(!f&&q.isBlob(x))throw new Se("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(x)||q.isTypedArray(x)?f&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function v(x,L,w){let O=x;if(x&&!w&&typeof x=="object"){if(q.endsWith(L,"{}"))L=m?L:L.slice(0,-2),x=JSON.stringify(x);else if(q.isArray(x)&&gc(x)||(q.isFileList(x)||q.endsWith(L,"[]"))&&(O=q.toArray(x)))return L=Ui(L),O.forEach(function(I,W){!(q.isUndefined(I)||I===null)&&r.append(u===!0?oi([L],W,c):u===null?L:L+"[]",b(I))}),!1}return Gn(x)?!0:(r.append(oi(w,L,c),b(x)),!1)}const d=[],k=Object.assign(yc,{defaultVisitor:v,convertValue:b,isVisitable:Gn});function C(x,L){if(!q.isUndefined(x)){if(d.indexOf(x)!==-1)throw Error("Circular reference detected in "+L.join("."));d.push(x),q.forEach(x,function(w,O){(!(q.isUndefined(w)||w===null)&&y.call(r,w,q.isString(O)?O.trim():O,L,k))===!0&&C(w,L?L.concat(O):[O])}),d.pop()}}if(!q.isObject(o))throw new TypeError("data must be an object");return C(o),r}function si(o){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(o).replace(/[!'()~]|%20|%00/g,function(s){return r[s]})}function ir(o,r){this._pairs=[],o&&mn(o,this,r)}const Fi=ir.prototype;Fi.append=function(o,r){this._pairs.push([o,r])};Fi.toString=function(o){const r=o?function(s){return o.call(this,s,si)}:si;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function bc(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qi(o,r,s){if(!r)return o;const m=s&&s.encode||bc,y=s&&s.serialize;let c;if(y?c=y(r,s):c=q.isURLSearchParams(r)?r.toString():new ir(r,s).toString(m),c){const u=o.indexOf("#");u!==-1&&(o=o.slice(0,u)),o+=(o.indexOf("?")===-1?"?":"&")+c}return o}class wc{constructor(){this.handlers=[]}use(r,s,m){return this.handlers.push({fulfilled:r,rejected:s,synchronous:m?m.synchronous:!1,runWhen:m?m.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){q.forEach(this.handlers,function(s){s!==null&&r(s)})}}const li=wc,Wi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vc=typeof URLSearchParams<"u"?URLSearchParams:ir,Ec=typeof FormData<"u"?FormData:null,Sc=typeof Blob<"u"?Blob:null,Tc={isBrowser:!0,classes:{URLSearchParams:vc,FormData:Ec,Blob:Sc},protocols:["http","https","file","blob","url","data"]},Vi=typeof window<"u"&&typeof document<"u",kc=(o=>Vi&&["ReactNative","NativeScript","NS"].indexOf(o)<0)(typeof navigator<"u"&&navigator.product),Ac=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Cc=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Vi,hasStandardBrowserEnv:kc,hasStandardBrowserWebWorkerEnv:Ac},Symbol.toStringTag,{value:"Module"})),it={...Cc,...Tc};function xc(o,r){return mn(o,new it.classes.URLSearchParams,Object.assign({visitor:function(s,m,y,c){return it.isNode&&q.isBuffer(s)?(this.append(m,s.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},r))}function Lc(o){return q.matchAll(/\w+|\[(\w*)]/g,o).map(r=>r[0]==="[]"?"":r[1]||r[0])}function _c(o){const r={},s=Object.keys(o);let m;const y=s.length;let c;for(m=0;m<y;m++)c=s[m],r[c]=o[c];return r}function zi(o){function r(s,m,y,c){let u=s[c++];const f=Number.isFinite(+u),b=c>=s.length;return u=!u&&q.isArray(y)?y.length:u,b?(q.hasOwnProp(y,u)?y[u]=[y[u],m]:y[u]=m,!f):((!y[u]||!q.isObject(y[u]))&&(y[u]=[]),r(s,m,y[u],c)&&q.isArray(y[u])&&(y[u]=_c(y[u])),!f)}if(q.isFormData(o)&&q.isFunction(o.entries)){const s={};return q.forEachEntry(o,(m,y)=>{r(Lc(m),y,s,0)}),s}return null}function Mc(o,r,s){if(q.isString(o))try{return(r||JSON.parse)(o),q.trim(o)}catch(m){if(m.name!=="SyntaxError")throw m}return(s||JSON.stringify)(o)}const ar={transitional:Wi,adapter:["xhr","http"],transformRequest:[function(o,r){const s=r.getContentType()||"",m=s.indexOf("application/json")>-1,y=q.isObject(o);if(y&&q.isHTMLForm(o)&&(o=new FormData(o)),q.isFormData(o))return m&&m?JSON.stringify(zi(o)):o;if(q.isArrayBuffer(o)||q.isBuffer(o)||q.isStream(o)||q.isFile(o)||q.isBlob(o))return o;if(q.isArrayBufferView(o))return o.buffer;if(q.isURLSearchParams(o))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let c;if(y){if(s.indexOf("application/x-www-form-urlencoded")>-1)return xc(o,this.formSerializer).toString();if((c=q.isFileList(o))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return mn(c?{"files[]":o}:o,u&&new u,this.formSerializer)}}return y||m?(r.setContentType("application/json",!1),Mc(o)):o}],transformResponse:[function(o){const r=this.transitional||ar.transitional,s=r&&r.forcedJSONParsing,m=this.responseType==="json";if(o&&q.isString(o)&&(s&&!this.responseType||m)){const y=!(r&&r.silentJSONParsing)&&m;try{return JSON.parse(o)}catch(c){if(y)throw c.name==="SyntaxError"?Se.from(c,Se.ERR_BAD_RESPONSE,this,null,this.response):c}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:it.classes.FormData,Blob:it.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],o=>{ar.headers[o]={}});const or=ar,Oc=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Dc=o=>{const r={};let s,m,y;return o&&o.split(`
`).forEach(function(c){y=c.indexOf(":"),s=c.substring(0,y).trim().toLowerCase(),m=c.substring(y+1).trim(),!(!s||r[s]&&Oc[s])&&(s==="set-cookie"?r[s]?r[s].push(m):r[s]=[m]:r[s]=r[s]?r[s]+", "+m:m)}),r},ci=Symbol("internals");function qt(o){return o&&String(o).trim().toLowerCase()}function ln(o){return o===!1||o==null?o:q.isArray(o)?o.map(ln):String(o)}function Pc(o){const r=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let m;for(;m=s.exec(o);)r[m[1]]=m[2];return r}const Rc=o=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(o.trim());function Un(o,r,s,m,y){if(q.isFunction(m))return m.call(this,r,s);if(y&&(r=s),!!q.isString(r)){if(q.isString(m))return r.indexOf(m)!==-1;if(q.isRegExp(m))return m.test(r)}}function Hc(o){return o.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,s,m)=>s.toUpperCase()+m)}function Bc(o,r){const s=q.toCamelCase(" "+r);["get","set","has"].forEach(m=>{Object.defineProperty(o,m+s,{value:function(y,c,u){return this[m].call(this,r,y,c,u)},configurable:!0})})}let gn=class{constructor(o){o&&this.set(o)}set(o,r,s){const m=this;function y(u,f,b){const v=qt(f);if(!v)throw new Error("header name must be a non-empty string");const d=q.findKey(m,v);(!d||m[d]===void 0||b===!0||b===void 0&&m[d]!==!1)&&(m[d||f]=ln(u))}const c=(u,f)=>q.forEach(u,(b,v)=>y(b,v,f));return q.isPlainObject(o)||o instanceof this.constructor?c(o,r):q.isString(o)&&(o=o.trim())&&!Rc(o)?c(Dc(o),r):o!=null&&y(r,o,s),this}get(o,r){if(o=qt(o),o){const s=q.findKey(this,o);if(s){const m=this[s];if(!r)return m;if(r===!0)return Pc(m);if(q.isFunction(r))return r.call(this,m,s);if(q.isRegExp(r))return r.exec(m);throw new TypeError("parser must be boolean|regexp|function")}}}has(o,r){if(o=qt(o),o){const s=q.findKey(this,o);return!!(s&&this[s]!==void 0&&(!r||Un(this,this[s],s,r)))}return!1}delete(o,r){const s=this;let m=!1;function y(c){if(c=qt(c),c){const u=q.findKey(s,c);u&&(!r||Un(s,s[u],u,r))&&(delete s[u],m=!0)}}return q.isArray(o)?o.forEach(y):y(o),m}clear(o){const r=Object.keys(this);let s=r.length,m=!1;for(;s--;){const y=r[s];(!o||Un(this,this[y],y,o,!0))&&(delete this[y],m=!0)}return m}normalize(o){const r=this,s={};return q.forEach(this,(m,y)=>{const c=q.findKey(s,y);if(c){r[c]=ln(m),delete r[y];return}const u=o?Hc(y):String(y).trim();u!==y&&delete r[y],r[u]=ln(m),s[u]=!0}),this}concat(...o){return this.constructor.concat(this,...o)}toJSON(o){const r=Object.create(null);return q.forEach(this,(s,m)=>{s!=null&&s!==!1&&(r[m]=o&&q.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([o,r])=>o+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(o){return o instanceof this?o:new this(o)}static concat(o,...r){const s=new this(o);return r.forEach(m=>s.set(m)),s}static accessor(o){const r=(this[ci]=this[ci]={accessors:{}}).accessors,s=this.prototype;function m(y){const c=qt(y);r[c]||(Bc(s,y),r[c]=!0)}return q.isArray(o)?o.forEach(m):m(o),this}};gn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(gn.prototype,({value:o},r)=>{let s=r[0].toUpperCase()+r.slice(1);return{get:()=>o,set(m){this[s]=m}}});q.freezeMethods(gn);const ft=gn;function Fn(o,r){const s=this||or,m=r||s,y=ft.from(m.headers);let c=m.data;return q.forEach(o,function(u){c=u.call(s,c,y.normalize(),r?r.status:void 0)}),y.normalize(),c}function Ki(o){return!!(o&&o.__CANCEL__)}function Gt(o,r,s){Se.call(this,o??"canceled",Se.ERR_CANCELED,r,s),this.name="CanceledError"}q.inherits(Gt,Se,{__CANCEL__:!0});function Nc(o,r,s){const m=s.config.validateStatus;!s.status||!m||m(s.status)?o(s):r(new Se("Request failed with status code "+s.status,[Se.ERR_BAD_REQUEST,Se.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}const Ic=it.hasStandardBrowserEnv?{write(o,r,s,m,y,c){const u=[o+"="+encodeURIComponent(r)];q.isNumber(s)&&u.push("expires="+new Date(s).toGMTString()),q.isString(m)&&u.push("path="+m),q.isString(y)&&u.push("domain="+y),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read(o){const r=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(o){this.write(o,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function jc(o){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(o)}function Uc(o,r){return r?o.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):o}function Gi(o,r){return o&&!jc(r)?Uc(o,r):r}const Fc=it.hasStandardBrowserEnv?function(){const o=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let s;function m(y){let c=y;return o&&(r.setAttribute("href",c),c=r.href),r.setAttribute("href",c),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=m(window.location.href),function(y){const c=q.isString(y)?m(y):y;return c.protocol===s.protocol&&c.host===s.host}}():function(){return function(){return!0}}();function qc(o){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(o);return r&&r[1]||""}function Wc(o,r){o=o||10;const s=new Array(o),m=new Array(o);let y=0,c=0,u;return r=r!==void 0?r:1e3,function(f){const b=Date.now(),v=m[c];u||(u=b),s[y]=f,m[y]=b;let d=c,k=0;for(;d!==y;)k+=s[d++],d=d%o;if(y=(y+1)%o,y===c&&(c=(c+1)%o),b-u<r)return;const C=v&&b-v;return C?Math.round(k*1e3/C):void 0}}function ui(o,r){let s=0;const m=Wc(50,250);return y=>{const c=y.loaded,u=y.lengthComputable?y.total:void 0,f=c-s,b=m(f),v=c<=u;s=c;const d={loaded:c,total:u,progress:u?c/u:void 0,bytes:f,rate:b||void 0,estimated:b&&u&&v?(u-c)/b:void 0,event:y};d[r?"download":"upload"]=!0,o(d)}}const Vc=typeof XMLHttpRequest<"u",zc=Vc&&function(o){return new Promise(function(r,s){let m=o.data;const y=ft.from(o.headers).normalize();let{responseType:c,withXSRFToken:u}=o,f;function b(){o.cancelToken&&o.cancelToken.unsubscribe(f),o.signal&&o.signal.removeEventListener("abort",f)}let v;if(q.isFormData(m)){if(it.hasStandardBrowserEnv||it.hasStandardBrowserWebWorkerEnv)y.setContentType(!1);else if((v=y.getContentType())!==!1){const[L,...w]=v?v.split(";").map(O=>O.trim()).filter(Boolean):[];y.setContentType([L||"multipart/form-data",...w].join("; "))}}let d=new XMLHttpRequest;if(o.auth){const L=o.auth.username||"",w=o.auth.password?unescape(encodeURIComponent(o.auth.password)):"";y.set("Authorization","Basic "+btoa(L+":"+w))}const k=Gi(o.baseURL,o.url);d.open(o.method.toUpperCase(),qi(k,o.params,o.paramsSerializer),!0),d.timeout=o.timeout;function C(){if(!d)return;const L=ft.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),w={data:!c||c==="text"||c==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:L,config:o,request:d};Nc(function(O){r(O),b()},function(O){s(O),b()},w),d=null}if("onloadend"in d?d.onloadend=C:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(C)},d.onabort=function(){d&&(s(new Se("Request aborted",Se.ECONNABORTED,o,d)),d=null)},d.onerror=function(){s(new Se("Network Error",Se.ERR_NETWORK,o,d)),d=null},d.ontimeout=function(){let L=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const w=o.transitional||Wi;o.timeoutErrorMessage&&(L=o.timeoutErrorMessage),s(new Se(L,w.clarifyTimeoutError?Se.ETIMEDOUT:Se.ECONNABORTED,o,d)),d=null},it.hasStandardBrowserEnv&&(u&&q.isFunction(u)&&(u=u(o)),u||u!==!1&&Fc(k))){const L=o.xsrfHeaderName&&o.xsrfCookieName&&Ic.read(o.xsrfCookieName);L&&y.set(o.xsrfHeaderName,L)}m===void 0&&y.setContentType(null),"setRequestHeader"in d&&q.forEach(y.toJSON(),function(L,w){d.setRequestHeader(w,L)}),q.isUndefined(o.withCredentials)||(d.withCredentials=!!o.withCredentials),c&&c!=="json"&&(d.responseType=o.responseType),typeof o.onDownloadProgress=="function"&&d.addEventListener("progress",ui(o.onDownloadProgress,!0)),typeof o.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",ui(o.onUploadProgress)),(o.cancelToken||o.signal)&&(f=L=>{d&&(s(!L||L.type?new Gt(null,o,d):L),d.abort(),d=null)},o.cancelToken&&o.cancelToken.subscribe(f),o.signal&&(o.signal.aborted?f():o.signal.addEventListener("abort",f)));const x=qc(k);if(x&&it.protocols.indexOf(x)===-1){s(new Se("Unsupported protocol "+x+":",Se.ERR_BAD_REQUEST,o));return}d.send(m||null)})},Jn={http:mc,xhr:zc};q.forEach(Jn,(o,r)=>{if(o){try{Object.defineProperty(o,"name",{value:r})}catch{}Object.defineProperty(o,"adapterName",{value:r})}});const fi=o=>`- ${o}`,Kc=o=>q.isFunction(o)||o===null||o===!1,Ji={getAdapter:o=>{o=q.isArray(o)?o:[o];const{length:r}=o;let s,m;const y={};for(let c=0;c<r;c++){s=o[c];let u;if(m=s,!Kc(s)&&(m=Jn[(u=String(s)).toLowerCase()],m===void 0))throw new Se(`Unknown adapter '${u}'`);if(m)break;y[u||"#"+c]=m}if(!m){const c=Object.entries(y).map(([f,b])=>`adapter ${f} `+(b===!1?"is not supported by the environment":"is not available in the build"));let u=r?c.length>1?`since :
`+c.map(fi).join(`
`):" "+fi(c[0]):"as no adapter specified";throw new Se("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return m},adapters:Jn};function qn(o){if(o.cancelToken&&o.cancelToken.throwIfRequested(),o.signal&&o.signal.aborted)throw new Gt(null,o)}function pi(o){return qn(o),o.headers=ft.from(o.headers),o.data=Fn.call(o,o.transformRequest),["post","put","patch"].indexOf(o.method)!==-1&&o.headers.setContentType("application/x-www-form-urlencoded",!1),Ji.getAdapter(o.adapter||or.adapter)(o).then(function(r){return qn(o),r.data=Fn.call(o,o.transformResponse,r),r.headers=ft.from(r.headers),r},function(r){return Ki(r)||(qn(o),r&&r.response&&(r.response.data=Fn.call(o,o.transformResponse,r.response),r.response.headers=ft.from(r.response.headers))),Promise.reject(r)})}const di=o=>o instanceof ft?o.toJSON():o;function Dt(o,r){r=r||{};const s={};function m(v,d,k){return q.isPlainObject(v)&&q.isPlainObject(d)?q.merge.call({caseless:k},v,d):q.isPlainObject(d)?q.merge({},d):q.isArray(d)?d.slice():d}function y(v,d,k){if(q.isUndefined(d)){if(!q.isUndefined(v))return m(void 0,v,k)}else return m(v,d,k)}function c(v,d){if(!q.isUndefined(d))return m(void 0,d)}function u(v,d){if(q.isUndefined(d)){if(!q.isUndefined(v))return m(void 0,v)}else return m(void 0,d)}function f(v,d,k){if(k in r)return m(v,d);if(k in o)return m(void 0,v)}const b={url:c,method:c,data:c,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(v,d)=>y(di(v),di(d),!0)};return q.forEach(Object.keys(Object.assign({},o,r)),function(v){const d=b[v]||y,k=d(o[v],r[v],v);q.isUndefined(k)&&d!==f||(s[v]=k)}),s}const Zi="1.6.2",sr={};["object","boolean","number","function","string","symbol"].forEach((o,r)=>{sr[o]=function(s){return typeof s===o||"a"+(r<1?"n ":" ")+o}});const hi={};sr.transitional=function(o,r,s){function m(y,c){return"[Axios v"+Zi+"] Transitional option '"+y+"'"+c+(s?". "+s:"")}return(y,c,u)=>{if(o===!1)throw new Se(m(c," has been removed"+(r?" in "+r:"")),Se.ERR_DEPRECATED);return r&&!hi[c]&&(hi[c]=!0,console.warn(m(c," has been deprecated since v"+r+" and will be removed in the near future"))),o?o(y,c,u):!0}};function Gc(o,r,s){if(typeof o!="object")throw new Se("options must be an object",Se.ERR_BAD_OPTION_VALUE);const m=Object.keys(o);let y=m.length;for(;y-- >0;){const c=m[y],u=r[c];if(u){const f=o[c],b=f===void 0||u(f,c,o);if(b!==!0)throw new Se("option "+c+" must be "+b,Se.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Se("Unknown option "+c,Se.ERR_BAD_OPTION)}}const Zn={assertOptions:Gc,validators:sr},mt=Zn.validators;let un=class{constructor(o){this.defaults=o,this.interceptors={request:new li,response:new li}}request(o,r){typeof o=="string"?(r=r||{},r.url=o):r=o||{},r=Dt(this.defaults,r);const{transitional:s,paramsSerializer:m,headers:y}=r;s!==void 0&&Zn.assertOptions(s,{silentJSONParsing:mt.transitional(mt.boolean),forcedJSONParsing:mt.transitional(mt.boolean),clarifyTimeoutError:mt.transitional(mt.boolean)},!1),m!=null&&(q.isFunction(m)?r.paramsSerializer={serialize:m}:Zn.assertOptions(m,{encode:mt.function,serialize:mt.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let c=y&&q.merge(y.common,y[r.method]);y&&q.forEach(["delete","get","head","post","put","patch","common"],x=>{delete y[x]}),r.headers=ft.concat(c,y);const u=[];let f=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(f=f&&x.synchronous,u.unshift(x.fulfilled,x.rejected))});const b=[];this.interceptors.response.forEach(function(x){b.push(x.fulfilled,x.rejected)});let v,d=0,k;if(!f){const x=[pi.bind(this),void 0];for(x.unshift.apply(x,u),x.push.apply(x,b),k=x.length,v=Promise.resolve(r);d<k;)v=v.then(x[d++],x[d++]);return v}k=u.length;let C=r;for(d=0;d<k;){const x=u[d++],L=u[d++];try{C=x(C)}catch(w){L.call(this,w);break}}try{v=pi.call(this,C)}catch(x){return Promise.reject(x)}for(d=0,k=b.length;d<k;)v=v.then(b[d++],b[d++]);return v}getUri(o){o=Dt(this.defaults,o);const r=Gi(o.baseURL,o.url);return qi(r,o.params,o.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(o){un.prototype[o]=function(r,s){return this.request(Dt(s||{},{method:o,url:r,data:(s||{}).data}))}});q.forEach(["post","put","patch"],function(o){function r(s){return function(m,y,c){return this.request(Dt(c||{},{method:o,headers:s?{"Content-Type":"multipart/form-data"}:{},url:m,data:y}))}}un.prototype[o]=r(),un.prototype[o+"Form"]=r(!0)});const cn=un;let Jc=class Xi{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(y){s=y});const m=this;this.promise.then(y=>{if(!m._listeners)return;let c=m._listeners.length;for(;c-- >0;)m._listeners[c](y);m._listeners=null}),this.promise.then=y=>{let c;const u=new Promise(f=>{m.subscribe(f),c=f}).then(y);return u.cancel=function(){m.unsubscribe(c)},u},r(function(y,c,u){m.reason||(m.reason=new Gt(y,c,u),s(m.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const s=this._listeners.indexOf(r);s!==-1&&this._listeners.splice(s,1)}static source(){let r;return{token:new Xi(function(s){r=s}),cancel:r}}};const Zc=Jc;function Xc(o){return function(r){return o.apply(null,r)}}function Yc(o){return q.isObject(o)&&o.isAxiosError===!0}const Xn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xn).forEach(([o,r])=>{Xn[r]=o});const Qc=Xn;function Yi(o){const r=new cn(o),s=Mi(cn.prototype.request,r);return q.extend(s,cn.prototype,r,{allOwnKeys:!0}),q.extend(s,r,null,{allOwnKeys:!0}),s.create=function(m){return Yi(Dt(o,m))},s}const Ne=Yi(or);Ne.Axios=cn;Ne.CanceledError=Gt;Ne.CancelToken=Zc;Ne.isCancel=Ki;Ne.VERSION=Zi;Ne.toFormData=mn;Ne.AxiosError=Se;Ne.Cancel=Ne.CanceledError;Ne.all=function(o){return Promise.all(o)};Ne.spread=Xc;Ne.isAxiosError=Yc;Ne.mergeConfig=Dt;Ne.AxiosHeaders=ft;Ne.formToJSON=o=>zi(q.isHTMLForm(o)?new FormData(o):o);Ne.getAdapter=Ji.getAdapter;Ne.HttpStatusCode=Qc;Ne.default=Ne;const Qi=Ne,{Axios:ru,AxiosError:iu,CanceledError:au,isCancel:ou,CancelToken:su,VERSION:lu,all:cu,Cancel:uu,isAxiosError:fu,spread:pu,toFormData:du,AxiosHeaders:hu,HttpStatusCode:on,formToJSON:mu,getAdapter:gu,mergeConfig:yu}=Qi;var Mt=null;typeof WebSocket<"u"?Mt=WebSocket:typeof MozWebSocket<"u"?Mt=MozWebSocket:typeof global<"u"?Mt=global.WebSocket||global.MozWebSocket:typeof window<"u"?Mt=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Mt=self.WebSocket||self.MozWebSocket);const $c=Mt,Wn={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};var mi,gi,yi,bi,wi;const Yn=class B{constructor(r={},s="xhr"){ut(this,"_type","xhr"),ut(this,"_baseURL",((gi=(mi=globalThis.top)==null?void 0:mi.document)==null?void 0:gi.baseURI)??((bi=(yi=globalThis.parent)==null?void 0:yi.document)==null?void 0:bi.baseURI)??((wi=globalThis.location)==null?void 0:wi.origin)??Wn.SIYUAN_DEFAULT_BASE_URL),ut(this,"_token",Wn.SIYUAN_DEFAULT_TOKEN),ut(this,"_axios",Qi.create({baseURL:this._baseURL,timeout:Wn.REQUEST_TIMEOUT,headers:{Authorization:`Token ${this._token}`}})),ut(this,"_fetch",Dl.create({baseURL:this._baseURL,headers:{Authorization:`Token ${this._token}`}})),this._setClientType(s),this._updateOptions(r,s)}_setClientType(r){this._type=r}_updateOptions(r,s=this._type){switch(this._token=r.token??this._token,this._baseURL=r.baseURL??this._baseURL,s){case"fetch":const m=r;if(m.token){const y="Authorization",c=`Token ${r.token}`;Array.isArray(m.headers)?m.headers.push([y,c]):m.headers instanceof Headers?m.headers.set(y,c):typeof m.headers=="object"?m.headers[y]=c:m.headers={[y]:c},delete r.token}this._fetch=this._fetch.create(m);break;case"xhr":default:for(const[y,c]of Object.entries(r))switch(y){case"token":this._axios.defaults.headers.Authorization=`Token ${this._token}`;break;default:this._axios.defaults[y]=c;break}break}this._baseURL=r.baseURL??this._baseURL}broadcast(r,s,m){const y=(m==null?void 0:m.baseURL)??this._baseURL,c=(m==null?void 0:m.token)??this._token,u=new URLSearchParams(r);u.set("token",c);const f=new URL(y);return f.protocol=f.protocol.replace(/^http/,"ws"),f.pathname=f.pathname.endsWith("/")?`${f.pathname}${B.ws.broadcast.pathname.substring(1)}`:`${f.pathname}${B.ws.broadcast.pathname}`,f.search=u.toString(),new $c(f,s)}async upload(r,s){const m=new FormData;return m.append("assetsDirPath",r.assetsDirPath??"/assets/"),r.files.forEach(y=>m.append("file[]",y)),await this._request(B.api.asset.upload.pathname,B.api.asset.upload.method,m,s)}async getBlockAttrs(r,s){return await this._request(B.api.attr.getBlockAttrs.pathname,B.api.attr.getBlockAttrs.method,r,s)}async getBookmarkLabels(r){return await this._request(B.api.attr.getBookmarkLabels.pathname,B.api.attr.getBookmarkLabels.method,void 0,r)}async setBlockAttrs(r,s){return await this._request(B.api.attr.setBlockAttrs.pathname,B.api.attr.setBlockAttrs.method,r,s)}async appendBlock(r,s){return await this._request(B.api.block.appendBlock.pathname,B.api.block.appendBlock.method,r,s)}async deleteBlock(r,s){return await this._request(B.api.block.deleteBlock.pathname,B.api.block.deleteBlock.method,r,s)}async getBlockBreadcrumb(r,s){return await this._request(B.api.block.getBlockBreadcrumb.pathname,B.api.block.getBlockBreadcrumb.method,r,s)}async getBlockDOM(r,s){return await this._request(B.api.block.getBlockDOM.pathname,B.api.block.getBlockDOM.method,r,s)}async getBlockInfo(r,s){return await this._request(B.api.block.getBlockInfo.pathname,B.api.block.getBlockInfo.method,r,s)}async getBlockKramdown(r,s){return await this._request(B.api.block.getBlockKramdown.pathname,B.api.block.getBlockKramdown.method,r,s)}async getChildBlocks(r,s){return await this._request(B.api.block.getChildBlocks.pathname,B.api.block.getChildBlocks.method,r,s)}async getDocInfo(r,s){return await this._request(B.api.block.getDocInfo.pathname,B.api.block.getDocInfo.method,r,s)}async insertBlock(r,s){return await this._request(B.api.block.insertBlock.pathname,B.api.block.insertBlock.method,r,s)}async moveBlock(r,s){return await this._request(B.api.block.moveBlock.pathname,B.api.block.moveBlock.method,r,s)}async prependBlock(r,s){return await this._request(B.api.block.prependBlock.pathname,B.api.block.prependBlock.method,r,s)}async transferBlockRef(r,s){return await this._request(B.api.block.transferBlockRef.pathname,B.api.block.transferBlockRef.method,r,s)}async updateBlock(r,s){return await this._request(B.api.block.updateBlock.pathname,B.api.block.updateBlock.method,r,s)}async channels(r){return await this._request(B.api.broadcast.channels.pathname,B.api.broadcast.channels.method,void 0,r)}async getChannelInfo(r,s){return await this._request(B.api.broadcast.getChannelInfo.pathname,B.api.broadcast.getChannelInfo.method,r,s)}async postMessage(r,s){return await this._request(B.api.broadcast.postMessage.pathname,B.api.broadcast.postMessage.method,r,s)}async pandoc(r,s){return await this._request(B.api.convert.pandoc.pathname,B.api.convert.pandoc.method,r,s)}async exportResources(r,s){return await this._request(B.api.export.exportResources.pathname,B.api.export.exportResources.method,r,s)}async exportMdContent(r,s){return await this._request(B.api.export.exportMdContent.pathname,B.api.export.exportMdContent.method,r,s)}async getFile(r,s="text",m){return await this._request(B.api.file.getFile.pathname,B.api.file.getFile.method,r,m,!1,s)}async putFile(r,s){r.file!==void 0&&!(r.file instanceof File)&&(r.file=new File([r.file],r.path.split("/").pop()));const m=new FormData;for(const[y,c]of Object.entries(r))r.hasOwnProperty(y)&&(c instanceof Blob?m.append(y,c):m.append(y,String(c)));return await this._request(B.api.file.putFile.pathname,B.api.file.putFile.method,m,s)}async readDir(r,s){return await this._request(B.api.file.readDir.pathname,B.api.file.readDir.method,r,s)}async removeFile(r,s){return await this._request(B.api.file.removeFile.pathname,B.api.file.removeFile.method,r,s)}async renameFile(r,s){return await this._request(B.api.file.renameFile.pathname,B.api.file.renameFile.method,r,s)}async createDocWithMd(r,s){return await this._request(B.api.filetree.createDocWithMd.pathname,B.api.filetree.createDocWithMd.method,r,s)}async getDoc(r,s){return await this._request(B.api.filetree.getDoc.pathname,B.api.filetree.getDoc.method,r,s)}async getHPathByID(r,s){return await this._request(B.api.filetree.getHPathByID.pathname,B.api.filetree.getHPathByID.method,r,s)}async getHPathByPath(r,s){return await this._request(B.api.filetree.getHPathByPath.pathname,B.api.filetree.getHPathByPath.method,r,s)}async getIDsByHPath(r,s){return await this._request(B.api.filetree.getIDsByHPath.pathname,B.api.filetree.getIDsByHPath.method,r,s)}async listDocsByPath(r,s){return await this._request(B.api.filetree.listDocsByPath.pathname,B.api.filetree.listDocsByPath.method,r,s)}async moveDocs(r,s){return await this._request(B.api.filetree.moveDocs.pathname,B.api.filetree.moveDocs.method,r,s)}async removeDoc(r,s){return await this._request(B.api.filetree.removeDoc.pathname,B.api.filetree.removeDoc.method,r,s)}async renameDoc(r,s){return await this._request(B.api.filetree.renameDoc.pathname,B.api.filetree.renameDoc.method,r,s)}async searchDocs(r,s){return await this._request(B.api.filetree.searchDocs.pathname,B.api.filetree.searchDocs.method,r,s)}async getDocHistoryContent(r,s){return await this._request(B.api.history.getDocHistoryContent.pathname,B.api.history.getDocHistoryContent.method,r,s)}async getHistoryItems(r,s){return await this._request(B.api.history.getHistoryItems.pathname,B.api.history.getHistoryItems.method,r,s)}async getShorthand(r,s){return await this._request(B.api.inbox.getShorthand.pathname,B.api.inbox.getShorthand.method,r,s)}async forwardProxy(r,s){return await this._request(B.api.network.forwardProxy.pathname,B.api.network.forwardProxy.method,r,s)}async closeNotebook(r,s){return await this._request(B.api.notebook.closeNotebook.pathname,B.api.notebook.closeNotebook.method,r,s)}async createNotebook(r,s){return await this._request(B.api.notebook.createNotebook.pathname,B.api.notebook.createNotebook.method,r,s)}async getNotebookConf(r,s){return await this._request(B.api.notebook.getNotebookConf.pathname,B.api.notebook.getNotebookConf.method,r,s)}async lsNotebooks(r){return await this._request(B.api.notebook.lsNotebooks.pathname,B.api.notebook.lsNotebooks.method,void 0,r)}async openNotebook(r,s){return await this._request(B.api.notebook.openNotebook.pathname,B.api.notebook.openNotebook.method,r,s)}async removeNotebook(r,s){return await this._request(B.api.notebook.removeNotebook.pathname,B.api.notebook.removeNotebook.method,r,s)}async renameNotebook(r,s){return await this._request(B.api.notebook.renameNotebook.pathname,B.api.notebook.renameNotebook.method,r,s)}async setNotebookConf(r,s){return await this._request(B.api.notebook.setNotebookConf.pathname,B.api.notebook.setNotebookConf.method,r,s)}async pushErrMsg(r,s){return await this._request(B.api.notification.pushErrMsg.pathname,B.api.notification.pushErrMsg.method,r,s)}async pushMsg(r,s){return await this._request(B.api.notification.pushMsg.pathname,B.api.notification.pushMsg.method,r,s)}async sql(r,s){return await this._request(B.api.query.sql.pathname,B.api.query.sql.method,r,s)}async openRepoSnapshotDoc(r,s){return await this._request(B.api.repo.openRepoSnapshotDoc.pathname,B.api.repo.openRepoSnapshotDoc.method,r,s)}async fullTextSearchBlock(r,s){return await this._request(B.api.search.fullTextSearchBlock.pathname,B.api.search.fullTextSearchBlock.method,r,s)}async getSnippet(r,s){return await this._request(B.api.snippet.getSnippet.pathname,B.api.snippet.getSnippet.method,r,s)}async setSnippet(r,s){return await this._request(B.api.snippet.setSnippet.pathname,B.api.snippet.setSnippet.method,r,s)}async getLocalStorage(r){return await this._request(B.api.storage.getLocalStorage.pathname,B.api.storage.getLocalStorage.method,void 0,r)}async getRecentDocs(r){return await this._request(B.api.storage.getRecentDocs.pathname,B.api.storage.getRecentDocs.method,void 0,r)}async setLocalStorage(r,s){return await this._request(B.api.storage.setLocalStorage.pathname,B.api.storage.setLocalStorage.method,r,s)}async setLocalStorageVal(r,s){return await this._request(B.api.storage.setLocalStorageVal.pathname,B.api.storage.setLocalStorageVal.method,r,s)}async bootProgress(r){return await this._request(B.api.system.bootProgress.pathname,B.api.system.bootProgress.method,void 0,r)}async getConf(r){return await this._request(B.api.system.getConf.pathname,B.api.system.getConf.method,void 0,r)}async currentTime(r){return await this._request(B.api.system.currentTime.pathname,B.api.system.currentTime.method,void 0,r)}async version(r){return await this._request(B.api.system.version.pathname,B.api.system.version.method,void 0,r)}async render(r,s){return await this._request(B.api.template.render.pathname,B.api.template.render.method,r,s)}async renderSprig(r,s){return await this._request(B.api.template.renderSprig.pathname,B.api.template.renderSprig.method,r,s)}async _request(r,s,m,y,c=!0,u="json"){try{switch((y==null?void 0:y.type)??this._type){case"fetch":{const f=y==null?void 0:y.options;u=(()=>{switch(u){case"arraybuffer":return"arrayBuffer";case"document":return"text";default:return u}})();const b=await this._fetch(r,{method:s,body:m,responseType:u,onResponse:async v=>{switch(v.response.status){case on.Ok:switch(u){case"blob":v.response._data.contentType=v.response.headers.get("content-type");break;default:break}break;case on.Accepted:r===B.api.file.getFile.pathname&&this._parseFetchResponse(v.response._data);break;default:break}},...f});return c&&u==="json"&&typeof b=="object"?this._parseFetchResponse(b):b}case"xhr":default:{const f=y==null?void 0:y.options;u=(()=>{switch(u){case"arrayBuffer":return"arraybuffer";default:return u}})();const b=await this._axios.request({url:r,method:s,data:m,responseType:u,...f});switch(b.status){case on.Ok:if(c&&u==="json"&&typeof b.data=="object")return this._parseAxiosResponse(b);switch(u){case"blob":b.data.contentType=b.headers.getContentType();break;default:break}return b.data;case on.Accepted:return r===B.api.file.getFile.pathname?this._parseAxiosResponse(b):b.data;default:throw new Pl(b)}}}}catch(f){throw f}}_parseFetchResponse(r){if(r.code===0)return r;throw new ni(r)}_parseAxiosResponse(r){if(r.data.code===0)return r.data;throw new ni(r.data,r)}};ut(Yn,"ws",{broadcast:{pathname:"/ws/broadcast"}}),ut(Yn,"api",{asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getBlockDOM:{pathname:"/api/block/getBlockDOM",method:"POST"},getBlockInfo:{pathname:"/api/block/getBlockInfo",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"}},broadcast:{channels:{pathname:"/api/broadcast/channels",method:"GET"},getChannelInfo:{pathname:"/api/broadcast/getChannelInfo",method:"POST"},postMessage:{pathname:"/api/broadcast/postMessage",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"},exportResources:{pathname:"/api/export/exportResources",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getDoc:{pathname:"/api/filetree/getDoc",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},getIDsByHPath:{pathname:"/api/filetree/getIDsByHPath",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},history:{getDocHistoryContent:{pathname:"/api/history/getDocHistoryContent",method:"POST"},getHistoryItems:{pathname:"/api/history/getHistoryItems",method:"POST"}},inbox:{getShorthand:{pathname:"/api/inbox/getShorthand",method:"POST"}},network:{forwardProxy:{pathname:"/api/network/forwardProxy",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},repo:{openRepoSnapshotDoc:{pathname:"/api/repo/openRepoSnapshotDoc",method:"POST"}},search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},snippet:{getSnippet:{pathname:"/api/snippet/getSnippet",method:"POST"},setSnippet:{pathname:"/api/snippet/setSnippet",method:"POST"}},storage:{getLocalStorage:{pathname:"/api/storage/getLocalStorage",method:"POST"},getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"},setLocalStorage:{pathname:"/api/storage/setLocalStorage",method:"POST"},setLocalStorageVal:{pathname:"/api/storage/setLocalStorageVal",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"},version:{pathname:"/api/system/version",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});let eu=Yn;const $i=new Map,ea="./../libs/vditor",lr=ts(globalThis.location.pathname,`/plugins/${Qn.name}/iframes/vditor.html`),ta=new Xo(`${Qn.name}-vditor-${(()=>{switch(!0){case $o:return"window";case Qo:return"iframe";case Yo:return"popup";default:return"unknow"}})()}`),na=new eu({baseURL:`${globalThis.location.origin}${lr}/`});var gt=new Ai({target:globalThis.document.body,props:{plugin:{name:Qn.name,i18n:Zo,logger:ta,client:na},src2url:$i,baseURL:ea,rootURL:lr}});const _t=new Is(()=>{_t.addEventListener("vditor-init",o=>{const{data:r}=o.data;gt&&gt.$destroy(),gt=new Ai({target:globalThis.document.body,props:{plugin:{name:r.name,i18n:r.i18n,logger:ta,client:na},src2url:$i,baseURL:ea,rootURL:lr,path:r.path,vditorID:r.vditorID,assetsDirPath:r.assetsDirPath,assetsUploadMode:r.assetsUploadMode,options:r.options,value:r.value,theme:r.theme,codeBlockThemeLight:r.codeBlockThemeLight,codeBlockThemeDark:r.codeBlockThemeDark,debug:r.debug}}),gt.$on("changed",s=>_t.changed(s.detail)),gt.$on("save",s=>_t.save(s.detail)),gt.$on("open-link",s=>_t.openLink(s.detail))}),_t.addEventListener("vditor-set",o=>{const{data:r}=o.data;gt&&gt.$set(r)}),_t.ready()});
