var I=Object.defineProperty;var z=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var c=(e,t,r)=>(z(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const H="monaco-editor",W="Zuoqiu Yingyi",U="https://github.com/Zuoqiu-Yingyi/siyuan-plugin-monaco-editor",B="0.2.1",V="2.10.10",q=["代码","代碼","程式碼","code","visual","studio","vscode","monaco","编辑器","編輯器","editor","vditor","文件","資料","file","文件夹","文件夾","資料夾","folder","管理","manage","资源管理器","資源管理器","explorer","markdown","所见即所得","所見即所得","wysiwyg","下载","下載","download","上传","上傳","upload"],G=["all"],Y=["desktop","desktop-window","browser-desktop"],K={default:"Integrated Edit Environment",zh_CN:"集成编辑环境",zh_CHT:"集成編輯環境"},X={default:"A file editing tool integrating <a href='https://microsoft.github.io/monaco-editor/'>Monaco Editor</a>.",zh_CN:"一个集成了 <a href='https://microsoft.github.io/monaco-editor/'>Monaco Editor</a> 的文件编辑工具。",zh_CHT:"一個集成了 <a href='https://microsoft.github.io/monaco-editor/'>Monaco Editor</a> 的文件編輯工具。"},Z={default:"README.md",zh_CN:"README_zh_CN.md",zh_CHT:"README_zh_CN.md"},J={openCollective:"",patreon:"",github:"",custom:["https://afdian.net/a/zuoqiu","https://ko-fi.com/zuoqiu"]},Xe={name:H,author:W,url:U,version:B,minAppVersion:V,keywords:q,backends:G,frontends:Y,displayName:K,description:X,readme:Z,funding:J},Q={fullscreen:{ariaLabel:"Fullscreen"},realTime:{ariaLabel:"Save changes in real time"},workspace:{text:"Workspace"}},ee="Integrated Edit Environment",te={collapse:{ariaLabel:"Collapse All Folder"},inline:{ariaLabel:`markdown: Edit standard markdown
kramdown: Inline elements use <span> tags`},kramdown:{ariaLabel:"Edit with kramdown"},refresh:{ariaLabel:"Save changes in real time"},title:"Code Edit"},re={action:{save:{label:"Save"},saveAs:{label:"Save As"},setModelLanguage:{label:"Set Editor Model Language"},toggleWordWrap:{label:"Toggle Word Wrap"}},tooltip:{siyuanBlockHyperlink:{label:"SiYuan block hyperlink"},siyuanBlockID:{label:"SiYuan block ID"},siyuanBlockReference:{label:"SiYuan block reference"}}},oe={count:{ariaLabel:"Number of Resources"},file:{ariaLabel:"File"},fold:{ariaLabel:"Collapse"},folder:{ariaLabel:"Folder"},lastUpdated:{text:"Last Updated"},menu:{ariaLabel:"Menu"},refresh:{ariaLabel:"Refresh Explorer"},symlink:{ariaLabel:"Symbolic Link"},title:"File Explorer",toggle:{ariaLabel:"Collapse/Expand"},tooltips:{paths:[["conf","Configuration directory"],["conf/appearance","Appearance directory"],["conf/appearance/boot","Boot window directory"],["conf/appearance/emojis","Emojis directory"],["conf/appearance/icons","Interface icons directory"],["conf/appearance/langs","Localization directory"],["conf/appearance/themes","Themes directory"],["conf/conf.json","Configuration file"],["conf/windowState.json","Window state file"],["data","Data directory"],["data/.siyuan","Metadata directory"],["data/.siyuan/filesys_status_check","File system status check temporary file directory"],["data/.siyuan/conf.json","Data directory state file"],["data/.siyuan/syncignore","Data snapshot ignore configuration file"],["data/assets","Resources file directory"],["data/assets/ocr-texts.json","Image OCR results"],["data/emojis","Custom emojis file directory"],["data/plugins","Plugins directory"],["data/public","Public file directory"],["data/snippets","Code snippets directory"],["data/snippets/conf.json","Code snippets list"],["data/storage","Data storage directory"],["data/storage/av","Attribute view directory"],["data/storage/petal","Plugin data directory"],["data/storage/petal/petals.json","Plugin status directory"],["data/storage/riff","Flashcard data directory"],["data/storage/criteria.json","Search configuration"],["data/storage/local.json","Local interface configuration"],["data/storage/recent-doc.json","Recently opened documents"],["data/templates","Template directory"],["data/widgets","Widgets directory"],["history","History data directory"],["repo","Data snapshot directory"],["temp","Temporary file directory"],["temp/blocktree","Content block structure index directory"],["temp/os","System information directory"],["temp/pandoc","Pandoc directory"],["temp/pandoc/bin","Pandoc executable file directory"],["temp/history.db","Historical document index database file"],["temp/history.db-shm","Historical document index database shared memory file"],["temp/history.db-wal","Historical document index database write-ahead log file"],["temp/siyuan.db","Content block index database file"],["temp/siyuan.db-shm","Content block index database shared memory file"],["temp/siyuan.db-wal","Content block index database write-ahead log file"],["temp/siyuan.log","Kernel log file"],[".lock","Workspace occupied flag"]],siyuanDoc:"Document file",siyuanDocCustomSort:"Document customized sort file",siyuanDocDir:"Document directory",siyuanNotebook:"Notebook directory",siyuanNotebookConfig:"Notebook configuration file",siyuanNotebookMetadataDir:"Notebook metadata directory"},unfold:{ariaLabel:"Expand"},workspace:{name:"Workspace"}},ae={charset:{label:"Character set",placeholder:"The name of the character set",text:"Open the file with encoding"},confirm:{placeholder:"The full path to the resource",text:"Warning: You are operating on a protected resource ${1} !<br/>Your subsequent activities may lead to data loss or damage!<br/><br/>If you want to continue the operation, please enter the complete path of the resource ${2} in the text box below",tips:{pleaseEnter:"Please enter the complete path of the resource",warn:"Are you sure you want to continue operating the resource ${1}?"},title:"⚠️ High-risk operation confirmation"},copy:{label:"Copy"},copyDownloadHyperlink:{label:"Copy Download Hyperlink"},copyEditHyperlink:{label:"Copy Edit Hyperlink"},copyExportHyperlink:{label:"Copy Export Hyperlink"},copyFullPath:{label:"Copy Absolute Path"},copyMarkdownHyperlink:{label:"Copy Markdown Hyperlink"},copyName:{label:"Copy Name"},copyPreviewHyperlink:{label:"Copy Preview Hyperlink"},copyReferencePath:{label:"Copy Reference Path"},copyRelativePath:{label:"Copy Relative Path"},copyURL:{label:"Copy URL"},delete:{label:"Delete"},deleteFile:{label:"Delete File",text:"Make sure you want to delete the file ${1} ?<br/>The complete path of the file is ${2}"},deleteFolder:{label:"Delete Folder",text:"Make sure you want to delete the folder ${1} ？<br/>The complete path of the folder is ${2}"},diffEdit:{label:"Compare and Edit"},diffView:{label:"Compare and View"},download:{label:"Download"},editAssetFile:{label:"Edit Asset File"},editLocalFile:{label:"Edit Local File"},export:{accelerator:"Export",label:"Export..."},exportFile:{label:"File Export",message:"File ${1} has exported to ${2}, does you reveal it in explorer?",title:"Export file ${1}"},exportFolder:{label:"Folder Export",message:"Folder ${1} has exported to ${2}, does you reveal it in explorer?",title:"Export folder ${1}"},import:{label:"Import"},importFile:{label:"Files Import...",title:"Import files to ${1}"},importFolder:{label:"Folders Import...",title:"Import folders to ${1}"},move:{text:"Move ${1}<br/>from ${2}<br/>to&ensp;&ensp;、 ${3}?",title:"Move ${1}"},new:{label:"New"},newFile:{label:"New File...",placeholder:"File name",text:"Create a new file in the folder ${1}",tips:{empty:"The file name cannot be empty",exist:"${2} already exists under folder ${1}, please enter a different name",invalid:"Name ${1} is an invalid file name, please enter a different name",normal:"Create a new file ${1} ?",pleaseEnter:"Please enter a file name"}},newFolder:{label:"New Folder...",placeholder:"Folder name",text:"Create a new folder in the folder ${1}",tips:{empty:"The folder name cannot be empty",exist:"${2} already exists under folder ${1}, please enter a different name",invalid:"Name ${1} is an invalid folder name, please enter a different name",normal:"Create a new folder ${1} ?",pleaseEnter:"Please enter a folder name"}},open:{label:"Open"},openByNewWindow:{label:"Open with New Window"},openFile:{label:"Open File"},openFileInEditor:{label:"Open File in Text Editor"},openFileInPreviewer:{label:"Open File in File Previewer"},openInNewTab:{label:"Open in New Tab"},openTabBackground:{label:"Open in background tab"},openTabBottom:{label:"Open Below the Tab"},openTabRight:{label:"Open Right the Tab"},openWithDefaultProgram:{label:"Open with Default Program"},refresh:{label:"Refresh"},refreshDirectory:{label:"Refresh the Directory"},refreshDirectoryDeeply:{label:"Refresh the Directory Deeply"},rename:{label:"Rename..."},renameFile:{label:"Rename File",placeholder:"File name",text:"Rename file ${1}",tips:{empty:"The file name cannot be empty",exist:"${2} already exists under folder ${1}, please enter a different name",invalid:"Name ${1} is an invalid file name, please enter a different name",normal:"Rename file ${1} to ${2}?",pleaseEnter:"Please enter a new file name",same:"The file name has not changed"}},renameFolder:{label:"Rename Folder",placeholder:"Folder name",text:"Create a new folder in the folder ${1}",tips:{empty:"The folder name cannot be empty",exist:"${2} already exists under folder ${1}, please enter a different name",invalid:"Name ${1} is an invalid folder name, please enter a different name",normal:"Rename folder ${1} to ${2}?",pleaseEnter:"Please enter a new folder name",same:"The folder name has not changed"}},revealInExplorer:{label:"Reveal In Explorer"},standard:{accelerator:"Standard"},upload:{label:"Upload",tips:{confirm:"Confirm",reUpload:"Retry",startUpload:"Upload",statusInfo:"Number of files uploaded: ${1}/${2} &emsp; Size of files uploaded: ${3}/${4} Byte"}},uploadFile:{label:"Files Upload..."},uploadFolder:{label:"Folders Upload..."},viewNetworkFile:{label:"View Network File"}},ne={binaryError:"The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding.",openAnyway:"Open Anyway?"},ie={editorSettings:{globalTab:{defaultEditor:{markdown:{description:"Set the default editor for opening <code class='fn__code'>*.md</code> files",options:{monaco:"Monaco Editor",vditor:"Vditor Editor"},title:"Default Editor for Markdown Files"}},title:"Global Settings"},monacoTab:{title:"Monaco Editor"},title:"Editor Settings",vditorTab:{assetsDirPath:{description:"Set the directory for saving resource files, the specific directory depends on the <code class='fn__code'>Resource File Saving Scheme</code> setting",title:"Resource File Saving Directory"},assetsUploadMode:{description:"Save resource files to a specific directory, the specific directory depends on the <code class='fn__code'>Resource File Saving Directory</code> setting.<br/><code class='fn__code'>Upload to data/assets directory</code>: Upload files to the <code class='fn__code'>workspace/data/assets</code> directory, the specific directory is specified by the <code class='fn__code'>Resource File Saving Directory</code> setting.<br/><code class='fn__code'>Use relative path to specify directory</code>: Upload files to the directory specified by the <code class='fn__code'>Resource File Saving Directory</code> setting, with the working directory being the current file directory.<br/><code class='fn__code'>Use absolute path to specify directory</code>: Upload files to the directory specified by the <code class='fn__code'>Resource File Saving Directory</code> setting, with the working directory being the workspace directory.",options:{absolute:"Use absolute path to specify directory",assets:"Upload to data/assets directory",relative:"Use relative path to specify directory"},title:"Resource File Saving Scheme"},title:"Vditor Editor"}},generalSettings:{editor:{description:"Enable text editor sidebar panel",title:"Text Editor"},explorer:{description:"Enable explorer sidebar panel",title:"Explorer"},reset:{description:"Reset all settings options to default (page will refresh after reset)",text:"Reset",title:"Reset Settings"},safeMode:{description:"Whether to disable dangerous operations under the important directory",title:"Safe Mode"},title:"General Settings"},menuSettings:{history1:{description:"Context menu for file history panel",title:"File History Menu"},history2:{description:"Context menu for document history panel",title:"Document History Menu"},shorthand:{description:"Context menu for shorthand collection",title:"Shorthand Menu"},snapshot:{description:"Context menu for snapshot panel",title:"Snapshot Panel Menu"},snippet:{description:"Context menu for code snippets",title:"Code Snippets Menu"},title:"Menu Settings"}},Ze={button:Q,displayName:ee,dock:te,editor:re,explorer:oe,menu:ae,message:ne,settings:ie},se=pe(),le=he(),ce=me();be();ye();function de(){return!!globalThis.require}function ue(){return!!globalThis.process}function fe(){var e,t;return!!((t=(e=globalThis.process)==null?void 0:e.versions)!=null&&t.hasOwnProperty("electron"))}function pe(){return ue()&&de()&&fe()}function he(){return globalThis.self!==globalThis.top}function me(){return!globalThis.opener}function be(){var e,t,r;return((r=(t=(e=globalThis.siyuan)==null?void 0:e.config)==null?void 0:t.appearance)==null?void 0:r.mode)===0}function ye(){var e,t,r;return((r=(t=(e=globalThis.siyuan)==null?void 0:e.config)==null?void 0:t.appearance)==null?void 0:r.mode)===1}class Je{constructor(t,r=!0){this.label=t,this.collapsed=r}stdout(t,r,...a){const o=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${t.name.toUpperCase()}\x1B[0m>`;if(this.collapsed?globalThis.console.groupCollapsed(o):globalThis.console.group(o),r)for(const n of a)Array.isArray(n)?t(...n):t(n);else t(...a);globalThis.console.trace(),globalThis.console.groupEnd()}dir(...t){this.stdout(globalThis.console.dir,!1,...t)}dirs(...t){this.stdout(globalThis.console.dir,!0,...t)}table(...t){this.stdout(globalThis.console.table,!1,...t)}tables(...t){this.stdout(globalThis.console.table,!0,...t)}debug(...t){this.stdout(globalThis.console.debug,!1,...t)}debugs(...t){this.stdout(globalThis.console.debug,!0,...t)}info(...t){this.stdout(globalThis.console.info,!1,...t)}infos(...t){this.stdout(globalThis.console.info,!0,...t)}log(...t){this.stdout(globalThis.console.log,!1,...t)}logs(...t){this.stdout(globalThis.console.log,!0,...t)}warn(...t){this.stdout(globalThis.console.warn,!1,...t)}warns(...t){this.stdout(globalThis.console.warn,!0,...t)}error(...t){this.stdout(globalThis.console.error,!1,...t)}errors(...t){this.stdout(globalThis.console.error,!0,...t)}}function v(){}function R(e){return e()}function C(){return Object.create(null)}function w(e){e.forEach(R)}function O(e){return typeof e=="function"}function Qe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ge(e){return Object.keys(e).length===0}function et(e,t,r){e.insertBefore(t,r||null)}function we(e){e.parentNode&&e.parentNode.removeChild(e)}function tt(e){return document.createElement(e)}function rt(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function _e(e){return Array.from(e.childNodes)}function ot(e,t,r){e.classList.toggle(t,!!r)}function Ee(e,t,{bubbles:r=!1,cancelable:a=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:a})}let m;function h(e){m=e}function x(){if(!m)throw new Error("Function called outside component initialization");return m}function at(e){x().$$.on_mount.push(e)}function nt(e){x().$$.on_destroy.push(e)}function it(){const e=x();return(t,r,{cancelable:a=!1}={})=>{const o=e.$$.callbacks[t];if(o){const n=Ee(t,r,{cancelable:a});return o.slice().forEach(s=>{s.call(e,n)}),!n.defaultPrevented}return!0}}const u=[],N=[];let f=[];const L=[],ve=Promise.resolve();let $=!1;function $e(){$||($=!0,ve.then(D))}function k(e){f.push(e)}const _=new Set;let d=0;function D(){if(d!==0)return;const e=m;do{try{for(;d<u.length;){const t=u[d];d++,h(t),ke(t.$$)}}catch(t){throw u.length=0,d=0,t}for(h(null),u.length=0,d=0;N.length;)N.pop()();for(let t=0;t<f.length;t+=1){const r=f[t];_.has(r)||(_.add(r),r())}f.length=0}while(u.length);for(;L.length;)L.pop()();$=!1,_.clear(),h(e)}function ke(e){if(e.fragment!==null){e.update(),w(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(k)}}function xe(e){const t=[],r=[];f.forEach(a=>e.indexOf(a)===-1?t.push(a):r.push(a)),r.forEach(a=>a()),f=t}const Te=new Set;function Fe(e,t){e&&e.i&&(Te.delete(e),e.i(t))}function Me(e,t,r){const{fragment:a,after_update:o}=e.$$;a&&a.m(t,r),k(()=>{const n=e.$$.on_mount.map(R).filter(O);e.$$.on_destroy?e.$$.on_destroy.push(...n):w(n),e.$$.on_mount=[]}),o.forEach(k)}function Se(e,t){const r=e.$$;r.fragment!==null&&(xe(r.after_update),w(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Ce(e,t){e.$$.dirty[0]===-1&&(u.push(e),$e(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function st(e,t,r,a,o,n,s=null,y=[-1]){const g=m;h(e);const i=e.$$={fragment:null,ctx:[],props:n,update:v,not_equal:o,bound:C(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(g?g.$$.context:[])),callbacks:C(),dirty:y,skip_bound:!1,root:t.target||g.$$.root};s&&s(i.root);let T=!1;if(i.ctx=r?r(e,t.props||{},(l,F,...M)=>{const S=M.length?M[0]:F;return i.ctx&&o(i.ctx[l],i.ctx[l]=S)&&(!i.skip_bound&&i.bound[l]&&i.bound[l](S),T&&Ce(e,l)),F}):[],i.update(),T=!0,w(i.before_update),i.fragment=a?a(i.ctx):!1,t.target){if(t.hydrate){const l=_e(t.target);i.fragment&&i.fragment.l(l),l.forEach(we)}else i.fragment&&i.fragment.c();t.intro&&Fe(e.$$.fragment),Me(e,t.target,t.anchor),D()}h(g)}class lt{constructor(){c(this,"$$");c(this,"$$set")}$destroy(){Se(this,1),this.$destroy=v}$on(t,r){if(!O(r))return v;const a=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return a.push(r),()=>{const o=a.indexOf(r);o!==-1&&a.splice(o,1)}}$set(t){this.$$set&&!ge(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ne="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ne);var ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Le(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ae=function(t){return Re(t)&&!Oe(t)};function Re(e){return!!e&&typeof e=="object"}function Oe(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||je(e)}var De=typeof Symbol=="function"&&Symbol.for,Pe=De?Symbol.for("react.element"):60103;function je(e){return e.$$typeof===Pe}function Ie(e){return Array.isArray(e)?[]:{}}function b(e,t){return t.clone!==!1&&t.isMergeableObject(e)?p(Ie(e),e,t):e}function ze(e,t,r){return e.concat(t).map(function(a){return b(a,r)})}function He(e,t){if(!t.customMerge)return p;var r=t.customMerge(e);return typeof r=="function"?r:p}function We(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function A(e){return Object.keys(e).concat(We(e))}function P(e,t){try{return t in e}catch{return!1}}function Ue(e,t){return P(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function Be(e,t,r){var a={};return r.isMergeableObject(e)&&A(e).forEach(function(o){a[o]=b(e[o],r)}),A(t).forEach(function(o){Ue(e,o)||(P(e,o)&&r.isMergeableObject(t[o])?a[o]=He(o,r)(e[o],t[o],r):a[o]=b(t[o],r))}),a}function p(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||ze,r.isMergeableObject=r.isMergeableObject||Ae,r.cloneUnlessOtherwiseSpecified=b;var a=Array.isArray(t),o=Array.isArray(e),n=a===o;return n?a?r.arrayMerge(e,t,r):Be(e,t,r):b(t,r)}p.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(a,o){return p(a,o,r)},{})};var Ve=p,qe=Ve;const Ge=Le(qe);function dt(...e){return Ge.all(e)}function j(e=globalThis.navigator.language,t=[]){switch(e=e.replaceAll("_","-").toLowerCase(),!0){case e in t:break;case e.startsWith("zh-chs"):case e.startsWith("zh-cns"):e="zh-Hans";break;case e.startsWith("zh-cht"):case e.startsWith("zh-cnt"):e="zh-Hant";break;case e.startsWith("zh-hans"):case e.startsWith("zh-cn"):case e.startsWith("zh-sg"):e="zh-Hans";break;case e.startsWith("zh-hant"):case e.startsWith("zh-tw"):case e.startsWith("zh-hk"):case e.startsWith("zh-mo"):e="zh-Hant";break;case e.startsWith("zh"):e="zh-Hans";break;case e.startsWith("en"):e="en";break;case e.startsWith("es"):e="es";break;case e.startsWith("fr"):e="fr";break}return e}function ut(e){switch(j(e)){case"zh-Hans":return"zh-cn";case"zh-Hant":return"zh-tw";case"de":return"de";case"es":return"es";case"fr":return"fr";case"it":return"it";case"ja":return"ja";case"ko":return"ko";case"ru":return"ru";case"en":default:return"en"}}function ft(e){switch(j(e)){case"zh-Hans":return"zh_CN";case"zh-Hant":return"zh_TW";case"fr":return"fr_FR";case"ja":return"ja_JP";case"ko":return"ko_KR";case"pt":return"pt_BR";case"ru":return"ru_RU";case"sv":return"sv_SE";case"en":default:return"en_US"}}function Ye(){var r,a,o,n,s,y;switch((o=(a=(r=globalThis==null?void 0:globalThis.document)==null?void 0:r.documentElement)==null?void 0:a.dataset)==null?void 0:o.themeMode){case"dark":return!0;case"light":return!1}switch((y=(s=(n=globalThis==null?void 0:globalThis.siyuan)==null?void 0:n.config)==null?void 0:s.appearance)==null?void 0:y.mode){case 1:return!0;case 0:return!1}return window.matchMedia("(prefers-color-scheme: dark)").matches}function pt(){return!Ye()}const E={INIT_CHANNEL_NAME:"monaco-editor-init",MESSAGE_EVENT_NAME:"message",ID_PREFIX_MATERIAL:"#icon-monaco-editor-material",ID_PREFIX_MATERIAL_LIGHT:"#icon-monaco-editor-material-light"};class ht{constructor(t=()=>{}){c(this,"port");c(this,"_listeners",new Map);c(this,"initEventListener",(t,r)=>{this.port=t.ports[0],this.port.start(),t instanceof MessageEvent?this.oninited(t.data):this.oninited(r)});switch(this.oninited=t,!0){case se:{const{ipcRenderer:r}=globalThis.require("electron");r.once(E.INIT_CHANNEL_NAME,this.initEventListener);break}case le:case ce:default:globalThis.addEventListener("message",this.initEventListener,{once:!0});break}}addEventListener(t,r,a){if(this._listeners.has(r))return!1;{const o=n=>{var s;((s=n==null?void 0:n.data)==null?void 0:s.channel)===t&&(a!=null&&a.once&&this.removeEventListener(t,r),r(n))};return this._listeners.set(r,o),this.port.addEventListener(E.MESSAGE_EVENT_NAME,o),!0}}removeEventListener(t,r){return this._listeners.has(r)?(this.port.removeEventListener(E.MESSAGE_EVENT_NAME,this._listeners.get(r)),this._listeners.delete(r),!0):!1}}export{ht as B,se as F,Je as L,lt as S,st as a,rt as b,ct as c,et as d,tt as e,we as f,Le as g,it as h,pt as i,le as j,dt as k,N as l,ut as m,v as n,at as o,Xe as p,Ze as q,ce as r,Qe as s,ot as t,nt as u,ft as v};
